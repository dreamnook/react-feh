(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"2bc822e570489344a484":function(e,t,a){"use strict";a.r(t);var n=a("8af190b70a6bc55c6f1b"),r=a.n(n),o=(a("8a2d1b95e05b6a321e74"),a("deb1edf8e03fc2092ec7")),i=a("ef55fb2ebc45364e784e"),s=a("c1d0df1466113eca96ac"),l=a("c9dd7b4f2540bc3f4075"),c=a("9cbbf93b4b14a35c4c9d"),f=a("820838b578959fb7cbd0"),u=a("a17698738bfaaefd79fe"),d=a("02529214ba6eaf3d0120"),p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g={atk:!0,spd:!0,def:!0,res:!0},v=function(e,t){return{weapon:i.a.getSkill(e.weapon,t),assist:s.a.getSkill(e.assist),special:l.a.getSkill(e.special),skillA:c.a.getSkill(e.skillA),skillB:f.a.getSkill(e.skillB),skillC:u.a.getSkill(e.skillC),seal:d.a.getSkill(e.seal)}},h=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",n=v(e,t),r={};if(Object.entries(n).forEach(function(e){var t=p(e,2),a=t[0],n=t[1].get("icon",null);r[a]=n&&"skills/"+n}),"-"!==a){var o=n.weapon.getIn(["refine",a,"icon"],null);r.weapon=g[a]?"skills/weapon/"+a+".png":o&&"skills/weapon/"+o+".png"}return r},b=function(e,t,a,n){var r=v(e,t),o={},i=0,s=r.special.get("cd",0);i+=r.weapon.get("cd",0),i+=r.assist.get("cd",0),i+=r.skillA.get("cd",0),i+=r.skillB.get("cd",0),i+=r.skillC.get("cd",0),i+=r.seal.get("cd",0);var l={hp:0,atk:0,spd:0,def:0,res:0},c=0,f=0;Object.entries(r).forEach(function(e){var t=p(e,2),a=t[0],r=t[1];o[a]=r.get("name","-"),l.hp+=r.get("hp",0),l.atk+=r.get("mt",0)+r.get("atk",0),l.spd+=r.get("spd",0),l.def+=r.get("def",0),l.res+=r.get("res",0),c+=r.get("sp",0),5===n&&(f=Math.max(r.get("bst",0),f))});var u=r.weapon.getIn(["refine",a]);return u&&(l.hp+=u.get("hp",0),l.atk+=u.get("mt",0)+u.get("atk",0),l.spd+=u.get("spd",0),l.def+=u.get("def",0),l.res+=u.get("res",0),i+=u.get("cd",0),r.weapon.has("exclusive")||(c+=50),5===n&&(f=Math.max(f,u.get("bst",0)))),{names:o,stats:l,accelerate:i,specialCD:s,spt:c,bst:f}},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k=function(e){if("-"===e)return{boon:"hp",bane:"hp"};var t=e.substring(1).split("-");return{boon:t[0],bane:t[1]}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments[1],a=k(t),n=a.boon,r=a.bane,o={hp:0,atk:0,spd:0,def:0,res:0};return o[n]+=1,o[r]-=1,Object.entries(e).reduce(function(e,t){var a=y(t,2),n=a[0],r=a[1];return m({},e,w({},n,r+o[n]))},{})},A=a("6080a705f759d5ca199c"),I=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},C=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var j=function(e,t,a,n,r,o,i,s,l){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments[1],a=arguments[2],n=Array.isArray(e.hp),r=k(t),o=r.boon,i=r.bane,s={hp:1,atk:1,spd:1,def:1,res:1};s[o]+=1,s[i]-=1;var l=Object.entries(e).reduce(function(e,t){var a,r=y(t,2),o=r[0],i=r[1],l=n?i[s[o]]:i;return m({},e,(w(a={},o,l),w(a,"bst",e.bst+l),a))},{bst:0});return a>0&&(n?(l[i]=e[i][1],l.bst+=o===i?3:e[i][1]-e[i][0]):(l[i]=e[i],l.bst+=3)),l}(t[""+e],a,n),f=c.bst,u=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(c,["bst"]),d=x(t[e+"-1"],a),p=x(t["5-1"],a),g=Object(A.a)(p,n,"-"===a),v=function(e,t){var a=Object.entries(e).map(function(e){var t=I(e,2);return{key:t[0],stat:t[1]}});a.sort(function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0});for(var n=a.map(function(e){return e.key}),r={hp:0,atk:0,spd:0,def:0,res:0},o=0;o<t;o+=1)r[n[o%5]]+=1;return r}(p,l),h=r?{hp:5,atk:2,spd:2,def:2,res:2}:{hp:0,atk:0,spd:0,def:0,res:0},b=s?{hp:10,atk:4,spd:4,def:4,res:4}:{hp:0,atk:0,spd:0,def:0,res:0};return{stats:Object.entries(i?d:u).reduce(function(e,t){var a=C(t,2),n=a[0],r=a[1]+o.stats[n]+g[n]+v[n]+h[n]+b[n];return O({},e,function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},n,r>-1?r:0))},{}),bst:f}},S={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}},T=function(e){var t=e.rarity,a=void 0===t?5:t,n=e.merge,r=e.bst,o=e.spt,i=e.blesser,s=void 0===i?0:i,l=S[a];return 2*(150+l.base+l.float+2*n+Math.floor(r/5)+Math.floor(o/100)+4*s)},B=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var E,P=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=t,this.imageData.onload=function(){a.loadedData=!0,a.callback(!0)},this.imageData.onerror=function(){a.loadedData=!1,a.callback(!1)}}return B(e,[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}]),e}(),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},H=(E="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,a,n){var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={}),t&&r)for(var i in r)void 0===t[i]&&(t[i]=r[i]);else t||(t=r||{});if(1===o)t.children=n;else if(o>1){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+3];t.children=s}return{$$typeof:E,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}),_=function(e){return r.a.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),H("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),H("path",{d:"M0 0h48v48h-48z",fill:"none"}))},D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},N=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,a,n,r){var o=t&&t.defaultProps,i=arguments.length-3;if(a||0===i||(a={}),a&&o)for(var s in o)void 0===a[s]&&(a[s]=o[s]);else a||(a=o||{});if(1===i)a.children=r;else if(i>1){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+3];a.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:a,_owner:null}}}(),R=function(e){return r.a.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),N("path",{d:"M0 0h24v24H0z",fill:"none"}),N("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},z=function(e){var t=e.context,a=e.background;e.support?t.drawImage(a,540,0,540,960,0,0,540,960):t.drawImage(a,0,0,540,960,0,0,540,960)},J=function(e){var t=e.context,a=e.portrait;t.drawImage(a,0,0,540,960,0,0,540,960)},U=function(e){var t=e.context,a=e.foreground;t.drawImage(a,0,0,540,960,0,0,540,960)},$=function(e){var t=e.context,a=e.foreground2;e.dragonflower?t.drawImage(a,0,50,540,50,0,542,540,50):t.drawImage(a,0,0,540,50,0,542,540,50)},V=function(e){var t=e.context,a=e.rarityAtlas;switch(e.rarity){case 5:t.drawImage(a,0,0,153,40,32,380,153,40);break;case 4:t.drawImage(a,0,41,153,40,32,380,153,40)}},F=16,W=554,Y=i.b,L=function(e){var t=e.context,a=e.weaponTypeAtlas,n=e.weaponType,r=Y.indexOf(n);r>-1&&t.drawImage(a,56*r,0,56,55,F,W,28,28)},q=174,G=555,K=["infantry","armored","cavalry","flying"],Q=function(e){var t=e.context,a=e.moveTypeAtlas,n=e.moveType,r=K.indexOf(n);r>-1&&t.drawImage(a,56*r,0,52,52,q,G,26,26)},X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var Z=1,ee=43,te=85,ae=127,ne=169,re=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce(function(e,t,a){return X({},e,(o=34*a+1,(r=t)in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o},{}),oe=function(e,t,a,n,r,o){re[n]&&e.drawImage(t,re[n],a,32,40,r,o,16,20)},ie=240,se=557,le=[14,28,42],ce=["infantry","armored","cavalry","flying"],fe=function(e){var t=e.context,a=e.dragonflowerAtlas,n=e.numberAtlas,r=e.moveType,o=e.dragonflower;if(o){var i=ce.indexOf(r);i>-1&&t.drawImage(a,0,58*i,64,58,216,546,48,44);var s=0,l=ee;oe(t,n,l,"+",ie+le[0],se),s+=1,o>9&&(oe(t,n,l,1,ie+le[s],se),s+=1),oe(t,n,l,o%10,ie+le[s],se)}},ue=432,de=425,pe=function(e){var t=e.context,a=e.supportAtlas,n=e.support,r=e.hasBlessing?108:0;n&&t.drawImage(a,ue-r,de,108,115)},ge=432,ve=425,he=function(e){var t=e.context,a=e.blessingAtlas;t.drawImage(a,ge,ve,108,115)},be=275,me=594,ye=function(e,t,a){var n=37*a+1+me;e.drawImage(t,be,n,35,35)},we=function(e){var t=e.context,a=e.weaponIcon,n=e.assistIcon,r=e.specialIcon,o=e.textA,i=e.textB,s=e.textC,l=e.textS,c=e.skillAIcon,f=e.skillBIcon,u=e.skillCIcon,d=e.sealIcon;a.loaded&&ye(t,a.image,0),n.loaded&&ye(t,n.image,1),r.loaded&&ye(t,r.image,2),c.loaded&&ye(t,c.image,3),t.drawImage(o.image,be+20,me+112+18,18,18),f.loaded&&ye(t,f.image,4),t.drawImage(i.image,be+20,me+149+18,18,18),u.loaded&&ye(t,u.image,5),t.drawImage(s.image,be+20,me+186+18,18,18),d.loaded&&ye(t,d.image,6),t.drawImage(l.image,be+20,me+223+18,18,18)},ke=82,xe=557,Ae=[14,28,42],Ie=function(e){var t=e.context,a=e.numberAtlas,n=e.lv1?1:40,r=0;n>9&&oe(t,a,ee,4,ke+Ae[r],xe),oe(t,a,ee,n%10,ke+Ae[r+=1],xe)},Oe=112,Ce=557,je=[14,28,42],Se=function(e){var t=e.context,a=e.numberAtlas,n=e.merge;if(!(n<=0)){var r=0,o=n>9?ne:ee;oe(t,a,o,"+",Oe+je[0],Ce),r+=1,n>9&&(oe(t,a,o,1,Oe+je[r],Ce),r+=1),oe(t,a,o,n%10,Oe+je[r],Ce)}},Te=130,Be=594,Ee=[14,28,42,56],Pe=[1e3,100,10],Me=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z,o=8+Be+37*n;Pe.forEach(function(n,i){if(a>=n){var s=Math.floor(a/n%10);oe(e,t,r,s,Te+Ee[i],o)}}),oe(e,t,r,a%10,Te+Ee[3],o)},He=function(e){var t=e.context,a=e.numberAtlas,n=e.stats,r=e.score,o=e.sbst,i=e.bst;Object.values(n).forEach(function(e,n){Me(t,a,e,n,Z)});var s=o>i?te:ne;Me(t,a,i,5,ne),Me(t,a,r,6,s)},_e=465,De=594,Ne=function(e){var t=e.context,a=e.numberAtlas,n=e.accelerate,r=e.specialCD;if(r){var o=ee;n<0&&(o=te),n>0&&(o=ae),function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ee;oe(e,t,n,a,_e,8+De+74)}(t,a,n+r,o)}},Re=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ze=206,Je=1224,Ue=["#ffa0af","white","#aaf0fa"],$e=Object.entries({hp:"HP",atk:"攻擊",spd:"速度",def:"防守",res:"魔防",bst:"BST",arena:"鬥技分"}),Ve=function(e){var t=e.canvas,a=e.iv,n=e.merge,r=t.getContext("2d");r.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",r.fillStyle="white",r.strokeStyle="#101010",r.textAlign="center",r.textBaseline="middle",r.lineJoin="round",r.lineWidth=8;var o=k(a),i=o.boon,s=o.bane,l={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};l[i]+=1,l[s]-=1,l[s]=n>0?1:l[s],$e.forEach(function(e,t){var a=Re(e,2),n=a[0],o=a[1],i=Je+74*t;r.fillStyle=Ue[l[n]],r.strokeText(o,ze,i),r.fillText(o,ze,i)})};var Fe=634,We=1224,Ye={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6},Le=function(e){var t=e.canvas,a=e.refine,n=e.weapon,r=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["canvas","refine","weapon"]),o=t.getContext("2d");o.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",o.textAlign="left",o.textBaseline="middle",o.lineJoin="round",o.lineWidth=8,o.strokeStyle="#101010",o.fillStyle="-"!==a?"lime":"white";var i=Fe+("-"===n?4:0),s=We;o.strokeText(n,i,s),o.fillText(n,i,s),o.fillStyle="white",Object.keys(r).forEach(function(e){var t=r[e],a=We+74*Ye[e],n="-"===t?4:0;o.strokeText(t,Fe+n,a),o.fillText(t,Fe+n,a)})},qe=296,Ge=876,Ke=336,Qe=992,Xe=function(e){var t=e.canvas,a=e.title,n=e.name,r=t.getContext("2d");r.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",r.fillStyle="white",r.strokeStyle="#220d00",r.textAlign="center",r.textBaseline="middle",r.lineJoin="round",r.lineWidth=8,r.strokeText(a,qe,Ge),r.fillText(a,qe,Ge),r.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",r.strokeText(n,Ke,Qe),r.fillText(n,Ke,Qe)},Ze=function(e){var t=e.context,a=e.arenaIcon;t.beginPath(),t.moveTo(28+24*Math.cos(0),28+24*Math.sin(0));for(var n=0;n<7;n+=1)t.lineTo(28+24*Math.cos(2*n*(Math.PI/6)),28+24*Math.sin(2*n*(Math.PI/6)));t.fillStyle="rgba(0, 0, 0, 0.63)",t.fill(),t.strokeStyle="rgba(255,255,255, 0.63)",t.lineWidth="2",t.stroke(),t.drawImage(a,12,12,32,32),t.closePath()},et=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,a,n,r){var o=t&&t.defaultProps,i=arguments.length-3;if(a||0===i||(a={}),a&&o)for(var s in o)void 0===a[s]&&(a[s]=o[s]);else a||(a=o||{});if(1===i)a.children=r;else if(i>1){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+3];a.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:a,_owner:null}}}(),tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},at=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var nt=o.c.canvas.withConfig({displayName:"UnitViewer__Canvas"})(["max-width:100vw;max-height:100vh;height:100vh;position:relative;"]),rt=o.c.div.withConfig({displayName:"UnitViewer__Container"})(["width:auto;max-width:100vw;position:relative;display:flex;justify-content:center;"]),ot=Object(o.b)(["background-color:white;color:black;position:absolute;border-radius:1.25em;padding:0.5em;font-size:16px;width:2.5em;height:2.5em;cursor:pointer;box-sizing:border-box;"]),it=Object(o.c)(_).withConfig({displayName:"UnitViewer__DownloadButton"})(["top:4px;right:4px;",";@media screen and (max-width:1024px){top:calc(12px + 2.5em);}"],ot),st=Object(o.c)(R).withConfig({displayName:"UnitViewer__MenuButton"})(["top:4px;right:4px;",";@media screen and (min-width:1025px){display:none;pointer-events:none;}"],ot),lt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.updateCanvas=function(){var e=a.props,t=e.hero,n=e.rarity,r=e.iv,o=e.merge,i=e.support,s=e.weapon,l=e.refine,c=e.assist,f=e.special,u=e.skillA,d=e.skillB,p=e.skillC,g=e.seal,v=e.lv1,h=e.arena,m=e.dragonflower,y={weapon:s,assist:c,special:f,skillA:u,skillB:d,skillC:p,seal:g},w=t.get("bst",0),k=t.get("stats").toJS(),x=b(y,t,l,n),A=j(n,k,r,o,i,x,v,h,m);a.skillInfos=x,a.statsInfos=A,a.score=T({rarity:n,merge:o,bst:Math.max(A.bst,x.bst,w),spt:x.spt}),a.draw(),a.setAssets()},a.setAssets=function(){var e=a.props,t=e.hero,n=e.blessing,r=e.weapon,o=e.refine,i=e.assist,s=e.special,l=e.skillA,c=e.skillB,f=e.skillC,u=e.seal,d=t.get("id"),p={weapon:r,assist:i,special:s,skillA:l,skillB:c,skillC:f,seal:u};a.loaders.portrait.load("portraits/"+d+".png");var g=h(p,t,o);[{skillName:"weapon",empty:"skills/weapon.png"},{skillName:"skillA",empty:"skills/empty.png"},{skillName:"skillB",empty:"skills/empty.png"},{skillName:"skillC",empty:"skills/empty.png"},{skillName:"seal",empty:"skills/seal-empty.png"}].forEach(function(e){var t=e.skillName,n=e.empty;a.loaders[t+"Icon"].load(g[t]||n)});var v=n&&"-"!==n;a.loaders.blessingAtlas.load(v?"assets/blessing-"+n+".png":"")},a.setRef=function(e){a.canvasRef=e},a.draw=function(){var e=a.props,t=e.hero,n=e.rarity,r=e.iv,o=e.merge,i=e.blessing,s=e.support,l=e.refine,c=e.lv1,f=e.arena,u=e.dragonflower,d=a.loaders,p=d.background,g=d.foreground,v=d.foreground2,h=d.portrait,b=d.rarityAtlas,m=d.weaponTypeAtlas,y=d.moveTypeAtlas,w=d.dragonflowerAtlas,k=d.supportAtlas,x=d.blessingAtlas,A=d.numberAtlas,I=d.weaponIcon,O=d.assistIcon,C=d.specialIcon,j=d.textA,S=d.textB,T=d.textC,B=d.textS,E=d.arenaIcon,P=d.skillAIcon,M=d.skillBIcon,H=d.skillCIcon,_=d.sealIcon,D=t.get("title"),N=t.get("name"),R=t.get("weaponType"),F=t.get("moveType"),W=i&&"-"!==i;if(a.canvasRef){var Y=a.canvasRef.getContext("2d");Y.clearRect(0,0,540,960),p.loaded&&z({context:Y,background:p.image,support:s}),h.loaded&&J({context:Y,portrait:h.image}),g.loaded&&U({context:Y,foreground:g.image}),v.loaded&&$({context:Y,foreground2:v.image,dragonflower:u}),b.loaded&&V({context:Y,rarityAtlas:b.image,rarity:n}),m.loaded&&L({context:Y,weaponTypeAtlas:m.image,weaponType:R}),y.loaded&&Q({context:Y,moveTypeAtlas:y.image,moveType:F}),w.loaded&&A.loaded&&fe({context:Y,dragonflowerAtlas:w.image,numberAtlas:A.image,moveType:F,dragonflower:u}),k.loaded&&pe({context:Y,supportAtlas:k.image,support:s,hasBlessing:W}),x.loaded&&he({context:Y,blessingAtlas:x.image,blessing:i}),A.loaded&&(Ie({context:Y,numberAtlas:A.image,lv1:c}),Se({context:Y,numberAtlas:A.image,merge:o}),He(tt({context:Y,numberAtlas:A.image,score:a.score,sbst:Math.max(a.skillInfos.bst,t.get("bst",0))},a.statsInfos)),Ne({context:Y,numberAtlas:A.image,accelerate:a.skillInfos.accelerate,specialCD:a.skillInfos.specialCD})),we({context:Y,weaponIcon:I,assistIcon:O,specialIcon:C,textA:j,textB:S,textC:T,textS:B,skillAIcon:P,skillBIcon:M,skillCIcon:H,sealIcon:_}),a.textCanvas.getContext("2d").clearRect(0,0,1080,1920),Ve({canvas:a.textCanvas,iv:r,merge:o}),Le(tt({canvas:a.textCanvas,refine:l},a.skillInfos.names)),Xe({canvas:a.textCanvas,title:D,name:N}),f&&E&&Ze({context:Y,arenaIcon:E.image}),Y.drawImage(a.textCanvas,0,0,540,960)}},a.download=function(e){e.stopPropagation();var t=a.props.hero,n=a.canvasRef.toDataURL("image/png"),r=document.createElement("a");r.href=n,r.download=t.get("name")+"-"+t.get("title")+".png",document.body.appendChild(r),r.click(),document.body.removeChild(r)},a.canvasRef=null,a.textCanvas=document.createElement("canvas"),a.textCanvas.width=1080,a.textCanvas.height=1920;a.loaders={};var n=function(){return a.draw()};return["background","foreground","foreground2","portrait","rarityAtlas","weaponTypeAtlas","moveTypeAtlas","dragonflowerAtlas","supportAtlas","blessingAtlas","numberAtlas","weaponIcon","assistIcon","specialIcon","textA","textB","textC","textS","arenaIcon","skillAIcon","skillBIcon","skillCIcon","sealIcon"].forEach(function(e){a.loaders[e]=new P(n)}),a.loaders.background.load("assets/background.jpg"),a.loaders.foreground.load("assets/foreground.png"),a.loaders.foreground2.load("assets/foreground2.png"),a.loaders.rarityAtlas.load("assets/rarity.png"),a.loaders.weaponTypeAtlas.load("assets/weapon-type.png"),a.loaders.moveTypeAtlas.load("assets/move-type.png"),a.loaders.dragonflowerAtlas.load("assets/dragonflower.png"),a.loaders.supportAtlas.load("assets/support.png"),a.loaders.numberAtlas.load("assets/number.png"),a.loaders.weaponIcon.load("skills/weapon.png"),a.loaders.assistIcon.load("skills/assist.png"),a.loaders.specialIcon.load("skills/special.png"),a.loaders.textA.load("assets/skill-a.png"),a.loaders.textB.load("assets/skill-b.png"),a.loaders.textC.load("assets/skill-c.png"),a.loaders.textS.load("assets/skill-s.png"),a.loaders.arenaIcon.load("assets/Dueling_Crest.png"),a.updateCanvas(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["PureComponent"]),at(t,[{key:"componentDidUpdate",value:function(){this.updateCanvas()}},{key:"render",value:function(){return et(rt,{},void 0,et(nt,{width:"540",height:"960",innerRef:this.setRef}),et(it,{onClick:this.download}),et(st,{onClick:this.props.openEditor}))}}]),t}();a.d(t,"default",function(){return lt})},"6080a705f759d5ca199c":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object.entries(e).map(function(e){var t=n(e,2);return{key:t[0],stat:t[1]}});r.sort(function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0});var o=r.map(function(e){return e.key}),i={hp:0,atk:0,spd:0,def:0,res:0};a&&t>0&&(i[o[0]]=1,i[o[1]]=1,i[o[2]]=1);for(var s=0;s<2*t;s+=1){i[o[s%5]]+=1}return i}}}]);