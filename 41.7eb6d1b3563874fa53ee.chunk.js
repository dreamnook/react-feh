(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"2bc822e570489344a484":function(e,t,r){"use strict";r.r(t);var n=r("8af190b70a6bc55c6f1b"),a=r.n(n),o=(r("8a2d1b95e05b6a321e74"),r("0b3cb19af78752326f59")),i=r("ef55fb2ebc45364e784e"),l=r("c1d0df1466113eca96ac"),s=r("c9dd7b4f2540bc3f4075"),c=r("9cbbf93b4b14a35c4c9d"),f=r("820838b578959fb7cbd0"),u=r("a17698738bfaaefd79fe"),p=r("02529214ba6eaf3d0120");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g={atk:!0,spd:!0,def:!0,res:!0},b=function(e,t){return{weapon:i.a.getSkill(e.weapon,t),assist:l.a.getSkill(e.assist),special:s.a.getSkill(e.special),skillA:c.a.getSkill(e.skillA),skillB:f.a.getSkill(e.skillB),skillC:u.a.getSkill(e.skillC),seal:p.a.getSkill(e.seal)}},v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",n=b(e,t),a={};if(Object.entries(n).forEach((function(e){var t=d(e,2),r=t[0],n=t[1].get("icon",null);a[r]=n&&"skills/".concat(n)})),"-"!==r){var o=n.weapon.getIn(["refine",r,"icon"],null);a.weapon=g[r]?"skills/weapon/".concat(r,".png"):o&&"skills/weapon/".concat(o,".png")}return a},y=function(e,t,r,n){var a=b(e,t),o={},i=0,l=a.special.get("cd",0);i+=a.weapon.get("cd",0),i+=a.assist.get("cd",0),i+=a.skillA.get("cd",0),i+=a.skillB.get("cd",0),i+=a.skillC.get("cd",0),i+=a.seal.get("cd",0);var s={hp:0,atk:0,spd:0,def:0,res:0},c=0,f=0;Object.entries(a).forEach((function(e){var t=d(e,2),r=t[0],a=t[1];o[r]=a.get("name","-"),s.hp+=a.get("hp",0),s.atk+=a.get("mt",0)+a.get("atk",0),s.spd+=a.get("spd",0),s.def+=a.get("def",0),s.res+=a.get("res",0),c+=a.get("sp",0),5===n&&(f=Math.max(a.get("bst",0),f))}));var u=a.weapon.getIn(["refine",r]);return u&&(s.hp+=u.get("hp",0),s.atk+=u.get("mt",0)+u.get("atk",0),s.spd+=u.get("spd",0),s.def+=u.get("def",0),s.res+=u.get("res",0),i+=u.get("cd",0),a.weapon.has("exclusive")||(c+=50),5===n&&(f=Math.max(f,u.get("bst",0)))),{names:o,stats:s,accelerate:i,specialCD:l,spt:c,bst:f}};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O=function(e){if("-"===e)return{boon:"hp",bane:"hp"};var t=e.substring(1).split("-");return{boon:t[0],bane:t[1]}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments.length>1?arguments[1]:void 0,r=O(t),n=r.boon,a=r.bane,o={hp:0,atk:0,spd:0,def:0,res:0};return o[n]+=1,o[a]-=1,Object.entries(e).reduce((function(e,t){var r=k(t,2),n=r[0];return h({},e,w({},n,r[1]+o[n]))}),{})},j=r("6080a705f759d5ca199c");function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=function(e,t,r,n,a,o,i,l,s,c){var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=Array.isArray(e.hp),a=O(t),o=a.boon,i=a.bane,l={hp:1,atk:1,spd:1,def:1,res:1};l[o]+=1,l[i]-=1;var s=Object.entries(e).reduce((function(e,t){var r,a=k(t,2),o=a[0],i=a[1],s=n?i[l[o]]:i;return h({},e,(w(r={},o,s),w(r,"bst",e.bst+s),r))}),{bst:0});return r>0&&(n?(s[i]=e[i][1],s.bst+=o===i?3:e[i][1]-e[i][0]):(s[i]=e[i],s.bst+=3)),s}(t["".concat(e)],r,n),u=f.bst,p=C(f,["bst"]),d=x(t["".concat(e,"-1")],r),g=x(t["5-1"],r),b=Object(j.a)(g,n,"-"===r),v=function(e,t){var r=Object.entries(e).map((function(e){var t=A(e,2);return{key:t[0],stat:t[1]}}));r.sort((function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0}));for(var n=r.map((function(e){return e.key})),a={hp:0,atk:0,spd:0,def:0,res:0},o=0;o<t;o+=1){a[n[o%5]]+=1}return a}(g,s),y=a?{hp:5,atk:2,spd:2,def:2,res:2}:{hp:0,atk:0,spd:0,def:0,res:0},m=l?{hp:10,atk:4,spd:4,def:4,res:4}:{hp:0,atk:0,spd:0,def:0,res:0},T=c?2:0;return{stats:Object.entries(i?d:p).reduce((function(e,t){var r=P(t,2),n=r[0],a=r[1]+o.stats[n]+b[n]+v[n]+y[n]+m[n]+T;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,S({},n,a>-1?a:0))}),{}),bst:u}},E={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}},D=function(e){var t=e.rarity,r=void 0===t?5:t,n=e.merge,a=e.bst,o=e.spt,i=e.blesser,l=void 0===i?0:i,s=E[r];return 2*(150+s.base+s.float+2*n+Math.floor(a/5)+Math.floor(o/100)+4*l)};function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var M,H=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=t,this.imageData.onload=function(){r.loadedData=!0,r.callback(!0)},this.imageData.onerror=function(){r.loadedData=!1,r.callback(!1)}}var t,r,n;return t=e,(r=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&B(t.prototype,r),n&&B(t,n),e}(),_=r("6ceadaea642dceea7a37");function N(e,t,r,n){M||(M="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:M,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var z,J=N("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),U=N("path",{d:"M0 0h48v48h-48z",fill:"none"}),$=function(e){return a.a.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),J,U)};function V(e,t,r,n){z||(z="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:z,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var W=V("path",{d:"M0 0h24v24H0z",fill:"none"}),Y=V("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),L=function(e){return a.a.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),W,Y)},q=function(e){var t=e.context,r=e.background;e.support?t.drawImage(r,540,0,540,960,0,0,540,960):t.drawImage(r,0,0,540,960,0,0,540,960)},G=function(e){var t=e.context,r=e.portrait;t.drawImage(r,0,0,540,960,0,0,540,960)},K=function(e){var t=e.context,r=e.foreground;t.drawImage(r,0,0,540,960,0,0,540,960)},Q=function(e){var t=e.context,r=e.foreground2;e.dragonflower?t.drawImage(r,0,50,540,50,0,542,540,50):t.drawImage(r,0,0,540,50,0,542,540,50)},X=function(e){var t=e.context,r=e.rarityAtlas;switch(e.rarity){case 5:t.drawImage(r,0,0,153,40,42,380,153,40);break;case 4:t.drawImage(r,0,41,153,40,42,380,153,40)}},Z=16,ee=554,te=i.b,re=function(e){var t=e.context,r=e.weaponTypeAtlas,n=e.weaponType,a=te.indexOf(n);a>-1&&t.drawImage(r,56*a,0,56,55,Z,ee,28,28)},ne=174,ae=555,oe=["infantry","armored","cavalry","flying"],ie=function(e){var t=e.context,r=e.moveTypeAtlas,n=e.moveType,a=oe.indexOf(n);a>-1&&t.drawImage(r,56*a,0,52,52,ne,ae,26,26)};function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce=1,fe=43,ue=85,pe=127,de=169,ge=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,t,r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,se({},t,34*r+1))}),{}),be=function(e,t,r,n,a,o){ge[n]&&e.drawImage(t,ge[n],r,32,40,a,o,16,20)},ve=240,ye=557,me=[14,28,42],he=["infantry","armored","cavalry","flying"],we=function(e){var t=e.context,r=e.dragonflowerAtlas,n=e.numberAtlas,a=e.moveType,o=e.dragonflower;if(o){var i=he.indexOf(a);i>-1&&t.drawImage(r,0,58*i,64,58,216,546,48,44);var l=0,s=fe;be(t,n,s,"+",ve+me[0],ye),l+=1,o>9&&(be(t,n,s,1,ve+me[l],ye),l+=1),be(t,n,s,o%10,ve+me[l],ye)}},ke=432,Oe=425,xe=function(e){var t=e.context,r=e.supportAtlas,n=e.support,a=e.hasBlessing?108:0;n&&t.drawImage(r,ke-a,Oe,108,115)},je=432,Ae=425,Ie=function(e){var t=e.context,r=e.blessingAtlas;t.drawImage(r,je,Ae,108,115)},Se=275,Pe=594,Ce=function(e,t,r){var n=37*r+1+Pe;e.drawImage(t,Se,n,35,35)},Te=function(e){var t=e.context,r=e.weaponIcon,n=e.assistIcon,a=e.specialIcon,o=e.textA,i=e.textB,l=e.textC,s=e.textS,c=e.skillAIcon,f=e.skillBIcon,u=e.skillCIcon,p=e.sealIcon;r.loaded&&Ce(t,r.image,0),n.loaded&&Ce(t,n.image,1),a.loaded&&Ce(t,a.image,2),c.loaded&&Ce(t,c.image,3),t.drawImage(o.image,Se+20,Pe+112+18,18,18),f.loaded&&Ce(t,f.image,4),t.drawImage(i.image,Se+20,Pe+149+18,18,18),u.loaded&&Ce(t,u.image,5),t.drawImage(l.image,Se+20,Pe+186+18,18,18),p.loaded&&Ce(t,p.image,6),t.drawImage(s.image,Se+20,Pe+223+18,18,18)},Ee=82,De=557,Be=[14,28,42],Me=function(e){var t=e.context,r=e.numberAtlas,n=e.lv1?1:40,a=0;n>9&&be(t,r,fe,4,Ee+Be[a],De),be(t,r,fe,n%10,Ee+Be[a+=1],De)},He=112,_e=557,Ne=[14,28,42],Re=function(e){var t=e.context,r=e.numberAtlas,n=e.merge;if(!(n<=0)){var a=0,o=n>9?de:fe;be(t,r,o,"+",He+Ne[0],_e),a+=1,n>9&&(be(t,r,o,1,He+Ne[a],_e),a+=1),be(t,r,o,n%10,He+Ne[a],_e)}},ze=130,Je=594,Ue=[14,28,42,56],$e=[1e3,100,10],Ve=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ce,o=8+Je+37*n;$e.forEach((function(n,i){if(r>=n){var l=Math.floor(r/n%10);be(e,t,a,l,ze+Ue[i],o)}}));var i=r%10;be(e,t,a,i,ze+Ue[3],o)},Fe=function(e){var t=e.context,r=e.numberAtlas,n=e.stats,a=e.score,o=e.sbst,i=e.bst;Object.values(n).forEach((function(e,n){Ve(t,r,e,n,ce)}));var l=o>i?ue:de;Ve(t,r,i,5,de),Ve(t,r,a,6,l)},We=465,Ye=594,Le=function(e){var t=e.context,r=e.numberAtlas,n=e.accelerate,a=e.specialCD;if(a){var o=fe;n<0&&(o=ue),n>0&&(o=pe),function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe;be(e,t,n,r,We,8+Ye+74)}(t,r,n+a,o)}};function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ge=206,Ke=1224,Qe=["#ffa0af","white","#aaf0fa"],Xe=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"}),Ze=function(e){var t=e.canvas,r=e.iv,n=e.merge,a=t.getContext("2d");a.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",a.fillStyle="white",a.strokeStyle="#101010",a.textAlign="center",a.textBaseline="middle",a.lineJoin="round",a.lineWidth=8;var o=O(r),i=o.boon,l=o.bane,s={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};s[i]+=1,s[l]-=1,s[l]=n>0?1:s[l],Xe.forEach((function(e,t){var r=qe(e,2),n=r[0],o=r[1],i=Ke+74*t;a.fillStyle=Qe[s[n]],a.strokeText(o,Ge,i),a.fillText(o,Ge,i)}))};function et(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var tt,rt=634,nt=1224,at={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6},ot=function(e){var t=e.canvas,r=e.refine,n=e.weapon,a=et(e,["canvas","refine","weapon"]),o=t.getContext("2d");o.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",o.textAlign="left",o.textBaseline="middle",o.lineJoin="round",o.lineWidth=8,o.strokeStyle="#101010",o.fillStyle="-"!==r?"lime":"white";var i=rt+("-"===n?4:0),l=nt;o.strokeText(n,i,l),o.fillText(n,i,l),o.fillStyle="white",Object.keys(a).forEach((function(e){var t=a[e],r=nt+74*at[e],n="-"===t?4:0;o.strokeText(t,rt+n,r),o.fillText(t,rt+n,r)}))},it=296,lt=876,st=336,ct=992,ft=function(e){var t=e.canvas,r=e.title,n=e.name,a=t.getContext("2d");a.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",a.fillStyle="white",a.strokeStyle="#220d00",a.textAlign="center",a.textBaseline="middle",a.lineJoin="round",a.lineWidth=8,a.strokeText(r,it,lt),a.fillText(r,it,lt),a.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",a.strokeText(n,st,ct),a.fillText(n,st,ct)},ut=function(e){var t=e.context,r=e.arenaIcon;t.beginPath(),t.moveTo(28+24*Math.cos(0),28+24*Math.sin(0));for(var n=0;n<7;n+=1)t.lineTo(28+24*Math.cos(2*n*(Math.PI/6)),28+24*Math.sin(2*n*(Math.PI/6)));t.fillStyle="rgba(0, 0, 0, 0.63)",t.fill(),t.strokeStyle="rgba(255,255,255, 0.63)",t.lineWidth="2",t.stroke(),t.drawImage(r,12,12,32,32),t.closePath()},pt=195,dt=370,gt=function(e){var t=e.context,r=e.resplendentIcon;t.drawImage(r,pt,dt,64,63)};function bt(e){return(bt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t,r,n){tt||(tt="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:tt,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jt=o.d.canvas.withConfig({displayName:"UnitViewer__Canvas",componentId:"sc-15sy0br-0"})(["max-width:100vw;max-height:100vh;position:relative;"]),At=o.d.div.withConfig({displayName:"UnitViewer__Container",componentId:"sc-15sy0br-1"})(["width:auto;max-width:100vw;position:relative;display:flex;justify-content:center;"]),It=Object(o.c)(["background-color:white;color:black;position:absolute;border-radius:1.25em;padding:0.5em;font-size:16px;width:2.5em;height:2.5em;cursor:pointer;box-sizing:border-box;"]),St=Object(o.d)($).withConfig({displayName:"UnitViewer__DownloadButton",componentId:"sc-15sy0br-2"})(["top:4px;right:4px;",";@media screen and (max-width:1024px){top:calc(12px + 2.5em);}"],It),Pt=Object(o.d)(L).withConfig({displayName:"UnitViewer__MenuButton",componentId:"sc-15sy0br-3"})(["top:4px;right:4px;",";@media screen and (min-width:1025px){display:none;pointer-events:none;}"],It),Ct=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=wt(t).call(this,e),r=!o||"object"!==bt(o)&&"function"!==typeof o?kt(n):o,xt(kt(r),"updateCanvas",(function(){var e=r.props,t=e.hero,n=e.rarity,a=e.iv,o=e.merge,i=e.support,l=e.weapon,s=e.refine,c=e.assist,f=e.special,u=e.skillA,p=e.skillB,d=e.skillC,g=e.seal,b=e.lv1,v=e.arena,m=e.dragonflower,h=e.resplendent,w={weapon:l,assist:c,special:f,skillA:u,skillB:p,skillC:d,seal:g},k=t.get("bst",0),O=t.get("stats").toJS(),x=y(w,t,s,n),j=T(n,O,a,o,i,x,b,v,m,h);r.skillInfos=x,r.statsInfos=j,r.score=D({rarity:n,merge:o,bst:Math.max(j.bst,x.bst,k),spt:x.spt}),r.draw(),r.setAssets()})),xt(kt(r),"setAssets",(function(){var e=r.props,t=e.hero,n=e.blessing,a=e.weapon,o=e.refine,i=e.assist,l=e.special,s=e.skillA,c=e.skillB,f=e.skillC,u=e.seal,p=e.resplendent,d=Object(_.a)(t.get("id"),p),g={weapon:a,assist:i,special:l,skillA:s,skillB:c,skillC:f,seal:u};r.loaders.portrait.load("portraits/".concat(d,".png"));var b=v(g,t,o);[{skillName:"weapon",empty:"skills/weapon.png"},{skillName:"skillA",empty:"skills/empty.png"},{skillName:"skillB",empty:"skills/empty.png"},{skillName:"skillC",empty:"skills/empty.png"},{skillName:"seal",empty:"skills/seal-empty.png"}].forEach((function(e){var t=e.skillName,n=e.empty;r.loaders["".concat(t,"Icon")].load(b[t]||n)}));var y=n&&"-"!==n;r.loaders.blessingAtlas.load(y?"assets/blessing-".concat(n,".png"):"")})),xt(kt(r),"draw",(function(){var e=r.props,t=e.hero,n=e.rarity,a=e.iv,o=e.merge,i=e.blessing,l=e.support,s=e.refine,c=e.lv1,f=e.arena,u=e.dragonflower,p=e.resplendent,d=r.loaders,g=d.background,b=d.foreground,v=d.foreground2,y=d.portrait,m=d.rarityAtlas,h=d.weaponTypeAtlas,w=d.moveTypeAtlas,k=d.dragonflowerAtlas,O=d.supportAtlas,x=d.blessingAtlas,j=d.numberAtlas,A=d.weaponIcon,I=d.assistIcon,S=d.specialIcon,P=d.textA,C=d.textB,T=d.textC,E=d.textS,D=d.arenaIcon,B=d.skillAIcon,M=d.skillBIcon,H=d.skillCIcon,_=d.sealIcon,N=d.resplendentIcon,R=t.get("title"),z=t.get("name"),J=t.get("weaponType"),U=t.get("moveType"),$=i&&"-"!==i;if(r.canvasRef&&r.canvasRef.current){var V=r.canvasRef.current.getContext("2d");V.clearRect(0,0,540,960),g.loaded&&q({context:V,background:g.image,support:l}),y.loaded&&G({context:V,portrait:y.image}),b.loaded&&K({context:V,foreground:b.image}),v.loaded&&Q({context:V,foreground2:v.image,dragonflower:u}),m.loaded&&X({context:V,rarityAtlas:m.image,rarity:n}),h.loaded&&re({context:V,weaponTypeAtlas:h.image,weaponType:J}),w.loaded&&ie({context:V,moveTypeAtlas:w.image,moveType:U}),k.loaded&&j.loaded&&we({context:V,dragonflowerAtlas:k.image,numberAtlas:j.image,moveType:U,dragonflower:u}),O.loaded&&xe({context:V,supportAtlas:O.image,support:l,hasBlessing:$}),x.loaded&&Ie({context:V,blessingAtlas:x.image,blessing:i}),j.loaded&&(Me({context:V,numberAtlas:j.image,lv1:c}),Re({context:V,numberAtlas:j.image,merge:o}),Fe(mt({context:V,numberAtlas:j.image,score:r.score,sbst:Math.max(r.skillInfos.bst,t.get("bst",0))},r.statsInfos)),Le({context:V,numberAtlas:j.image,accelerate:r.skillInfos.accelerate,specialCD:r.skillInfos.specialCD})),Te({context:V,weaponIcon:A,assistIcon:I,specialIcon:S,textA:P,textB:C,textC:T,textS:E,skillAIcon:B,skillBIcon:M,skillCIcon:H,sealIcon:_}),r.textCanvas.getContext("2d").clearRect(0,0,1080,1920),Ze({canvas:r.textCanvas,iv:a,merge:o}),ot(mt({canvas:r.textCanvas,refine:s},r.skillInfos.names)),ft({canvas:r.textCanvas,title:R,name:z}),f&&D&&ut({context:V,arenaIcon:D.image}),p&&N&&gt({context:V,resplendentIcon:N.image}),V.drawImage(r.textCanvas,0,0,540,960)}})),xt(kt(r),"download",(function(e){e.stopPropagation();var t=r.props.hero,n=r.canvasRef.current.toDataURL("image/png"),a=document.createElement("a");a.href=n,a.download="".concat(t.get("name"),"-").concat(t.get("title"),".png"),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)})),r.canvasRef=a.a.createRef(),r.textCanvas=document.createElement("canvas"),r.textCanvas.width=1080,r.textCanvas.height=1920;r.loaders={};var i=function(){return r.draw()};return["background","foreground","foreground2","portrait","rarityAtlas","weaponTypeAtlas","moveTypeAtlas","dragonflowerAtlas","supportAtlas","blessingAtlas","numberAtlas","weaponIcon","assistIcon","specialIcon","textA","textB","textC","textS","arenaIcon","skillAIcon","skillBIcon","skillCIcon","sealIcon","resplendentIcon"].forEach((function(e){r.loaders[e]=new H(i)})),r.loaders.background.load("assets/background.jpg"),r.loaders.foreground.load("assets/foreground.png"),r.loaders.foreground2.load("assets/foreground2.png"),r.loaders.rarityAtlas.load("assets/rarity.png"),r.loaders.weaponTypeAtlas.load("assets/weapon-type.png"),r.loaders.moveTypeAtlas.load("assets/move-type.png"),r.loaders.dragonflowerAtlas.load("assets/dragonflower.png"),r.loaders.supportAtlas.load("assets/support.png"),r.loaders.numberAtlas.load("assets/number.png"),r.loaders.weaponIcon.load("skills/weapon.png"),r.loaders.assistIcon.load("skills/assist.png"),r.loaders.specialIcon.load("skills/special.png"),r.loaders.textA.load("assets/skill-a.png"),r.loaders.textB.load("assets/skill-b.png"),r.loaders.textC.load("assets/skill-c.png"),r.loaders.textS.load("assets/skill-s.png"),r.loaders.arenaIcon.load("assets/Dueling_Crest.png"),r.loaders.resplendentIcon.load("assets/god-wear-l.png"),r.updateCanvas(),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(){this.updateCanvas()}},{key:"render",value:function(){return vt(At,{},void 0,a.a.createElement(jt,{width:"540",height:"960",ref:this.canvasRef}),vt(St,{onClick:this.download}),vt(Pt,{onClick:this.props.openEditor}))}}])&&ht(r.prototype,n),o&&ht(r,o),t}(n.PureComponent);r.d(t,"default",(function(){return Ct}))},"6080a705f759d5ca199c":function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(t,"a",(function(){return a}));var a=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object.entries(e).map((function(e){var t=n(e,2);return{key:t[0],stat:t[1]}}));a.sort((function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0}));var o=a.map((function(e){return e.key})),i={hp:0,atk:0,spd:0,def:0,res:0};r&&t>0&&(i[o[0]]=1,i[o[1]]=1,i[o[2]]=1);for(var l=0;l<2*t;l+=1){var s=l%5;i[o[s]]+=1}return i}}}]);