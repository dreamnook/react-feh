(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"2bc822e570489344a484":function(e,t,r){"use strict";r.r(t);var n=r("8af190b70a6bc55c6f1b"),a=r.n(n),o=(r("8a2d1b95e05b6a321e74"),r("0b3cb19af78752326f59")),i=r("ef55fb2ebc45364e784e"),l=r("c1d0df1466113eca96ac"),s=r("c9dd7b4f2540bc3f4075"),c=r("9cbbf93b4b14a35c4c9d"),f=r("820838b578959fb7cbd0"),u=r("a17698738bfaaefd79fe"),p=r("02529214ba6eaf3d0120");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g={atk:!0,spd:!0,def:!0,res:!0},b=function(e,t){return{weapon:i.a.getSkill(e.weapon,t),assist:l.a.getSkill(e.assist),special:s.a.getSkill(e.special),skillA:c.a.getSkill(e.skillA),skillB:f.a.getSkill(e.skillB),skillC:u.a.getSkill(e.skillC),seal:p.a.getSkill(e.seal)}},v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",n=b(e,t),a={};if(Object.entries(n).forEach((function(e){var t=d(e,2),r=t[0],n=t[1].get("icon",null);a[r]=n&&"skills/".concat(n)})),"-"!==r){var o=n.weapon.getIn(["refine",r,"icon"],null);a.weapon=g[r]?"skills/weapon/".concat(r,".png"):o&&"skills/weapon/".concat(o,".png")}return a},y=function(e,t,r,n){var a=b(e,t),o={},i=0,l=a.special.get("cd",0);i+=a.weapon.get("cd",0),i+=a.assist.get("cd",0),i+=a.skillA.get("cd",0),i+=a.skillB.get("cd",0),i+=a.skillC.get("cd",0),i+=a.seal.get("cd",0);var s={hp:0,atk:0,spd:0,def:0,res:0},c=0,f=0;Object.entries(a).forEach((function(e){var t=d(e,2),r=t[0],a=t[1];o[r]=a.get("name","-"),s.hp+=a.get("hp",0),s.atk+=a.get("mt",0)+a.get("atk",0),s.spd+=a.get("spd",0),s.def+=a.get("def",0),s.res+=a.get("res",0),c+=a.get("sp",0),5===n&&(f=Math.max(a.get("bst",0),f))}));var u=a.weapon.getIn(["refine",r]);return u&&(s.hp+=u.get("hp",0),s.atk+=u.get("mt",0)+u.get("atk",0),s.spd+=u.get("spd",0),s.def+=u.get("def",0),s.res+=u.get("res",0),i+=u.get("cd",0),a.weapon.has("exclusive")||(c+=50),5===n&&(f=Math.max(f,u.get("bst",0)))),{names:o,stats:s,accelerate:i,specialCD:l,spt:c,bst:f}};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O=function(e){if("-"===e)return{boon:"hp",bane:"hp"};var t=e.substring(1).split("-");return{boon:t[0],bane:t[1]}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments.length>1?arguments[1]:void 0,r=O(t),n=r.boon,a=r.bane,o={hp:0,atk:0,spd:0,def:0,res:0};return o[n]+=1,o[a]-=1,Object.entries(e).reduce((function(e,t){var r=k(t,2),n=r[0];return h({},e,w({},n,r[1]+o[n]))}),{})},j=r("6080a705f759d5ca199c");function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=function(e,t,r,n,a,o,i,l,s,c){var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=Array.isArray(e.hp),a=O(t),o=a.boon,i=a.bane,l={hp:1,atk:1,spd:1,def:1,res:1};l[o]+=1,l[i]-=1;var s=Object.entries(e).reduce((function(e,t){var r,a=k(t,2),o=a[0],i=a[1],s=n?i[l[o]]:i;return h({},e,(w(r={},o,s),w(r,"bst",e.bst+s),r))}),{bst:0});return r>0&&(n?(s[i]=e[i][1],s.bst+=o===i?3:e[i][1]-e[i][0]):(s[i]=e[i],s.bst+=3)),s}(t["".concat(e)],r,n),u=f.bst,p=C(f,["bst"]),d=x(t["".concat(e,"-1")],r),g=x(t["5-1"],r),b=Object(j.a)(g,n,"-"===r),v=function(e,t){var r=Object.entries(e).map((function(e){var t=A(e,2);return{key:t[0],stat:t[1]}}));r.sort((function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0}));for(var n=r.map((function(e){return e.key})),a={hp:0,atk:0,spd:0,def:0,res:0},o=0;o<t;o+=1){a[n[o%5]]+=1}return a}(g,s),y=a?{hp:5,atk:2,spd:2,def:2,res:2}:{hp:0,atk:0,spd:0,def:0,res:0},m=l?{hp:10,atk:4,spd:4,def:4,res:4}:{hp:0,atk:0,spd:0,def:0,res:0},T=c?2:0;return{stats:Object.entries(i?d:p).reduce((function(e,t){var r=P(t,2),n=r[0],a=r[1]+o.stats[n]+b[n]+v[n]+y[n]+m[n]+T;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,S({},n,a>-1?a:0))}),{}),bst:u}},E={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}},D=function(e){var t=e.rarity,r=void 0===t?5:t,n=e.merge,a=e.bst,o=e.spt,i=e.blesser,l=void 0===i?0:i,s=E[r];return 2*(150+s.base+s.float+2*n+Math.floor(a/5)+Math.floor(o/100)+4*l)};function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var M,H=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=t,this.imageData.onload=function(){r.loadedData=!0,r.callback(!0)},this.imageData.onerror=function(){r.loadedData=!1,r.callback(!1)}}var t,r,n;return t=e,(r=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&B(t.prototype,r),n&&B(t,n),e}();function _(e,t,r,n){M||(M="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:M,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var R,z=_("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),J=_("path",{d:"M0 0h48v48h-48z",fill:"none"}),U=function(e){return a.a.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),z,J)};function $(e,t,r,n){R||(R="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:R,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var F=$("path",{d:"M0 0h24v24H0z",fill:"none"}),W=$("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),Y=function(e){return a.a.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),F,W)},L=function(e){var t=e.context,r=e.background;e.support?t.drawImage(r,540,0,540,960,0,0,540,960):t.drawImage(r,0,0,540,960,0,0,540,960)},q=function(e){var t=e.context,r=e.portrait;t.drawImage(r,0,0,540,960,0,0,540,960)},G=function(e){var t=e.context,r=e.foreground;t.drawImage(r,0,0,540,960,0,0,540,960)},K=function(e){var t=e.context,r=e.foreground2;e.dragonflower?t.drawImage(r,0,50,540,50,0,542,540,50):t.drawImage(r,0,0,540,50,0,542,540,50)},Q=function(e){var t=e.context,r=e.rarityAtlas;switch(e.rarity){case 5:t.drawImage(r,0,0,153,40,32,380,153,40);break;case 4:t.drawImage(r,0,41,153,40,32,380,153,40)}},X=16,Z=554,ee=i.b,te=function(e){var t=e.context,r=e.weaponTypeAtlas,n=e.weaponType,a=ee.indexOf(n);a>-1&&t.drawImage(r,56*a,0,56,55,X,Z,28,28)},re=174,ne=555,ae=["infantry","armored","cavalry","flying"],oe=function(e){var t=e.context,r=e.moveTypeAtlas,n=e.moveType,a=ae.indexOf(n);a>-1&&t.drawImage(r,56*a,0,52,52,re,ne,26,26)};function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=1,ce=43,fe=85,ue=127,pe=169,de=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,t,r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,le({},t,34*r+1))}),{}),ge=function(e,t,r,n,a,o){de[n]&&e.drawImage(t,de[n],r,32,40,a,o,16,20)},be=240,ve=557,ye=[14,28,42],me=["infantry","armored","cavalry","flying"],he=function(e){var t=e.context,r=e.dragonflowerAtlas,n=e.numberAtlas,a=e.moveType,o=e.dragonflower;if(o){var i=me.indexOf(a);i>-1&&t.drawImage(r,0,58*i,64,58,216,546,48,44);var l=0,s=ce;ge(t,n,s,"+",be+ye[0],ve),l+=1,o>9&&(ge(t,n,s,1,be+ye[l],ve),l+=1),ge(t,n,s,o%10,be+ye[l],ve)}},we=432,ke=425,Oe=function(e){var t=e.context,r=e.supportAtlas,n=e.support,a=e.hasBlessing?108:0;n&&t.drawImage(r,we-a,ke,108,115)},xe=432,je=425,Ae=function(e){var t=e.context,r=e.blessingAtlas;t.drawImage(r,xe,je,108,115)},Ie=275,Se=594,Pe=function(e,t,r){var n=37*r+1+Se;e.drawImage(t,Ie,n,35,35)},Ce=function(e){var t=e.context,r=e.weaponIcon,n=e.assistIcon,a=e.specialIcon,o=e.textA,i=e.textB,l=e.textC,s=e.textS,c=e.skillAIcon,f=e.skillBIcon,u=e.skillCIcon,p=e.sealIcon;r.loaded&&Pe(t,r.image,0),n.loaded&&Pe(t,n.image,1),a.loaded&&Pe(t,a.image,2),c.loaded&&Pe(t,c.image,3),t.drawImage(o.image,Ie+20,Se+112+18,18,18),f.loaded&&Pe(t,f.image,4),t.drawImage(i.image,Ie+20,Se+149+18,18,18),u.loaded&&Pe(t,u.image,5),t.drawImage(l.image,Ie+20,Se+186+18,18,18),p.loaded&&Pe(t,p.image,6),t.drawImage(s.image,Ie+20,Se+223+18,18,18)},Te=82,Ee=557,De=[14,28,42],Be=function(e){var t=e.context,r=e.numberAtlas,n=e.lv1?1:40,a=0;n>9&&ge(t,r,ce,4,Te+De[a],Ee),ge(t,r,ce,n%10,Te+De[a+=1],Ee)},Me=112,He=557,_e=[14,28,42],Ne=function(e){var t=e.context,r=e.numberAtlas,n=e.merge;if(!(n<=0)){var a=0,o=n>9?pe:ce;ge(t,r,o,"+",Me+_e[0],He),a+=1,n>9&&(ge(t,r,o,1,Me+_e[a],He),a+=1),ge(t,r,o,n%10,Me+_e[a],He)}},Re=130,ze=594,Je=[14,28,42,56],Ue=[1e3,100,10],$e=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:se,o=8+ze+37*n;Ue.forEach((function(n,i){if(r>=n){var l=Math.floor(r/n%10);ge(e,t,a,l,Re+Je[i],o)}}));var i=r%10;ge(e,t,a,i,Re+Je[3],o)},Ve=function(e){var t=e.context,r=e.numberAtlas,n=e.stats,a=e.score,o=e.sbst,i=e.bst;Object.values(n).forEach((function(e,n){$e(t,r,e,n,se)}));var l=o>i?fe:pe;$e(t,r,i,5,pe),$e(t,r,a,6,l)},Fe=465,We=594,Ye=function(e){var t=e.context,r=e.numberAtlas,n=e.accelerate,a=e.specialCD;if(a){var o=ce;n<0&&(o=fe),n>0&&(o=ue),function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce;ge(e,t,n,r,Fe,8+We+74)}(t,r,n+a,o)}};function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var qe=206,Ge=1224,Ke=["#ffa0af","white","#aaf0fa"],Qe=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"}),Xe=function(e){var t=e.canvas,r=e.iv,n=e.merge,a=t.getContext("2d");a.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",a.fillStyle="white",a.strokeStyle="#101010",a.textAlign="center",a.textBaseline="middle",a.lineJoin="round",a.lineWidth=8;var o=O(r),i=o.boon,l=o.bane,s={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};s[i]+=1,s[l]-=1,s[l]=n>0?1:s[l],Qe.forEach((function(e,t){var r=Le(e,2),n=r[0],o=r[1],i=Ge+74*t;a.fillStyle=Ke[s[n]],a.strokeText(o,qe,i),a.fillText(o,qe,i)}))};function Ze(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var et,tt=634,rt=1224,nt={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6},at=function(e){var t=e.canvas,r=e.refine,n=e.weapon,a=Ze(e,["canvas","refine","weapon"]),o=t.getContext("2d");o.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",o.textAlign="left",o.textBaseline="middle",o.lineJoin="round",o.lineWidth=8,o.strokeStyle="#101010",o.fillStyle="-"!==r?"lime":"white";var i=tt+("-"===n?4:0),l=rt;o.strokeText(n,i,l),o.fillText(n,i,l),o.fillStyle="white",Object.keys(a).forEach((function(e){var t=a[e],r=rt+74*nt[e],n="-"===t?4:0;o.strokeText(t,tt+n,r),o.fillText(t,tt+n,r)}))},ot=296,it=876,lt=336,st=992,ct=function(e){var t=e.canvas,r=e.title,n=e.name,a=t.getContext("2d");a.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",a.fillStyle="white",a.strokeStyle="#220d00",a.textAlign="center",a.textBaseline="middle",a.lineJoin="round",a.lineWidth=8,a.strokeText(r,ot,it),a.fillText(r,ot,it),a.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",a.strokeText(n,lt,st),a.fillText(n,lt,st)},ft=function(e){var t=e.context,r=e.arenaIcon;t.beginPath(),t.moveTo(28+24*Math.cos(0),28+24*Math.sin(0));for(var n=0;n<7;n+=1)t.lineTo(28+24*Math.cos(2*n*(Math.PI/6)),28+24*Math.sin(2*n*(Math.PI/6)));t.fillStyle="rgba(0, 0, 0, 0.63)",t.fill(),t.strokeStyle="rgba(255,255,255, 0.63)",t.lineWidth="2",t.stroke(),t.drawImage(r,12,12,32,32),t.closePath()};function ut(e){return(ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t,r,n){et||(et="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:et,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wt=o.d.canvas.withConfig({displayName:"UnitViewer__Canvas",componentId:"sc-15sy0br-0"})(["max-width:100vw;max-height:100vh;position:relative;"]),kt=o.d.div.withConfig({displayName:"UnitViewer__Container",componentId:"sc-15sy0br-1"})(["width:auto;max-width:100vw;position:relative;display:flex;justify-content:center;"]),Ot=Object(o.c)(["background-color:white;color:black;position:absolute;border-radius:1.25em;padding:0.5em;font-size:16px;width:2.5em;height:2.5em;cursor:pointer;box-sizing:border-box;"]),xt=Object(o.d)(U).withConfig({displayName:"UnitViewer__DownloadButton",componentId:"sc-15sy0br-2"})(["top:4px;right:4px;",";@media screen and (max-width:1024px){top:calc(12px + 2.5em);}"],Ot),jt=Object(o.d)(Y).withConfig({displayName:"UnitViewer__MenuButton",componentId:"sc-15sy0br-3"})(["top:4px;right:4px;",";@media screen and (min-width:1025px){display:none;pointer-events:none;}"],Ot),At=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=vt(t).call(this,e),r=!o||"object"!==ut(o)&&"function"!==typeof o?yt(n):o,ht(yt(r),"updateCanvas",(function(){var e=r.props,t=e.hero,n=e.rarity,a=e.iv,o=e.merge,i=e.support,l=e.weapon,s=e.refine,c=e.assist,f=e.special,u=e.skillA,p=e.skillB,d=e.skillC,g=e.seal,b=e.lv1,v=e.arena,m=e.dragonflower,h=e.resplendent,w={weapon:l,assist:c,special:f,skillA:u,skillB:p,skillC:d,seal:g},k=t.get("bst",0),O=t.get("stats").toJS(),x=y(w,t,s,n),j=T(n,O,a,o,i,x,b,v,m,h);r.skillInfos=x,r.statsInfos=j,r.score=D({rarity:n,merge:o,bst:Math.max(j.bst,x.bst,k),spt:x.spt}),r.draw(),r.setAssets()})),ht(yt(r),"setAssets",(function(){var e=r.props,t=e.hero,n=e.blessing,a=e.weapon,o=e.refine,i=e.assist,l=e.special,s=e.skillA,c=e.skillB,f=e.skillC,u=e.seal,p=e.resplendent,d="".concat(t.get("id")).concat(p?"(R)":""),g={weapon:a,assist:i,special:l,skillA:s,skillB:c,skillC:f,seal:u};r.loaders.portrait.load("portraits/".concat(d,".png"));var b=v(g,t,o);[{skillName:"weapon",empty:"skills/weapon.png"},{skillName:"skillA",empty:"skills/empty.png"},{skillName:"skillB",empty:"skills/empty.png"},{skillName:"skillC",empty:"skills/empty.png"},{skillName:"seal",empty:"skills/seal-empty.png"}].forEach((function(e){var t=e.skillName,n=e.empty;r.loaders["".concat(t,"Icon")].load(b[t]||n)}));var y=n&&"-"!==n;r.loaders.blessingAtlas.load(y?"assets/blessing-".concat(n,".png"):"")})),ht(yt(r),"draw",(function(){var e=r.props,t=e.hero,n=e.rarity,a=e.iv,o=e.merge,i=e.blessing,l=e.support,s=e.refine,c=e.lv1,f=e.arena,u=e.dragonflower,p=r.loaders,d=p.background,g=p.foreground,b=p.foreground2,v=p.portrait,y=p.rarityAtlas,m=p.weaponTypeAtlas,h=p.moveTypeAtlas,w=p.dragonflowerAtlas,k=p.supportAtlas,O=p.blessingAtlas,x=p.numberAtlas,j=p.weaponIcon,A=p.assistIcon,I=p.specialIcon,S=p.textA,P=p.textB,C=p.textC,T=p.textS,E=p.arenaIcon,D=p.skillAIcon,B=p.skillBIcon,M=p.skillCIcon,H=p.sealIcon,_=t.get("title"),N=t.get("name"),R=t.get("weaponType"),z=t.get("moveType"),J=i&&"-"!==i;if(r.canvasRef&&r.canvasRef.current){var U=r.canvasRef.current.getContext("2d");U.clearRect(0,0,540,960),d.loaded&&L({context:U,background:d.image,support:l}),v.loaded&&q({context:U,portrait:v.image}),g.loaded&&G({context:U,foreground:g.image}),b.loaded&&K({context:U,foreground2:b.image,dragonflower:u}),y.loaded&&Q({context:U,rarityAtlas:y.image,rarity:n}),m.loaded&&te({context:U,weaponTypeAtlas:m.image,weaponType:R}),h.loaded&&oe({context:U,moveTypeAtlas:h.image,moveType:z}),w.loaded&&x.loaded&&he({context:U,dragonflowerAtlas:w.image,numberAtlas:x.image,moveType:z,dragonflower:u}),k.loaded&&Oe({context:U,supportAtlas:k.image,support:l,hasBlessing:J}),O.loaded&&Ae({context:U,blessingAtlas:O.image,blessing:i}),x.loaded&&(Be({context:U,numberAtlas:x.image,lv1:c}),Ne({context:U,numberAtlas:x.image,merge:o}),Ve(gt({context:U,numberAtlas:x.image,score:r.score,sbst:Math.max(r.skillInfos.bst,t.get("bst",0))},r.statsInfos)),Ye({context:U,numberAtlas:x.image,accelerate:r.skillInfos.accelerate,specialCD:r.skillInfos.specialCD})),Ce({context:U,weaponIcon:j,assistIcon:A,specialIcon:I,textA:S,textB:P,textC:C,textS:T,skillAIcon:D,skillBIcon:B,skillCIcon:M,sealIcon:H}),r.textCanvas.getContext("2d").clearRect(0,0,1080,1920),Xe({canvas:r.textCanvas,iv:a,merge:o}),at(gt({canvas:r.textCanvas,refine:s},r.skillInfos.names)),ct({canvas:r.textCanvas,title:_,name:N}),f&&E&&ft({context:U,arenaIcon:E.image}),U.drawImage(r.textCanvas,0,0,540,960)}})),ht(yt(r),"download",(function(e){e.stopPropagation();var t=r.props.hero,n=r.canvasRef.current.toDataURL("image/png"),a=document.createElement("a");a.href=n,a.download="".concat(t.get("name"),"-").concat(t.get("title"),".png"),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)})),r.canvasRef=a.a.createRef(),r.textCanvas=document.createElement("canvas"),r.textCanvas.width=1080,r.textCanvas.height=1920;r.loaders={};var i=function(){return r.draw()};return["background","foreground","foreground2","portrait","rarityAtlas","weaponTypeAtlas","moveTypeAtlas","dragonflowerAtlas","supportAtlas","blessingAtlas","numberAtlas","weaponIcon","assistIcon","specialIcon","textA","textB","textC","textS","arenaIcon","skillAIcon","skillBIcon","skillCIcon","sealIcon"].forEach((function(e){r.loaders[e]=new H(i)})),r.loaders.background.load("assets/background.jpg"),r.loaders.foreground.load("assets/foreground.png"),r.loaders.foreground2.load("assets/foreground2.png"),r.loaders.rarityAtlas.load("assets/rarity.png"),r.loaders.weaponTypeAtlas.load("assets/weapon-type.png"),r.loaders.moveTypeAtlas.load("assets/move-type.png"),r.loaders.dragonflowerAtlas.load("assets/dragonflower.png"),r.loaders.supportAtlas.load("assets/support.png"),r.loaders.numberAtlas.load("assets/number.png"),r.loaders.weaponIcon.load("skills/weapon.png"),r.loaders.assistIcon.load("skills/assist.png"),r.loaders.specialIcon.load("skills/special.png"),r.loaders.textA.load("assets/skill-a.png"),r.loaders.textB.load("assets/skill-b.png"),r.loaders.textC.load("assets/skill-c.png"),r.loaders.textS.load("assets/skill-s.png"),r.loaders.arenaIcon.load("assets/Dueling_Crest.png"),r.updateCanvas(),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(){this.updateCanvas()}},{key:"render",value:function(){return pt(kt,{},void 0,a.a.createElement(wt,{width:"540",height:"960",ref:this.canvasRef}),pt(xt,{onClick:this.download}),pt(jt,{onClick:this.props.openEditor}))}}])&&bt(r.prototype,n),o&&bt(r,o),t}(n.PureComponent);r.d(t,"default",(function(){return At}))},"6080a705f759d5ca199c":function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.d(t,"a",(function(){return a}));var a=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object.entries(e).map((function(e){var t=n(e,2);return{key:t[0],stat:t[1]}}));a.sort((function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0}));var o=a.map((function(e){return e.key})),i={hp:0,atk:0,spd:0,def:0,res:0};r&&t>0&&(i[o[0]]=1,i[o[1]]=1,i[o[2]]=1);for(var l=0;l<2*t;l+=1){var s=l%5;i[o[s]]+=1}return i}}}]);