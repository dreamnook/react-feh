(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"2bc822e570489344a484":function(e,t,n){"use strict";n.r(t);var r=n("8af190b70a6bc55c6f1b"),a=n.n(r),o=(n("8a2d1b95e05b6a321e74"),n("0b3cb19af78752326f59")),i=n("ef55fb2ebc45364e784e"),l=n("c1d0df1466113eca96ac"),s=n("c9dd7b4f2540bc3f4075"),c=n("9cbbf93b4b14a35c4c9d"),f=n("820838b578959fb7cbd0"),u=n("a17698738bfaaefd79fe"),p=n("02529214ba6eaf3d0120");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g={atk:!0,spd:!0,def:!0,res:!0},b=function(e,t){return{weapon:i.a.getSkill(e.weapon,t),assist:l.a.getSkill(e.assist),special:s.a.getSkill(e.special),skillA:c.a.getSkill(e.skillA),skillB:f.a.getSkill(e.skillB),skillC:u.a.getSkill(e.skillC),seal:p.a.getSkill(e.seal)}};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=function(e){if("-"===e)return{boon:"hp",bane:"hp"};var t=e.substring(1).split("-");return{boon:t[0],bane:t[1]}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments.length>1?arguments[1]:void 0,n=w(t),r=n.boon,a=n.bane,o={hp:0,atk:0,spd:0,def:0,res:0};return o[r]+=1,o[a]-=1,Object.entries(e).reduce((function(e,t){var n=h(t,2),r=n[0];return y({},e,m({},r,n[1]+o[r]))}),{})},x=n("6080a705f759d5ca199c");function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function S(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=function(e,t,n,r,a,o,i,l,s,c){var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hp:0,atk:0,spd:0,def:0,res:0},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=Array.isArray(e.hp),a=w(t),o=a.boon,i=a.bane,l={hp:1,atk:1,spd:1,def:1,res:1};l[o]+=1,l[i]-=1;var s=Object.entries(e).reduce((function(e,t){var n,a=h(t,2),o=a[0],i=a[1],s=r?i[l[o]]:i;return y({},e,(m(n={},o,s),m(n,"bst",e.bst+s),n))}),{bst:0});return n>0&&(r?(s[i]=e[i][1],s.bst+=o===i?3:e[i][1]-e[i][0]):(s[i]=e[i],s.bst+=3)),s}(t["".concat(e)],n,r),u=f.bst,p=S(f,["bst"]),d=k(t["".concat(e,"-1")],n),g=k(t["5-1"],n),b=Object(x.a)(g,r,"-"===n),v=function(e,t){var n=Object.entries(e).map((function(e){var t=O(e,2);return{key:t[0],stat:t[1]}}));n.sort((function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0}));for(var r=n.map((function(e){return e.key})),a={hp:0,atk:0,spd:0,def:0,res:0},o=0;o<t;o+=1)a[r[o%5]]+=1;return a}(g,s),P=a?{hp:5,atk:2,spd:2,def:2,res:2}:{hp:0,atk:0,spd:0,def:0,res:0},C=l?{hp:10,atk:4,spd:4,def:4,res:4}:{hp:0,atk:0,spd:0,def:0,res:0},E=c?2:0;return{stats:Object.entries(i?d:p).reduce((function(e,t){var n=I(t,2),r=n[0],a=n[1]+o.stats[r]+b[r]+v[r]+P[r]+C[r]+E;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,A({},r,a>-1?a:0))}),{}),bst:u}},C={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}},E=function(e){var t=e.rarity,n=void 0===t?5:t,r=e.merge,a=e.bst,o=e.spt,i=e.blesser,l=void 0===i?0:i,s=C[n];return 2*(150+s.base+s.float+2*r+Math.floor(a/5)+Math.floor(o/100)+4*l)};function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D,B=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=t,this.imageData.onload=function(){n.loadedData=!0,n.callback(!0)},this.imageData.onerror=function(){n.loadedData=!1,n.callback(!1)}}var t,n,r;return t=e,(n=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&T(t.prototype,n),r&&T(t,r),e}(),H=n("6ceadaea642dceea7a37");function _(e,t,n,r){D||(D="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:D,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N,R=_("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),z=_("path",{d:"M0 0h48v48h-48z",fill:"none"}),J=function(e){return a.a.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),R,z)};function U(e,t,n,r){N||(N="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:N,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var V=U("path",{d:"M0 0h24v24H0z",fill:"none"}),F=U("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),Y=function(e){return a.a.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),V,F)},W=16,L=554,q=i.c,G=174,K=555,Q=["infantry","armored","cavalry","flying"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=1,te=43,ne=85,re=127,ae=169,oe=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Z({},t,34*n+1))}),{}),ie=function(e,t,n,r,a,o){oe[r]&&e.drawImage(t,oe[r],n,32,40,a,o,16,20)},le=240,se=557,ce=[14,28,42],fe=["infantry","armored","cavalry","flying"],ue=432,pe=425,de=432,ge=425,be=275,ve=594,ye=function(e,t,n){var r=37*n+1+ve;e.drawImage(t,be,r,35,35)},me=82,he=557,we=[14,28,42],ke=112,xe=557,Oe=[14,28,42],je=130,Ae=594,Ie=[14,28,42,56],Se=[1e3,100,10],Pe=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ee,o=8+Ae+37*r;Se.forEach((function(r,i){if(n>=r){var l=Math.floor(n/r%10);ie(e,t,a,l,je+Ie[i],o)}}));var i=n%10;ie(e,t,a,i,je+Ie[3],o)},Ce=465,Ee=594,Te=function(e){var t=e.context,n=e.numberAtlas,r=e.accelerate,a=e.specialCD;if(a){var o=te;r<0&&(o=ne),r>0&&(o=re),function(e,t,n){ie(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:te,n,Ce,8+Ee+74)}(t,n,r+a,o)}};function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Be=206,He=1224,_e=["#ffa0af","white","#aaf0fa"],Me=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});function Ne(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Re,ze=634,Je=1224,Ue={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6},$e=296,Ve=876,Fe=336,Ye=992,We={x:460,y:530},Le=195,qe=370;function Ge(e){return(Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t,n,r){Re||(Re="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),l=0;l<o;l++)i[l]=arguments[l+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:Re,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=o.d.canvas.withConfig({displayName:"UnitViewer__Canvas",componentId:"sc-15sy0br-0"})(["max-width:100vw;max-height:100vh;position:relative;"]),ot=o.d.div.withConfig({displayName:"UnitViewer__Container",componentId:"sc-15sy0br-1"})(["width:auto;max-width:100vw;position:relative;display:flex;justify-content:center;"]),it=Object(o.c)(["background-color:white;color:black;position:absolute;border-radius:1.25em;padding:0.5em;font-size:16px;width:2.5em;height:2.5em;cursor:pointer;box-sizing:border-box;"]),lt=Object(o.d)(J).withConfig({displayName:"UnitViewer__DownloadButton",componentId:"sc-15sy0br-2"})(["top:4px;right:4px;",";@media screen and (max-width:1024px){top:calc(12px + 2.5em);}"],it),st=Object(o.d)(Y).withConfig({displayName:"UnitViewer__MenuButton",componentId:"sc-15sy0br-3"})(["top:4px;right:4px;",";@media screen and (min-width:1025px){display:none;pointer-events:none;}"],it),ct=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=et(t).call(this,e),n=!o||"object"!==Ge(o)&&"function"!==typeof o?tt(r):o,rt(tt(n),"updateCanvas",(function(){var e=n.props,t=e.hero,r=e.rarity,a=e.iv,o=e.merge,i=e.support,l=e.weapon,s=e.refine,c=e.assist,f=e.special,u=e.skillA,p=e.skillB,g=e.skillC,v=e.seal,y=e.lv1,m=e.arena,h=e.dragonflower,w=e.resplendent,k={weapon:l,assist:c,special:f,skillA:u,skillB:p,skillC:g,seal:v},x=t.get("bst",0),O=t.get("stats").toJS(),j=function(e,t,n,r){var a=b(e,t),o={},i=0,l=a.special.get("cd",0);i+=a.weapon.get("cd",0),i+=a.assist.get("cd",0),i+=a.skillA.get("cd",0),i+=a.skillB.get("cd",0),i+=a.skillC.get("cd",0),i+=a.seal.get("cd",0);var s={hp:0,atk:0,spd:0,def:0,res:0},c=0,f=0;Object.entries(a).forEach((function(e){var t=d(e,2),n=t[0],a=t[1];o[n]=a.get("name","-"),s.hp+=a.get("hp",0),s.atk+=a.get("mt",0)+a.get("atk",0),s.spd+=a.get("spd",0),s.def+=a.get("def",0),s.res+=a.get("res",0),c+=a.get("sp",0),5===r&&(f=Math.max(a.get("bst",0),f))}));var u=a.weapon.getIn(["refine",n]);return u&&(s.hp+=u.get("hp",0),s.atk+=u.get("mt",0)+u.get("atk",0),s.spd+=u.get("spd",0),s.def+=u.get("def",0),s.res+=u.get("res",0),i+=u.get("cd",0),a.weapon.has("exclusive")||(c+=50),5===r&&(f=Math.max(f,u.get("bst",0)))),{names:o,stats:s,accelerate:i,specialCD:l,spt:c,bst:f}}(k,t,s,r),A=P(r,O,a,o,i,j,y,m,h,w);n.skillInfos=j,n.statsInfos=A,n.score=E({rarity:r,merge:o,bst:Math.max(A.bst,j.bst,x),spt:j.spt}),n.draw(),n.setAssets()})),rt(tt(n),"setAssets",(function(){var e=n.props,t=e.hero,r=e.blessing,a=e.weapon,o=e.refine,i=e.assist,l=e.special,s=e.skillA,c=e.skillB,f=e.skillC,u=e.seal,p=e.resplendent,v=Object(H.a)(t.get("id"),p),y={weapon:a,assist:i,special:l,skillA:s,skillB:c,skillC:f,seal:u};n.loaders.portrait.load("portraits/".concat(v,".png"));var m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=b(e,t),a={};if(Object.entries(r).forEach((function(e){var t=d(e,2),n=t[0],r=t[1].get("icon",null);a[n]=r&&"skills/".concat(r)})),"-"!==n){var o=r.weapon.getIn(["refine",n,"icon"],null);a.weapon=g[n]?"skills/weapon/".concat(n,".png"):o&&"skills/weapon/".concat(o,".png")}return a}(y,t,o);[{skillName:"weapon",empty:"skills/weapon.png"},{skillName:"skillA",empty:"skills/empty.png"},{skillName:"skillB",empty:"skills/empty.png"},{skillName:"skillC",empty:"skills/empty.png"},{skillName:"seal",empty:"skills/seal-empty.png"}].forEach((function(e){var t=e.skillName,r=e.empty;n.loaders["".concat(t,"Icon")].load(m[t]||r)}));var h=r&&"-"!==r;n.loaders.blessingAtlas.load(h?"assets/blessing-".concat(r,".png"):"")})),rt(tt(n),"draw",(function(){var e=n.props,t=e.hero,r=e.rarity,a=e.iv,o=e.merge,i=e.blessing,l=e.support,s=e.refine,c=e.lv1,f=e.arena,u=e.dragonflower,p=e.resplendent,d=n.loaders,g=d.background,b=d.foreground,v=d.foreground2,y=d.portrait,m=d.rarityAtlas,h=d.weaponTypeAtlas,k=d.moveTypeAtlas,x=d.dragonflowerAtlas,O=d.supportAtlas,j=d.blessingAtlas,A=d.numberAtlas,I=d.weaponIcon,S=d.assistIcon,P=d.specialIcon,C=d.textA,E=d.textB,T=d.textC,D=d.textS,B=d.arenaIcon,H=d.skillAIcon,_=d.skillBIcon,M=d.skillCIcon,N=d.sealIcon,R=d.resplendentIcon,z=t.get("title"),J=t.get("name"),U=t.get("weaponType"),$=t.get("moveType"),V=i&&"-"!==i;if(n.canvasRef&&n.canvasRef.current){var F=n.canvasRef.current.getContext("2d");F.clearRect(0,0,540,960),g.loaded&&function(e){var t=e.context,n=e.background;e.support?t.drawImage(n,540,0,540,960,0,0,540,960):t.drawImage(n,0,0,540,960,0,0,540,960)}({context:F,background:g.image,support:l}),y.loaded&&function(e){var t=e.context,n=e.portrait;t.drawImage(n,0,0,540,960,0,0,540,960)}({context:F,portrait:y.image}),b.loaded&&function(e){var t=e.context,n=e.foreground;t.drawImage(n,0,0,540,960,0,0,540,960)}({context:F,foreground:b.image}),v.loaded&&function(e){var t=e.context,n=e.foreground2;e.dragonflower?t.drawImage(n,0,50,540,50,0,542,540,50):t.drawImage(n,0,0,540,50,0,542,540,50)}({context:F,foreground2:v.image,dragonflower:u}),m.loaded&&function(e){var t=e.context,n=e.rarityAtlas;switch(e.rarity){case 5:t.drawImage(n,0,0,153,40,42,380,153,40);break;case 4:t.drawImage(n,0,41,153,40,42,380,153,40)}}({context:F,rarityAtlas:m.image,rarity:r}),h.loaded&&function(e){var t=e.context,n=e.weaponTypeAtlas,r=e.weaponType,a=q.indexOf(r);a>-1&&t.drawImage(n,56*a,0,56,55,W,L,28,28)}({context:F,weaponTypeAtlas:h.image,weaponType:U}),k.loaded&&function(e){var t=e.context,n=e.moveTypeAtlas,r=e.moveType,a=Q.indexOf(r);a>-1&&t.drawImage(n,56*a,0,52,52,G,K,26,26)}({context:F,moveTypeAtlas:k.image,moveType:$}),x.loaded&&A.loaded&&function(e){var t=e.context,n=e.dragonflowerAtlas,r=e.numberAtlas,a=e.moveType,o=e.dragonflower;if(o){var i=fe.indexOf(a);i>-1&&t.drawImage(n,0,58*i,64,58,216,546,48,44);var l=0,s=te;ie(t,r,s,"+",le+ce[0],se),l+=1,o>9&&(ie(t,r,s,1,le+ce[l],se),l+=1),ie(t,r,s,o%10,le+ce[l],se)}}({context:F,dragonflowerAtlas:x.image,numberAtlas:A.image,moveType:$,dragonflower:u}),O.loaded&&function(e){var t=e.context,n=e.supportAtlas,r=e.support,a=e.hasBlessing?108:0;r&&t.drawImage(n,ue-a,pe,108,115)}({context:F,supportAtlas:O.image,support:l,hasBlessing:V}),j.loaded&&function(e){var t=e.context,n=e.blessingAtlas;t.drawImage(n,de,ge,108,115)}({context:F,blessingAtlas:j.image,blessing:i}),A.loaded&&(!function(e){var t=e.context,n=e.numberAtlas,r=e.lv1?1:40,a=0;r>9&&ie(t,n,te,4,me+we[a],he),ie(t,n,te,r%10,me+we[a+=1],he)}({context:F,numberAtlas:A.image,lv1:c}),function(e){var t=e.context,n=e.numberAtlas,r=e.merge;if(!(r<=0)){var a=0,o=r>9?ae:te;ie(t,n,o,"+",ke+Oe[0],xe),a+=1,r>9&&(ie(t,n,o,1,ke+Oe[a],xe),a+=1),ie(t,n,o,r%10,ke+Oe[a],xe)}}({context:F,numberAtlas:A.image,merge:o}),function(e){var t=e.context,n=e.numberAtlas,r=e.stats,a=e.score,o=e.sbst,i=e.bst;Object.values(r).forEach((function(e,r){Pe(t,n,e,r,ee)}));var l=o>i?ne:ae;Pe(t,n,i,5,ae),Pe(t,n,a,6,l)}(Xe({context:F,numberAtlas:A.image,score:n.score,sbst:Math.max(n.skillInfos.bst,t.get("bst",0))},n.statsInfos)),Te({context:F,numberAtlas:A.image,accelerate:n.skillInfos.accelerate,specialCD:n.skillInfos.specialCD})),function(e){var t=e.context,n=e.weaponIcon,r=e.assistIcon,a=e.specialIcon,o=e.textA,i=e.textB,l=e.textC,s=e.textS,c=e.skillAIcon,f=e.skillBIcon,u=e.skillCIcon,p=e.sealIcon;n.loaded&&ye(t,n.image,0),r.loaded&&ye(t,r.image,1),a.loaded&&ye(t,a.image,2),c.loaded&&ye(t,c.image,3),t.drawImage(o.image,be+20,ve+112+18,18,18),f.loaded&&ye(t,f.image,4),t.drawImage(i.image,be+20,ve+149+18,18,18),u.loaded&&ye(t,u.image,5),t.drawImage(l.image,be+20,ve+186+18,18,18),p.loaded&&ye(t,p.image,6),t.drawImage(s.image,be+20,ve+223+18,18,18)}({context:F,weaponIcon:I,assistIcon:S,specialIcon:P,textA:C,textB:E,textC:T,textS:D,skillAIcon:H,skillBIcon:_,skillCIcon:M,sealIcon:N}),n.textCanvas.getContext("2d").clearRect(0,0,1080,1920),function(e){var t=e.canvas,n=e.iv,r=e.merge,a=t.getContext("2d");a.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",a.fillStyle="white",a.strokeStyle="#101010",a.textAlign="center",a.textBaseline="middle",a.lineJoin="round",a.lineWidth=8;var o=w(n),i=o.boon,l=o.bane,s={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};s[i]+=1,s[l]-=1,s[l]=r>0?1:s[l],Me.forEach((function(e,t){var n=De(e,2),r=n[0],o=n[1],i=He+74*t;a.fillStyle=_e[s[r]],a.strokeText(o,Be,i),a.fillText(o,Be,i)}))}({canvas:n.textCanvas,iv:a,merge:o}),function(e){var t=e.canvas,n=e.refine,r=e.weapon,a=Ne(e,["canvas","refine","weapon"]),o=t.getContext("2d");o.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",o.textAlign="left",o.textBaseline="middle",o.lineJoin="round",o.lineWidth=8,o.strokeStyle="#101010",o.fillStyle="-"!==n?"lime":"white";var i=ze+("-"===r?4:0),l=Je;o.strokeText(r,i,l),o.fillText(r,i,l),o.fillStyle="white",Object.keys(a).forEach((function(e){var t=a[e],n=Je+74*Ue[e],r="-"===t?4:0;o.strokeText(t,ze+r,n),o.fillText(t,ze+r,n)}))}(Xe({canvas:n.textCanvas,refine:s},n.skillInfos.names)),function(e){var t=e.canvas,n=e.title,r=e.name,a=t.getContext("2d");a.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",a.fillStyle="white",a.strokeStyle="#220d00",a.textAlign="center",a.textBaseline="middle",a.lineJoin="round",a.lineWidth=8,a.strokeText(n,$e,Ve),a.fillText(n,$e,Ve),a.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",a.strokeText(r,Fe,Ye),a.fillText(r,Fe,Ye)}({canvas:n.textCanvas,title:z,name:J}),f&&B&&function(e){var t=e.context,n=e.arenaIcon;t.drawImage(n,We.x,We.y,50,49)}({context:F,arenaIcon:B.image}),p&&R&&function(e){var t=e.context,n=e.resplendentIcon;t.drawImage(n,Le,qe,64,63)}({context:F,resplendentIcon:R.image}),F.drawImage(n.textCanvas,0,0,540,960)}})),rt(tt(n),"download",(function(e){e.stopPropagation();var t=n.props.hero,r=n.canvasRef.current.toDataURL("image/png"),a=document.createElement("a");a.href=r,a.download="".concat(t.get("name"),"-").concat(t.get("title"),".png"),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)})),n.canvasRef=a.a.createRef(),n.textCanvas=document.createElement("canvas"),n.textCanvas.width=1080,n.textCanvas.height=1920;n.loaders={};var i=function(){return n.draw()};return["background","foreground","foreground2","portrait","rarityAtlas","weaponTypeAtlas","moveTypeAtlas","dragonflowerAtlas","supportAtlas","blessingAtlas","numberAtlas","weaponIcon","assistIcon","specialIcon","textA","textB","textC","textS","arenaIcon","skillAIcon","skillBIcon","skillCIcon","sealIcon","resplendentIcon"].forEach((function(e){n.loaders[e]=new B(i)})),n.loaders.background.load("assets/background.jpg"),n.loaders.foreground.load("assets/foreground.png"),n.loaders.foreground2.load("assets/foreground2.png"),n.loaders.rarityAtlas.load("assets/rarity.png"),n.loaders.weaponTypeAtlas.load("assets/weapon-type.png"),n.loaders.moveTypeAtlas.load("assets/move-type.png"),n.loaders.dragonflowerAtlas.load("assets/dragonflower.png"),n.loaders.supportAtlas.load("assets/support.png"),n.loaders.numberAtlas.load("assets/number.png"),n.loaders.weaponIcon.load("skills/weapon.png"),n.loaders.assistIcon.load("skills/assist.png"),n.loaders.specialIcon.load("skills/special.png"),n.loaders.textA.load("assets/skill-a.png"),n.loaders.textB.load("assets/skill-b.png"),n.loaders.textC.load("assets/skill-c.png"),n.loaders.textS.load("assets/skill-s.png"),n.loaders.arenaIcon.load("assets/Arena_Crown.png"),n.loaders.resplendentIcon.load("assets/god-wear-l.png"),n.updateCanvas(),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(){this.updateCanvas()}},{key:"render",value:function(){return Ke(ot,{},void 0,a.a.createElement(at,{width:"540",height:"960",ref:this.canvasRef}),Ke(lt,{onClick:this.download}),Ke(st,{onClick:this.props.openEditor}))}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}(r.PureComponent);n.d(t,"default",(function(){return ct}))},"6080a705f759d5ca199c":function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return a}));var a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object.entries(e).map((function(e){var t=r(e,2);return{key:t[0],stat:t[1]}}));a.sort((function(e,t){return e.stat>t.stat?-1:e.stat<t.stat?1:e.index<t.index?-1:e.index>t.index?1:0}));var o=a.map((function(e){return e.key})),i={hp:0,atk:0,spd:0,def:0,res:0};n&&t>0&&(i[o[0]]=1,i[o[1]]=1,i[o[2]]=1);for(var l=0;l<2*t;l+=1){var s=l%5;i[o[s]]+=1}return i}}}]);