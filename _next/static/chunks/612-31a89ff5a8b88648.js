"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{9950:function(e,n,r){r.d(n,{Gt:function(){return i},NV:function(){return a},ab:function(){return c},sq:function(){return d}});var l=r(2895),t=r(5869),u=r(9651),o=r(4570);function i(e){var n,r;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:d,defaultSkillDB:s,heroId:p,weaponId:v,skillXId:f}=e;if(!i||!c||!d||!p)return[];let y=(0,t.cK)(c,p);if(!y)return[];let T=(0,l.g)({defaultSkillDB:s,heroId:p}),w=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),m=(null==w?void 0:w.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),k=f&&!(null==T?void 0:null===(r=T.skillX)||void 0===r?void 0:r[f]);return Object.values(d).filter(e=>{if(e.exclusive){let n=e.exclusive.includes(p);return!!n&&(!m&&!k||e.sp<400)}return(0,u.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})}).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,r;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:d,defaultSkillDB:s,heroId:p,weaponId:v,assistId:f,skillXId:y}=e;if(!i||!c||!d||!p||!f)return!1;let T=(0,t.cK)(c,p);if(!T)return!1;let w=(0,l.g)({defaultSkillDB:s,heroId:p}),m=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),k=(null==m?void 0:m.rearmed)&&!(null==w?void 0:null===(n=w.weapon)||void 0===n?void 0:n[v]),b=y&&!(null==w?void 0:null===(r=w.skillX)||void 0===r?void 0:r[y]),g=d[f];return!!g&&(g.exclusive?!!g.exclusive.includes(p)&&(!k&&!b||g.sp<400):(0,u.O3)({rules2DB:i,ruleId:g.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{assistDB:n,assistId:r}=e;return n&&r?n[r]:null}function d(e){let{assistDB:n,assistId:r}=e,l=a({assistDB:n,assistId:r});return(null==l?void 0:l.name)||""}},2895:function(e,n,r){r.d(n,{N:function(){return u},g:function(){return t}});let l={weaponId:"",assistId:"",specialId:"",skillAId:"",skillBId:"",skillCId:"",skillXId:""};function t(e){let{defaultSkillDB:n,heroId:r}=e;return n&&r&&n[r]?n[r]:null}function u(e){let{defaultSkillDB:n,heroId:r}=e;if(!n||!r||!n[r])return l;let t=n[r],u="",o="",i="",c="",a="",d="",s="";return t.weapon&&(u=Object.keys(t.weapon).pop()),t.assist&&(o=Object.keys(t.assist).pop()),t.special&&(i=Object.keys(t.special).pop()),t.skillA&&(c=Object.keys(t.skillA).pop()),t.skillB&&(a=Object.keys(t.skillB).pop()),t.skillC&&(d=Object.keys(t.skillC).pop()),t.skillX&&(s=Object.keys(t.skillX).pop()),{weaponId:u,assistId:o,specialId:i,skillAId:c,skillBId:a,skillCId:d,skillXId:s}}},9651:function(e,n,r){function l(e){let{rules2DB:n,ruleId:r}=e;return n&&r?n[r]:null}function t(e,n){return!!e&&!!n&&(e&n)==0}function u(e){let{rule2A:n,rule2B:r}=e;return!n||!(t(n.moveType,null==r?void 0:r.moveType)||t(n.colorType,null==r?void 0:r.colorType)||t(n.weaponType,null==r?void 0:r.weaponType))}function o(e){let{rules2DB:n,ruleId:r,moveType:u,colorType:o,weaponType:i}=e;if("allDisabled"===r)return!1;let c=l({rules2DB:n,ruleId:u}),a=l({rules2DB:n,ruleId:o}),d=l({rules2DB:n,ruleId:i}),s=l({rules2DB:n,ruleId:r});return!s||!(t(s.moveType,null==c?void 0:c.moveType)||t(s.colorType,null==a?void 0:a.colorType)||t(s.weaponType,null==d?void 0:d.weaponType))}function i(e){let{moveTypeKeys:n,rules2DB:r}=e;return n.reduce((e,n)=>{let t=l({rules2DB:r,ruleId:n});return e|t.moveType},0)}function c(e){let{weaponTypeKeys:n,rules2DB:r}=e;return n.reduce((e,n)=>{let t=l({rules2DB:r,ruleId:n});return e|(t.weaponType||0)},0)}r.d(n,{$4:function(){return c},O3:function(){return o},cF:function(){return i},o7:function(){return l},ob:function(){return u}})},1342:function(e,n,r){r.d(n,{AY:function(){return i},PU:function(){return a},cp:function(){return d},hJ:function(){return c}});var l=r(2895),t=r(5869),u=r(9651),o=r(4570);function i(e){var n,r;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:d,defaultSkillDB:s,heroId:p,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!d||!s||!p)return[];let y=(0,t.cK)(c,p);if(!y)return[];let T=(0,l.g)({defaultSkillDB:s,heroId:p}),w=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),m=!y.rearmed&&!y.attuned,k=m&&(null==w?void 0:w.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=m&&f&&!(null==T?void 0:null===(r=T.skillX)||void 0===r?void 0:r[f]);return Object.values(d).filter(e=>e.exclusive?!k&&!b&&e.exclusive.includes(p):(0,u.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,r;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:d,defaultSkillDB:s,heroId:p,weaponId:v,skillId:f,skillXId:y}=e;if(!i||!c||!a||!d||!s||!p||!f)return!1;let T=(0,t.cK)(c,p);if(!T)return!1;let w=(0,l.g)({defaultSkillDB:s,heroId:p}),m=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),k=!T.rearmed&&!T.attuned,b=k&&(null==m?void 0:m.rearmed)&&!(null==w?void 0:null===(n=w.weapon)||void 0===n?void 0:n[v]),g=k&&y&&!(null==w?void 0:null===(r=w.skillX)||void 0===r?void 0:r[y]),x=d[f];return!!x&&(x.exclusive?!b&&!g&&x.exclusive.includes(p):(0,u.O3)({rules2DB:i,ruleId:x.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{skillDB:n,skillId:r}=e;return n&&r?n[r]:null}function d(e){let{skillDB:n,skillId:r}=e,l=a({skillDB:n,skillId:r});return l?{icon:l.icon,name:l.name}:{icon:"",name:""}}},8263:function(e,n,r){r.d(n,{Hh:function(){return c},R_:function(){return d},TZ:function(){return i},cf:function(){return a}});var l=r(2895),t=r(5869),u=r(9651),o=r(4570);function i(e){var n,r;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:d,defaultSkillDB:s,heroId:p,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!d||!p)return[];let y=(0,t.cK)(c,p);if(!y)return[];let T=(0,l.g)({defaultSkillDB:s,heroId:p}),w=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),m=!y.rearmed&&!y.attuned,k=m&&(null==w?void 0:w.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=m&&f&&!(null==T?void 0:null===(r=T.skillX)||void 0===r?void 0:r[f]);return Object.values(d).filter(e=>e.exclusive?!k&&!b&&e.exclusive.includes(p):(0,u.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,r;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:d,defaultSkillDB:s,heroId:p,weaponId:v,specialId:f,skillXId:y}=e;if(!i||!c||!a||!d||!p||!f)return!1;let T=(0,t.cK)(c,p);if(!T)return!1;let w=(0,l.g)({defaultSkillDB:s,heroId:p}),m=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),k=(null==m?void 0:m.rearmed)&&!(null==w?void 0:null===(n=w.weapon)||void 0===n?void 0:n[v]),b=y&&!(null==w?void 0:null===(r=w.skillX)||void 0===r?void 0:r[y]),g=d[f];return!!g&&(g.exclusive?!k&&!b&&g.exclusive.includes(p):(0,u.O3)({rules2DB:i,ruleId:g.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{specialDB:n,specialId:r}=e;return n&&r?n[r]:null}function d(e){let{specialDB:n,specialId:r}=e,l=a({specialDB:n,specialId:r});return(null==l?void 0:l.name)||""}},4570:function(e,n,r){r.d(n,{CB:function(){return u},J7:function(){return s},Mf:function(){return d},Mw:function(){return o},Wu:function(){return p},fu:function(){return c},i7:function(){return i}});var l=r(5869);function t(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function u(e){let{heroDB:n,weaponDB:r,heroId:u}=e;if(!r||!n||!u)return[];let o=(0,l.cK)(n,u);if(!o)return[];let i=t(o.weaponType),c=r[i];return i?Object.values(c).filter(e=>!e.exclusive||e.exclusive.includes(u)).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}}):[]}function o(e){let{heroDB:n,weaponDB:r,heroId:u,weaponId:o}=e;if(!r||!n||!u||!o)return!1;let i=(0,l.cK)(n,u);if(!i)return!1;let c=t(i.weaponType),a=r[c];if(!c)return!1;let d=a[o];return!!d&&(!d.exclusive||d.exclusive.includes(u))}function i(e){let{heroDB:n,weaponDB:r,heroId:u,weaponId:o}=e;if(!r||!n||!o||!u)return null;let i=(0,l.cK)(n,u);if(!i)return null;let c=t(i.weaponType);return r[c][o]}function c(e){let{heroDB:n,weaponDB:r,heroId:l,weaponId:t}=e,u=i({heroDB:n,weaponDB:r,heroId:l,weaponId:t});return(null==u?void 0:u.name)||""}let a={atk:"攻擊",spd:"速度",def:"防守",res:"魔防"};function d(e){let{heroDB:n,weaponDB:r,heroId:l,weaponId:t}=e,u=i({heroDB:n,weaponDB:r,heroId:l,weaponId:t});return u&&u.refine?Object.entries(u.refine).filter(e=>{let[,n]=e;return!n.exclusive||n.exclusive.includes(l)}).map(e=>{let[n,r]=e,l={value:n,...r};return l.name||(l.name=a[n]||n),l.icon&&(l.icon="/skills/weapon/".concat(l.icon,".png")),!l.icon&&a[n]&&(l.icon="/skills/weapon/".concat(n,".png")),l}):[]}function s(e){let{heroDB:n,weaponDB:r,heroId:l,weaponId:t,refineId:u}=e;if(!o({heroDB:n,weaponDB:r,heroId:l,weaponId:t}))return!1;let c=i({heroDB:n,weaponDB:r,heroId:l,weaponId:t});return!!c&&!!c.refine&&!!c.refine[u]&&(!c.refine[u].exclusive||c.refine[u].exclusive.includes(l))}function p(e){let{heroDB:n,weaponDB:r,heroId:l,weaponId:t,refine:u}=e,o=function(e){var n;let{heroDB:r,weaponDB:l,heroId:t,weaponId:u,refine:o}=e,c=i({heroDB:r,weaponDB:l,heroId:t,weaponId:u});return null==c?void 0:null===(n=c.refine)||void 0===n?void 0:n[o]}({heroDB:n,weaponDB:r,heroId:l,weaponId:t,refine:u});return o?a[u]?{icon:u,name:a[u]}:{icon:o.icon,name:o.name}:{icon:"",name:""}}}}]);