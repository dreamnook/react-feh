"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{2718:function(e,n,r){var t=r(5893),a=r(3354);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}n.Z=function(e){var n=e.src,r=o(e,["src"]),u=(0,a.Z)(n);return(0,t.jsx)("img",function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){i(e,n,r[n])}))}return e}({src:u},r))}},7358:function(e,n,r){var t=r(5893),a=r(7294),i=r(243),o=r(3354),u=function(e){return"".concat(-56*e-2,"px -2px")};n.Z=function(e){var n=e.weaponType,r=(0,o.Z)("/assets/weapon-type.png"),s=(0,a.useMemo)((function(){var e=i.s6.indexOf(n);return{background:"no-repeat url('".concat(r,"')"),backgroundPosition:u(e),width:"52px",height:"55px"}}),[r,n]);return(0,t.jsx)("div",{style:s})}},449:function(e,n,r){r.d(n,{Z:function(){return v}});var t=r(4051),a=r.n(t),i=r(5893),o=r(7294),u=r(2718),s=r(3354),l=r(5452);var c={getDB:function(e){var n=localStorage.getItem("".concat(e,"-db"));return n?JSON.parse(n):n},saveDB:function(e,n){localStorage.setItem("".concat(e,"-db"),JSON.stringify(n))},getRev:function(e){return localStorage.getItem("".concat(e,"-rev"))},saveRev:function(e,n){localStorage.setItem("".concat(e,"-rev"),n)}};function f(e,n,r,t,a,i,o){try{var u=e[i](o),s=u.value}catch(l){return void r(l)}u.done?n(s):Promise.resolve(s).then(t,a)}function p(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function o(e){f(i,t,a,o,u,"next",e)}function u(e){f(i,t,a,o,u,"throw",e)}o(void 0)}))}}function d(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){d(e,n,r[n])}))}return e}function h(e,n){return!(!e||!n)&&e===n}var v=function(e){var n=e.children,r=(0,o.useState)(null),t=r[0],f=r[1],d=(0,o.useState)(null),v=d[0],g=d[1],y=(0,o.useState)(null),m=y[0],k=y[1],w=(0,o.useState)(!1),D=w[0],B=w[1],j=(0,o.useRef)(null),S=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=c.getDB("rule2"),n=c.getDB("heroes"),r=c.getDB("weapon"),t=c.getDB("assist"),a=c.getDB("special"),i=c.getDB("skillA"),o=c.getDB("skillB"),u=c.getDB("skillC"),s=c.getDB("seal"),l=c.getDB("defaultSkills"),p=c.getDB("resplendent"),d=c.getDB("inheritables");f({rule2:e,heroes:n,weapon:r,assist:t,special:a,skillA:i,skillB:o,skillC:u,seal:s,defaultSkills:l,resplendent:p,inheritables:d});var b=c.getRev("rule2"),h=c.getRev("heroes"),v=c.getRev("weapon"),y=c.getRev("assist"),m=c.getRev("special"),k=c.getRev("skillA"),w=c.getRev("skillB"),D=c.getRev("skillC"),B=c.getRev("seal"),j=c.getRev("defaultSkills"),S=c.getRev("resplendent"),O=c.getRev("inheritables");g({rule2:b,heroes:h,weapon:v,assist:y,special:m,skillA:k,skillB:w,skillC:D,seal:B,defaultSkills:j,resplendent:S,inheritables:O})}),[]);var O=(0,s.Z)("/rev/rev.json"),x=(0,o.useState)(null),R=x[0],A=x[1];(0,o.useEffect)((function(){var e=function(){S.current||"visible"===document.visibilityState&&(S.current=!0,fetch(O+"?t=".concat(Date.now())).then(function(){var e=p(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:r=e.sent,S.current=!1,A(r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))};return e(),document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[O]);var C=(0,s.Z)("/fehdb/"),P=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(j.current=Date.now(),R&&t&&v&&!P.current){var e,n,r,i,o,u,s,l,f,d,g,y,m=[];return e=t.rule2,h(R["ruleHash2.json"],v.rule2)||m.push("ruleHash2.json"),n=t.heroes,h(R["heroes.json"],v.heroes)||m.push("heroes.json"),r=t.weapon,h(R["weapon.json"],v.weapon)||m.push("weapon.json"),i=t.assist,h(R["assist.json"],v.assist)||m.push("assist.json"),o=t.special,h(R["special.json"],v.special)||m.push("special.json"),u=t.skillA,h(R["skillA.json"],v.skillA)||m.push("skillA.json"),s=t.skillB,h(R["skillB.json"],v.skillB)||m.push("skillB.json"),l=t.skillC,h(R["skillC.json"],v.skillC)||m.push("skillC.json"),f=t.seal,h(R["seal.json"],v.seal)||m.push("seal.json"),d=t.defaultSkills,h(R["defaultSkills.json"],v.defaultSkills)||m.push("defaultSkills.json"),g=t.resplendent,h(R["resplendent.json"],v.resplendent)||m.push("resplendent.json"),y=t.inheritables,h(R["inheritables.json"],v.inheritables)||m.push("inheritables.json"),k({rules2DB:e,heroDB:n,weaponDB:r,assistDB:i,specialDB:o,skillADB:u,skillBDB:s,skillCDB:l,sealDB:f,defaultSkillDB:d,resplendentDB:g,inheritablesDB:y}),m.length>0?(P.current=!0,m.forEach((function(e){fetch("".concat(C).concat(e)).then(function(){var e=p(a().mark((function e(n){var r,t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:r=e.sent,t=n.url.split(C)[1],m=m.filter((function(e){return e!==t})),i=t.replace(".json","").replace("Hash",""),c.saveDB(i,r),c.saveRev(i,R[t]),e.t0=i,e.next="rule2"===e.t0?12:"heroes"===e.t0?14:"weapon"===e.t0?16:"assist"===e.t0?18:"special"===e.t0?20:"skillA"===e.t0?22:"skillB"===e.t0?24:"skillC"===e.t0?26:"seal"===e.t0?28:"defaultSkills"===e.t0?30:"resplendent"===e.t0?32:"inheritables"===e.t0?34:11;break;case 11:return e.abrupt("break",36);case 12:return k((function(e){return b({},e,{rules2DB:r})})),e.abrupt("break",36);case 14:return k((function(e){return b({},e,{heroDB:r})})),e.abrupt("break",36);case 16:return k((function(e){return b({},e,{weaponDB:r})})),e.abrupt("break",36);case 18:return k((function(e){return b({},e,{assistDB:r})})),e.abrupt("break",36);case 20:return k((function(e){return b({},e,{specialDB:r})})),e.abrupt("break",36);case 22:return k((function(e){return b({},e,{skillADB:r})})),e.abrupt("break",36);case 24:return k((function(e){return b({},e,{skillBDB:r})})),e.abrupt("break",36);case 26:return k((function(e){return b({},e,{skillCDB:r})})),e.abrupt("break",36);case 28:return k((function(e){return b({},e,{sealDB:r})})),e.abrupt("break",36);case 30:return k((function(e){return b({},e,{defaultSkillDB:r})})),e.abrupt("break",36);case 32:return k((function(e){return b({},e,{resplendentDB:r})})),e.abrupt("break",36);case 34:return k((function(e){return b({},e,{inheritablesDB:r})})),e.abrupt("break",36);case 36:B(0===m.length),P.current=!m.length;case 38:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))):B(!0),function(){j.current=null}}}),[C,R,t,v]),(0,o.useMemo)((function(){return!!D&&["rules2DB","heroDB","weaponDB","assistDB","specialDB","skillADB","skillBDB","skillCDB","sealDB","defaultSkillDB","resplendentDB","inheritablesDB"].every((function(e){return!!m[e]}))}),[D,m])?(0,i.jsx)(l.Q.Provider,{value:m,children:n}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(u.Z,{src:"/error.png",style:{maxWidth:"100vw",margin:"0 auto",padding:"2em 0.5em 0",display:"block",boxSizing:"border-box"}})})}},5452:function(e,n,r){r.d(n,{Q:function(){return a},K:function(){return i}});var t=r(7294),a=(0,t.createContext)(null),i=function(){return(0,t.useContext)(a)}},7413:function(e,n,r){r.d(n,{dk:function(){return d},_n:function(){return h},YM:function(){return v}});var t=r(243);function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);o=!0);}catch(s){u=!0,a=s}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return a(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u={fire:"\u706b\u4e4b\u795d\u798f",water:"\u6c34\u4e4b\u795d\u798f",wind:"\u98a8\u4e4b\u795d\u798f",earth:"\u5730\u4e4b\u795d\u798f",light:"\u5149\u4e4b\u795d\u798f",dark:"\u95c7\u4e4b\u795d\u798f",astra:"\u5929\u4e4b\u795d\u798f",anima:"\u7406\u4e4b\u795d\u798f"},s={fire:"\u706b\u4e4b\u50b3\u627f",water:"\u6c34\u4e4b\u50b3\u627f",wind:"\u98a8\u4e4b\u50b3\u627f",earth:"\u5730\u4e4b\u50b3\u627f",light:"\u5149\u4e4b\u50b3\u627f",dark:"\u95c7\u4e4b\u50b3\u627f",astra:"\u5929\u4e4b\u50b3\u627f",anima:"\u7406\u4e4b\u50b3\u627f"},l={hp:"\u6b7b\u9b25",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"},c=t.$0.reduce((function(e,n){var r=o(n.split("-"),2),t=r[0],a=r[1];return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){i(e,n,r[n])}))}return e}({},e,i({},n,"".concat(s[t]," - ").concat(l[a])))}),{}),f=new RegExp(/(\w+-\w+)(?:-\d)?/);function p(e){var n;return(null===(n=e.match(f))||void 0===n?void 0:n[1])||e}function d(e){if(!e||"-"===e)return"";var n=p(e);return u[n]||c[n]?"/assets/blessing-".concat(e,".png"):""}function b(e){if(!e||"-"===e)return"";var n=p(e);return u[n]||c[n]||"\u7121\u795d\u798f"}function h(e){return{src:d(e),name:b(e)}}var v=Object.entries(u).map((function(e){var n=o(e,2);return{value:n[0],name:n[1]}}))},243:function(e,n,r){r.d(n,{dM:function(){return t},s6:function(){return a},$0:function(){return o}});var t=["infantry","armored","cavalry","flying"],a=["red-sword","blue-lance","green-axe","red-bow","blue-bow","green-bow","white-bow","red-dagger","blue-dagger","green-dagger","white-dagger","red-tome","blue-tome","green-tome","white-tome","white-staff","red-dragon","blue-dragon","green-dragon","white-dragon","red-beast","blue-beast","green-beast","white-beast"],i=["hp","atk","spd","def","res"],o=["fire","water","wind","earth","light","dark","astra","anima"].reduce((function(e,n){return i.forEach((function(r){e.push("".concat(n,"-").concat(r))})),e}),[])},6730:function(e,n,r){r.d(n,{cK:function(){return o},eM:function(){return u},gO:function(){return s},$f:function(){return l},_u:function(){return c},oc:function(){return f}});var t=r(7413);function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return a(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){return e[n]?e[n]:e.Feh}function u(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.id,a=e.title,i=e.name,o=e.rarity,u=e.colorType,s=e.weaponType,l=e.moveType,c=e.blessing,f=e.bst,p=e.statMax,d=e.stats,b=e.pool,h=e.ascended,v=e.rearmed,g=e.df,y=void 0===g?0:g,m="/faces/".concat(r,".png"),k=(0,t.dk)(c),w=d[5].hp[1],D=d[5].atk[1],B=d[5].spd[1],j=d[5].def[1],S=d[5].res[1],O="".concat(r.toLowerCase(),"|").concat(a,"|").concat(i);return n&&(w=void 0,D=void 0,B=void 0,j=void 0,S=void 0),{id:r,title:a,name:i,rarity:o,colorType:u,weaponType:s,moveType:l,bst:Math.max(f||0,p||0)||void 0,hp:w,atk:D,spd:B,def:j,res:S,pool:b,query:O,faceSrc:m,blessingSrc:k,ascended:h,rearmed:v,df:y,dfDelta:y/5}}function s(e){var n=e.heroDB,r=e.assistDB,t=e.resplendentDB,a=e.heroId,o=e.noStat,s=n[a],l=r.Dance.exclusive,c=r.Play.exclusive,f=r.Sing.exclusive,p=i(l).concat(i(c),i(f)),d=u(s,o);return d.isDancer=p.includes(s.id),d.hasResplendent=t.includes(s.id),d.faceSrcR=d.hasResplendent?"/faces/".concat(s.id,"(R).png"):d.faceSrc,d}function l(e){var n=e.heroDB,r=e.assistDB,t=e.resplendentDB,a=e.noStat,o=r.Dance.exclusive,s=r.Play.exclusive,l=r.Sing.exclusive,c=i(o).concat(i(s),i(l));return Object.values(n).map((function(e,n){var r=u(e,a);return r.isDancer=c.includes(e.id),r.hasResplendent=t.includes(e.id),r.faceSrcR=r.hasResplendent?"/faces/".concat(e.id,"(R).png"):r.faceSrc,r.index=n,r}))}function c(e,n){var r=n.filter,t=n.moveTypeFilter,a=n.weaponTypeFilter,i=n.isRarity5,o=n.isRarity4,u=n.isLegendary,s=n.isMythic,l=n.isAscended,c=n.isRearmed,f=n.isDuo,p=n.isHar,d=n.isGrail,b=n.isDancer;return function(e,n){return!!n&&!e.query.includes(n.toLowerCase())}(e,r)||function(e,n){return!!n&&"Feh"!==e.id&&!n[e.moveType]}(e,t)||function(e,n){return!!n&&"Feh"!==e.id&&!n[e.weaponType]}(e,a)||function(e,n){return!!n&&(-1===n?"legendary"===e.pool:"legendary"!==e.pool)}(e,u)||function(e,n){return!!n&&(-1===n?"mythic"===e.pool:"mythic"!==e.pool)}(e,s)||function(e,n){return!!n&&(-1===n?e.ascended:!e.ascended)}(e,l)||function(e,n){return!!n&&(-1===n?e.rearmed:!e.rearmed)}(e,c)||function(e,n){return!!n&&(-1===n?"duo"===e.pool:"duo"!==e.pool)}(e,f)||function(e,n){return!!n&&(-1===n?"harmonized"===e.pool:"harmonized"!==e.pool)}(e,p)||function(e,n){return!!n&&(-1===n?"grail"===e.pool:"grail"!==e.pool)}(e,d)||function(e,n){return!!n&&(-1===n?e.isDancer:!e.isDancer)}(e,b)||function(e,n){return!n&&"Feh"!==e.id&&1===e.rarity.length}(e,i)||function(e,n){return!n&&"Feh"!==e.id&&e.rarity.length>1}(e,o)}function f(e){var n=e.heroDB,r=e.heroIds;return n&&r?r.map((function(e){return n[e]})).filter((function(e){return!!e})):[]}}}]);