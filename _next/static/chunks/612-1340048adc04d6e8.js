"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{9950:function(e,n,l){l.d(n,{Gt:function(){return i},NV:function(){return a},ab:function(){return c},sq:function(){return s}});var r=l(2895),u=l(5869),t=l(9651),o=l(4570);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:s,defaultSkillDB:d,heroId:p,weaponId:v,skillXId:f}=e;if(!i||!c||!s||!p)return[];let y=(0,u.cK)(c,p);if(!y)return[];let T=(0,r.g)({defaultSkillDB:d,heroId:p}),w=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),m=(null==w?void 0:w.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),k=f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(s).filter(e=>{if(e.exclusive){let n=e.exclusive.includes(p);return!!n&&(!m&&!k||e.sp<400)}return(0,t.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})}).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:s,defaultSkillDB:d,heroId:p,weaponId:v,assistId:f,skillXId:y}=e;if(!i||!c||!s||!p||!f)return!1;let T=(0,u.cK)(c,p);if(!T)return!1;let w=(0,r.g)({defaultSkillDB:d,heroId:p}),m=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),k=(null==m?void 0:m.rearmed)&&!(null==w?void 0:null===(n=w.weapon)||void 0===n?void 0:n[v]),b=y&&!(null==w?void 0:null===(l=w.skillX)||void 0===l?void 0:l[y]),g=s[f];return!!g&&(g.exclusive?!!g.exclusive.includes(p)&&(!k&&!b||g.sp<400):(0,t.O3)({rules2DB:i,ruleId:g.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{assistDB:n,assistId:l}=e;return n&&l?n[l]:null}function s(e){let{assistDB:n,assistId:l}=e,r=a({assistDB:n,assistId:l});return(null==r?void 0:r.name)||""}},2895:function(e,n,l){l.d(n,{N:function(){return t},g:function(){return u}});let r={weaponId:"",assistId:"",specialId:"",skillAId:"",skillBId:"",skillCId:"",skillXId:""};function u(e){let{defaultSkillDB:n,heroId:l}=e;return n&&l&&n[l]?n[l]:null}function t(e){let{defaultSkillDB:n,heroId:l}=e;if(!n||!l||!n[l])return r;let u=n[l],t="",o="",i="",c="",a="",s="",d="";return u.weapon&&(t=Object.keys(u.weapon).pop()),u.assist&&(o=Object.keys(u.assist).pop()),u.special&&(i=Object.keys(u.special).pop()),u.skillA&&(c=Object.keys(u.skillA).pop()),u.skillB&&(a=Object.keys(u.skillB).pop()),u.skillC&&(s=Object.keys(u.skillC).pop()),u.skillX&&(d=Object.keys(u.skillX).pop()),{weaponId:t,assistId:o,specialId:i,skillAId:c,skillBId:a,skillCId:s,skillXId:d}}},9651:function(e,n,l){function r(e){let{rules2DB:n,ruleId:l}=e;return n&&l?n[l]:null}function u(e,n){return!!e&&!!n&&(e&n)==0}function t(e){let{rule2A:n,rule2B:l}=e;return!n||!(u(n.moveType,null==l?void 0:l.moveType)||u(n.colorType,null==l?void 0:l.colorType)||u(n.weaponType,null==l?void 0:l.weaponType))}function o(e){let{rules2DB:n,ruleId:l,moveType:t,colorType:o,weaponType:i}=e;if("allDisabled"===l)return!1;let c=r({rules2DB:n,ruleId:t}),a=r({rules2DB:n,ruleId:o}),s=r({rules2DB:n,ruleId:i}),d=r({rules2DB:n,ruleId:l});return!d||!(u(d.moveType,null==c?void 0:c.moveType)||u(d.colorType,null==a?void 0:a.colorType)||u(d.weaponType,null==s?void 0:s.weaponType))}function i(e){let{moveTypeKeys:n,rules2DB:l}=e;return n.reduce((e,n)=>{let u=r({rules2DB:l,ruleId:n});return e|u.moveType},0)}function c(e){let{weaponTypeKeys:n,rules2DB:l}=e;return n.reduce((e,n)=>{let u=r({rules2DB:l,ruleId:n});return e|(u.weaponType||0)},0)}l.d(n,{$4:function(){return c},O3:function(){return o},cF:function(){return i},o7:function(){return r},ob:function(){return t}})},1342:function(e,n,l){l.d(n,{AY:function(){return i},PU:function(){return a},cp:function(){return s},hJ:function(){return c}});var r=l(2895),u=l(5869),t=l(9651),o=l(4570);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:s,defaultSkillDB:d,heroId:p,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!s||!d||!p)return[];let y=(0,u.cK)(c,p);if(!y)return[];let T=(0,r.g)({defaultSkillDB:d,heroId:p}),w=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),m=(null==w?void 0:w.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),k=f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(s).filter(e=>e.exclusive?!m&&!k&&e.exclusive.includes(p):(0,t.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:s,defaultSkillDB:d,heroId:p,weaponId:v,skillId:f,skillXId:y}=e;if(!i||!c||!a||!s||!d||!p||!f)return!1;let T=(0,u.cK)(c,p);if(!T)return!1;let w=(0,r.g)({defaultSkillDB:d,heroId:p}),m=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),k=(null==m?void 0:m.rearmed)&&!(null==w?void 0:null===(n=w.weapon)||void 0===n?void 0:n[v]),b=y&&!(null==w?void 0:null===(l=w.skillX)||void 0===l?void 0:l[y]),g=s[f];return!!g&&(g.exclusive?!k&&!b&&g.exclusive.includes(p):(0,t.O3)({rules2DB:i,ruleId:g.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{skillDB:n,skillId:l}=e;return n&&l?n[l]:null}function s(e){let{skillDB:n,skillId:l}=e,r=a({skillDB:n,skillId:l});return r?{icon:r.icon,name:r.name}:{icon:"",name:""}}},8263:function(e,n,l){l.d(n,{Hh:function(){return c},R_:function(){return s},TZ:function(){return i},cf:function(){return a}});var r=l(2895),u=l(5869),t=l(9651),o=l(4570);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:s,defaultSkillDB:d,heroId:p,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!s||!p)return[];let y=(0,u.cK)(c,p);if(!y)return[];let T=(0,r.g)({defaultSkillDB:d,heroId:p}),w=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),m=(null==w?void 0:w.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),k=f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(s).filter(e=>e.exclusive?!m&&!k&&e.exclusive.includes(p):(0,t.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:s,defaultSkillDB:d,heroId:p,weaponId:v,specialId:f,skillXId:y}=e;if(!i||!c||!a||!s||!p||!f)return!1;let T=(0,u.cK)(c,p);if(!T)return!1;let w=(0,r.g)({defaultSkillDB:d,heroId:p}),m=(0,o.i7)({heroDB:c,weaponDB:a,heroId:p,weaponId:v}),k=(null==m?void 0:m.rearmed)&&!(null==w?void 0:null===(n=w.weapon)||void 0===n?void 0:n[v]),b=y&&!(null==w?void 0:null===(l=w.skillX)||void 0===l?void 0:l[y]),g=s[f];return!!g&&(g.exclusive?!k&&!b&&g.exclusive.includes(p):(0,t.O3)({rules2DB:i,ruleId:g.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{specialDB:n,specialId:l}=e;return n&&l?n[l]:null}function s(e){let{specialDB:n,specialId:l}=e,r=a({specialDB:n,specialId:l});return(null==r?void 0:r.name)||""}},4570:function(e,n,l){l.d(n,{CB:function(){return t},J7:function(){return d},Mf:function(){return s},Mw:function(){return o},Wu:function(){return p},fu:function(){return c},i7:function(){return i}});var r=l(5869);function u(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function t(e){let{heroDB:n,weaponDB:l,heroId:t}=e;if(!l||!n||!t)return[];let o=(0,r.cK)(n,t);if(!o)return[];let i=u(o.weaponType),c=l[i];return i?Object.values(c).filter(e=>!e.exclusive||e.exclusive.includes(t)).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}}):[]}function o(e){let{heroDB:n,weaponDB:l,heroId:t,weaponId:o}=e;if(!l||!n||!t||!o)return!1;let i=(0,r.cK)(n,t);if(!i)return!1;let c=u(i.weaponType),a=l[c];if(!c)return!1;let s=a[o];return!!s&&(!s.exclusive||s.exclusive.includes(t))}function i(e){let{heroDB:n,weaponDB:l,heroId:t,weaponId:o}=e;if(!l||!n||!o||!t)return null;let i=(0,r.cK)(n,t);if(!i)return null;let c=u(i.weaponType);return l[c][o]}function c(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u}=e,t=i({heroDB:n,weaponDB:l,heroId:r,weaponId:u});return(null==t?void 0:t.name)||""}let a={atk:"攻擊",spd:"速度",def:"防守",res:"魔防"};function s(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u}=e,t=i({heroDB:n,weaponDB:l,heroId:r,weaponId:u});return t&&t.refine?Object.entries(t.refine).filter(e=>{let[,n]=e;return!n.exclusive||n.exclusive.includes(r)}).map(e=>{let[n,l]=e,r={value:n,...l};return r.name||(r.name=a[n]||n),r.icon&&(r.icon="/skills/weapon/".concat(r.icon,".png")),!r.icon&&a[n]&&(r.icon="/skills/weapon/".concat(n,".png")),r}):[]}function d(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u,refineId:t}=e;if(!o({heroDB:n,weaponDB:l,heroId:r,weaponId:u}))return!1;let c=i({heroDB:n,weaponDB:l,heroId:r,weaponId:u});return!!c&&!!c.refine&&!!c.refine[t]&&(!c.refine[t].exclusive||c.refine[t].exclusive.includes(r))}function p(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u,refine:t}=e,o=function(e){var n;let{heroDB:l,weaponDB:r,heroId:u,weaponId:t,refine:o}=e,c=i({heroDB:l,weaponDB:r,heroId:u,weaponId:t});return null==c?void 0:null===(n=c.refine)||void 0===n?void 0:n[o]}({heroDB:n,weaponDB:l,heroId:r,weaponId:u,refine:t});return o?a[t]?{icon:t,name:a[t]}:{icon:o.icon,name:o.name}:{icon:"",name:""}}}}]);