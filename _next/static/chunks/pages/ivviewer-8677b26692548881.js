(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{497:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return a(952)}])},5019:function(e,t,a){"use strict";var s=a(5893),r=a(7294),n=a(5101),i=a.n(n);let l=[{name:"5☆",value:5},{name:"4★",value:4}];t.Z=function(e){let{rarity:t=5,minRarity:a=5,onSelect:n}=e,c=(0,r.useCallback)(e=>{n&&n(Number(e.currentTarget.value))},[n]),u=(0,r.useMemo)(()=>a<5?l:l.slice(0,1),[a]);return(0,s.jsx)("div",{className:i().raritypicker,children:u.map(e=>(0,s.jsx)("button",{onClick:c,"data-active":e.value===t,value:e.value,children:e.name},e.value))})}},952:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var s=a(5893),r=a(9008),n=a.n(r),i=a(4945),l=a(5019),c=a(6042),u=a(2451),o=a(9003),d=a(5948),h=a(7294),_=a(7683),m=a.n(_);let v=["hp","atk","spd","def","res"],x={hp:"HP",atk:"攻擊",spd:"速度",def:"防守",res:"魔防"};var j=function(e){let{stats:t,lv1Stats:a,lv40Stats:r,selectStat:n}=e,i=(0,h.useCallback)(e=>{let{dataset:t}=e.currentTarget;n(t.type,Number(t.option))},[n]);return(0,s.jsxs)("div",{className:m().container,children:[(0,s.jsxs)("div",{className:m()["stat-row"],children:[(0,s.jsx)("h3",{className:m().title,children:"屬性"}),(0,s.jsx)("h3",{className:m().title,children:"Lv1"}),(0,s.jsx)("h3",{className:m().title,children:"Lv40"})]}),v.map(e=>(0,s.jsxs)("div",{className:m()["stat-row"],children:[(0,s.jsx)("div",{className:m()["stat-name"],children:x[e]}),(0,s.jsx)("div",{className:m()["stat-picker"],children:a[e].map(a=>{let{option:r,stat:n}=a;return(0,s.jsx)("button",{className:m()["stat-button"],"data-type":e,"data-option":r,disabled:"-"===n,"data-active":r===t[e],onClick:i,children:n},r)})}),(0,s.jsx)("div",{className:m()["stat-button"],children:r[e]})]},e)),(0,s.jsx)("h3",{className:m().title,children:r.sum})]})},p=a(3513),f=a(5302),k=a(9390),b=a(3370),w=a(6981),N=a(5737);let S=e=>e+1,y=e=>e-1,C=e=>e,V=()=>"-";var I=a(4899),g=a.n(I);function M(){let{bg:e,heroId:t,onSelectHero:a,heroSelectOpen:r,triggerHeroSelectOpen:o,rarity:_,minRarity:m,onChangeRarity:v,merge:x,onChangeMerge:I,heroHeaderInfo:M,stats:Z,lv1Stats:O,lv40Stats:E,selectStat:P}=function(){let{heroDB:e}=(0,w.K)(),[t,a]=(0,h.useState)("Feh"),[s,r]=(0,h.useState)(!1),[n,i]=(0,h.useState)(5),[l,c]=(0,h.useState)(0),u=(0,h.useCallback)(()=>{r(e=>!e)},[]),o=(0,h.useCallback)(e=>{i(e)},[]),d=(0,h.useCallback)(e=>{c(e)},[]),_=(0,f.Z)("/assets/summon-stone.jpg"),m=(0,h.useMemo)(()=>e[t],[e,t]),{stats:v,selectStat:x,resetStats:j,lv1Stats:I,lv40Stats:g}=function(e){let{hero:t,rarity:a,merge:s}=e,[r,n]=(0,h.useState)({hp:1,atk:1,spd:1,def:1,res:1}),i=(0,h.useCallback)((e,t)=>{n(a=>(0,p.Uy)(a,a=>{a[e]=t}))},[]),l=(0,h.useCallback)(()=>{n({hp:1,atk:1,spd:1,def:1,res:1})},[]),{lv1Stats:c,lv40Stats:u}=(0,h.useMemo)(()=>{let e=!Object.values(r).some(e=>1!==e),n=t.stats["".concat(a,"-1")],i=t.stats["".concat(a)],l=function(e){let{heroId:t,data:a}=e,s="Feh"===t?[V,C,V]:[y,C,S],r=[0,1,2];return Object.entries(a).reduce((e,t)=>{let[a,n]=t;return{...e,[a]:r.map((e,t)=>({option:e,stat:s[t](n)}))}},{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:t.id,data:n}),c=function(e){let{heroId:t,stats:a,neutral:s,data:r,merge:n}=e;return"Feh"===t?{...r,sum:r.hp+r.atk+r.spd+r.def+r.res}:Object.entries(a).reduce((e,t)=>{let[a,s]=t;return{...e,[a]:r[a][s||n&&1],sum:r[a][n?s||1:s]+e.sum}},{sum:n&&s?3:0})}({heroId:t.id,stats:r,neutral:e,data:i,merge:s}),u=function(e){let{stats:t,lv1Stats:a,lv40Stats:{sum:s,...r},neutral:n,merge:i}=e,l=Object.entries(a).reduce((e,a)=>{let[s,r]=a;return{...e,[s]:r[t[s]].stat}},{}),c=(0,N.h)(l),u=(0,b.s)({increaseIndexes:c,merge:i,initIV:n});return Object.entries(r).reduce((e,t)=>{let[a,s]=t;return{...e,[a]:s+u[a]}},{sum:s})}({stats:r,lv1Stats:l,lv40Stats:c,neutral:e,merge:s});return{lv1Stats:l,lv40Stats:u}},[t,r,s,a]);return{stats:r,selectStat:i,resetStats:l,lv1Stats:c,lv40Stats:u}}({hero:m,rarity:n,merge:l}),M=(0,h.useCallback)(e=>{j(),i(5),a(e),r(!1)},[j]),Z=(0,h.useMemo)(()=>{let{id:e,title:t,name:a,weaponType:s,moveType:r,rarity:n,pool:i,query:l,bst:c,faceSrc:u,blessingSrc:o,dfKey:d,dfDelta:h}=(0,k.eM)(m);return{id:e,title:t,name:a,weaponType:s,moveType:r,rarity:n,pool:i,query:l,bst:c,faceSrc:u,blessingSrc:o,dfKey:d,dfDelta:h}},[m]);return{bg:_,heroId:t,onSelectHero:M,heroSelectOpen:s,triggerHeroSelectOpen:u,rarity:n,minRarity:(0,h.useMemo)(()=>{var e;return(null==m?void 0:null===(e=m.rarity)||void 0===e?void 0:e.length)>1?4:5},[m]),onChangeRarity:o,merge:l,onChangeMerge:d,heroHeaderInfo:Z,stats:v,selectStat:x,lv1Stats:I,lv40Stats:g}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n(),{children:(0,s.jsx)("title",{children:"IV快點查"})}),(0,s.jsx)("div",{className:g().container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:(0,s.jsxs)("div",{className:g()["bg-layer"],children:[(0,s.jsxs)("div",{className:g()["header-container"],children:[(0,s.jsx)("button",{onClick:o,className:g().heroSelectButton,"aria-label":"開啟英雄選單",children:(0,s.jsx)(i.Z,{...M})}),(0,s.jsxs)("div",{className:g().heroSelect,hidden:!r,children:[(0,s.jsx)(d.Z,{onClick:o}),(0,s.jsx)(u.Z,{heroId:t,onSelect:a,noDropdown:!0})]})]}),(0,s.jsx)("h2",{className:g().title,children:"稀有度"}),(0,s.jsx)(l.Z,{rarity:_,minRarity:m,onSelect:v}),(0,s.jsx)("h2",{className:g().title,children:"突破次數"}),(0,s.jsx)(c.Z,{merge:x,onSelect:I,oneLine:!0}),(0,s.jsx)(j,{stats:Z,lv1Stats:O,lv40Stats:E,selectStat:P})]})})]})}var Z=function(){return(0,s.jsx)(o.Z,{children:(0,s.jsx)(M,{})})},O=function(){return(0,s.jsx)(Z,{})}},5101:function(e){e.exports={raritypicker:"raritypicker_raritypicker__wCStY"}},4899:function(e){e.exports={container:"IVViewer_container__lvJGL","bg-layer":"IVViewer_bg-layer__G98M7",title:"IVViewer_title__pYvBX","header-container":"IVViewer_header-container__YsUGv",heroSelect:"IVViewer_heroSelect__iKPVX",heroSelectButton:"IVViewer_heroSelectButton__eSMux"}},7683:function(e){e.exports={"stat-button":"statview_stat-button__9qA0S",title:"statview_title__zm2x3","stat-row":"statview_stat-row__PYnAr","stat-name":"statview_stat-name__kx4Jj","stat-picker":"statview_stat-picker__SS7lt","max-stat":"statview_max-stat__hz000",container:"statview_container__hQ3fY"}}},function(e){e.O(0,[381,216,267,888,774,179],function(){return e(e.s=497)}),_N_E=e.O()}]);