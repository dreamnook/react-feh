(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{5499:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/arenacalc",function(){return n(3207)}])},6688:function(e,s,n){"use strict";var t=n(5893),l=n(7294),i=n(7321),a=n(8884),r=n(5273),c=n.n(r);s.Z=function(e){let{blessing:s}=e,{src:n,name:r}=(0,l.useMemo)(()=>(0,i.QJ)(s),[s]);return(0,t.jsxs)("div",{className:c().blessing,children:[n&&(0,t.jsx)(a.Z,{src:n,loading:"lazy",width:"50px",height:"50px"}),(0,t.jsx)("div",{className:c()["blessing-name"],children:r})]})}},7963:function(e,s,n){"use strict";var t=n(5893),l=n(7294),i=n(7321),a=n(6688),r=n(3497),c=n.n(r);s.Z=e=>{let{blessing:s,selectBlessing:n}=e,r=(0,l.useCallback)(e=>{e.stopPropagation(),n(e.currentTarget.value)},[n]);return(0,t.jsxs)("div",{className:c().container,children:[(0,t.jsx)("button",{className:c()["neutral-button"],"data-active":!s,value:"",onClick:r,children:"-"}),i.YM.map(e=>(0,t.jsx)("button",{className:c()["blessing-button"],"data-active":s===e.value,value:e.value,onClick:r,children:(0,t.jsx)(a.Z,{blessing:e.value})},e.value))]})}},7902:function(e,s,n){"use strict";var t=n(5893),l=n(7294),i=n(4051),a=n(7396),r=n.n(a);s.Z=e=>{let{iv:s,selectIV:n}=e,a=(0,l.useCallback)(e=>{e.stopPropagation(),n(e.currentTarget.value)},[n]);return(0,t.jsxs)("div",{className:r().container,children:[(0,t.jsx)("button",{className:r()["neutral-button"],"data-active":!s,value:"",onClick:a,children:"-"}),i.YM.map(e=>(0,t.jsx)("button",{className:r()["iv-button"],"data-active":s===e.value,value:e.value,onClick:a,children:e.name},e.value))]})}},8692:function(e,s,n){"use strict";n.d(s,{BH:function(){return r},BQ:function(){return h},DK:function(){return _},Dx:function(){return c},Ei:function(){return x},M9:function(){return b},P9:function(){return u},VY:function(){return d},W2:function(){return a},dH:function(){return o},qn:function(){return p}});var t=n(5893),l=n(6902),i=n.n(l);function a(e){let{hidden:s,style:n,children:l}=e;return(0,t.jsx)("div",{hidden:s,className:i().container,style:n,children:l})}function r(e){let{children:s}=e;return(0,t.jsx)("div",{className:i()["title-and-content"],children:s})}function c(e){let{children:s,style:n}=e;return(0,t.jsx)("div",{className:i().title,style:n,children:s})}function o(e){let{children:s}=e;return(0,t.jsx)("div",{className:i()["title-textgroup"],children:s})}function d(e){let{children:s}=e;return(0,t.jsx)("div",{className:i().content,children:s})}function u(e){let{children:s}=e;return(0,t.jsx)("div",{className:i()["section-group"],children:s})}function b(e){let{children:s,disabled:n,onClick:l}=e;return(0,t.jsx)("button",{className:"".concat(i().button," ").concat(i().section),disabled:n,onClick:l,children:s})}function h(e){let{children:s,style:n}=e;return(0,t.jsx)("div",{className:i()["button-content"],style:n,children:s})}function p(e){let{children:s}=e;return(0,t.jsx)("div",{className:i().optionsContainer,children:s})}function x(e){let{children:s}=e;return(0,t.jsx)("div",{className:i().options,children:s})}function _(e){let{children:s}=e;return(0,t.jsx)("div",{className:i().subTitle,children:s})}},442:function(e,s,n){"use strict";n.d(s,{L6:function(){return o},S3:function(){return d},Sv:function(){return r},UD:function(){return h},Xp:function(){return b},ce:function(){return u},yI:function(){return c}});var t=n(9327),l=n(9531),i=n(1546),a=n(940);function r(e){let{fehDB:s,heroId:n}=e,t={},{rules2DB:l,heroDB:a,weaponDB:r}=s;return(0,i.CB)({rules2DB:l,heroDB:a,weaponDB:r,heroId:n}).forEach(e=>{e.last&&(t[e.sp]={id:"".concat(e.sp),label:"".concat(e.sp,"SP"),sp:e.sp},e.refine&&!e.exclusive&&(t[350]={id:"350",label:"350SP",sp:350}))}),t}function c(e){let{heroId:s,fehDB:n}=e,l={},{rules2DB:i,heroDB:a,weaponDB:r,assistDB:c,defaultSkillDB:o}=n;return(0,t.Gt)({rules2DB:i,heroDB:a,weaponDB:r,assistDB:c,defaultSkillDB:o,heroId:s,weaponId:"",skillXId:""}).forEach(e=>{e.last&&(l[e.sp]={id:"".concat(e.sp),label:"".concat(e.sp,"SP"),sp:e.sp})}),l}function o(e){let{fehDB:s,heroId:n}=e,t={},{rules2DB:i,heroDB:a,weaponDB:r,specialDB:c,defaultSkillDB:o}=s;return(0,l.TZ)({rules2DB:i,heroDB:a,weaponDB:r,defaultSkillDB:o,specialDB:c,heroId:n,weaponId:"",skillXId:""}).forEach(e=>{e.last&&(t[e.sp]={id:"".concat(e.sp),label:"".concat(e.sp,"SP"),sp:e.sp})}),t}function d(e){let{fehDB:s,skillType:n,heroId:t}=e,l={},{rules2DB:i,heroDB:r,weaponDB:c,defaultSkillDB:o}=s,d=s["".concat(n,"DB")];return(0,a.AY)({rules2DB:i,heroDB:r,weaponDB:c,defaultSkillDB:o,skillDB:d,heroId:t,weaponId:"",skillXId:""}).forEach(e=>{e.last&&(l[e.sp]={id:"".concat(e.sp),label:"".concat(e.sp,"SP"),sp:e.sp},e.bst&&(l["".concat(e.sp,"-duel")]={id:"".concat(e.sp,"-duel"),label:"".concat(e.name," (").concat(e.sp,"SP)"),sp:e.sp,bst:e.bst,bbst:e.bbst}))}),l}function u(e){let{fehDB:s,heroId:n}=e,t={},{rules2DB:l,heroDB:i,weaponDB:r,defaultSkillDB:c,sealDB:o}=s,d=(0,a.AY)({rules2DB:l,heroDB:i,weaponDB:r,defaultSkillDB:c,skillDB:o.skillB,heroId:n,weaponId:"",skillXId:""});return[...d,...(0,a.AY)({rules2DB:l,heroDB:i,weaponDB:r,defaultSkillDB:c,skillDB:o.skillB,heroId:n,weaponId:"",skillXId:""}),...(0,a.AY)({rules2DB:l,heroDB:i,weaponDB:r,defaultSkillDB:c,skillDB:o.skillC,heroId:n,weaponId:"",skillXId:""}),...(0,a.AY)({rules2DB:l,heroDB:i,weaponDB:r,defaultSkillDB:c,skillDB:o.seal,heroId:n,weaponId:"",skillXId:""})].forEach(e=>{e.last&&(t[e.sp]={id:"".concat(e.sp),label:"".concat(e.sp,"SP"),sp:e.sp})}),t}function b(e){if(!e)return[];let s=Object.values(e).filter(e=>!!e);return s.push({id:"",label:"-",sp:0}),s.sort((e,s)=>s.bst>0||e.bst>0?(s.bst||0)-(e.bst||0):s.bbst>0||e.bbst>0?(s.bbst||0)-(e.bbst||0):s.sp-e.sp)}function h(e){let{heroId:s,fehDB:n}=e,t=b(r({heroId:s,fehDB:n})),l=b(c({heroId:s,fehDB:n})),i=b(o({heroId:s,fehDB:n})),a=b(d({heroId:s,skillType:"skillA",fehDB:n})),h=b(d({heroId:s,skillType:"skillB",fehDB:n})),p=b(d({heroId:s,skillType:"skillC",fehDB:n})),x=b(u({fehDB:n,heroId:s}));return{weapon:t[0],assist:l[0],special:i[0],skillA:a[0],skillB:h[0],skillC:p[0],seal:x[0]}}},4412:function(e,s){"use strict";let n={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};s.Z=function(e){let{rarity:s=5,merge:t,bst:l,spt:i,blesser:a=0}=e,r=n[s];return 2*(150+r.base+r.float+2*t+Math.floor(l/5)+Math.floor(i/100)+4*a)}},3207:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return V}});var t=n(5893),l=n(9008),i=n.n(l),a=n(8053),r=n(7774),c=n(3983),o=n(7294),d=e=>(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{transform:"rotate(180deg)"},...e,children:[(0,t.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}),u=n(8237),b=n(1200),h=n(1887),p=n(4412),x=n(4051),_=n(7321),j=n(1123),k=n(8884),g=n(8397),v=n.n(g),f=function(e){let{openHeroPicker:s,openIVPicker:n,openMergePicker:l,openSkillPicker:i,openBlessingPicker:a,openChosenPicker:r,onClickMax:c,heroInfo:o,iv:d,merge:u,bless:b,chosen:h,arenaSkillStateMap:p,totalSp:g,unitArenaScore:f}=e,m="Feh"===o.id;return(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{className:v().heroButton,onClick:s,children:(0,t.jsx)(j.Z,{...o})}),(0,t.jsxs)("button",{className:v().sectionButton,value:"weapon",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),(0,t.jsx)("span",{children:"武器"}),(0,t.jsx)("span",{children:p.weapon.label})]}),(0,t.jsxs)("button",{className:v().sectionButton,value:"assist",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),(0,t.jsx)("span",{children:"輔助"}),(0,t.jsx)("span",{children:p.assist.label})]}),(0,t.jsxs)("button",{className:v().sectionButton,value:"special",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),(0,t.jsx)("span",{children:"奧義"}),(0,t.jsx)("span",{children:p.special.label})]}),(0,t.jsxs)("button",{className:v().sectionButton,value:"skillA",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),(0,t.jsx)("span",{children:"A技能"}),(0,t.jsx)("span",{children:p.skillA.label})]}),(0,t.jsxs)("button",{className:v().sectionButton,value:"skillB",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),(0,t.jsx)("span",{children:"B技能"}),(0,t.jsx)("span",{children:p.skillB.label})]}),(0,t.jsxs)("button",{className:v().sectionButton,value:"skillC",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),(0,t.jsx)("span",{children:"C技能"}),(0,t.jsx)("span",{children:p.skillC.label})]}),(0,t.jsxs)("button",{className:v().sectionButton,value:"seal",onClick:i,disabled:m,children:[(0,t.jsx)(k.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),(0,t.jsx)("span",{children:"聖印"}),(0,t.jsx)("span",{children:p.seal.label})]}),(0,t.jsxs)("div",{className:v().blessingAndChosen,children:[(0,t.jsxs)("button",{value:"bless",onClick:a,disabled:m||!!o.blesser,children:[(0,t.jsx)("span",{children:"祝福"}),(0,t.jsx)("span",{children:(0,_.S5)(o.blessing||b)})]}),(0,t.jsxs)("button",{value:"chosen",onClick:r,disabled:m,children:[(0,t.jsx)("span",{children:"救世"}),(0,t.jsx)("span",{children:h?"賦予":"-"})]})]}),(0,t.jsxs)("div",{className:v().ivAndMerge,children:[(0,t.jsxs)("button",{value:"iv",onClick:n,disabled:m,children:[(0,t.jsx)("span",{children:"IV"}),(0,t.jsx)("span",{children:(0,x.Zx)(d)})]}),(0,t.jsxs)("button",{value:"merge",onClick:l,disabled:m,children:[(0,t.jsx)("span",{children:"突破"}),(0,t.jsx)("span",{children:u||null})]})]}),(0,t.jsxs)("div",{className:v().summarySection,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"SP"}),(0,t.jsx)("span",{children:g})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"鬥技分"}),(0,t.jsx)("span",{children:f})]})]}),(0,t.jsx)("div",{className:v().maxScore,children:(0,t.jsx)("button",{onClick:c,disabled:m,children:"MAX"})})]})},m=n(6785),C=n(8821),S=n(8692),A=function(e){let{heroId:s,onChangeHeroId:n,onClickBack:l}=e;return(0,t.jsxs)("div",{className:v().unitPicker,children:[(0,t.jsxs)(S.Dx,{children:[(0,t.jsx)(C.Z,{onClick:l}),"英雄"]}),(0,t.jsx)(m.Z,{heroId:s,onSelect:n,noDropdown:!0,menuClassName:v().menu})]})},N=n(442);function B(e){let{skillType:s}=e;switch(s){default:return null;case"weapon":return(0,t.jsx)(t.Fragment,{children:"武器"});case"assist":return(0,t.jsx)(t.Fragment,{children:"輔助"});case"special":return(0,t.jsx)(t.Fragment,{children:"奧義"});case"skillA":return(0,t.jsx)(t.Fragment,{children:"A技能"});case"skillB":return(0,t.jsx)(t.Fragment,{children:"B技能"});case"skillC":return(0,t.jsx)(t.Fragment,{children:"C技能"});case"seal":return(0,t.jsx)(t.Fragment,{children:"聖印"})}}var w=function(e){let{heroId:s,skillType:n,arenaSkillState:l,onClickBack:i,onChangeSkill:a}=e,{spList:r,onClickSkillButton:c}=function(e){let{heroId:s,skillType:n,onChangeSkill:t}=e,l=(0,u.K)();return{spList:(0,o.useMemo)(()=>{let e;return"weapon"===n&&(e=(0,N.Sv)({fehDB:l,heroId:s})),"assist"===n&&(e=(0,N.yI)({fehDB:l,heroId:s})),"special"===n&&(e=(0,N.L6)({fehDB:l,heroId:s})),("skillA"===n||"skillB"===n||"skillC"===n)&&(e=(0,N.S3)({fehDB:l,skillType:n,heroId:s})),"seal"===n&&(e=(0,N.ce)({fehDB:l,heroId:s})),(0,N.Xp)(e)},[l,s,n]),onClickSkillButton:(0,o.useCallback)(e=>{let s=e.currentTarget.dataset.id,n=e.currentTarget.dataset.label;t({id:s,label:n,sp:+e.currentTarget.dataset.sp,bst:+e.currentTarget.dataset.bst||void 0,bbst:+e.currentTarget.dataset.bbst||void 0})},[t])}}({heroId:s,skillType:n,onChangeSkill:a});return(0,t.jsxs)("div",{children:[(0,t.jsxs)(S.Dx,{children:[(0,t.jsx)(C.Z,{onClick:i}),(0,t.jsx)(B,{skillType:n})]}),(0,t.jsx)("div",{className:v().spList,children:r.map(e=>(0,t.jsx)("button",{type:"button",value:e.id,disabled:e.id===(null==l?void 0:l.id),"data-active":e.id===(null==l?void 0:l.id),"data-id":e.id,"data-label":e.label,"data-sp":e.sp,"data-bst":e.bst,"data-bbst":e.bbst,onClick:c,children:e.label},e.id))})]})},y=n(7902),I=function(e){let{iv:s,onChangeIV:n,onClickBack:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(S.Dx,{children:[(0,t.jsx)(C.Z,{onClick:l}),"IV"]}),(0,t.jsx)("div",{style:{margin:"0 0.25em"},children:(0,t.jsx)(y.Z,{iv:s,selectIV:n})})]})},Z=n(3474),M=function(e){let{merge:s,onChangeMerge:n,onClickBack:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(S.Dx,{children:[(0,t.jsx)(C.Z,{onClick:l}),"突破"]}),(0,t.jsx)(Z.Z,{merge:s,onSelect:n})]})},P=n(7963),T=function(e){let{blessing:s,onChangeBlessing:n,onClickBack:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(S.Dx,{children:[(0,t.jsx)(C.Z,{onClick:l}),"祝福"]}),(0,t.jsx)(P.Z,{blessing:s,selectBlessing:n})]})},E=function(e){let{chosen:s,onChangeChosen:n,onClickBack:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(S.Dx,{children:[(0,t.jsx)(C.Z,{onClick:l}),"救世"]}),(0,t.jsxs)("div",{className:v().spList,children:[(0,t.jsx)("button",{type:"button",value:"+",disabled:s,"data-active":s,onClick:()=>{n(!0)},children:"賦予"}),(0,t.jsx)("button",{type:"button",value:"-",disabled:!s,"data-active":!s,onClick:()=>{n(!1)},children:"-"})]})]})},D=function(e){let{unitId:s,onChangeScore:n,blesserMap:l}=e,{view:i,heroId:a,heroInfo:r,iv:c,merge:d,bless:x,chosen:_,arenaSkillStateMap:j,totalSp:k,unitArenaScore:g,openHeroPicker:v,openIVPicker:m,openMergePicker:C,openSkillPicker:S,openBlessingPicker:B,openChosenPicker:y,onChangeHeroId:Z,onChangeIV:P,onChangeMerge:D,onChangeSkill:F,onChangeBlessing:L,onChangeChosen:U,onClickMax:X,onClickBack:O}=function(e){let{unitId:s,onChangeScore:n,blesserMap:t}=e,{heroDB:l,dragonflowersDB:i,assistDB:a,resplendentDB:r}=(0,u.K)(),c=(0,u.K)(),[d,x]=(0,o.useState)(""),[_,j]=(0,o.useState)("Feh"),[k,g]=(0,o.useState)(""),[v,f]=(0,o.useState)(0),[m,C]=(0,o.useState)(""),[S,A]=(0,o.useState)(!1),[B,w]=(0,o.useState)({weapon:{id:"",label:"",sp:0},assist:{id:"",label:"",sp:0},special:{id:"",label:"",sp:0},skillA:{id:"",label:"",sp:0},skillB:{id:"",label:"",sp:0},skillC:{id:"",label:"",sp:0},seal:{id:"",label:"",sp:0}}),y=(0,o.useMemo)(()=>(0,b.gO)({heroDB:l,dragonflowersDB:i,assistDB:a,resplendentDB:r,heroId:_}),[a,i,l,_,r]),I=(0,o.useMemo)(()=>{let e=(0,b.cK)(l,_),s=(0,h.f)({stats:e.stats,rarity:5,iv:k,merge:v,aided:"aided"===e.pool,entwined:"entwined"===e.pool});return{...y,...s.stats}},[l,_,k,v,y]),Z=(0,o.useMemo)(()=>(0,N.UD)({heroId:_,fehDB:c}),[_,c]),M=(0,o.useCallback)(()=>{x("hero")},[]),P=(0,o.useCallback)(()=>{x("iv")},[]),T=(0,o.useCallback)(()=>{x("merge")},[]),E=(0,o.useCallback)(e=>{x(e.currentTarget.value)},[]),D=(0,o.useCallback)(()=>{x("blessing")},[]),F=(0,o.useCallback)(()=>{x("chosen")},[]),L=(0,o.useCallback)(()=>{x("")},[]),U=(0,o.useCallback)(e=>{j(e),C(""),x(""),w({weapon:{id:"",label:"",sp:0},assist:{id:"",label:"",sp:0},special:{id:"",label:"",sp:0},skillA:{id:"",label:"",sp:0},skillB:{id:"",label:"",sp:0},skillC:{id:"",label:"",sp:0},seal:{id:"",label:"",sp:0}})},[]),X=(0,o.useCallback)(e=>{g(e),x("")},[]),O=(0,o.useCallback)(e=>{f(e),x("")},[]),V=(0,o.useCallback)(e=>{w(s=>({...s,[d]:{...e}})),x("")},[d]),Y=(0,o.useCallback)(e=>{C(e),x("")},[]),W=(0,o.useCallback)(e=>{A(e),x("")},[]),K=(0,o.useCallback)(()=>{w(Z),A(!0)},[Z]),q=(0,o.useMemo)(()=>Object.values(B).reduce((e,s)=>e+s.sp,0),[B]),z=(0,o.useMemo)(()=>{if("Feh"===I.id)return 0;let e=S?220:0,s=I.bst||0;return Object.values(B).forEach(n=>{s=Math.max(s,(I.blesser?n.bbst:n.bst)||0,e)}),s=s||0,(0,p.Z)({merge:v,bst:s,spt:q})},[I.id,I.bst,I.blesser,S,B,v,q]);(0,o.useEffect)(()=>{I.blesser&&C(I.blessing)},[I.blesser,I.blessing]),(0,o.useEffect)(()=>{s&&n({unitId:s,score:z,blessing:I.blessing||m,blesser:I.blesser})},[m,I.blesser,I.blessing,n,z,s]);let H=(0,o.useMemo)(()=>!I.blesser&&m&&t[m]?z+8*t[m]:z,[I.blesser,t,m,z]);return{view:d,heroId:_,heroInfo:I,iv:k,merge:v,bless:m,chosen:S,arenaSkillStateMap:B,totalSp:q,unitArenaScore:H,openHeroPicker:M,openIVPicker:P,openMergePicker:T,openSkillPicker:E,openBlessingPicker:D,openChosenPicker:F,onChangeHeroId:U,onChangeIV:X,onChangeMerge:O,onChangeSkill:V,onChangeBlessing:Y,onChangeChosen:W,onClickBack:L,onClickMax:K}}({unitId:s,onChangeScore:n,blesserMap:l}),V=["weapon","assist","special","skillA","skillB","skillC","seal"].includes(i);return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{hidden:""!==i,children:(0,t.jsx)(f,{heroInfo:r,iv:c,merge:d,bless:x,chosen:_,arenaSkillStateMap:j,totalSp:k,unitArenaScore:g,openHeroPicker:v,openIVPicker:m,openMergePicker:C,openSkillPicker:S,openBlessingPicker:B,openChosenPicker:y,onClickMax:X})}),(0,t.jsx)("div",{hidden:"hero"!==i,children:(0,t.jsx)(A,{heroId:a,onClickBack:O,onChangeHeroId:Z})}),(0,t.jsx)("div",{hidden:"iv"!==i,children:(0,t.jsx)(I,{iv:c,onChangeIV:P,onClickBack:O})}),(0,t.jsx)("div",{hidden:"merge"!==i,children:(0,t.jsx)(M,{merge:d,onChangeMerge:D,onClickBack:O})}),(0,t.jsx)("div",{hidden:"blessing"!==i,children:(0,t.jsx)(T,{blessing:r.blessing||x,onChangeBlessing:L,onClickBack:O})}),(0,t.jsx)("div",{hidden:"chosen"!==i,children:(0,t.jsx)(E,{chosen:_,onChangeChosen:U,onClickBack:O})}),(0,t.jsx)("div",{hidden:!V,children:(0,t.jsx)(w,{skillType:i,heroId:a,onClickBack:O,onChangeSkill:F,arenaSkillState:j[i]})})]})},F=n(8825),L=n.n(F),U=function(){let[e,s]=(0,o.useState)({1:{score:0,blessing:"",blesser:""},2:{score:0,blessing:"",blesser:""},3:{score:0,blessing:"",blesser:""},4:{score:0,blessing:"",blesser:""}}),n=(0,o.useCallback)(e=>{let{unitId:n,score:t,blessing:l,blesser:i}=e;s(e=>({...e,[n]:{score:t,blessing:l,blesser:i}}))},[]),{teamScore:t,blesserMap:l}=(0,o.useMemo)(()=>{let s=0,n=0,t=0,l={},i={};if(Object.values(e).forEach(e=>{if(s+=e.score,n+=e.score||300,"legendary"===e.blesser||"chosen"===e.blesser){let s=(0,_.aG)(e.blessing);l[s]||(l[s]=0),l[s]+=1}else e.blessing&&(i[e.blessing]||(i[e.blessing]=0),i[e.blessing]+=1)}),!s)return{teamScore:"",blesserMap:l};n=2*~~(n/8),Object.keys(l).forEach(e=>{i[e]&&(t+=l[e]*i[e]*2)});let a=n+t;return a?{teamScore:"".concat(a," (").concat(a-2," - ").concat(a+12,")"),blesserMap:l}:{teamScore:"",blesserMap:l}},[e]),i=(0,o.useRef)(null),[a,r]=(0,o.useState)(!0),[c,d]=(0,o.useState)(!0),u=(0,o.useCallback)(()=>{let e=0===i.current.scrollLeft,s=i.current.scrollWidth-i.current.scrollLeft-i.current.offsetWidth;r(e),d(s<3)},[]),b=(0,o.useCallback)(()=>{let e=-i.current.offsetWidth;i.current.scrollLeft+=e,u()},[u]),h=(0,o.useCallback)(()=>{let e=+i.current.offsetWidth;i.current.scrollLeft+=e,u()},[u]);return(0,o.useEffect)(()=>{u()},[]),{onChangeScore:n,teamScore:t,blesserMap:l,containerRef:i,handleScroll:u,prevDisabled:a,onClickPrev:b,nextDisabled:c,onClickNext:h}};let X=()=>{let e=(0,a.Z)("/assets/summon-stone.jpg"),{teamScore:s,onChangeScore:n,blesserMap:l,containerRef:r,handleScroll:o,prevDisabled:u,onClickPrev:b,nextDisabled:h,onClickNext:p}=U();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"豆祭計算機"})}),(0,t.jsx)("div",{className:L().container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:(0,t.jsxs)("div",{className:L()["bg-layer"],children:[(0,t.jsxs)("div",{className:L().units,ref:r,onScroll:o,children:[(0,t.jsx)(D,{unitId:1,onChangeScore:n,blesserMap:l}),(0,t.jsx)(D,{unitId:2,onChangeScore:n,blesserMap:l}),(0,t.jsx)(D,{unitId:3,onChangeScore:n,blesserMap:l}),(0,t.jsx)(D,{unitId:4,onChangeScore:n,blesserMap:l})]}),(0,t.jsxs)("div",{className:L().scores,children:[(0,t.jsxs)("div",{hidden:!s,children:["總分: ",s]}),(0,t.jsxs)("div",{className:L().unitSwapButtons,children:[(0,t.jsx)("button",{className:L().unitPrev,onClick:b,disabled:u,"aria-label":"上一個",children:(0,t.jsx)(c.Z,{fill:"white"})}),(0,t.jsx)("button",{className:L().unitNext,onClick:p,disabled:h,"aria-label":"下一個",children:(0,t.jsx)(d,{fill:"white"})})]})]})]})})]})};var O=function(){return(0,t.jsx)(r.Z,{children:(0,t.jsx)(X,{})})},V=function(){return(0,t.jsx)(O,{})}},5273:function(e){e.exports={blessing:"blessing_blessing__blnCv","blessing-name":"blessing_blessing-name__ziDWm"}},3497:function(e){e.exports={container:"styles_container__xVglQ","neutral-button":"styles_neutral-button__3Jy3p","blessing-button":"styles_blessing-button__uTuYg"}},7396:function(e){e.exports={container:"styles_container__tZQ1M","neutral-button":"styles_neutral-button__g5gLf","iv-button":"styles_iv-button__E4oc0"}},6902:function(e){e.exports={button:"editor_button__1Aj_h","title-and-content":"editor_title-and-content__70u4A",title:"editor_title__G7mXS","title-textgroup":"editor_title-textgroup__j5Pdh",content:"editor_content__N3y0j",section:"editor_section__Gd9W0","section-group":"editor_section-group___l6ak","hero-header":"editor_hero-header__8nv2V","button-content":"editor_button-content__KL_Lj","editor-img":"editor_editor-img__JmqNm","close-button":"editor_close-button__bPesF",container:"editor_container__jmHAB",input:"editor_input__V7XSN",options:"editor_options__IAlm_",optionsContainer:"editor_optionsContainer__xApnj",skillTitle:"editor_skillTitle__76dd8",skillName:"editor_skillName__RBSFh",skillSp:"editor_skillSp__4PqOu",might:"editor_might__0oY2D",extractStats:"editor_extractStats__e5tKT",extractStat:"editor_extractStat__luCo4",subTitle:"editor_subTitle__tfF5U",spButtons:"editor_spButtons__1ZKIN",listItems:"editor_listItems__kTlQH"}},8397:function(e){e.exports={unit:"ArenaUnit_unit__4Cqi7",heroButton:"ArenaUnit_heroButton__Q6mha",sectionButton:"ArenaUnit_sectionButton__wEfM6",blessingAndChosen:"ArenaUnit_blessingAndChosen__OTak1",ivAndMerge:"ArenaUnit_ivAndMerge__UpGcZ",summarySection:"ArenaUnit_summarySection__o7_ya",section:"ArenaUnit_section__wYv8z",enhancedText:"ArenaUnit_enhancedText___QnPw",unitPicker:"ArenaUnit_unitPicker__X1qW9",menu:"ArenaUnit_menu___OuNF",spList:"ArenaUnit_spList__m0XkF",maxScore:"ArenaUnit_maxScore__G83pt"}},8825:function(e){e.exports={container:"ArenaCalc_container__gc15q","bg-layer":"ArenaCalc_bg-layer__qMAig",units:"ArenaCalc_units__Vbsdw",scores:"ArenaCalc_scores__A_hER",unitSwapButtons:"ArenaCalc_unitSwapButtons__zvTAf",unitPrev:"ArenaCalc_unitPrev__zVAlg",unitNext:"ArenaCalc_unitNext__jxbWE"}}},function(e){e.O(0,[381,26,922,949,888,774,179],function(){return e(e.s=5499)}),_N_E=e.O()}]);