_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"7H0y":function(t,e,r){t.exports={container:"IVViewer_container__RgSXZ","bg-layer":"IVViewer_bg-layer__3B7JG",title:"IVViewer_title__17Lm1","header-container":"IVViewer_header-container__3DTLG"}},"gpa+":function(t,e,r){t.exports={"stat-button":"statview_stat-button__RF9K-",title:"statview_title__1ErLN","stat-row":"statview_stat-row__2_NER","stat-name":"statview_stat-name__2mrxU","stat-picker":"statview_stat-picker__1SUDk","max-stat":"statview_max-stat__2Y2ya",container:"statview_container__3YxVj"}},nyqW:function(t,e,r){"use strict";r.r(e),r.d(e,"__N_SSG",(function(){return M}));var a=r("nKUr"),n=r("OyYD"),c=r("rePB"),s=r("g4pe"),i=r.n(s),o=r("0unf"),u=r("nBD0"),l=r("PY5n"),b=r("C5HV"),j=r("q1tI"),O=r("gpa+"),d=r.n(O),v=["hp","atk","spd","def","res"],f={hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};var p=function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats,c=t.selectStat,s=Object(j.useCallback)((function(t){var e=t.currentTarget.dataset,r=e.type,a=Number(e.option);c(r,a)}),[c]);return Object(a.jsxs)("div",{className:d.a.container,children:[Object(a.jsxs)("div",{className:d.a["stat-row"],children:[Object(a.jsx)("h3",{className:d.a.title,children:"\u5c6c\u6027"}),Object(a.jsx)("h3",{className:d.a.title,children:"Lv1"}),Object(a.jsx)("h3",{className:d.a.title,children:"Lv40"})]}),v.map((function(t){return Object(a.jsxs)("div",{className:d.a["stat-row"],children:[Object(a.jsx)("div",{className:d.a["stat-name"],children:f[t]}),Object(a.jsx)("div",{className:d.a["stat-picker"],children:r[t].map((function(r){var n=r.option,c=r.stat;return Object(a.jsx)("button",{className:d.a["stat-button"],"data-type":t,"data-option":n,disabled:"-"===c,"data-active":n===e[t],onClick:s,children:c},n)}))}),Object(a.jsx)("div",{className:d.a["stat-button"],children:n[t]})]},t)})),Object(a.jsx)("h3",{className:d.a.title,children:n.sum})]})},h=r("Ff2n"),m=r("ODXe"),y=r("rfrl"),S=r("YVe8"),_=r("I5BY"),g=r("LMuR"),w=r("ufDn");function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var k=function(t){return t+1},P=function(t){return t-1},I=function(t){return t},D=function(){return"-"};function C(t){var e=t.hero,r=t.rarity,a=t.merge,n=Object(j.useState)({hp:1,atk:1,spd:1,def:1,res:1}),s=n[0],i=n[1],o=Object(j.useCallback)((function(t,e){i((function(r){return Object(y.a)(r,(function(r){r[t]=e}))}))}),[]),u=Object(j.useCallback)((function(){i({hp:1,atk:1,spd:1,def:1,res:1})}),[]),l=Object(j.useMemo)((function(){var t=!Object.values(s).some((function(t){return 1!==t})),n=e.stats["".concat(r,"-1")],i=e.stats["".concat(r)],o=function(t){var e=t.heroId,r=t.data,a="Feh"===e?[D,I,D]:[P,I,k],n=[0,1,2];return Object.entries(r).reduce((function(t,e){var r=Object(m.a)(e,2),s=r[0],i=r[1];return N(N({},t),{},Object(c.a)({},s,n.map((function(t,e){return{option:t,stat:a[e](i)}}))))}),{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:e.id,data:n}),u=function(t){var e=t.heroId,r=t.stats,a=t.neutral,n=t.data,s=t.merge;if("Feh"===e){var i=n;return N(N({},i),{},{sum:i.hp+i.atk+i.spd+i.def+i.res})}var o=n;return Object.entries(r).reduce((function(t,e){var r,a=Object(m.a)(e,2),n=a[0],i=a[1];return N(N({},t),{},(r={},Object(c.a)(r,n,o[n][i||s&&1]),Object(c.a)(r,"sum",o[n][s?i||1:i]+t.sum),r))}),{sum:s&&a?3:0})}({heroId:e.id,stats:s,neutral:t,data:i,merge:a});return{lv1Stats:o,lv40Stats:function(t){var e=t.stats,r=t.lv1Stats,a=t.lv40Stats,n=a.sum,s=Object(h.a)(a,["sum"]),i=t.neutral,o=t.merge,u=Object.entries(r).reduce((function(t,r){var a=Object(m.a)(r,2),n=a[0],s=a[1];return N(N({},t),{},Object(c.a)({},n,s[e[n]].stat))}),{}),l=Object(w.a)(u),b=Object(g.a)(l,o,i);return Object.entries(s).reduce((function(t,e){var r=Object(m.a)(e,2),a=r[0],n=r[1];return N(N({},t),{},Object(c.a)({},a,n+b[a]))}),{sum:n})}({stats:s,lv1Stats:o,lv40Stats:u,neutral:t,merge:a})}}),[e,s,a,r]),b=l.lv1Stats,O=l.lv40Stats;return{stats:s,selectStat:o,resetStats:u,lv1Stats:b,lv40Stats:O}}var V=r("7H0y"),E=r.n(V);function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var T=function(){var t=function(){var t=Object(n.b)().heroDB,e=Object(j.useState)("Feh"),r=e[0],a=e[1],c=Object(j.useState)(5),s=c[0],i=c[1],o=Object(j.useState)(0),u=o[0],l=o[1],b=Object(j.useCallback)((function(t){i(t)}),[]),O=Object(j.useCallback)((function(t){l(t)}),[]),d=Object(S.a)("/assets/summon-stone.jpg"),v=Object(j.useMemo)((function(){return t[r]}),[t,r]),f=C({hero:v,rarity:s,merge:u}),p=f.stats,h=f.selectStat,m=f.resetStats,y=f.lv1Stats,g=f.lv40Stats,w=Object(j.useCallback)((function(t){m(),i(5),a(t)}),[m]),x=Object(j.useMemo)((function(){var t=Object(_.b)(v);return{id:t.id,title:t.title,name:t.name,weaponType:t.weaponType,moveType:t.moveType,rarity:t.rarity,pool:t.pool,query:t.query,bst:t.bst,faceSrc:t.faceSrc,blessingSrc:t.blessingSrc}}),[v]),N=Object(j.useMemo)((function(){var t;return(null===v||void 0===v||null===(t=v.rarity)||void 0===t?void 0:t.length)>1?4:5}),[v]);return{bg:d,heroId:r,onSelectHero:w,rarity:s,minRarity:N,onChangeRarity:b,merge:u,onChangeMerge:O,heroHeaderInfo:x,stats:p,selectStat:h,lv1Stats:y,lv40Stats:g}}(),e=t.bg,r=t.heroId,c=t.onSelectHero,s=t.rarity,O=t.minRarity,d=t.onChangeRarity,v=t.merge,f=t.onChangeMerge,h=t.heroHeaderInfo,m=t.stats,y=t.lv1Stats,g=t.lv40Stats,w=t.selectStat;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.a,{children:Object(a.jsx)("title",{children:"IV\u5feb\u9ede\u67e5"})}),Object(a.jsx)("div",{className:E.a.container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:Object(a.jsxs)("div",{className:E.a["bg-layer"],children:[Object(a.jsxs)("div",{className:E.a["header-container"],children:[Object(a.jsx)(b.a,{heroId:r,onSelect:c}),Object(a.jsx)(o.a,H({},h))]}),Object(a.jsx)("h2",{className:E.a.title,children:"\u7a00\u6709\u5ea6"}),Object(a.jsx)(u.a,{rarity:s,minRarity:O,onSelect:d}),Object(a.jsx)("h2",{className:E.a.title,children:"\u7a81\u7834\u6b21\u6578"}),Object(a.jsx)(l.a,{merge:v,onSelect:f}),Object(a.jsx)(p,{stats:m,lv1Stats:y,lv40Stats:g,selectStat:w})]})})]})};var M=!0;e.default=function(t){var e=t.db;return Object(a.jsx)(n.a.Provider,{value:e,children:Object(a.jsx)(T,{})})}},r3g1:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return r("nyqW")}])}},[["r3g1",0,1,2,4,5]]]);