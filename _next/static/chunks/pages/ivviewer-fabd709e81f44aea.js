(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{374:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return r(9220)}])},9220:function(t,e,r){"use strict";r.r(e),r.d(e,{__N_SSG:function(){return H},default:function(){return Z}});var n=r(5893),a=r(5452),s=r(9008),i=r(8219),c=r(1865),o=r(9365),u=r(4074),l=r(7294),f=r(4149),d=r.n(f),v=["hp","atk","spd","def","res"],h={hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};var m=function(t){var e=t.stats,r=t.lv1Stats,a=t.lv40Stats,s=t.selectStat,i=(0,l.useCallback)((function(t){var e=t.currentTarget.dataset,r=e.type,n=Number(e.option);s(r,n)}),[s]);return(0,n.jsxs)("div",{className:d().container,children:[(0,n.jsxs)("div",{className:d()["stat-row"],children:[(0,n.jsx)("h3",{className:d().title,children:"\u5c6c\u6027"}),(0,n.jsx)("h3",{className:d().title,children:"Lv1"}),(0,n.jsx)("h3",{className:d().title,children:"Lv40"})]}),v.map((function(t){return(0,n.jsxs)("div",{className:d()["stat-row"],children:[(0,n.jsx)("div",{className:d()["stat-name"],children:h[t]}),(0,n.jsx)("div",{className:d()["stat-picker"],children:r[t].map((function(r){var a=r.option,s=r.stat;return(0,n.jsx)("button",{className:d()["stat-button"],"data-type":t,"data-option":a,disabled:"-"===s,"data-active":a===e[t],onClick:i,children:s},a)}))}),(0,n.jsx)("div",{className:d()["stat-button"],children:a[t]})]},t)})),(0,n.jsx)("h3",{className:d().title,children:a.sum})]})},p=r(8172),b=r(3354),y=r(6730),S=r(2078),_=r(2278);function j(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){j(t,e,r[e])}))}return t}function w(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r,n,a={},s=Object.keys(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,a=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(o){a=!0,s=o}finally{try{n||null==c.return||c.return()}finally{if(a)throw s}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x,k=function(t){return t+1},N=function(t){return t-1},I=function(t){return t},P=function(){return"-"};function C(t){var e=t.hero,r=t.rarity,n=t.merge,a=(0,l.useState)({hp:1,atk:1,spd:1,def:1,res:1}),s=a[0],i=a[1],c=(0,l.useCallback)((function(t,e){i((function(r){return(0,p.ZP)(r,(function(r){r[t]=e}))}))}),[]),o=(0,l.useCallback)((function(){i({hp:1,atk:1,spd:1,def:1,res:1})}),[]),u=(0,l.useMemo)((function(){var t=!Object.values(s).some((function(t){return 1!==t})),a=e.stats["".concat(r,"-1")],i=e.stats["".concat(r)],c=function(t){var e=t.heroId,r=t.data,n="Feh"===e?[P,I,P]:[N,I,k],a=[0,1,2];return Object.entries(r).reduce((function(t,e){var r=O(e,2),s=r[0],i=r[1];return g({},t,j({},s,a.map((function(t,e){return{option:t,stat:n[e](i)}}))))}),{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:e.id,data:a}),o=function(t){var e=t.heroId,r=t.stats,n=t.neutral,a=t.data,s=t.merge;if("Feh"===e){var i=a;return g({},i,{sum:i.hp+i.atk+i.spd+i.def+i.res})}var c=a;return Object.entries(r).reduce((function(t,e){var r=O(e,2),n=r[0],a=r[1];return g({},t,(j(x={},n,c[n][a||s&&1]),j(x,"sum",c[n][s?a||1:a]+t.sum),x))}),{sum:s&&n?3:0})}({heroId:e.id,stats:s,neutral:t,data:i,merge:n});return{lv1Stats:c,lv40Stats:function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats.sum,a=t.neutral,s=t.merge,i=w(t.lv40Stats,["sum"]),c=Object.entries(r).reduce((function(t,r){var n=O(r,2),a=n[0];return g({},t,j({},a,n[1][e[a]].stat))}),{}),o=(0,_.h)(c),u=(0,S.s)({increaseIndexes:o,merge:s,initIV:a});return Object.entries(i).reduce((function(t,e){var r=O(e,2),n=r[0];return g({},t,j({},n,r[1]+u[n]))}),{sum:n})}({stats:s,lv1Stats:c,lv40Stats:o,neutral:t,merge:n})}}),[e,s,n,r]),f=u.lv1Stats,d=u.lv40Stats;return{stats:s,selectStat:c,resetStats:o,lv1Stats:f,lv40Stats:d}}var V=r(5522),E=r.n(V);function M(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){M(t,e,r[e])}))}return t}var R=function(){var t=function(){var t=(0,a.K)().heroDB,e=(0,l.useState)("Feh"),r=e[0],n=e[1],s=(0,l.useState)(5),i=s[0],c=s[1],o=(0,l.useState)(0),u=o[0],f=o[1],d=(0,l.useCallback)((function(t){c(t)}),[]),v=(0,l.useCallback)((function(t){f(t)}),[]),h=(0,b.Z)("/assets/summon-stone.jpg"),m=(0,l.useMemo)((function(){return t[r]}),[t,r]),p=C({hero:m,rarity:i,merge:u}),S=p.stats,_=p.selectStat,j=p.resetStats,g=p.lv1Stats,w=p.lv40Stats,O=(0,l.useCallback)((function(t){j(),c(5),n(t)}),[j]),x=(0,l.useMemo)((function(){var t=(0,y.eM)(m);return{id:t.id,title:t.title,name:t.name,weaponType:t.weaponType,moveType:t.moveType,rarity:t.rarity,pool:t.pool,query:t.query,bst:t.bst,faceSrc:t.faceSrc,blessingSrc:t.blessingSrc}}),[m]),k=(0,l.useMemo)((function(){var t;return(null===m||void 0===m||null===(t=m.rarity)||void 0===t?void 0:t.length)>1?4:5}),[m]);return{bg:h,heroId:r,onSelectHero:O,rarity:i,minRarity:k,onChangeRarity:d,merge:u,onChangeMerge:v,heroHeaderInfo:x,stats:S,selectStat:_,lv1Stats:g,lv40Stats:w}}(),e=t.bg,r=t.heroId,f=t.onSelectHero,d=t.rarity,v=t.minRarity,h=t.onChangeRarity,p=t.merge,S=t.onChangeMerge,_=t.heroHeaderInfo,j=t.stats,g=t.lv1Stats,w=t.lv40Stats,O=t.selectStat;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.default,{children:(0,n.jsx)("title",{children:"IV\u5feb\u9ede\u67e5"})}),(0,n.jsx)("div",{className:E().container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:(0,n.jsxs)("div",{className:E()["bg-layer"],children:[(0,n.jsxs)("div",{className:E()["header-container"],children:[(0,n.jsx)(u.Z,{heroId:r,onSelect:f}),(0,n.jsx)(i.Z,T({},_))]}),(0,n.jsx)("h2",{className:E().title,children:"\u7a00\u6709\u5ea6"}),(0,n.jsx)(c.Z,{rarity:d,minRarity:v,onSelect:h}),(0,n.jsx)("h2",{className:E().title,children:"\u7a81\u7834\u6b21\u6578"}),(0,n.jsx)(o.Z,{merge:p,onSelect:S}),(0,n.jsx)(m,{stats:j,lv1Stats:g,lv40Stats:w,selectStat:O})]})})]})};var H=!0,Z=function(t){var e=t.db;return(0,n.jsx)(a.Q.Provider,{value:e,children:(0,n.jsx)(R,{})})}},5522:function(t){t.exports={container:"IVViewer_container__Owtai","bg-layer":"IVViewer_bg-layer__gwOOc",title:"IVViewer_title__O5XR3","header-container":"IVViewer_header-container__MHkCX"}},4149:function(t){t.exports={"stat-button":"statview_stat-button__kW_7R",title:"statview_title__oYhWJ","stat-row":"statview_stat-row__JJPps","stat-name":"statview_stat-name__hOLIp","stat-picker":"statview_stat-picker__a5q5u","max-stat":"statview_max-stat__lAect",container:"statview_container__MIj2i"}}},function(t){t.O(0,[270,634,608,774,888,179],(function(){return e=374,t(t.s=e);var e}));var e=t.O();_N_E=e}]);