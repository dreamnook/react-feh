(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{8686:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return $r},default:function(){return ei}});var r=t(5893),i=t(9127),l=t(9008),s=t(7375),o=t(7294),a=t(6156);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(e){return(0,r.jsxs)("svg",u(u({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),{},{children:[(0,r.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,r.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=function(e){return(0,r.jsxs)("svg",h(h({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},k=t(3391),v=t(2565),x=t(5545);function g(e){var n=e.rules2DB,t=e.ruleId;return n&&t?n[t]:null}function j(e,n){return!(!e||!n)&&0===(e&n)}function m(e){var n=e.rules2DB,t=e.ruleId,r=e.moveType,i=e.colorType,l=e.weaponType,s=g({rules2DB:n,ruleId:r}),o=g({rules2DB:n,ruleId:i}),a=g({rules2DB:n,ruleId:l}),c=g({rules2DB:n,ruleId:t});return!c||!j(c.moveType,null===s||void 0===s?void 0:s.moveType)&&(!j(c.colorType,null===o||void 0===o?void 0:o.colorType)&&!j(c.weaponType,null===a||void 0===a?void 0:a.weaponType))}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function B(e){var n=e.assistDB,t=e.assist;return n&&t?n[t]:null}function w(e){var n=B({assistDB:e.assistDB,assist:e.assist});return(null===n||void 0===n?void 0:n.name)||""}function D(e){var n=e.sealDB,t=e.seal;return n&&t?n.skillA[t]?n.skillA[t]:n.skillB[t]?n.skillB[t]:n.skillC[t]?n.skillC[t]:n.seal[t]?n.seal[t]:null:null}function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e){var n=e.rules2DB,t=e.heroDB,r=e.skillDB,i=e.heroId;if(!n||!t||!r||!i)return[];var l=(0,x.cK)(t,i);return l?Object.values(r).filter((function(e){return e.exclusive?e.exclusive.includes(i):m({rules2DB:n,ruleId:e.rules,moveType:l.moveType,colorType:l.colorType,weaponType:l.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return O(O({},e),{},{query:n})})):[]}function I(e){var n=e.rules2DB,t=e.heroDB,r=e.skillDB,i=e.heroId,l=e.skillId;if(!n||!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var o=r[l];return!!o&&(o.exclusive?o.exclusive.includes(i):m({rules2DB:n,ruleId:o.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}function P(e){var n=e.skillDB,t=e.skillId;return n&&t?n[t]:null}function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e){var n=e.specialDB,t=e.special;return n&&t?n[t]:null}function T(e){var n=M({specialDB:e.specialDB,special:e.special});return(null===n||void 0===n?void 0:n.name)||""}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function N(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function R(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId;if(!t||!n||!r)return[];var i=(0,x.cK)(n,r);if(!i)return[];var l=N(i.weaponType),s=t[l];return l?Object.values(s).filter((function(e){return!e.exclusive||e.exclusive.includes(r)})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return Z(Z({},e),{},{query:n})})):[]}function H(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weaponId;if(!t||!n||!r||!i)return!1;var l=(0,x.cK)(n,r);if(!l)return!1;var s=N(l.weaponType),o=t[s];if(!s)return!1;var a=o[i];return!!a&&(!a.exclusive||a.exclusive.includes(r))}function F(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weapon;if(!t||!n||!i||!r)return null;var l=(0,x.cK)(n,r);return l?t[N(l.weaponType)][i]:null}function K(e){var n=F({heroDB:e.heroDB,weaponDB:e.weaponDB,heroId:e.heroId,weapon:e.weapon});return(null===n||void 0===n?void 0:n.name)||""}var W={atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};function L(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weapon,l=F({heroDB:n,weaponDB:t,heroId:r,weapon:i});return l&&l.refine?Object.entries(l.refine).filter((function(e){var n=(0,k.Z)(e,2)[1];return!n.exclusive||n.exclusive.includes(r)})).map((function(e){var n=(0,k.Z)(e,2),t=n[0],r=Z({value:t},n[1]);return r.name||(r.name=W[t]||t),r.icon&&(r.icon="/skills/weapon/".concat(r.icon,".png")),!r.icon&&W[t]&&(r.icon="/skills/weapon/".concat(t,".png")),r})):[]}function z(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weaponId,l=e.refineId;if(!H({heroDB:n,weaponDB:t,heroId:r,weaponId:i}))return!1;var s=F({heroDB:n,weaponDB:t,heroId:r,weapon:i});return!!(s&&s.refine&&s.refine[l])&&(!s.refine[l].exclusive||s.refine[l].exclusive.includes(r))}function V(e){var n,t=e.heroDB,r=e.weaponDB,i=e.heroId,l=e.weapon,s=e.refine,o=F({heroDB:t,weaponDB:r,heroId:i,weapon:l});return null===o||void 0===o||null===(n=o.refine)||void 0===n?void 0:n[s]}var U={atk:"atk",spd:"spd",def:"def",res:"res"};function q(e){var n=e.heroDB,t=e.weaponDB,r=e.assistDB,i=e.specialDB,l=e.skillADB,s=e.skillBDB,o=e.skillCDB,a=e.sealDB,c=e.heroId,u=e.skills;return{weapon:F({heroDB:n,weaponDB:t,heroId:c,weapon:u.weapon}),assist:B({assistDB:r,assist:u.assist}),special:M({specialDB:i,special:u.special}),skillA:P({skillDB:l,skillId:u.skillA}),skillB:P({skillDB:s,skillId:u.skillB}),skillC:P({skillDB:o,skillId:u.skillC}),seal:D({sealDB:a,seal:u.seal})}}var Y=["assist","special","skillA","skillB","skillC","seal"];var J=t(6032),Q={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var X=function(e){var n=e.rarity,t=void 0===n?5:n,r=e.merge,i=e.bst,l=e.spt,s=e.blesser,o=void 0===s?0:s,a=Q[t];return 2*(150+a.base+a.float+2*r+Math.floor(i/5)+Math.floor(l/100)+4*o)};function G(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(0,a.Z)(this,"imageData",void 0),(0,a.Z)(this,"src",void 0),(0,a.Z)(this,"loadedData",void 0),(0,a.Z)(this,"callback",void 0),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=n,this.imageData.onload=function(){t.loadedData=!0,t.callback&&t.callback(!0)},this.imageData.onerror=function(){t.loadedData=!1,t.callback&&t.callback(!1)}}var n,t,r;return n=e,(t=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&G(n.prototype,t),r&&G(n,r),e}();var ee=t(6469),ne=16,te=554,re=ee.s6;var ie=174,le=555,se=["infantry","armored","cavalry","flying"];function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ce=1,ue=43,de=85,pe=127,he=169,fe=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,n,t){return ae(ae({},e),{},(0,a.Z)({},n,34*t+1))}),{});function ke(e,n,t,r,i,l){fe[r]&&e.drawImage(n,fe[r],t,32,40,i,l,16,20)}var ve=240,xe=557,ge=[14,28,42],je=["infantry","armored","cavalry","flying"];var me=432,be=425;var ye=432,Be=425;var we=275,De=594,Ce=function(e,n,t){var r=37*t+1+De;e.drawImage(n,we,r,35,35)};var Oe=82,Se=557,Ie=[14,28,42];var Pe=112,Ae=557,_e=[14,28,42];var Me=130,Te=594,Ee=[14,28,42,56],Ze=[1e3,100,10],Ne=function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ce,l=8+Te+37*r;Ze.forEach((function(r,s){if(t>=r){var o=Math.floor(t/r%10);ke(e,n,i,o,Me+Ee[s],l)}}));var s=t%10;ke(e,n,i,s,Me+Ee[3],l)};var Re=465,He=594;function Fe(e){var n=e.context,t=e.numberAtlas,r=e.accelerate,i=e.specialCD;if(i){var l=ue;r<0&&(l=de),r>0&&(l=pe),function(e,n,t){ke(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue,t,Re,8+He+74)}(n,t,r+i,l)}}var Ke=t(629),We=206,Le=1224,ze=["#ffa0af","white","#aaf0fa"],Ve=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});var Ue=634,qe=1224,Ye={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var Je=296,Qe=876,Xe=336,Ge=992;var $e={x:460,y:530};var en=195,nn=370;function tn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function rn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tn(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ln=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"]],sn=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var on=function(e){var n=e.heroId,t=e.rarity,r=e.iv,l=e.merge,a=e.dragonflower,c=e.blessing,u=e.support,d=e.arena,p=e.resplendent,h=e.mythicBonus1,f=e.mythicBonus2,g=e.mythicBonus3,j=e.mythicBonus4,m=e.weapon,b=e.refine,y=e.assist,B=e.special,w=e.skillA,D=e.skillB,C=e.skillC,O=e.seal,S=e.lv1,I=(0,i.K)(),P=(0,o.useRef)(null),A=(0,o.useRef)(null),_=(0,o.useRef)(),M=(0,o.useRef)(),T=(0,o.useRef)(),E=(0,o.useRef)(),Z=(0,o.useRef)(),N=(0,o.useRef)(),R=(0,o.useRef)(),H=(0,o.useRef)(),F=(0,o.useRef)(),K=(0,o.useRef)(),W=(0,o.useRef)(),L=(0,o.useRef)(),z=(0,o.useRef)(),V=(0,o.useRef)(),Q=(0,o.useMemo)((function(){return(0,x.cK)(I.heroDB,n)}),[I.heroDB,n]),G=(0,o.useMemo)((function(){return{weapon:m,assist:y,special:B,skillA:w,skillB:D,skillC:C,seal:O}}),[m,y,B,w,D,C,O]),ee=Q.stats,oe=(0,o.useMemo)((function(){return function(e){var n,t,r,i,l,s,o,a,c,u=e.heroDB,d=e.weaponDB,p=e.assistDB,h=e.specialDB,f=e.skillADB,v=e.skillBDB,g=e.skillCDB,j=e.sealDB,m=e.heroId,b=e.skills,y=e.refine,B=e.rarity,w=(0,x.cK)(u,m),D=q({heroDB:u,weaponDB:d,assistDB:p,specialDB:h,skillADB:f,skillBDB:v,skillCDB:g,sealDB:j,heroId:m,skills:b}),C={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},O=0,S=(null===(n=D.special)||void 0===n?void 0:n.cd)||0;O+=(null===(t=D.weapon)||void 0===t?void 0:t.cd)||0,O+=(null===(r=D.assist)||void 0===r?void 0:r.cd)||0,O+=(null===(i=D.skillA)||void 0===i?void 0:i.cd)||0,O+=(null===(l=D.skillB)||void 0===l?void 0:l.cd)||0,O+=(null===(s=D.skillC)||void 0===s?void 0:s.cd)||0,O+=(null===(o=D.seal)||void 0===o?void 0:o.cd)||0;var I={hp:0,atk:0,spd:0,def:0,res:0},P=0,A=0;Object.entries(D).forEach((function(e){var n=(0,k.Z)(e,2),t=n[0],r=n[1];if(C[t]=(null===r||void 0===r?void 0:r.name)||"-",I.hp+=(null===r||void 0===r?void 0:r.hp)||0,I.atk+=((null===r||void 0===r?void 0:r.mt)||0)+((null===r||void 0===r?void 0:r.atk)||0),I.spd+=(null===r||void 0===r?void 0:r.spd)||0,I.def+=(null===r||void 0===r?void 0:r.def)||0,I.res+=(null===r||void 0===r?void 0:r.res)||0,P+=(null===r||void 0===r?void 0:r.sp)||0,5===B){var i=null===r||void 0===r?void 0:r.bst;w.blesser&&null!==r&&void 0!==r&&r.bbst&&(i=null===r||void 0===r?void 0:r.bbst),A=Math.max(i||0,A)}}));var _=null===(a=D.weapon)||void 0===a||null===(c=a.refine)||void 0===c?void 0:c[y];return _&&(I.hp+=_.hp||0,I.atk+=(_.mt||0)+(_.atk||0),I.spd+=_.spd||0,I.def+=_.def||0,I.res+=_.res||0,O+=_.cd||0,D.weapon.exclusive||(P+=50),5===B&&(A=Math.max(A,_.bst||0))),{names:C,stats:I,accelerate:O,specialCD:S,spt:P,bst:A}}({heroDB:I.heroDB,weaponDB:I.weaponDB,assistDB:I.assistDB,specialDB:I.specialDB,skillADB:I.skillADB,skillBDB:I.skillBDB,skillCDB:I.skillCDB,sealDB:I.sealDB,skills:G,heroId:n,refine:b,rarity:t})}),[G,n,b,t,I.heroDB,I.weaponDB,I.assistDB,I.specialDB,I.skillADB,I.skillBDB,I.skillCDB,I.sealDB]),ae=(0,o.useMemo)((function(){return(0,J.f)({rarity:t,stats:ee,iv:r,merge:l,support:u,skillStats:oe.stats,lv1:S,arena:d,dragonflower:a,resplendent:p,mythicBonus1:h,mythicBonus2:f,mythicBonus3:g,mythicBonus4:j})}),[t,ee,r,l,u,oe,S,d,a,p,h,f,g,j]),pe=(0,o.useMemo)((function(){return X({rarity:t,merge:l,bst:Math.max(ae.bst,oe.bst,Q.bst||0),spt:oe.spt})}),[t,l,ae.bst,oe.bst,oe.spt,Q]),fe=(0,o.useRef)({}),Me=(0,o.useCallback)((function(){if(P.current){var e=fe.current,n=e.background,t=e.foreground,r=e.foreground2,i=e.portrait,l=e.rarityAtlas,o=e.weaponTypeAtlas,a=e.moveTypeAtlas,c=e.dragonflowerAtlas,u=e.supportAtlas,d=e.blessingAtlas,p=e.numberAtlas,h=e.weaponIcon,f=e.assistIcon,v=e.specialIcon,x=e.textA,g=e.textB,j=e.textC,m=e.textS,b=e.arenaIcon,y=e.skillAIcon,B=e.skillBIcon,w=e.skillCIcon,D=e.sealIcon,C=e.resplendentIcon,O=_.current,S=O.title,I=O.name,U=O.weaponType,q=O.moveType,Y=!!_.current.blessing||!!H.current,J=P.current.getContext("2d");J.clearRect(0,0,540,960),n.loaded&&function(e){var n=e.context,t=e.background;e.support?n.drawImage(t,540,0,540,960,0,0,540,960):n.drawImage(t,0,0,540,960,0,0,540,960)}({context:J,background:n.image,support:F.current}),i.loaded&&function(e){var n=e.context,t=e.portrait;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:J,portrait:i.image}),t.loaded&&function(e){var n=e.context,t=e.foreground;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:J,foreground:t.image}),r.loaded&&function(e){var n=e.context,t=e.foreground2;e.dragonflower?n.drawImage(t,0,50,540,50,0,542,540,50):n.drawImage(t,0,0,540,50,0,542,540,50)}({context:J,foreground2:r.image,dragonflower:R.current}),l.loaded&&function(e){var n=e.context,t=e.rarityAtlas;switch(e.rarity){case 5:n.drawImage(t,0,0,153,40,42,380,153,40);break;case 4:n.drawImage(t,0,41,153,40,42,380,153,40)}}({context:J,rarityAtlas:l.image,rarity:E.current}),o.loaded&&function(e){var n=e.context,t=e.weaponTypeAtlas,r=e.weaponType,i=re.indexOf(r);i>-1&&n.drawImage(t,56*i,0,56,55,ne,te,28,28)}({context:J,weaponTypeAtlas:o.image,weaponType:U}),a.loaded&&function(e){var n=e.context,t=e.moveTypeAtlas,r=e.moveType,i=se.indexOf(r);i>-1&&n.drawImage(t,56*i,0,52,52,ie,le,26,26)}({context:J,moveTypeAtlas:a.image,moveType:q}),c.loaded&&p.loaded&&function(e){var n=e.context,t=e.dragonflowerAtlas,r=e.numberAtlas,i=e.moveType,l=e.dragonflower;if(l){var s=je.indexOf(i);s>-1&&n.drawImage(t,0,58*s,64,58,216,546,48,44);var o=0,a=ue;ke(n,r,a,"+",ve+ge[0],xe),o+=1,l>9&&(ke(n,r,a,Math.floor(l/10),ve+ge[o],xe),o+=1),ke(n,r,a,l%10,ve+ge[o],xe)}}({context:J,dragonflowerAtlas:c.image,numberAtlas:p.image,moveType:q,dragonflower:R.current}),u.loaded&&function(e){var n=e.context,t=e.supportAtlas,r=e.support,i=e.hasBlessing?108:0;r&&n.drawImage(t,me-i,be,108,115)}({context:J,supportAtlas:u.image,support:F.current,hasBlessing:Y}),d.loaded&&function(e){var n=e.context,t=e.blessingAtlas;n.drawImage(t,ye,Be,108,115)}({context:J,blessingAtlas:d.image}),p.loaded&&(!function(e){var n=e.context,t=e.numberAtlas,r=e.lv1?1:40,i=0;r>9&&ke(n,t,ue,4,Oe+Ie[i],Se),ke(n,t,ue,r%10,Oe+Ie[i+=1],Se)}({context:J,numberAtlas:p.image,lv1:z.current}),function(e){var n=e.context,t=e.numberAtlas,r=e.merge;if(!(r<=0)){var i=0,l=r>9?he:ue;ke(n,t,l,"+",Pe+_e[0],Ae),i+=1,r>9&&(ke(n,t,l,1,Pe+_e[i],Ae),i+=1),ke(n,t,l,r%10,Pe+_e[i],Ae)}}({context:J,numberAtlas:p.image,merge:N.current}),function(e){var n=e.context,t=e.numberAtlas,r=e.stats,i=e.score,l=e.sbst,s=e.bst;Object.values(r).forEach((function(e,r){Ne(n,t,e,r,ce)}));var o=l>s?de:he;Ne(n,t,s,5,he),Ne(n,t,i,6,o)}(rn({context:J,numberAtlas:p.image,score:V.current,sbst:Math.max(M.current.bst||0,_.current.bst||0)},T.current)),Fe({context:J,numberAtlas:p.image,accelerate:M.current.accelerate,specialCD:M.current.specialCD})),function(e){var n=e.context,t=e.weaponIcon,r=e.assistIcon,i=e.specialIcon,l=e.textA,s=e.textB,o=e.textC,a=e.textS,c=e.skillAIcon,u=e.skillBIcon,d=e.skillCIcon,p=e.sealIcon;t.loaded&&Ce(n,t.image,0),r.loaded&&Ce(n,r.image,1),i.loaded&&Ce(n,i.image,2),c.loaded&&Ce(n,c.image,3),n.drawImage(l.image,we+20,De+112+18,18,18),u.loaded&&Ce(n,u.image,4),n.drawImage(s.image,we+20,De+149+18,18,18),d.loaded&&Ce(n,d.image,5),n.drawImage(o.image,we+20,De+186+18,18,18),p.loaded&&Ce(n,p.image,6),n.drawImage(a.image,we+20,De+223+18,18,18)}({context:J,weaponIcon:h,assistIcon:f,specialIcon:v,textA:x,textB:g,textC:j,textS:m,skillAIcon:y,skillBIcon:B,skillCIcon:w,sealIcon:D}),A.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var n=e.canvas,t=e.iv,r=e.merge,i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#101010",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8;var l=(0,Ke.$r)(t),s=l.boon,o=l.bane,a={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};a[s]+=1,a[o]-=1,a[o]=r>0?1:a[o],Ve.forEach((function(e,n){var t=(0,k.Z)(e,2),r=t[0],l=t[1],s=Le+74*n;i.fillStyle=ze[a[r]],i.strokeText(l,We,s),i.fillText(l,We,s)}))}({canvas:A.current,iv:Z.current,merge:N.current}),function(e){var n=e.canvas,t=e.refine,r=e.weapon,i=(0,s.Z)(e,["canvas","refine","weapon"]),l=n.getContext("2d");l.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",l.textAlign="left",l.textBaseline="middle",l.lineJoin="round",l.lineWidth=8,l.strokeStyle="#101010",l.fillStyle=t&&"-"!==t?"lime":"white";var o=Ue+("-"===r?4:0),a=qe;l.strokeText(r,o,a),l.fillText(r,o,a),l.fillStyle="white",Object.keys(i).forEach((function(e){var n=i[e],t=qe+74*Ye[e],r="-"===n?4:0;l.strokeText(n,Ue+r,t),l.fillText(n,Ue+r,t)}))}(rn({canvas:A.current,refine:L.current},M.current.names)),function(e){var n=e.canvas,t=e.title,r=e.name,i=n.getContext("2d");i.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#220d00",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeText(t,Je,Qe),i.fillText(t,Je,Qe),i.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",i.strokeText(r,Xe,Ge),i.fillText(r,Xe,Ge)}({canvas:A.current,title:S,name:I}),K.current&&b&&function(e){var n=e.context,t=e.arenaIcon;n.drawImage(t,$e.x,$e.y,50,49)}({context:J,arenaIcon:b.image}),W.current&&C&&function(e){var n=e.context,t=e.resplendentIcon;n.drawImage(t,en,nn,64,63)}({context:J,resplendentIcon:C.image}),J.drawImage(A.current,0,0,540,960)}}),[]);(0,o.useEffect)((function(){A.current=document.createElement("canvas"),A.current.width=1080,A.current.height=1920}),[]),(0,o.useEffect)((function(){ln.forEach((function(e){var n=(0,k.Z)(e,2),t=n[0],r=n[1];fe.current[t]=new $(Me),fe.current[t].load((0,v.Z)(r))}))}),[fe,Me]),(0,o.useEffect)((function(){var e=function(e){var n=e.resplendentDB,t=e.heroId;return e.enable&&null!==n&&void 0!==n&&n.includes(t)?"".concat(t,"(R)"):t}({resplendentDB:I.resplendentDB,heroId:Q.id,enable:p});fe.current.portrait.load((0,v.Z)("/portraits/".concat(e,".png")));var n=function(e){var n=e.heroDB,t=e.weaponDB,r=e.assistDB,i=e.specialDB,l=e.skillADB,s=e.skillBDB,o=e.skillCDB,a=e.sealDB,c=e.heroId,u=e.skills,d=e.refine,p=q({heroDB:n,weaponDB:t,assistDB:r,specialDB:i,skillADB:l,skillBDB:s,skillCDB:o,sealDB:a,heroId:c,skills:u}),h={};if(Y.forEach((function(e){var n=p[e];h[e]=(null===n||void 0===n?void 0:n.icon)&&"/skills/".concat(n.icon)})),d&&"-"!==d){var f,k,v,x=U[d]||(null===(f=p.weapon)||void 0===f||null===(k=f.refine)||void 0===k||null===(v=k[d])||void 0===v?void 0:v.icon);x&&(h.weapon="/skills/weapon/".concat(x,".png"))}return h}({heroDB:I.heroDB,weaponDB:I.weaponDB,assistDB:I.assistDB,specialDB:I.specialDB,skillADB:I.skillADB,skillBDB:I.skillBDB,skillCDB:I.skillCDB,sealDB:I.sealDB,skills:G,heroId:Q.id,refine:b});sn.forEach((function(e){var t=e.skillName,r=e.empty;fe.current["".concat(t,"Icon")].load((0,v.Z)("".concat(n[t]||r)))}));var t="-"!==Q.blessing&&!!Q.blessing||!!c,r=(0,v.Z)("/assets/blessing-".concat(Q.blessing||c,".png"));fe.current.blessingAtlas.load(t?r:"")}),[Q,p,G,b,c,ae,I.heroDB,I.weaponDB,I.assistDB,I.specialDB,I.skillADB,I.skillBDB,I.skillCDB,I.sealDB,I.resplendentDB]),(0,o.useEffect)((function(){_.current=Q,E.current=t,Z.current=r,N.current=l,R.current=a,H.current=c,F.current=u,K.current=d,W.current=p,L.current=b,z.current=S,V.current=pe,M.current=oe,T.current=ae,Me()}),[Q,t,r,l,a,c,u,d,p,b,S,pe,oe,ae,Me]);var Te=(0,o.useCallback)((function(){var e=P.current.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="".concat(null===Q||void 0===Q?void 0:Q.name,"-").concat(null===Q||void 0===Q?void 0:Q.title,".png"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[null===Q||void 0===Q?void 0:Q.name,null===Q||void 0===Q?void 0:Q.title]);return{canvasRef:P,triggerDownload:Te}},an=t(8929),cn=t.n(an);function un(e){var n=e.openEditor,t=(0,s.Z)(e,["openEditor"]),i=on(t),l=i.canvasRef,o=i.triggerDownload;return(0,r.jsxs)("div",{className:cn().container,children:[(0,r.jsx)("canvas",{className:cn().canvas,width:"540",height:"960",ref:l}),(0,r.jsx)("button",{className:"".concat(cn().button," ").concat(cn().download),onClick:o,children:(0,r.jsx)(d,{})}),(0,r.jsx)("button",{className:"".concat(cn().button," ").concat(cn().menu),onClick:n,children:(0,r.jsx)(f,{})})]})}var dn=(0,o.memo)(un);function pn(e){return 4===e?"4\u2605":"5\u2606"}var hn=[{name:"+\u653b\u64ca",value:"atk"},{name:"+\u901f\u5ea6",value:"spd"},{name:"+\u9632\u5b88",value:"def"},{name:"+\u9b54\u9632",value:"res"}];function fn(e){var n=hn.find((function(n){return e===n.value}));return(null===n||void 0===n?void 0:n.name)||"-"}function kn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function vn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kn(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var xn=function(e){return(0,r.jsxs)("svg",vn(vn({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,r.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),(0,r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}))},gn=t(5988);function jn(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-2629191159"}),(0,r.jsx)(gn.default,{id:"2629191159",children:["div.jsx-2629191159{width:1.5em;height:1.5em;border-radius:0.5em;background-color:white;}"]})]})}var mn=function(e){var n=e.className,t=e.checked,i=e.onChange,l=(0,o.useCallback)((function(e){i&&(e.stopPropagation(),i(!t))}),[t,i]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{role:"button",onClick:l,className:"jsx-19544621 "+(n||""),children:t&&(0,r.jsx)(jn,{})}),(0,r.jsx)(gn.default,{id:"19544621",children:["div.jsx-19544621{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:0.5em;width:2.5em;height:2.5em;font-size:1em;border:solid 1px white;background-color:transparent;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},bn=t(5492),yn=t.n(bn);var Bn=function(e){var n=e.children,t=e.checked,i=e.onChange;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("label",{className:yn().label,children:[n,(0,r.jsx)(mn,{className:yn()["label-checkbox"],checked:t,onChange:i})]})})},wn=t(5262),Dn=t(7226);var Cn=function(e){var n=e.blessing,t=(0,o.useMemo)((function(){return(0,Dn._n)(n)}),[n]),i=t.src,l=t.name;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-3356831981",children:[i&&(0,r.jsx)(wn.Z,{src:i,loading:"lazy",width:"50px",height:"50px"}),(0,r.jsx)("div",{className:"jsx-3356831981 blessing-name",children:l})]}),(0,r.jsx)(gn.default,{id:"3356831981",children:["div.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}","div.jsx-3356831981 img.jsx-3356831981{width:2.5em;height:2.5em;margin-right:0.25em;}","div.jsx-3356831981 .blessing-name.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;}"]})]})},On=t(7815),Sn=t.n(On);var In=function(e){var n=e.onClick;return(0,r.jsx)("button",{className:Sn().button,onClick:n,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})};function Pn(e){var n=e.hidden,t=e.style,i=e.children;return(0,r.jsx)("div",{hidden:n,className:Sn().container,style:t,children:i})}function An(e){var n=e.children,t=e.style;return(0,r.jsx)("div",{className:Sn().title,style:t,children:n})}function _n(e){var n=e.children;return(0,r.jsx)("div",{className:Sn()["title-textgroup"],children:n})}function Mn(e){var n=e.children;return(0,r.jsx)("div",{className:Sn().content,children:n})}function Tn(e){var n=e.children;return(0,r.jsx)("div",{className:Sn()["section-group"],children:n})}function En(e){var n=e.children,t=e.disabled,i=e.onClick;return(0,r.jsx)("button",{className:"".concat(Sn().button," ").concat(Sn().section),disabled:t,onClick:i,children:n})}function Zn(e){var n=e.children;return(0,r.jsx)("div",{className:Sn()["button-content"],children:n})}function Nn(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-3303034820",children:n}),(0,r.jsx)(gn.default,{id:"3303034820",children:["div.jsx-3303034820{overflow-y:auto;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-overflow-scrolling:touch;height:calc(100vh - 9em);}"]})]})}function Rn(e){var n=e.children;return(0,r.jsx)("div",{className:Sn().options,children:n})}function Hn(e){var n=e.children;return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function Fn(e){var n=e.children;return(0,r.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function Kn(e){var n=e.children;return(0,r.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Wn(e){var n=e.src;return(0,r.jsx)(wn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"},loading:"lazy"})}function Ln(e){var n=e.children;return(0,r.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function zn(e){var n=e.children;return(0,r.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Vn(e){var n=e.children;return(0,r.jsx)("div",{style:{display:"flex"},children:n})}function Un(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-2400499899",children:n}),(0,r.jsx)(gn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function qn(e){var n=e.cd,t=e.children;return n?(0,r.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function Yn(e){var n=e.children;return(0,r.jsx)("div",{style:{color:"salmon"},children:n})}var Jn=function(e){return e>0?"+".concat(e):"".concat(e)};function Qn(e){var n=e.children;return(0,r.jsx)("div",{style:{fontSize:"1.35em",padding:"0.25em",backgroundColor:"#1d3e53"},children:n})}var Xn=t(6234);function Gn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $n(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Gn(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var et=function(e){var n=e.heroId,t=e.resplendent,l=(0,i.K)(),s=l.heroDB,a=l.assistDB,c=l.resplendentDB,u=(0,o.useMemo)((function(){return(0,x.gO)({heroDB:s,assistDB:a,resplendentDB:c,heroId:n,noStat:!0})}),[s,a,c,n]);return(0,r.jsx)(Xn.Z,$n($n({},u),{},{faceSrc:t?u.faceSrcR:u.faceSrc}))};var nt=function(e){var n=e.heroId,t=e.weapon,l=(0,i.K)(),s=l.heroDB,o=l.weaponDB;return(0,r.jsx)(r.Fragment,{children:K({heroDB:s,weaponDB:o,heroId:n,weapon:t})})};var tt=function(e){var n=e.heroId,t=e.weapon,l=e.refine,s=(0,i.K)(),o=function(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weapon,l=e.refine,s=V({heroDB:n,weaponDB:t,heroId:r,weapon:i,refine:l});return s?W[l]?{icon:l,name:W[l]}:{icon:s.icon,name:s.name}:{icon:"",name:""}}({heroDB:s.heroDB,weaponDB:s.weaponDB,heroId:n,weapon:t,refine:l}),a=o.icon,c=o.name;return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)(Wn,{src:"/skills/weapon/".concat(a,".png")}),c]})};var rt=function(e){var n=e.assist,t=(0,i.K)().assistDB;return(0,r.jsx)(r.Fragment,{children:w({assistDB:t,assist:n})})};var it=function(e){var n=e.special,t=(0,i.K)().specialDB;return(0,r.jsx)(r.Fragment,{children:T({specialDB:t,special:n})})},lt=["skillA","skillB","skillC"];var st=function(e){var n=e.skillType,t=e.skillId,l=(0,i.K)();if(lt.includes(n)){var s=function(e){var n=P({skillDB:e.skillDB,skillId:e.skillId});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({skillDB:l["".concat(n,"DB")],skillId:t}),o=s.icon,a=s.name;return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)(Wn,{src:"/skills/".concat(o)}),a]})}if("seal"===n){var c=function(e){var n=D({sealDB:e.sealDB,seal:e.seal});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({sealDB:l.sealDB,seal:t}),u=c.icon,d=c.name;return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(Wn,{src:"/skills/".concat(u)}),d]})}return null};var ot=function(e){var n=e.hidden,t=e.heroId,l=e.rarity,a=e.iv,c=e.merge,u=e.dragonflower,d=e.blessing,p=e.support,h=e.arena,f=e.resplendent,k=e.mythicBonus1,v=e.mythicBonus2,g=e.mythicBonus3,j=e.mythicBonus4,m=e.weapon,b=e.refine,y=e.assist,B=e.special,w=e.skillA,D=e.skillB,C=e.skillC,O=e.seal,S=e.lv1,I=e.maxSkill,P=(0,s.Z)(e,["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","mythicBonus1","mythicBonus2","mythicBonus3","mythicBonus4","weapon","refine","assist","special","skillA","skillB","skillC","seal","lv1","maxSkill"]),A=function(e){var n=e.heroId,t=e.weapon,r=e.maxSkill,l=(0,i.K)(),s=l.heroDB,a=l.weaponDB,c=(0,o.useMemo)((function(){return(0,x.cK)(s,n)}),[s,n]),u=(0,o.useMemo)((function(){if("Feh"===n)return!1;var e=R({heroDB:s,weaponDB:a,heroId:n});return r?e.filter((function(e){return e.last})).length>0:e.length>0}),[s,a,n,r]),d=(0,o.useMemo)((function(){return"Feh"!==n&&L({heroDB:s,weaponDB:a,heroId:n,weapon:t}).length>0}),[s,a,n,t]),p=(0,o.useMemo)((function(){return"Feh"!==n&&"mythic"===c.pool}),[n,c]);return"Feh"===n?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1,isMythic:!1}:{hasRarity:c.rarity.length>0,hasBlessing:!!c.blessing,hasWeapon:u,hasRefine:d,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:c.blessing,isMythic:p}}({heroId:t,weapon:m,maxSkill:I}),_=A.hasRarity,M=A.hasBlessing,T=A.hasWeapon,E=A.hasRefine,Z=A.hasAssist,N=A.hasSpecial,H=A.hasSkillA,F=A.hasSkillB,K=A.hasSkillC,W=A.hasSeal,z=A.blessing,V=A.isMythic;return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsx)("button",{className:Sn()["close-button"],onClick:P.closeEditor,children:(0,r.jsx)(xn,{})}),(0,r.jsx)(An,{children:(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:"\u82f1\u96c4"}),(0,r.jsx)(Bn,{checked:S,onChange:P.toggleLv1,children:"Lv1"})]})}),(0,r.jsxs)(Mn,{children:[(0,r.jsx)("button",{className:"".concat(Sn().button," ").concat(Sn()["hero-header"]),onClick:P.openHeroPicker,children:(0,r.jsx)(et,{heroId:t,resplendent:f})}),(0,r.jsxs)(Tn,{children:[(0,r.jsxs)(En,{disabled:!_,onClick:P.openRarityPicker,children:["\u7a00\u6709\u5ea6",(0,r.jsx)(Zn,{children:pn(l)})]}),(0,r.jsxs)(En,{disabled:"Feh"===t,onClick:P.openIVPicker,children:["IV",(0,r.jsx)(Zn,{children:(0,Ke.Zx)(a)})]}),(0,r.jsxs)(En,{disabled:M,onClick:P.openBlessingPicker,children:["\u795d\u798f",(0,r.jsx)(Zn,{children:(0,r.jsx)(Cn,{blessing:z||d})})]}),(0,r.jsxs)(En,{onClick:P.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",(0,r.jsx)(Zn,{children:c?"+".concat(c):"-"})]}),(0,r.jsxs)(En,{onClick:P.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",(0,r.jsx)(Zn,{children:u?"+".concat(u):"-"})]})]})]}),(0,r.jsx)(An,{children:(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:"\u6280\u80fd"}),(0,r.jsx)(Bn,{checked:I,onChange:P.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,r.jsx)(In,{onClick:P.setAllSkillDefault})]})}),(0,r.jsxs)(Mn,{children:[(0,r.jsxs)(Tn,{children:[(0,r.jsxs)(En,{disabled:!T,onClick:P.openWeaponPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",(0,r.jsx)(Zn,{children:(0,r.jsx)(nt,{heroId:t,weapon:m})})]}),(0,r.jsxs)(En,{disabled:!E,onClick:P.openRefinePicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",(0,r.jsx)(Zn,{children:(0,r.jsx)(tt,{heroId:t,weapon:m,refine:b})})]})]}),(0,r.jsxs)(Tn,{children:[(0,r.jsxs)(En,{disabled:!Z,onClick:P.openAssistPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",(0,r.jsx)(Zn,{children:(0,r.jsx)(rt,{assist:y})})]}),(0,r.jsxs)(En,{disabled:!N,onClick:P.openSpecialPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",(0,r.jsx)(Zn,{children:(0,r.jsx)(it,{special:B})})]})]}),(0,r.jsxs)(Tn,{children:[(0,r.jsxs)(En,{disabled:!H,onClick:P.openSkillAPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",(0,r.jsx)(Zn,{children:(0,r.jsx)(st,{skillType:"skillA",skillId:w})})]}),(0,r.jsxs)(En,{disabled:!F,onClick:P.openSkillBPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",(0,r.jsx)(Zn,{children:(0,r.jsx)(st,{skillType:"skillB",skillId:D})})]}),(0,r.jsxs)(En,{disabled:!K,onClick:P.openSkillCPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",(0,r.jsx)(Zn,{children:(0,r.jsx)(st,{skillType:"skillC",skillId:C})})]}),(0,r.jsxs)(En,{disabled:!W,onClick:P.openSealPicker,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",(0,r.jsx)(Zn,{children:(0,r.jsx)(st,{skillType:"seal",skillId:O})})]})]})]}),(0,r.jsx)(An,{children:"\u5f37\u5316"}),(0,r.jsxs)(Mn,{children:[(0,r.jsxs)(Tn,{children:[(0,r.jsxs)(En,{onClick:P.toggleSupport,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"\u53ec\u559a\u5e2b\u5951\u7d04",(0,r.jsx)(mn,{checked:p})]}),(0,r.jsxs)(En,{onClick:P.toggleArena,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"\u9b25\u6280\u5834",(0,r.jsx)(mn,{checked:h})]}),(0,r.jsxs)(En,{onClick:P.toggleResplendent,children:[(0,r.jsx)(wn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"\u795e\u88dd",(0,r.jsx)(mn,{checked:f})]})]}),!V&&(0,r.jsxs)(Tn,{children:[(0,r.jsxs)(En,{disabled:"Feh"===t,onClick:P.openMythicBonus1,children:["\u795e\u968e1",(0,r.jsx)(Zn,{children:fn(k)})]}),(0,r.jsxs)(En,{disabled:"Feh"===t,onClick:P.openMythicBonus2,children:["\u795e\u968e2",(0,r.jsx)(Zn,{children:fn(v)})]}),(0,r.jsxs)(En,{disabled:"Feh"===t,onClick:P.openMythicBonus3,children:["\u795e\u968e3",(0,r.jsx)(Zn,{children:fn(g)})]}),(0,r.jsxs)(En,{disabled:"Feh"===t,onClick:P.openMythicBonus4,children:["\u795e\u968e4",(0,r.jsx)(Zn,{children:fn(j)})]})]})]})]})},at=t(9487);function ct(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ut(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ct(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ct(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var dt=function(e){return(0,r.jsxs)("svg",ut(ut({width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,r.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,r.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var pt=function(e){var n=e.onClick;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:n,className:"jsx-3918608153",children:(0,r.jsx)(dt,{fill:"white"})}),(0,r.jsx)(gn.default,{id:"3918608153",children:["button.jsx-3918608153{background-color:transparent;display:block;}"]})]})},ht=t(6117),ft=t.n(ht);var kt=function(e){var n=e.hidden,t=e.heroId,i=e.onChangeHero,l=e.onClickBack,s=e.resplendent,a=(0,o.useCallback)((function(e){i(e),l()}),[i,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),"\u82f1\u96c4"]}),(0,r.jsx)("div",{className:ft().picker,children:(0,r.jsx)(at.Z,{heroId:t,onSelect:a,noDropdown:!0,resplendent:s})})]})},vt=t(5170);var xt=function(e){var n=e.hidden,t=e.rarity,i=e.selectRarity,l=e.onClickBack,s=(0,o.useCallback)((function(e){i(e),l()}),[i,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),"\u7a00\u6709\u5ea6"]}),(0,r.jsx)(vt.Z,{rarity:t,minRarity:4,onSelect:s})]})},gt=t(2220),jt=t.n(gt),mt=function(e){var n=e.iv,t=e.selectIV,i=(0,o.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,r.jsxs)("div",{className:jt().container,children:[(0,r.jsx)("button",{className:jt()["neutral-button"],"data-active":!n,value:"",onClick:i,children:"-"}),Ke.YM.map((function(e){return(0,r.jsx)("button",{className:jt()["iv-button"],"data-active":n===e.value,value:e.value,onClick:i,children:e.name},e.value)}))]})};var bt=function(e){var n=e.hidden,t=e.iv,i=e.selectIV,l=e.onClickBack,s=(0,o.useCallback)((function(e){i(e),l()}),[i,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),"IV"]}),(0,r.jsx)(mt,{iv:t,selectIV:s})]})},yt=t(4299),Bt=t.n(yt),wt=function(e){var n=e.blessing,t=e.selectBlessing,i=(0,o.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,r.jsxs)("div",{className:Bt().container,children:[(0,r.jsx)("button",{className:Bt()["neutral-button"],"data-active":!n,value:"",onClick:i,children:"-"}),Dn.YM.map((function(e){return(0,r.jsx)("button",{className:Bt()["blessing-button"],"data-active":n===e.value,value:e.value,onClick:i,children:(0,r.jsx)(Cn,{blessing:e.value})},e.value)}))]})};var Dt=function(e){var n=e.hidden,t=e.blessing,i=e.selectBlessing,l=e.onClickBack,s=(0,o.useCallback)((function(e){i(e),l()}),[i,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),"IV"]}),(0,r.jsx)(wt,{blessing:t,selectBlessing:s})]})},Ct=t(4162);var Ot=function(e){var n=e.hidden,t=e.merge,i=e.selectMerge,l=e.onClickBack,s=(0,o.useCallback)((function(e){i(e),l()}),[i,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),"\u7a81\u7834\u6b21\u6578"]}),(0,r.jsx)(Ct.Z,{merge:t,onSelect:s})]})},St=t(6374),It=new Array(21).fill(0).map((function(e,n){return n}));var Pt=function(e){var n=e.dragonflower,t=e.onSelect;return(0,r.jsx)(St.Z,{value:n,onSelect:t,options:It})};var At=function(e){var n=e.hidden,t=e.dragonflower,i=e.selectDragonflower,l=e.onClickBack,s=(0,o.useCallback)((function(e){i(e),l()}),[i,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),"\u795e\u9f8d\u4e4b\u82b1"]}),(0,r.jsx)(Pt,{dragonflower:t,onSelect:s})]})};var _t=function(e){var n=e.active,t=e.last,i=e.hidden,l=e.value,s=e.children,o=e.onClick;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"data-active":n,value:l,onClick:o,hidden:i,className:gn.default.dynamic([["2665293084",[t?1:.618]]]),children:s}),(0,r.jsx)(gn.default,{id:"2665293084",dynamic:[t?1:.618],children:[".__jsx-style-dynamic-selector{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;text-align:left;outline:none;line-height:1.5;opacity:".concat(t?1:.618,";}"),"button.__jsx-style-dynamic-selector{padding:0.5em;margin-bottom:0.5em;border-bottom:1px solid #1d3e53;cursor:pointer;display:block;color:white;width:100%;background-color:transparent;}","button.__jsx-style-dynamic-selector:hover{background-color:#77abb7aa;}","button[hidden].__jsx-style-dynamic-selector{display:none;}","button[data-active='true'].__jsx-style-dynamic-selector{background-color:#476d7c;}"]})]})};function Mt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Tt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Mt(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Et(e){var n=e.children;return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function Zt(e){var n=e.children;return(0,r.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder"},children:n})}function Nt(e){var n=e.children;return(0,r.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Rt(e){var n=e.children;return(0,r.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Ht(e){var n=e.children;return(0,r.jsx)("div",{style:{display:"flex"},children:n})}function Ft(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-2400499899",children:n}),(0,r.jsx)(gn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Kt(e){var n=e.cd,t=e.children;return n?(0,r.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function Wt(e){var n=e.children;return(0,r.jsx)("div",{style:{color:"salmon"},children:n})}var Lt=function(e){return e>0?"+".concat(e):"".concat(e)};var zt=function(e){var n=e.active,t=e.weapon,i=e.hidden,l=e.onClick;return(0,r.jsxs)(_t,{active:n,last:t.last,hidden:i,value:t.id,onClick:l,children:[(0,r.jsxs)(Et,{children:[(0,r.jsx)(Zt,{children:t.name}),(0,r.jsxs)(Nt,{children:[t.sp,"SP"]})]}),(0,r.jsxs)(Rt,{children:["\u5a01\u529b ",t.mt]}),t.cd&&(0,r.jsxs)(Kt,{cd:t.cd,children:["\u5967\u7fa9 cd",Lt(t.cd)]}),(0,r.jsxs)(Ht,{children:[t.hp&&(0,r.jsxs)(Ft,{children:["HP ",Lt(t.hp)]}),t.atk&&(0,r.jsxs)(Ft,{children:["\u653b\u64ca ",Lt(t.atk)]}),t.spd&&(0,r.jsxs)(Ft,{children:["\u901f\u5ea6 ",Lt(t.spd)]}),t.def&&(0,r.jsxs)(Ft,{children:["\u9632\u5b88 ",Lt(t.def)]}),t.res&&(0,r.jsxs)(Ft,{children:["\u9b54\u9632 ",Lt(t.res)]})]}),t.exclusive&&(0,r.jsx)(Wt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Vt(e){var n=e.heroId,t=e.weapon,l=e.selectWeapon,a=function(e){var n=e.heroId,t=e.filter,r=e.maxSkill,l=(0,i.K)(),s=l.heroDB,a=l.weaponDB,c=(0,o.useMemo)((function(){return R({heroDB:s,weaponDB:a,heroId:n})}),[n,s,a]);return{options:(0,o.useMemo)((function(){return c.map((function(e){var n=!1;return r&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),Tt(Tt({},e),{},{hidden:n})}))}),[c,t,r])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,c=(0,o.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(_t,{active:!t,value:"",onClick:c,children:"\u7121\u6b66\u5668"}),a.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(zt,{hidden:n,weapon:i,active:t===e.id,onClick:c},e.id)}))]})}var Ut=(0,o.memo)(Vt);var qt=function(e){var n=e.hidden,t=e.onClickBack,i=e.heroId,l=e.weapon,s=e.selectWeapon,a=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,o.useState)(""),p=d[0],h=d[1],f=(0,o.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,o.useCallback)((function(e){s(e),t()}),[s,t]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:t}),(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:"\u6b66\u5668"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(Bn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,r.jsx)(In,{onClick:u})]})]})]}),(0,r.jsx)("input",{className:Sn().input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:f}),(0,r.jsx)(Nn,{children:(0,r.jsx)(Ut,{heroId:i,weapon:l,filter:p,maxSkill:a,selectWeapon:k})})]})};function Yt(e){var n=e.children;return(0,r.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function Jt(e){var n=e.src;return(0,r.jsx)(wn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function Qt(e){var n=e.children;return(0,r.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Xt(e){var n=e.children;return(0,r.jsx)("div",{style:{display:"flex"},children:n})}function Gt(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-2400499899",children:n}),(0,r.jsx)(gn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function $t(e){var n=e.cd,t=e.children;return n?(0,r.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function er(e){var n=e.children;return(0,r.jsx)("div",{style:{color:"salmon"},children:n})}var nr=function(e){return e>0?"+".concat(e):"".concat(e)};var tr=function(e){var n=e.active,t=e.hidden,i=e.refineType,l=e.refine,s=e.onClick;return(0,r.jsxs)(_t,{active:n,last:!0,hidden:t,value:i,onClick:s,children:[(0,r.jsxs)(Yt,{children:[l.icon&&(0,r.jsx)(Jt,{src:l.icon}),l.name]}),l.mt&&(0,r.jsxs)(Qt,{children:["\u5a01\u529b ",l.mt]}),l.cd&&(0,r.jsxs)($t,{cd:l.cd,children:["\u5967\u7fa9 cd",nr(l.cd)]}),(0,r.jsxs)(Xt,{children:[l.hp&&(0,r.jsxs)(Gt,{children:["HP ",nr(l.hp)]}),l.atk&&(0,r.jsxs)(Gt,{children:["\u653b\u64ca ",nr(l.atk)]}),l.spd&&(0,r.jsxs)(Gt,{children:["\u901f\u5ea6 ",nr(l.spd)]}),l.def&&(0,r.jsxs)(Gt,{children:["\u9632\u5b88 ",nr(l.def)]}),l.res&&(0,r.jsxs)(Gt,{children:["\u9b54\u9632 ",nr(l.res)]})]}),l.exclusive&&(0,r.jsx)(er,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function rr(e){var n=e.heroId,t=e.weapon,l=e.refine,a=e.selectRefine,c=function(e){var n=e.heroId,t=e.weapon,r=(0,i.K)(),l=r.heroDB,s=r.weaponDB;return{options:(0,o.useMemo)((function(){return L({heroDB:l,weaponDB:s,heroId:n,weapon:t})}),[l,s,n,t])}}({heroId:n,weapon:t}).options,u=(0,o.useCallback)((function(e){e.stopPropagation(),a(e.currentTarget.value)}),[a]);return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(_t,{active:!l,value:"",onClick:u,children:"\u7121\u935b\u9020"}),c.map((function(e){var n=e.value,t=(0,s.Z)(e,["value"]);return(0,r.jsx)(tr,{refineType:n,refine:t,active:l===n,onClick:u},n)}))]})}var ir=(0,o.memo)(rr);var lr=function(e){var n=e.hidden,t=e.onClickBack,i=e.heroId,l=e.weapon,s=e.refine,a=e.selectRefine,c=(0,o.useCallback)((function(e){a(e),t()}),[a,t]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:t}),(0,r.jsx)(_n,{children:(0,r.jsx)("span",{children:"\u935b\u9020"})})]}),(0,r.jsx)(Nn,{children:(0,r.jsx)(ir,{heroId:i,weapon:l,refine:s,selectRefine:c})})]})},sr=t(7386),or=t(1728);function ar(e){var n=e.active,t=e.hidden,i=e.skill,l=e.onClick;return(0,r.jsxs)(_t,{active:n,last:i.last,hidden:t,value:i.id,onClick:l,children:[(0,r.jsxs)(Hn,{children:[(0,r.jsxs)(Fn,{children:[i.icon&&(0,r.jsx)(Wn,{src:"/skills/".concat(i.icon)}),i.name]}),(0,r.jsxs)(Kn,{children:[i.sp,"SP"]})]}),i.mt&&(0,r.jsxs)(zn,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,r.jsxs)(qn,{cd:i.cd,children:["\u5967\u7fa9 cd",Jn(i.cd)]}),(0,r.jsxs)(Vn,{children:[i.hp&&(0,r.jsxs)(Un,{children:["HP ",Jn(i.hp)]}),i.atk&&(0,r.jsxs)(Un,{children:["\u653b\u64ca ",Jn(i.atk)]}),i.spd&&(0,r.jsxs)(Un,{children:["\u901f\u5ea6 ",Jn(i.spd)]}),i.def&&(0,r.jsxs)(Un,{children:["\u9632\u5b88 ",Jn(i.def)]}),i.res&&(0,r.jsxs)(Un,{children:["\u9b54\u9632 ",Jn(i.res)]})]}),i.exclusive&&(0,r.jsx)(Yn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var cr=(0,o.memo)(ar);function ur(e){var n=e.index,t=e.style,i=e.data,l=i.skillId,s=i.skills,o=i.onClick,a=s[n];return(0,r.jsx)("div",{style:t,children:(0,r.jsx)(cr,{active:l===a.id,skill:a,onClick:o},a.id)})}function dr(e){var n=e.heroId,t=e.skillType,l=e.skillId,s=e.selectSkill,a=e.filter,c=e.maxSkill,u=(0,o.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]),d=function(e){var n=e.heroId,t=e.skillType,r=e.filter,l=e.maxSkill,s=(0,i.K)(),a=s.rules2DB,c=s.heroDB,u=s["".concat(t,"DB")],d=(0,o.useMemo)((function(){return S({rules2DB:a,heroDB:c,skillDB:u,heroId:n})}),[a,c,u,n]);return{options:(0,o.useMemo)((function(){return d.filter((function(e){return!(l&&!e.last)&&(!r||e.query.includes(r.toLowerCase()))}))}),[d,r,l])}}({heroId:n,skillType:t,skillId:l,filter:a,maxSkill:c}).options,p=(0,o.useMemo)((function(){return{skillId:l,skills:d,onClick:u}}),[l,d,u]),h=(0,o.useCallback)((function(e){var n=d[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[d]),f=(0,o.useCallback)((function(e){return d[e].id}),[d]);return(0,r.jsx)(or.Z,{children:function(e){var n=e.width,t=e.height;return(0,r.jsx)(sr.S_,{width:n,height:t,itemCount:d.length,itemSize:h,itemData:p,itemKey:f,children:ur})}})}var pr=(0,o.memo)(dr);function hr(e){var n=e.heroId,t=e.skillType,i=e.skillId,l=e.selectSkill,s=e.filter,o=e.maxSkill;return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(_t,{active:!i,value:"",onClick:function(){return l("")},children:"\u7121\u6280\u80fd"}),(0,r.jsx)(pr,{heroId:n,skillType:t,skillId:i,selectSkill:l,filter:s,maxSkill:o})]})}var fr=(0,o.memo)(hr);var kr=function(e){var n=e.hidden,t=e.skillType,i=e.title,l=e.onClickBack,s=e.heroId,a=e.skillId,c=e.selectSkill,u=e.maxSkill,d=e.toggleMaxSkill,p=e.setDefaultSkill,h=(0,o.useState)(""),f=h[0],k=h[1],v=(0,o.useCallback)((function(e){k(e.currentTarget.value)}),[]),x=(0,o.useCallback)((function(e){c(e),l()}),[c,l]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:l}),(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:i}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(Bn,{checked:u,onChange:d,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),p&&(0,r.jsx)(In,{onClick:p})]})]})]}),(0,r.jsx)("input",{className:Sn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:v}),(0,r.jsx)(Nn,{children:(0,r.jsx)(fr,{heroId:s,skillType:t,skillId:a,selectSkill:x,filter:f,maxSkill:u})})]})};function vr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function xr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?vr(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function gr(e){var n=e.heroId,t=e.filter,r=e.maxSkill,l=(0,i.K)(),s=l.rules2DB,a=l.heroDB,c=l.assistDB,u=(0,o.useMemo)((function(){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.assistDB,i=e.heroId;if(!n||!t||!r||!i)return[];var l=(0,x.cK)(t,i);return l?Object.values(r).filter((function(e){return e.exclusive?e.exclusive.includes(i):m({rules2DB:n,ruleId:e.rules,moveType:l.moveType,colorType:l.colorType,weaponType:l.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return y(y({},e),{},{query:n})})):[]}({rules2DB:s,heroDB:a,assistDB:c,heroId:n})}),[s,a,c,n]);return{options:(0,o.useMemo)((function(){return u.map((function(e){var n=!1;return r&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),xr(xr({},e),{},{hidden:n})}))}),[u,t,r])}}function jr(e){var n=e.active,t=e.hidden,i=e.assist,l=e.onClick;return(0,r.jsxs)(_t,{active:n,last:i.last,hidden:t,value:i.id,onClick:l,children:[(0,r.jsxs)(Hn,{children:[(0,r.jsx)(Fn,{children:i.name}),(0,r.jsxs)(Ln,{children:[i.sp,"SP"]})]}),i.exclusive&&(0,r.jsx)(Yn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var mr=(0,o.memo)(jr);function br(e){var n=e.heroId,t=e.assist,i=e.selectAssist,l=gr({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,a=(0,o.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(_t,{active:!t,value:"",onClick:a,children:"\u7121\u6280\u80fd"}),l.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(mr,{hidden:n,active:t===i.id,assist:i,onClick:a},i.id)}))]})}var yr=(0,o.memo)(br);var Br=function(e){var n=e.hidden,t=e.onClickBack,i=e.heroId,l=e.assist,s=e.selectAssist,a=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,o.useState)(""),p=d[0],h=d[1],f=(0,o.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,o.useCallback)((function(e){s(e),t()}),[s,t]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:t}),(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:"\u652f\u63f4"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(Bn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,r.jsx)(In,{onClick:u})]})]})]}),(0,r.jsx)("input",{className:Sn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,r.jsx)(Nn,{children:(0,r.jsx)(yr,{heroId:i,assist:l,selectAssist:k,filter:p,maxSkill:a})})]})};function wr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Dr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?wr(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Cr(e){var n=e.heroId,t=e.filter,r=e.maxSkill,l=(0,i.K)(),s=l.rules2DB,a=l.heroDB,c=l.specialDB,u=(0,o.useMemo)((function(){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.specialDB,i=e.heroId;if(!n||!t||!r||!i)return[];var l=(0,x.cK)(t,i);return l?Object.values(r).filter((function(e){return e.exclusive?e.exclusive.includes(i):m({rules2DB:n,ruleId:e.rules,moveType:l.moveType,colorType:l.colorType,weaponType:l.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return _(_({},e),{},{query:n})})):[]}({rules2DB:s,heroDB:a,specialDB:c,heroId:n})}),[s,a,c,n]);return{options:(0,o.useMemo)((function(){return u.map((function(e){var n=!1;return r&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),Dr(Dr({},e),{},{hidden:n})}))}),[u,t,r])}}function Or(e){var n=e.active,t=e.hidden,i=e.special,l=e.onClick;return(0,r.jsxs)(_t,{active:n,last:i.last,hidden:t,value:i.id,onClick:l,children:[(0,r.jsxs)(Hn,{children:[(0,r.jsx)(Fn,{children:i.name}),(0,r.jsxs)(Ln,{children:[i.sp,"SP"]})]}),(0,r.jsxs)("div",{children:["CD ",i.cd]}),i.exclusive&&(0,r.jsx)(Yn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Sr=(0,o.memo)(Or);function Ir(e){var n=e.heroId,t=e.special,i=e.selectSpecial,l=Cr({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,a=(0,o.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(_t,{active:!t,value:"",onClick:a,children:"\u7121\u6280\u80fd"}),l.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(Sr,{hidden:n,active:t===i.id,special:i,onClick:a},i.id)}))]})}var Pr=(0,o.memo)(Ir);var Ar=function(e){var n=e.hidden,t=e.onClickBack,i=e.heroId,l=e.special,s=e.selectSpecial,a=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,o.useState)(""),p=d[0],h=d[1],f=(0,o.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,o.useCallback)((function(e){s(e),t()}),[s,t]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:t}),(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:"\u5967\u7fa9"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(Bn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,r.jsx)(In,{onClick:u})]})]})]}),(0,r.jsx)("input",{className:Sn().input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:f}),(0,r.jsx)(Nn,{children:(0,r.jsx)(Pr,{heroId:i,special:l,selectSpecial:k,filter:p,maxSkill:a})})]})};function _r(e){var n=e.active,t=e.hidden,i=e.skill,l=e.onClick;return(0,r.jsxs)(_t,{active:n,last:i.last,hidden:t,value:i.id,onClick:l,children:[(0,r.jsxs)(Hn,{children:[(0,r.jsxs)(Fn,{children:[i.icon&&(0,r.jsx)(Wn,{src:"/skills/".concat(i.icon)}),i.name]}),(0,r.jsxs)(Kn,{children:[i.sp,"SP"]})]}),i.mt&&(0,r.jsxs)(zn,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,r.jsxs)(qn,{cd:i.cd,children:["\u5967\u7fa9 cd",Jn(i.cd)]}),(0,r.jsxs)(Vn,{children:[i.hp&&(0,r.jsxs)(Un,{children:["HP ",Jn(i.hp)]}),i.atk&&(0,r.jsxs)(Un,{children:["\u653b\u64ca ",Jn(i.atk)]}),i.spd&&(0,r.jsxs)(Un,{children:["\u901f\u5ea6 ",Jn(i.spd)]}),i.def&&(0,r.jsxs)(Un,{children:["\u9632\u5b88 ",Jn(i.def)]}),i.res&&(0,r.jsxs)(Un,{children:["\u9b54\u9632 ",Jn(i.res)]})]}),i.exclusive&&(0,r.jsx)(Yn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Mr=(0,o.memo)(_r);function Tr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Er(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Tr(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Zr(e){var n=e.skill,t=e.maxSkill,r=e.filter,i=!1;return t&&!n.last&&(i=!0),!i&&r&&(i=!n.query.includes(r.toLowerCase())),Er(Er({},n),{},{hidden:i})}function Nr(e){var n=e.heroId,t=e.seal,l=e.selectSeal,a=function(e){var n=e.heroId,t=e.filter,r=e.maxSkill,l=(0,i.K)(),s=l.rules2DB,a=l.heroDB,c=l.sealDB;return{skillAOptions:(0,o.useMemo)((function(){return S({rules2DB:s,heroDB:a,skillDB:c.skillA,heroId:n}).map((function(e){return Zr({skill:e,maxSkill:r,filter:t})}))}),[s,a,c,n,t,r]),skillBOptions:(0,o.useMemo)((function(){return S({rules2DB:s,heroDB:a,skillDB:c.skillB,heroId:n}).map((function(e){return Zr({skill:e,maxSkill:r,filter:t})}))}),[s,a,c,n,t,r]),skillCOptions:(0,o.useMemo)((function(){return S({rules2DB:s,heroDB:a,skillDB:c.skillC,heroId:n}).map((function(e){return Zr({skill:e,maxSkill:r,filter:t})}))}),[s,a,c,n,t,r]),sealOptions:(0,o.useMemo)((function(){return S({rules2DB:s,heroDB:a,skillDB:c.seal,heroId:n}).map((function(e){return Zr({skill:e,maxSkill:r,filter:t})}))}),[s,a,c,n,t,r])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}),c=a.skillAOptions,u=a.skillBOptions,d=a.skillCOptions,p=a.sealOptions,h=(0,o.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(_t,{active:!t,value:"",onClick:h,children:"\u7121\u8056\u5370"}),(0,r.jsx)(Qn,{children:"A\u6280\u80fd\u8056\u5370"}),c.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(Mr,{hidden:n,active:t===i.id,skill:i,onClick:h},i.id)})),(0,r.jsx)(Qn,{children:"B\u6280\u80fd\u8056\u5370"}),u.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(Mr,{hidden:n,active:t===i.id,skill:i,onClick:h},i.id)})),(0,r.jsx)(Qn,{children:"C\u6280\u80fd\u8056\u5370"}),d.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(Mr,{hidden:n,active:t===i.id,skill:i,onClick:h},i.id)})),(0,r.jsx)(Qn,{children:"\u5c08\u7528\u8056\u5370"}),p.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,r.jsx)(Mr,{hidden:n,active:t===i.id,skill:i,onClick:h},i.id)}))]})}var Rr=(0,o.memo)(Nr);var Hr=function(e){var n=e.hidden,t=e.onClickBack,i=e.heroId,l=e.seal,s=e.selectSeal,a=e.maxSkill,c=e.toggleMaxSkill,u=(0,o.useState)(""),d=u[0],p=u[1],h=(0,o.useCallback)((function(e){p(e.currentTarget.value)}),[]),f=(0,o.useCallback)((function(e){s(e),t()}),[s,t]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:t}),(0,r.jsxs)(_n,{children:[(0,r.jsx)("span",{children:"\u8056\u5370"}),(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(Bn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),(0,r.jsx)("input",{className:Sn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:h}),(0,r.jsx)(Nn,{children:(0,r.jsx)(Rr,{heroId:i,seal:l,selectSeal:f,filter:d,maxSkill:a})})]})},Fr=t(4696),Kr=t.n(Fr),Wr=function(e){var n=e.bonus,t=e.selectBonus,i=(0,o.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,r.jsxs)("div",{className:Kr().container,children:[(0,r.jsx)("button",{className:Kr()["neutral-button"],"data-active":!n,value:"",onClick:i,children:"-"}),hn.map((function(e){return(0,r.jsx)("button",{className:Kr()["bonus-button"],"data-active":n===e.value,value:e.value,onClick:i,children:e.name},e.value)}))]})};var Lr=function(e){var n=e.hidden,t=e.title,i=e.bonus,l=e.selectBonus,s=e.onClickBack,a=(0,o.useCallback)((function(e){l(e),s()}),[l,s]);return(0,r.jsxs)(Pn,{hidden:n,children:[(0,r.jsxs)(An,{children:[(0,r.jsx)(pt,{onClick:s}),t]}),(0,r.jsx)(Wr,{bonus:i,selectBonus:a})]})};var zr=function(){var e=(0,o.useState)(""),n=e[0],t=e[1];return{view:n,openHeroPicker:(0,o.useCallback)((function(){t("hero")}),[]),openRarityPicker:(0,o.useCallback)((function(){t("rarity")}),[]),openIVPicker:(0,o.useCallback)((function(){t("iv")}),[]),openMergePicker:(0,o.useCallback)((function(){t("merge")}),[]),openDragonflowerPicker:(0,o.useCallback)((function(){t("dragonflower")}),[]),openBlessingPicker:(0,o.useCallback)((function(){t("blessing")}),[]),openWeaponPicker:(0,o.useCallback)((function(){t("weapon")}),[]),openRefinePicker:(0,o.useCallback)((function(){t("refine")}),[]),openAssistPicker:(0,o.useCallback)((function(){t("assist")}),[]),openSpecialPicker:(0,o.useCallback)((function(){t("special")}),[]),openSkillAPicker:(0,o.useCallback)((function(){t("skillA")}),[]),openSkillBPicker:(0,o.useCallback)((function(){t("skillB")}),[]),openSkillCPicker:(0,o.useCallback)((function(){t("skillC")}),[]),openSealPicker:(0,o.useCallback)((function(){t("seal")}),[]),openMythicBonus1:(0,o.useCallback)((function(){t("mythic1")}),[]),openMythicBonus2:(0,o.useCallback)((function(){t("mythic2")}),[]),openMythicBonus3:(0,o.useCallback)((function(){t("mythic3")}),[]),openMythicBonus4:(0,o.useCallback)((function(){t("mythic4")}),[]),onClickBack:(0,o.useCallback)((function(){t("")}),[])}};function Vr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ur(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Vr(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qr=function(e){var n=zr(),t=n.view,i=n.openHeroPicker,l=n.openRarityPicker,s=n.openIVPicker,o=n.openMergePicker,a=n.openDragonflowerPicker,c=n.openBlessingPicker,u=n.openWeaponPicker,d=n.openRefinePicker,p=n.openAssistPicker,h=n.openSpecialPicker,f=n.openSkillAPicker,k=n.openSkillBPicker,v=n.openSkillCPicker,x=n.openSealPicker,g=n.openMythicBonus1,j=n.openMythicBonus2,m=n.openMythicBonus3,b=n.openMythicBonus4,y=n.onClickBack;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ot,Ur(Ur({hidden:!!t},e),{},{openHeroPicker:i,openRarityPicker:l,openIVPicker:s,openMergePicker:o,openDragonflowerPicker:a,openBlessingPicker:c,openWeaponPicker:u,openRefinePicker:d,openAssistPicker:p,openSpecialPicker:h,openSkillAPicker:f,openSkillBPicker:k,openSkillCPicker:v,openSealPicker:x,openMythicBonus1:g,openMythicBonus2:j,openMythicBonus3:m,openMythicBonus4:b})),(0,r.jsx)(kt,{hidden:"hero"!==t,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:y,resplendent:e.resplendent}),(0,r.jsx)(xt,{hidden:"rarity"!==t,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:y}),(0,r.jsx)(bt,{hidden:"iv"!==t,iv:e.iv,selectIV:e.setIV,onClickBack:y}),(0,r.jsx)(Dt,{hidden:"blessing"!==t,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:y}),(0,r.jsx)(Ot,{hidden:"merge"!==t,merge:e.merge,selectMerge:e.setMerge,onClickBack:y}),(0,r.jsx)(At,{hidden:"dragonflower"!==t,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:y}),(0,r.jsx)(qt,{hidden:"weapon"!==t,onClickBack:y,heroId:e.heroId,weapon:e.weapon,selectWeapon:e.setWeapon,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,r.jsx)(lr,{hidden:"refine"!==t,onClickBack:y,heroId:e.heroId,weapon:e.weapon,refine:e.refine,selectRefine:e.setRefine}),(0,r.jsx)(Br,{hidden:"assist"!==t,onClickBack:y,heroId:e.heroId,assist:e.assist,selectAssist:e.setAssist,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),(0,r.jsx)(Ar,{title:"A\u6280\u80fd",hidden:"special"!==t,onClickBack:y,heroId:e.heroId,special:e.special,selectSpecial:e.setSpecial,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),(0,r.jsx)(kr,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==t,onClickBack:y,heroId:e.heroId,skillId:e.skillA,selectSkill:e.setSkillA,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),(0,r.jsx)(kr,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==t,onClickBack:y,heroId:e.heroId,skillId:e.skillB,selectSkill:e.setSkillB,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),(0,r.jsx)(kr,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==t,onClickBack:y,heroId:e.heroId,skillId:e.skillC,selectSkill:e.setSkillC,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),(0,r.jsx)(Hr,{hidden:"seal"!==t,onClickBack:y,heroId:e.heroId,seal:e.skillC,selectSeal:e.setSeal,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill}),(0,r.jsx)(Lr,{hidden:"mythic1"!==t,title:"\u795e\u968e1",onClickBack:y,bonus:e.mythicBonus1,selectBonus:e.setMythicBonus1}),(0,r.jsx)(Lr,{hidden:"mythic2"!==t,title:"\u795e\u968e2",onClickBack:y,bonus:e.mythicBonus2,selectBonus:e.setMythicBonus2}),(0,r.jsx)(Lr,{hidden:"mythic3"!==t,title:"\u795e\u968e3",onClickBack:y,bonus:e.mythicBonus3,selectBonus:e.setMythicBonus3}),(0,r.jsx)(Lr,{hidden:"mythic4"!==t,title:"\u795e\u968e4",onClickBack:y,bonus:e.mythicBonus4,selectBonus:e.setMythicBonus4})]})},Yr={weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""};function Jr(){var e=(0,i.K)(),n=e.rules2DB,t=e.heroDB,r=e.weaponDB,l=e.assistDB,s=e.specialDB,a=e.skillADB,c=e.skillBDB,u=e.skillCDB,d=e.sealDB,p=e.defaultSkillDB,h=(0,o.useState)("Feh"),f=h[0],k=h[1],g=(0,o.useState)(5),j=g[0],b=g[1],y=(0,o.useState)(""),B=y[0],w=y[1],D=(0,o.useState)(0),C=D[0],O=D[1],S=(0,o.useState)(0),P=S[0],A=S[1],_=(0,o.useState)(""),M=_[0],T=_[1],E=(0,o.useState)(!1),Z=E[0],N=E[1],R=(0,o.useCallback)((function(){N((function(e){return!e}))}),[]),F=(0,o.useRef)({weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""}),K=(0,o.useRef)(""),W=(0,o.useRef)(""),L=(0,o.useState)(""),V=L[0],U=L[1],q=(0,o.useState)(""),Y=q[0],J=q[1],Q=(0,o.useState)(""),X=Q[0],G=Q[1],$=(0,o.useState)(""),ee=$[0],ne=$[1],te=(0,o.useState)(""),re=te[0],ie=te[1],le=(0,o.useState)(""),se=le[0],oe=le[1],ae=(0,o.useState)(""),ce=ae[0],ue=ae[1],de=(0,o.useState)(""),pe=de[0],he=de[1],fe=(0,o.useState)(""),ke=fe[0],ve=fe[1],xe=(0,o.useState)(""),ge=xe[0],je=xe[1],me=(0,o.useState)(""),be=me[0],ye=me[1],Be=(0,o.useState)(""),we=Be[0],De=Be[1],Ce=(0,o.useCallback)((function(){U(F.current.weapon),J((function(e){return z({heroDB:t,weaponDB:r,heroId:K.current,weaponId:F.current.weapon,refineId:e})?e:""}))}),[t,r]),Oe=(0,o.useCallback)((function(e){U(e),J((function(n){return z({heroDB:t,weaponDB:r,heroId:K.current,weaponId:e,refineId:n})?n:""}))}),[t,r]),Se=(0,o.useCallback)((function(){G(F.current.assist)}),[]),Ie=(0,o.useCallback)((function(){ne(F.current.special)}),[]),Pe=(0,o.useCallback)((function(){ie(F.current.skillA)}),[]),Ae=(0,o.useCallback)((function(){oe(F.current.skillB)}),[]),_e=(0,o.useCallback)((function(){ue(F.current.skillC)}),[]),Me=(0,o.useCallback)((function(){Ce(),Se(),Ie(),Pe(),Ae(),_e()}),[Ce,Se,Ie,Pe,Ae,_e]);K.current=f,W.current=V;var Te=(0,o.useCallback)((function(e){k(e),F.current=function(e){var n=e.defaultSkillDB,t=e.heroId;if(!n||!t||!n[t])return Yr;var r=n[t],i="",l="",s="",o="",a="",c="";return r.weapon&&(i=Object.keys(r.weapon).pop()),r.assist&&(l=Object.keys(r.assist).pop()),r.special&&(s=Object.keys(r.special).pop()),r.skillA&&(o=Object.keys(r.skillA).pop()),r.skillB&&(a=Object.keys(r.skillB).pop()),r.skillC&&(c=Object.keys(r.skillC).pop()),{weapon:i,assist:l,special:s,skillA:o,skillB:a,skillC:c}}({defaultSkillDB:p,heroId:e}),U((function(){return H({heroDB:t,weaponDB:r,heroId:e,weaponId:W.current})?W.current:""})),J((function(n){return z({heroDB:t,weaponDB:r,heroId:e,weaponId:W.current,refineId:n})?n:""})),G((function(r){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.assistDB,i=e.heroId,l=e.assistId;if(!n||!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var o=r[l];return!!o&&(o.exclusive?o.exclusive.includes(i):m({rules2DB:n,ruleId:o.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}({rules2DB:n,heroDB:t,assistDB:l,heroId:e,assistId:r})?r:""})),ne((function(r){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.specialDB,i=e.heroId,l=e.specialId;if(!n||!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var o=r[l];return!!o&&(o.exclusive?o.exclusive.includes(i):m({rules2DB:n,ruleId:o.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}({rules2DB:n,heroDB:t,specialDB:s,heroId:e,specialId:r})?r:""})),ie((function(r){return I({rules2DB:n,heroDB:t,skillDB:a,heroId:e,skillId:r})?r:""})),oe((function(r){return I({rules2DB:n,heroDB:t,skillDB:c,heroId:e,skillId:r})?r:""})),ue((function(r){return I({rules2DB:n,heroDB:t,skillDB:u,heroId:e,skillId:r})?r:""})),he((function(r){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.sealDB,i=e.heroId,l=e.sealId;if(!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var o=r.skillA[l]||r.skillB[l]||r.skillC[l]||r.seal[l];return!!o&&m({rules2DB:n,ruleId:o.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType})}({rules2DB:n,heroDB:t,sealDB:d,heroId:e,sealId:r})?r:""}));var i="mythic"===(0,x.cK)(t,e).pool;ve((function(e){return i?"":e})),je((function(e){return i?"":e})),ye((function(e){return i?"":e})),De((function(e){return i?"":e}))}),[n,t,r,l,s,a,c,u,d,p]),Ee=(0,o.useState)(!1),Ze=Ee[0],Ne=Ee[1],Re=(0,o.useCallback)((function(){Ne((function(e){return!e}))}),[]),He=(0,o.useState)(!1),Fe=He[0],Ke=He[1],We=(0,o.useCallback)((function(){Ke((function(e){return!e}))}),[]),Le=(0,o.useState)(!1),ze=Le[0],Ve=Le[1],Ue=(0,o.useCallback)((function(){Ve((function(e){return!e}))}),[]),qe=(0,o.useState)(!0),Ye=qe[0],Je=qe[1],Qe=(0,o.useCallback)((function(){Je((function(e){return!e}))}),[]),Xe=(0,o.useState)(!1),Ge=Xe[0],$e=Xe[1],en=(0,o.useCallback)((function(){$e(!0)}),[]),nn=(0,o.useCallback)((function(){$e(!1)}),[]),tn=(0,v.Z)("/assets/summon-stone.jpg");return{heroId:f,onChangeHero:Te,rarity:j,setRarity:b,iv:B,setIV:w,merge:C,setMerge:O,dragonflower:P,setDragonflower:A,blessing:M,setBlessing:T,support:Z,toggleSupport:R,arena:Ze,toggleArena:Re,resplendent:Fe,toggleResplendent:We,weapon:V,setWeapon:Oe,refine:Y,setRefine:J,assist:X,setAssist:G,special:ee,setSpecial:ne,skillA:re,setSkillA:ie,skillB:se,setSkillB:oe,skillC:ce,setSkillC:ue,seal:pe,setSeal:he,mythicBonus1:ke,setMythicBonus1:ve,mythicBonus2:ge,setMythicBonus2:je,mythicBonus3:be,setMythicBonus3:ye,mythicBonus4:we,setMythicBonus4:De,setDefaultWeapon:Ce,setDefaultAssist:Se,setDefaultSpecial:Ie,setDefaultSkillA:Pe,setDefaultSkillB:Ae,setDefaultSkillC:_e,setAllSkillDefault:Me,lv1:ze,toggleLv1:Ue,maxSkill:Ye,toggleMaxSkill:Qe,bg:tn,editorIsOpen:Ge,openEditor:en,closeEditor:nn}}var Qr=t(2154),Xr=t.n(Qr);var Gr=function(){var e=Jr(),n=e.heroId,t=e.onChangeHero,i=e.rarity,s=e.setRarity,o=e.iv,a=e.setIV,c=e.merge,u=e.setMerge,d=e.dragonflower,p=e.setDragonflower,h=e.blessing,f=e.setBlessing,k=e.support,v=e.toggleSupport,x=e.arena,g=e.toggleArena,j=e.resplendent,m=e.toggleResplendent,b=e.weapon,y=e.setWeapon,B=e.refine,w=e.setRefine,D=e.assist,C=e.setAssist,O=e.special,S=e.setSpecial,I=e.skillA,P=e.setSkillA,A=e.skillB,_=e.setSkillB,M=e.skillC,T=e.setSkillC,E=e.seal,Z=e.setSeal,N=e.mythicBonus1,R=e.setMythicBonus1,H=e.mythicBonus2,F=e.setMythicBonus2,K=e.mythicBonus3,W=e.setMythicBonus3,L=e.mythicBonus4,z=e.setMythicBonus4,V=e.setDefaultWeapon,U=e.setDefaultAssist,q=e.setDefaultSpecial,Y=e.setDefaultSkillA,J=e.setDefaultSkillB,Q=e.setDefaultSkillC,X=e.setAllSkillDefault,G=e.lv1,$=e.toggleLv1,ee=e.maxSkill,ne=e.toggleMaxSkill,te=e.bg,re=e.editorIsOpen,ie=e.openEditor,le=e.closeEditor;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{children:(0,r.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),(0,r.jsx)("div",{style:{background:"url('".concat(te,"') center / cover no-repeat fixed")},children:(0,r.jsxs)("div",{className:Xr().container,children:[(0,r.jsx)("div",{className:Xr().viewer,children:(0,r.jsx)(dn,{heroId:n,rarity:i,iv:o,merge:c,dragonflower:d,blessing:h,support:k,arena:x,resplendent:j,mythicBonus1:N,mythicBonus2:H,mythicBonus3:K,mythicBonus4:L,weapon:b,refine:B,assist:D,special:O,skillA:I,skillB:A,skillC:M,seal:E,lv1:G,openEditor:ie})}),(0,r.jsx)("div",{className:Xr().editor,hidden:!re,children:(0,r.jsx)(qr,{heroId:n,onChangeHero:t,rarity:i,setRarity:s,iv:o,setIV:a,merge:c,setMerge:u,dragonflower:d,setDragonflower:p,blessing:h,setBlessing:f,support:k,toggleSupport:v,arena:x,toggleArena:g,resplendent:j,toggleResplendent:m,weapon:b,setWeapon:y,refine:B,setRefine:w,assist:D,setAssist:C,special:O,setSpecial:S,skillA:I,setSkillA:P,skillB:A,setSkillB:_,skillC:M,setSkillC:T,seal:E,setSeal:Z,mythicBonus1:N,setMythicBonus1:R,mythicBonus2:H,setMythicBonus2:F,mythicBonus3:K,setMythicBonus3:W,mythicBonus4:L,setMythicBonus4:z,setDefaultWeapon:V,setDefaultAssist:U,setDefaultSpecial:q,setDefaultSkillA:Y,setDefaultSkillB:J,setDefaultSkillC:Q,setAllSkillDefault:X,lv1:G,toggleLv1:$,maxSkill:ee,toggleMaxSkill:ne,closeEditor:le})})]})})]})};var $r=!0,ei=function(e){var n=e.db;return(0,r.jsx)(i.Q.Provider,{value:n,children:(0,r.jsx)(Gr,{})})}},532:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return t(8686)}])},4299:function(e){e.exports={container:"styles_container__1uNtQ","neutral-button":"styles_neutral-button__HXZYg","blessing-button":"styles_blessing-button__m41R8"}},6117:function(e){e.exports={picker:"heropicker_picker__1qgzU"}},2220:function(e){e.exports={container:"styles_container__3csrI","neutral-button":"styles_neutral-button__2Xm3a","iv-button":"styles_iv-button__2PgFW"}},4696:function(e){e.exports={container:"styles_container__2Avf5","neutral-button":"styles_neutral-button__3dVkm","bonus-button":"styles_bonus-button__1pzC1"}},7815:function(e){e.exports={button:"editor_button__2bje7",title:"editor_title__38fof","title-textgroup":"editor_title-textgroup__1ohLJ",content:"editor_content__1OtHF",section:"editor_section__f2th3","section-group":"editor_section-group__242gp","hero-header":"editor_hero-header__rwTMX","button-content":"editor_button-content__3umvY","editor-img":"editor_editor-img__1daYT","close-button":"editor_close-button__3FeSO",container:"editor_container__3yfjQ",input:"editor_input__16kLJ",options:"editor_options__2QYDS"}},5492:function(e){e.exports={label:"labelcheckbox_label__1h2GM","label-checkbox":"labelcheckbox_label-checkbox__3dshW"}},8929:function(e){e.exports={canvas:"UnitViewer_canvas__ZU91i",container:"UnitViewer_container__2EDNF",button:"UnitViewer_button__1Aa1C",download:"UnitViewer_download__2J1oh",menu:"UnitViewer_menu__3HcnP"}},2154:function(e){e.exports={container:"UnitEditor_container__1PG6T",viewer:"UnitEditor_viewer__2ZQQp",editor:"UnitEditor_editor__36g2J"}}},function(e){e.O(0,[744,81,758,736,774,888,179],(function(){return n=532,e(e.s=n);var n}));var n=e.O();_N_E=n}]);