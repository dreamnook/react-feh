_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{LM3C:function(t,e,r){t.exports={raritypicker:"raritypicker_raritypicker__yI9Lf"}},V8Ej:function(t,e,r){t.exports={"stat-button":"statview_stat-button__3gWIU",title:"statview_title__3cqtP","stat-row":"statview_stat-row__D5Wem","stat-name":"statview_stat-name__kUVhl","stat-picker":"statview_stat-picker__1mzBV","max-stat":"statview_max-stat__3eJMi",container:"statview_container__2GBB7"}},nyqW:function(t,e,r){"use strict";r.r(e),r.d(e,"__N_SSG",(function(){return F}));var a=r("nKUr"),n=r("OyYD"),c=r("rePB"),s=r("g4pe"),i=r.n(s),o=r("0unf"),u=r("q1tI"),l=r("LM3C"),b=r.n(l),j=[{name:"5\u2606",value:5},{name:"4\u2605",value:4}];var O=function(t){var e=t.rarity,r=void 0===e?5:e,n=t.minRarity,c=void 0===n?5:n,s=t.onSelect,i=Object(u.useCallback)((function(t){s&&s(Number(t.currentTarget.value))}),[s]),o=Object(u.useMemo)((function(){return c<5?j:j.slice(0,1)}),[c]);return Object(a.jsx)("div",{className:b.a.raritypicker,children:o.map((function(t){return Object(a.jsx)("button",{onClick:i,"data-active":t.value===r,children:t.name},t.value)}))})},v=r("PY5n"),d=r("C5HV"),f=r("peeT"),p=r.n(f),m=r("V8Ej"),h=r.n(m),y=["hp","atk","spd","def","res"],_={hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};var S=function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats,c=t.selectStat,s=Object(u.useCallback)((function(t){var e=t.currentTarget.dataset,r=e.type,a=Number(e.option);c(r,a)}),[c]);return Object(a.jsxs)("div",{className:h.a.container,children:[Object(a.jsxs)("div",{className:h.a["stat-row"],children:[Object(a.jsx)("h3",{className:h.a.title,children:"\u5c6c\u6027"}),Object(a.jsx)("h3",{className:h.a.title,children:"Lv1"}),Object(a.jsx)("h3",{className:h.a.title,children:"Lv40"})]}),y.map((function(t){return Object(a.jsxs)("div",{className:h.a["stat-row"],children:[Object(a.jsx)("div",{className:h.a["stat-name"],children:_[t]}),Object(a.jsx)("div",{className:h.a["stat-picker"],children:r[t].map((function(r){var n=r.option,c=r.stat;return Object(a.jsx)("button",{className:h.a["stat-button"],"data-type":t,"data-option":n,disabled:"-"===c,"data-active":n===e[t],onClick:s,children:c},n)}))}),Object(a.jsx)("div",{className:h.a["stat-button"],children:n[t]})]},t)})),Object(a.jsx)("h3",{className:h.a.title,children:n.sum})]})},g=r("Ff2n"),w=r("ODXe"),x=r("rfrl"),k=r("YVe8"),N=r("I5BY"),P=r("LMuR"),C=r("ufDn");function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var E=function(t){return t+1},M=function(t){return t-1},T=function(t){return t},q=function(){return"-"};function L(t){var e=t.hero,r=t.rarity,a=t.merge,n=Object(u.useState)({hp:1,atk:1,spd:1,def:1,res:1}),s=n[0],i=n[1],o=Object(u.useCallback)((function(t,e){i((function(r){return Object(x.a)(r,(function(r){r[t]=e}))}))}),[]),l=Object(u.useCallback)((function(){i({hp:1,atk:1,spd:1,def:1,res:1})}),[]),b=Object(u.useMemo)((function(){var t=!Object.values(s).some((function(t){return 1!==t})),n=e.stats["".concat(r,"-1")],i=e.stats["".concat(r)],o=function(t){var e=t.heroId,r=t.data,a="Feh"===e?[q,T,q]:[M,T,E],n=[0,1,2];return Object.entries(r).reduce((function(t,e){var r=Object(w.a)(e,2),s=r[0],i=r[1];return D(D({},t),{},Object(c.a)({},s,n.map((function(t,e){return{option:t,stat:a[e](i)}}))))}),{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:e.id,data:n}),u=function(t){var e=t.heroId,r=t.stats,a=t.neutral,n=t.data,s=t.merge;if("Feh"===e){var i=n;return D(D({},i),{},{sum:i.hp+i.atk+i.spd+i.def+i.res})}var o=n;return Object.entries(r).reduce((function(t,e){var r,a=Object(w.a)(e,2),n=a[0],i=a[1];return D(D({},t),{},(r={},Object(c.a)(r,n,o[n][i||s&&1]),Object(c.a)(r,"sum",o[n][s?i||1:i]+t.sum),r))}),{sum:s&&a?3:0})}({heroId:e.id,stats:s,neutral:t,data:i,merge:a});return{lv1Stats:o,lv40Stats:function(t){var e=t.stats,r=t.lv1Stats,a=t.lv40Stats,n=a.sum,s=Object(g.a)(a,["sum"]),i=t.neutral,o=t.merge,u=Object.entries(r).reduce((function(t,r){var a=Object(w.a)(r,2),n=a[0],s=a[1];return D(D({},t),{},Object(c.a)({},n,s[e[n]].stat))}),{}),l=Object(C.a)(u),b=Object(P.a)(l,o,i);return Object.entries(s).reduce((function(t,e){var r=Object(w.a)(e,2),a=r[0],n=r[1];return D(D({},t),{},Object(c.a)({},a,n+b[a]))}),{sum:n})}({stats:s,lv1Stats:o,lv40Stats:u,neutral:t,merge:a})}}),[e,s,a,r]),j=b.lv1Stats,O=b.lv40Stats;return{stats:s,selectStat:o,resetStats:l,lv1Stats:j,lv40Stats:O}}function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var B=function(){var t=function(){var t=Object(n.b)().heroDB,e=Object(u.useState)("Feh"),r=e[0],a=e[1],c=Object(u.useState)(5),s=c[0],i=c[1],o=Object(u.useState)(0),l=o[0],b=o[1],j=Object(u.useCallback)((function(t){i(t)}),[]),O=Object(u.useCallback)((function(t){b(t)}),[]),v=Object(k.a)("/assets/summon-stone.jpg"),d=Object(u.useMemo)((function(){return t[r]}),[t,r]),f=L({hero:d,rarity:s,merge:l}),p=f.stats,m=f.selectStat,h=f.resetStats,y=f.lv1Stats,_=f.lv40Stats,S=Object(u.useCallback)((function(t){h(),i(5),a(t)}),[h]),g=Object(u.useMemo)((function(){var t=Object(N.b)(d);return{id:t.id,title:t.title,name:t.name,weaponType:t.weaponType,moveType:t.moveType,rarity:t.rarity,pool:t.pool,query:t.query,bst:t.bst,faceSrc:t.faceSrc,blessingSrc:t.blessingSrc}}),[d]),w=Object(u.useMemo)((function(){var t;return(null===d||void 0===d||null===(t=d.rarity)||void 0===t?void 0:t.length)>1?4:5}),[d]);return{bg:v,heroId:r,onSelectHero:S,rarity:s,minRarity:w,onChangeRarity:j,merge:l,onChangeMerge:O,heroHeaderInfo:g,stats:p,selectStat:m,lv1Stats:y,lv40Stats:_}}(),e=t.bg,r=t.heroId,c=t.onSelectHero,s=t.rarity,l=t.minRarity,b=t.onChangeRarity,j=t.merge,f=t.onChangeMerge,m=t.heroHeaderInfo,h=t.stats,y=t.lv1Stats,_=t.lv40Stats,g=t.selectStat;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.a,{children:Object(a.jsx)("title",{children:"IV\u5feb\u9ede\u67e5"})}),Object(a.jsx)("div",{className:p.a.container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:Object(a.jsxs)("div",{className:p.a["bg-layer"],children:[Object(a.jsxs)("div",{className:p.a["header-container"],children:[Object(a.jsx)(d.a,{heroId:r,onSelect:c}),Object(a.jsx)(o.a,V({},m))]}),Object(a.jsx)("h2",{className:p.a.title,children:"\u7a00\u6709\u5ea6"}),Object(a.jsx)(O,{rarity:s,minRarity:l,onSelect:b}),Object(a.jsx)("h2",{className:p.a.title,children:"\u7a81\u7834\u6b21\u6578"}),Object(a.jsx)(v.a,{merge:j,onSelect:f}),Object(a.jsx)(S,{stats:h,lv1Stats:y,lv40Stats:_,selectStat:g})]})})]})};var F=!0;e.default=function(t){var e=t.db;return Object(a.jsx)(n.a.Provider,{value:e,children:Object(a.jsx)(B,{})})}},peeT:function(t,e,r){t.exports={container:"ivviewer_container__Lld5K","bg-layer":"ivviewer_bg-layer__1Osuq",title:"ivviewer_title__29yKc","header-container":"ivviewer_header-container__1-5Fp"}},r3g1:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return r("nyqW")}])}},[["r3g1",0,2,1,3,4,5]]]);