(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{497:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return s(7291)}])},494:function(e,t,s){"use strict";var a=s(5893),r=s(7294),n=s(279),i=s.n(n);let l=[{name:"5☆",value:5},{name:"4★",value:4}];t.Z=function(e){let{rarity:t=5,minRarity:s=5,onSelect:n}=e,c=(0,r.useCallback)(e=>{n&&n(Number(e.currentTarget.value))},[n]),u=(0,r.useMemo)(()=>s<5?l:l.slice(0,1),[s]);return(0,a.jsx)("div",{className:i().raritypicker,children:u.map(e=>(0,a.jsx)("button",{onClick:c,"data-active":e.value===t,value:e.value,children:e.name},e.value))})}},7291:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O}});var a=s(5893),r=s(9008),n=s.n(r),i=s(3321),l=s(494),c=s(182),u=s(2778),o=s(163),d=s(6095),h=s(7294),_=s(8962),m=s.n(_);let v=["hp","atk","spd","def","res"],x={hp:"HP",atk:"攻擊",spd:"速度",def:"防守",res:"魔防"};var j=function(e){let{stats:t,lv1Stats:s,lv40Stats:r,selectStat:n}=e,i=(0,h.useCallback)(e=>{let{dataset:t}=e.currentTarget,s=t.type,a=Number(t.option);n(s,a)},[n]);return(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsxs)("div",{className:m()["stat-row"],children:[(0,a.jsx)("h3",{className:m().title,children:"屬性"}),(0,a.jsx)("h3",{className:m().title,children:"Lv1"}),(0,a.jsx)("h3",{className:m().title,children:"Lv40"})]}),v.map(e=>(0,a.jsxs)("div",{className:m()["stat-row"],children:[(0,a.jsx)("div",{className:m()["stat-name"],children:x[e]}),(0,a.jsx)("div",{className:m()["stat-picker"],children:s[e].map(s=>{let{option:r,stat:n}=s;return(0,a.jsx)("button",{className:m()["stat-button"],"data-type":e,"data-option":r,disabled:"-"===n,"data-active":r===t[e],onClick:i,children:n},r)})}),(0,a.jsx)("div",{className:m()["stat-button"],children:r[e]})]},e)),(0,a.jsx)("h3",{className:m().title,children:r.sum})]})},p=s(8172),f=s(2204),k=s(5869),b=s(2871),w=s(6308),N=s(7355);let S=e=>e+1,C=e=>e-1,V=e=>e,y=()=>"-";var I=s(8942),g=s.n(I);function Z(){let{bg:e,heroId:t,onSelectHero:s,heroSelectOpen:r,triggerHeroSelectOpen:o,rarity:_,minRarity:m,onChangeRarity:v,merge:x,onChangeMerge:I,heroHeaderInfo:Z,stats:M,lv1Stats:O,lv40Stats:P,selectStat:E}=function(){let{heroDB:e}=(0,w.K)(),[t,s]=(0,h.useState)("Feh"),[a,r]=(0,h.useState)(!1),[n,i]=(0,h.useState)(5),[l,c]=(0,h.useState)(0),u=(0,h.useCallback)(()=>{r(e=>!e)},[]),o=(0,h.useCallback)(e=>{i(e)},[]),d=(0,h.useCallback)(e=>{c(e)},[]),_=(0,f.Z)("/assets/summon-stone.jpg"),m=(0,h.useMemo)(()=>e[t],[e,t]),{stats:v,selectStat:x,resetStats:j,lv1Stats:I,lv40Stats:g}=function(e){let{hero:t,rarity:s,merge:a}=e,[r,n]=(0,h.useState)({hp:1,atk:1,spd:1,def:1,res:1}),i=(0,h.useCallback)((e,t)=>{n(s=>(0,p.ZP)(s,s=>{s[e]=t}))},[]),l=(0,h.useCallback)(()=>{n({hp:1,atk:1,spd:1,def:1,res:1})},[]),{lv1Stats:c,lv40Stats:u}=(0,h.useMemo)(()=>{let e=!Object.values(r).some(e=>1!==e),n=t.stats["".concat(s,"-1")],i=t.stats["".concat(s)],l=function(e){let{heroId:t,data:s}=e,a="Feh"===t?[y,V,y]:[C,V,S],r=[0,1,2];return Object.entries(s).reduce((e,t)=>{let[s,n]=t;return{...e,[s]:r.map((e,t)=>({option:e,stat:a[t](n)}))}},{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:t.id,data:n}),c=function(e){let{heroId:t,stats:s,neutral:a,data:r,merge:n}=e;return"Feh"===t?{...r,sum:r.hp+r.atk+r.spd+r.def+r.res}:Object.entries(s).reduce((e,t)=>{let[s,a]=t;return{...e,[s]:r[s][a||n&&1],sum:r[s][n?a||1:a]+e.sum}},{sum:n&&a?3:0})}({heroId:t.id,stats:r,neutral:e,data:i,merge:a}),u=function(e){let{stats:t,lv1Stats:s,lv40Stats:{sum:a,...r},neutral:n,merge:i}=e,l=Object.entries(s).reduce((e,s)=>{let[a,r]=s;return{...e,[a]:r[t[a]].stat}},{}),c=(0,N.h)(l),u=(0,b.s)({increaseIndexes:c,merge:i,initIV:n}),o=Object.entries(r).reduce((e,t)=>{let[s,a]=t;return{...e,[s]:a+u[s]}},{sum:a});return o}({stats:r,lv1Stats:l,lv40Stats:c,neutral:e,merge:a});return{lv1Stats:l,lv40Stats:u}},[t,r,a,s]);return{stats:r,selectStat:i,resetStats:l,lv1Stats:c,lv40Stats:u}}({hero:m,rarity:n,merge:l}),Z=(0,h.useCallback)(e=>{j(),i(5),s(e),r(!1)},[j]),M=(0,h.useMemo)(()=>{let{id:e,title:t,name:s,weaponType:a,moveType:r,rarity:n,pool:i,query:l,bst:c,faceSrc:u,blessingSrc:o,dfKey:d,dfDelta:h}=(0,k.eM)(m);return{id:e,title:t,name:s,weaponType:a,moveType:r,rarity:n,pool:i,query:l,bst:c,faceSrc:u,blessingSrc:o,dfKey:d,dfDelta:h}},[m]),O=(0,h.useMemo)(()=>{var e;return(null==m?void 0:null===(e=m.rarity)||void 0===e?void 0:e.length)>1?4:5},[m]);return{bg:_,heroId:t,onSelectHero:Z,heroSelectOpen:a,triggerHeroSelectOpen:u,rarity:n,minRarity:O,onChangeRarity:o,merge:l,onChangeMerge:d,heroHeaderInfo:M,stats:v,selectStat:x,lv1Stats:I,lv40Stats:g}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:"IV快點查"})}),(0,a.jsx)("div",{className:g().container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:(0,a.jsxs)("div",{className:g()["bg-layer"],children:[(0,a.jsxs)("div",{className:g()["header-container"],children:[(0,a.jsx)("button",{onClick:o,className:g().heroSelectButton,children:(0,a.jsx)(i.Z,{...Z})}),(0,a.jsxs)("div",{className:g().heroSelect,hidden:!r,children:[(0,a.jsx)(d.Z,{onClick:o}),(0,a.jsx)(u.Z,{heroId:t,onSelect:s,noDropdown:!0})]})]}),(0,a.jsx)("h2",{className:g().title,children:"稀有度"}),(0,a.jsx)(l.Z,{rarity:_,minRarity:m,onSelect:v}),(0,a.jsx)("h2",{className:g().title,children:"突破次數"}),(0,a.jsx)(c.Z,{merge:x,onSelect:I,oneLine:!0}),(0,a.jsx)(j,{stats:M,lv1Stats:O,lv40Stats:P,selectStat:E})]})})]})}var M=function(){return(0,a.jsx)(o.Z,{children:(0,a.jsx)(Z,{})})},O=function(){return(0,a.jsx)(M,{})}},279:function(e){e.exports={raritypicker:"raritypicker_raritypicker__wCStY"}},8942:function(e){e.exports={container:"IVViewer_container__lvJGL","bg-layer":"IVViewer_bg-layer__G98M7",title:"IVViewer_title__pYvBX","header-container":"IVViewer_header-container__YsUGv",heroSelect:"IVViewer_heroSelect__iKPVX",heroSelectButton:"IVViewer_heroSelectButton__eSMux"}},8962:function(e){e.exports={"stat-button":"statview_stat-button__9qA0S",title:"statview_title__zm2x3","stat-row":"statview_stat-row__PYnAr","stat-name":"statview_stat-name__kx4Jj","stat-picker":"statview_stat-picker__SS7lt","max-stat":"statview_max-stat__hz000",container:"statview_container__hQ3fY"}}},function(e){e.O(0,[270,259,570,774,888,179],function(){return e(e.s=497)}),_N_E=e.O()}]);