_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"7H0y":function(t,e,r){t.exports={container:"IVViewer_container__RgSXZ","bg-layer":"IVViewer_bg-layer__3B7JG",title:"IVViewer_title__17Lm1","header-container":"IVViewer_header-container__3DTLG"}},IfK7:function(t,e,r){t.exports={raritypicker:"raritypicker_raritypicker__JEpxm"}},"gpa+":function(t,e,r){t.exports={"stat-button":"statview_stat-button__RF9K-",title:"statview_title__1ErLN","stat-row":"statview_stat-row__2_NER","stat-name":"statview_stat-name__2mrxU","stat-picker":"statview_stat-picker__1SUDk","max-stat":"statview_max-stat__2Y2ya",container:"statview_container__3YxVj"}},nyqW:function(t,e,r){"use strict";r.r(e),r.d(e,"__N_SSG",(function(){return Y}));var a=r("nKUr"),n=r("OyYD"),c=r("rePB"),s=r("g4pe"),i=r.n(s),o=r("0unf"),u=r("q1tI"),l=r("IfK7"),b=r.n(l),j=[{name:"5\u2606",value:5},{name:"4\u2605",value:4}];var O=function(t){var e=t.rarity,r=void 0===e?5:e,n=t.minRarity,c=void 0===n?5:n,s=t.onSelect,i=Object(u.useCallback)((function(t){s&&s(Number(t.currentTarget.value))}),[s]),o=Object(u.useMemo)((function(){return c<5?j:j.slice(0,1)}),[c]);return Object(a.jsx)("div",{className:b.a.raritypicker,children:o.map((function(t){return Object(a.jsx)("button",{onClick:i,"data-active":t.value===r,children:t.name},t.value)}))})},d=r("PY5n"),v=r("C5HV"),f=r("gpa+"),p=r.n(f),m=["hp","atk","spd","def","res"],h={hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};var y=function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats,c=t.selectStat,s=Object(u.useCallback)((function(t){var e=t.currentTarget.dataset,r=e.type,a=Number(e.option);c(r,a)}),[c]);return Object(a.jsxs)("div",{className:p.a.container,children:[Object(a.jsxs)("div",{className:p.a["stat-row"],children:[Object(a.jsx)("h3",{className:p.a.title,children:"\u5c6c\u6027"}),Object(a.jsx)("h3",{className:p.a.title,children:"Lv1"}),Object(a.jsx)("h3",{className:p.a.title,children:"Lv40"})]}),m.map((function(t){return Object(a.jsxs)("div",{className:p.a["stat-row"],children:[Object(a.jsx)("div",{className:p.a["stat-name"],children:h[t]}),Object(a.jsx)("div",{className:p.a["stat-picker"],children:r[t].map((function(r){var n=r.option,c=r.stat;return Object(a.jsx)("button",{className:p.a["stat-button"],"data-type":t,"data-option":n,disabled:"-"===c,"data-active":n===e[t],onClick:s,children:c},n)}))}),Object(a.jsx)("div",{className:p.a["stat-button"],children:n[t]})]},t)})),Object(a.jsx)("h3",{className:p.a.title,children:n.sum})]})},_=r("Ff2n"),S=r("ODXe"),g=r("rfrl"),w=r("YVe8"),x=r("I5BY"),k=r("LMuR"),N=r("ufDn");function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C=function(t){return t+1},D=function(t){return t-1},E=function(t){return t},V=function(){return"-"};function R(t){var e=t.hero,r=t.rarity,a=t.merge,n=Object(u.useState)({hp:1,atk:1,spd:1,def:1,res:1}),s=n[0],i=n[1],o=Object(u.useCallback)((function(t,e){i((function(r){return Object(g.a)(r,(function(r){r[t]=e}))}))}),[]),l=Object(u.useCallback)((function(){i({hp:1,atk:1,spd:1,def:1,res:1})}),[]),b=Object(u.useMemo)((function(){var t=!Object.values(s).some((function(t){return 1!==t})),n=e.stats["".concat(r,"-1")],i=e.stats["".concat(r)],o=function(t){var e=t.heroId,r=t.data,a="Feh"===e?[V,E,V]:[D,E,C],n=[0,1,2];return Object.entries(r).reduce((function(t,e){var r=Object(S.a)(e,2),s=r[0],i=r[1];return I(I({},t),{},Object(c.a)({},s,n.map((function(t,e){return{option:t,stat:a[e](i)}}))))}),{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:e.id,data:n}),u=function(t){var e=t.heroId,r=t.stats,a=t.neutral,n=t.data,s=t.merge;if("Feh"===e){var i=n;return I(I({},i),{},{sum:i.hp+i.atk+i.spd+i.def+i.res})}var o=n;return Object.entries(r).reduce((function(t,e){var r,a=Object(S.a)(e,2),n=a[0],i=a[1];return I(I({},t),{},(r={},Object(c.a)(r,n,o[n][i||s&&1]),Object(c.a)(r,"sum",o[n][s?i||1:i]+t.sum),r))}),{sum:s&&a?3:0})}({heroId:e.id,stats:s,neutral:t,data:i,merge:a});return{lv1Stats:o,lv40Stats:function(t){var e=t.stats,r=t.lv1Stats,a=t.lv40Stats,n=a.sum,s=Object(_.a)(a,["sum"]),i=t.neutral,o=t.merge,u=Object.entries(r).reduce((function(t,r){var a=Object(S.a)(r,2),n=a[0],s=a[1];return I(I({},t),{},Object(c.a)({},n,s[e[n]].stat))}),{}),l=Object(N.a)(u),b=Object(k.a)(l,o,i);return Object.entries(s).reduce((function(t,e){var r=Object(S.a)(e,2),a=r[0],n=r[1];return I(I({},t),{},Object(c.a)({},a,n+b[a]))}),{sum:n})}({stats:s,lv1Stats:o,lv40Stats:u,neutral:t,merge:a})}}),[e,s,a,r]),j=b.lv1Stats,O=b.lv40Stats;return{stats:s,selectStat:o,resetStats:l,lv1Stats:j,lv40Stats:O}}var T=r("7H0y"),H=r.n(T);function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var L=function(){var t=function(){var t=Object(n.b)().heroDB,e=Object(u.useState)("Feh"),r=e[0],a=e[1],c=Object(u.useState)(5),s=c[0],i=c[1],o=Object(u.useState)(0),l=o[0],b=o[1],j=Object(u.useCallback)((function(t){i(t)}),[]),O=Object(u.useCallback)((function(t){b(t)}),[]),d=Object(w.a)("/assets/summon-stone.jpg"),v=Object(u.useMemo)((function(){return t[r]}),[t,r]),f=R({hero:v,rarity:s,merge:l}),p=f.stats,m=f.selectStat,h=f.resetStats,y=f.lv1Stats,_=f.lv40Stats,S=Object(u.useCallback)((function(t){h(),i(5),a(t)}),[h]),g=Object(u.useMemo)((function(){var t=Object(x.b)(v);return{id:t.id,title:t.title,name:t.name,weaponType:t.weaponType,moveType:t.moveType,rarity:t.rarity,pool:t.pool,query:t.query,bst:t.bst,faceSrc:t.faceSrc,blessingSrc:t.blessingSrc}}),[v]),k=Object(u.useMemo)((function(){var t;return(null===v||void 0===v||null===(t=v.rarity)||void 0===t?void 0:t.length)>1?4:5}),[v]);return{bg:d,heroId:r,onSelectHero:S,rarity:s,minRarity:k,onChangeRarity:j,merge:l,onChangeMerge:O,heroHeaderInfo:g,stats:p,selectStat:m,lv1Stats:y,lv40Stats:_}}(),e=t.bg,r=t.heroId,c=t.onSelectHero,s=t.rarity,l=t.minRarity,b=t.onChangeRarity,j=t.merge,f=t.onChangeMerge,p=t.heroHeaderInfo,m=t.stats,h=t.lv1Stats,_=t.lv40Stats,S=t.selectStat;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.a,{children:Object(a.jsx)("title",{children:"IV\u5feb\u9ede\u67e5"})}),Object(a.jsx)("div",{className:H.a.container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:Object(a.jsxs)("div",{className:H.a["bg-layer"],children:[Object(a.jsxs)("div",{className:H.a["header-container"],children:[Object(a.jsx)(v.a,{heroId:r,onSelect:c}),Object(a.jsx)(o.a,F({},p))]}),Object(a.jsx)("h2",{className:H.a.title,children:"\u7a00\u6709\u5ea6"}),Object(a.jsx)(O,{rarity:s,minRarity:l,onSelect:b}),Object(a.jsx)("h2",{className:H.a.title,children:"\u7a81\u7834\u6b21\u6578"}),Object(a.jsx)(d.a,{merge:j,onSelect:f}),Object(a.jsx)(y,{stats:m,lv1Stats:h,lv40Stats:_,selectStat:S})]})})]})};var Y=!0;e.default=function(t){var e=t.db;return Object(a.jsx)(n.a.Provider,{value:e,children:Object(a.jsx)(L,{})})}},r3g1:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return r("nyqW")}])}},[["r3g1",0,1,2,4,5]]]);