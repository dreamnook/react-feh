(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{6314:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return s(4163)}])},3896:function(e,l,s){"use strict";var t=s(5893),n=s(7294),i=s(9850),r=s(2508),a=s(5617),c=s.n(a);l.Z=function(e){let{blessing:l}=e,{src:s,name:a}=(0,n.useMemo)(()=>(0,i.QJ)(l),[l]);return(0,t.jsxs)("div",{className:c().blessing,children:[s&&(0,t.jsx)(r.Z,{src:s,loading:"lazy",width:"50px",height:"50px"}),(0,t.jsx)("div",{className:c()["blessing-name"],children:a})]})}},1803:function(e,l,s){"use strict";var t=s(5893),n=s(7294),i=s(9850),r=s(3896),a=s(4920),c=s.n(a);l.Z=e=>{let{blessing:l,selectBlessing:s}=e,a=(0,n.useCallback)(e=>{e.stopPropagation(),s(e.currentTarget.value)},[s]);return(0,t.jsxs)("div",{className:c().container,children:[(0,t.jsx)("button",{className:c()["neutral-button"],"data-active":!l,value:"",onClick:a,children:"-"}),i.YM.map(e=>(0,t.jsx)("button",{className:c()["blessing-button"],"data-active":l===e.value,value:e.value,onClick:a,children:(0,t.jsx)(r.Z,{blessing:e.value})},e.value))]})}},613:function(e,l,s){"use strict";var t=s(5893),n=s(7294),i=s(8266),r=s(711),a=s.n(r);l.Z=e=>{let{iv:l,selectIV:s}=e,r=(0,n.useCallback)(e=>{e.stopPropagation(),s(e.currentTarget.value)},[s]);return(0,t.jsxs)("div",{className:a().container,children:[(0,t.jsx)("button",{className:a()["neutral-button"],"data-active":!l,value:"",onClick:r,children:"-"}),i.YM.map(e=>(0,t.jsx)("button",{className:a()["iv-button"],"data-active":l===e.value,value:e.value,onClick:r,children:e.name},e.value))]})}},776:function(e,l,s){"use strict";s.d(l,{BQ:function(){return h},DK:function(){return p},Dx:function(){return a},Ei:function(){return x},M9:function(){return u},P9:function(){return d},VY:function(){return o},W2:function(){return r},dH:function(){return c},qn:function(){return k}});var t=s(5893),n=s(187),i=s.n(n);function r(e){let{hidden:l,style:s,children:n}=e;return(0,t.jsx)("div",{hidden:l,className:i().container,style:s,children:n})}function a(e){let{children:l,style:s}=e;return(0,t.jsx)("div",{className:i().title,style:s,children:l})}function c(e){let{children:l}=e;return(0,t.jsx)("div",{className:i()["title-textgroup"],children:l})}function o(e){let{children:l}=e;return(0,t.jsx)("div",{className:i().content,children:l})}function d(e){let{children:l}=e;return(0,t.jsx)("div",{className:i()["section-group"],children:l})}function u(e){let{children:l,disabled:s,onClick:n}=e;return(0,t.jsx)("button",{className:"".concat(i().button," ").concat(i().section),disabled:s,onClick:n,children:l})}function h(e){let{children:l,style:s}=e;return(0,t.jsx)("div",{className:i()["button-content"],style:s,children:l})}function k(e){let{children:l}=e;return(0,t.jsx)("div",{className:i().optionsContainer,children:l})}function x(e){let{children:l}=e;return(0,t.jsx)("div",{className:i().options,children:l})}function p(e){let{children:l}=e;return(0,t.jsx)("div",{className:i().subTitle,children:l})}},9999:function(e,l,s){"use strict";var t=s(5893);s(7294),l.Z=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[(0,t.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),(0,t.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]})},6464:function(e,l,s){"use strict";s.d(l,{JO:function(){return d},XR:function(){return u},Z4:function(){return p},bP:function(){return c},eM:function(){return x},i5:function(){return k},lG:function(){return m},lJ:function(){return h},n0:function(){return o},pp:function(){return a}});var t=s(5893),n=s(2508),i=s(3862),r=s.n(i);function a(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().skillTitle,children:l})}function c(e){let{children:l,style:s}=e;return(0,t.jsx)("div",{className:r().skillName,style:s,children:l})}function o(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().skillSp,children:l})}function d(e){let{src:l}=e;return(0,t.jsx)(n.Z,{src:l,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"},loading:"lazy"})}function u(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().might,children:l})}function h(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().extractStats,children:l})}function k(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().extractStat,children:l})}function x(e){let{cd:l,children:s}=e;return l?(0,t.jsx)("div",{style:{color:l<0?"lightskyblue":"palevioletred"},children:s}):null}function p(e){let{children:l}=e;return(0,t.jsx)("div",{style:{color:"salmon"},children:l})}let m=e=>e>0?"+".concat(e):"".concat(e)},3426:function(e,l,s){"use strict";var t=s(5893),n=s(7294),i=s(6056),r=s.n(i);function a(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().weaponTitle,children:l})}function c(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().weaponName,children:l})}function o(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().weaponSp,children:l})}function d(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().might,children:l})}function u(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().extractStats,children:l})}function h(e){let{children:l}=e;return(0,t.jsx)("div",{className:r().extractStat,children:l})}function k(e){let{cd:l,children:s}=e;return l?(0,t.jsx)("div",{style:{color:l<0?"lightskyblue":"palevioletred"},children:s}):null}function x(e){let{children:l}=e;return(0,t.jsx)("div",{style:{color:"salmon"},children:l})}let p=e=>e>0?"+".concat(e):"".concat(e);l.Z=(0,n.memo)(function(e){let{weapon:l}=e;return l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a,{children:[(0,t.jsx)(c,{children:l.name}),(0,t.jsxs)(o,{children:[l.sp,"SP"]})]}),(0,t.jsxs)(d,{children:["威力 ",l.mt]}),l.cd&&(0,t.jsxs)(k,{cd:l.cd,children:["奧義 cd",p(l.cd)]}),(0,t.jsxs)(u,{children:[l.hp&&(0,t.jsxs)(h,{children:["HP ",p(l.hp)]}),l.atk&&(0,t.jsxs)(h,{children:["攻擊 ",p(l.atk)]}),l.spd&&(0,t.jsxs)(h,{children:["速度 ",p(l.spd)]}),l.def&&(0,t.jsxs)(h,{children:["防守 ",p(l.def)]}),l.res&&(0,t.jsxs)(h,{children:["魔防 ",p(l.res)]})]}),l.exclusive&&(0,t.jsx)(x,{children:"限定本人裝備"})]}):null})},5019:function(e,l,s){"use strict";var t=s(5893),n=s(7294),i=s(5101),r=s.n(i);let a=[{name:"5☆",value:5},{name:"4★",value:4}];l.Z=function(e){let{rarity:l=5,minRarity:s=5,onSelect:i}=e,c=(0,n.useCallback)(e=>{i&&i(Number(e.currentTarget.value))},[i]),o=(0,n.useMemo)(()=>s<5?a:a.slice(0,1),[s]);return(0,t.jsx)("div",{className:r().raritypicker,children:o.map(e=>(0,t.jsx)("button",{onClick:c,"data-active":e.value===l,value:e.value,children:e.name},e.value))})}},578:function(e,l){"use strict";let s={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};l.Z=function(e){let{rarity:l=5,merge:t,bst:n,spt:i,blesser:r=0}=e,a=s[l];return 2*(150+a.base+a.float+2*t+Math.floor(n/5)+Math.floor(i/100)+4*r)}},4163:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return lF}});var t=s(5893),n=s(9008),i=s.n(n),r=s(7294),a=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",...e,children:[(0,t.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,t.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}),c=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",...e,children:[(0,t.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,t.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}),o=s(5302),d=s(7217),u=s(9390),h=s(2913);function k(e){let{sealDB:l,sealId:s}=e;return l&&s?l.skillA[s]?l.skillA[s]:l.skillB[s]?l.skillB[s]:l.skillC[s]?l.skillC[s]:l.seal[s]?l.seal[s]:null:null}var x=s(327),p=s(2669),m=s(9706);let f={atk:"atk",spd:"spd",def:"def",res:"res"};function j(e){let{heroDB:l,weaponDB:s,assistDB:t,specialDB:n,skillADB:i,skillBDB:r,skillCDB:a,skillXDB:c,sealDB:o,heroId:u,skillIds:h}=e;return{weapon:(0,m.i7)({heroDB:l,weaponDB:s,heroId:u,weaponId:h.weaponId}),assist:(0,d.NV)({assistDB:t,assistId:h.assistId}),special:(0,p.cf)({specialDB:n,specialId:h.specialId}),skillA:(0,x.PU)({skillDB:i,skillId:h.skillAId}),skillB:(0,x.PU)({skillDB:r,skillId:h.skillBId}),skillC:(0,x.PU)({skillDB:a,skillId:h.skillCId}),skillX:(0,x.PU)({skillDB:c,skillId:h.skillXId}),seal:k({sealDB:o,sealId:h.sealId})}}let g=["assist","special","skillA","skillB","skillC","seal","skillX"];var I=s(5737),v=s(578),b=s(6981);class C{load(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}get loaded(){return this.loadedData}get image(){return this.imageData}constructor(e){this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=e,this.imageData.onload=()=>{this.loadedData=!0,this.callback&&this.callback(!0)},this.imageData.onerror=()=>{this.loadedData=!1,this.callback&&this.callback(!1)}}}var w=s(5012);let _={x:16,y:554},B=w.s6,y={x:174,y:555},S=["infantry","armored","cavalry","flying"],D={yellow:1,white:43,blue:85,red:127,green:169},M=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((e,l,s)=>({...e,[l]:34*s+1}),{});function A(e,l,s,t,n,i){M[t]&&e.drawImage(l,M[t],s,32,40,n,i,16,20)}let N={x:240,y:557},X=[14,28,42],P=["infantry","armored","cavalry","flying"],T={x:432,y:425},Z=(e,l,s)=>{e.drawImage(l,275,37*s+1+594,35,35)},R={x:82,y:557},H=[14,28,42],E={x:112,y:557},J=[14,28,42],K={x:130,y:594},F=[14,28,42,56],W=[1e3,100,10],O=function(e,l,s,t){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:D.yellow,i=8+K.y+37*t;W.forEach((t,r)=>{s>=t&&A(e,l,n,Math.floor(s/t%10),K.x+F[r],i)}),A(e,l,n,s%10,K.x+56,i)},Q=function(e,l,s){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D.white;A(e,l,t,s,465,676)};var V=s(8266);let q=["#ffa0af","white","#aaf0fa"],Y=Object.entries({hp:"HP",atk:"攻擊",spd:"速度",def:"防守",res:"魔防",bst:"BST",arena:"鬥技分"}),G={x:634,y:1224},z={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6,skillX:7},U={x:460,y:530},L=[["background","/assets/background.jpg"],["foreground","/assets/foreground.webp"],["foreground2","/assets/foreground2.webp"],["xPlaceholder","/assets/x-placeholder.webp"],["portrait",""],["rarityAtlas","/assets/rarity.webp"],["weaponTypeAtlas","/assets/weapon-type.webp"],["moveTypeAtlas","/assets/move-type.webp"],["dragonflowerAtlas","/assets/dragonflower.webp"],["supportAtlas","/assets/support.webp"],["blessingAtlas",""],["numberAtlas","/assets/number.webp"],["weaponIcon","/skills/weapon.webp"],["assistIcon","/skills/assist.webp"],["specialIcon","/skills/special.webp"],["textA","/assets/skill-a.webp"],["textB","/assets/skill-b.webp"],["textC","/assets/skill-c.webp"],["textX","/assets/skill-x.webp"],["textS","/assets/skill-s.webp"],["arenaIcon","/assets/Arena_Crown.webp"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["skillXIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.webp"],["bloomIcon","/assets/Icon_FlowerBud.webp"]],$=[{skillName:"weapon",empty:"/skills/weapon"},{skillName:"skillA",empty:"/skills/empty"},{skillName:"skillB",empty:"/skills/empty"},{skillName:"skillC",empty:"/skills/empty"},{skillName:"skillX",empty:"/skills/empty"},{skillName:"seal",empty:"/skills/seal-empty"}];var ee=function(e){let{heroId:l,rarity:s,iv:t,merge:n,dragonflower:i,blessing:a,support:c,arena:d,resplendent:h,mythicBonus1:k,mythicBonus2:x,mythicBonus3:p,mythicBonus4:m,bloom:w,weaponId:M,refine:K,assistId:F,specialId:W,skillAId:ee,skillBId:el,skillCId:es,skillXId:et,sealId:en,lv1:ei}=e,er=(0,b.K)(),ea=(0,r.useRef)(null),ec=(0,r.useRef)(null),eo=(0,r.useRef)(),ed=(0,r.useRef)(),eu=(0,r.useRef)(),eh=(0,r.useRef)(),ek=(0,r.useRef)(),ex=(0,r.useRef)(),ep=(0,r.useRef)(),em=(0,r.useRef)(),ef=(0,r.useRef)(),ej=(0,r.useRef)(),eg=(0,r.useRef)(),eI=(0,r.useRef)(),ev=(0,r.useRef)(),eb=(0,r.useRef)(),eC=(0,r.useRef)(),ew=(0,r.useMemo)(()=>(0,u.cK)(er.heroDB,l),[er.heroDB,l]),e_=(0,r.useMemo)(()=>({weaponId:M,assistId:F,specialId:W,skillAId:ee,skillBId:el,skillCId:es,skillXId:et,sealId:en}),[F,en,ee,el,es,et,W,M]),eB=ew.stats,ey=(0,r.useMemo)(()=>(function(e){var l,s,t,n,i,r,a,c,o,d;let{heroDB:h,weaponDB:k,assistDB:x,specialDB:p,skillADB:m,skillBDB:f,skillCDB:g,skillXDB:I,sealDB:v,heroId:b,skillIds:C,refine:w,rarity:_}=e,B=(0,u.cK)(h,b),y=j({heroDB:h,weaponDB:k,assistDB:x,specialDB:p,skillADB:m,skillBDB:f,skillCDB:g,skillXDB:I,sealDB:v,heroId:b,skillIds:C}),S={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",skillX:"-",seal:"-"},D=0,M=(null===(l=y.special)||void 0===l?void 0:l.cd)||0;D+=((null===(s=y.weapon)||void 0===s?void 0:s.cd)||0)+((null===(t=y.assist)||void 0===t?void 0:t.cd)||0)+((null===(n=y.skillA)||void 0===n?void 0:n.cd)||0)+((null===(i=y.skillB)||void 0===i?void 0:i.cd)||0)+((null===(r=y.skillC)||void 0===r?void 0:r.cd)||0)+((null===(a=y.skillX)||void 0===a?void 0:a.cd)||0)+((null===(c=y.seal)||void 0===c?void 0:c.cd)||0);let A={hp:0,atk:0,spd:0,def:0,res:0},N=0,X=0;Object.entries(y).forEach(e=>{let[l,s]=e;if(S[l]=(null==s?void 0:s.name)||"-",A.hp+=(null==s?void 0:s.hp)||0,A.atk+=((null==s?void 0:s.mt)||0)+((null==s?void 0:s.atk)||0),A.spd+=(null==s?void 0:s.spd)||0,A.def+=(null==s?void 0:s.def)||0,A.res+=(null==s?void 0:s.res)||0,N+=(null==s?void 0:s.sp)||0,5===_){let e=null==s?void 0:s.bst;B.blesser&&(null==s?void 0:s.bbst)&&(e=null==s?void 0:s.bbst),X=Math.max(e||0,X)}});let P=null===(d=y.weapon)||void 0===d?void 0:null===(o=d.refine)||void 0===o?void 0:o[w];return P&&(A.hp+=P.hp||0,A.atk+=(P.mt||0)+(P.atk||0),A.spd+=P.spd||0,A.def+=P.def||0,A.res+=P.res||0,D+=P.cd||0,y.weapon.exclusive||(N+=50),5===_&&(X=Math.max(X,P.bst||0))),"-"===S.skillX&&(S.skillX=""),{names:S,stats:A,accelerate:D,specialCD:M,spt:N,bst:X}})({heroDB:er.heroDB,weaponDB:er.weaponDB,assistDB:er.assistDB,specialDB:er.specialDB,skillADB:er.skillADB,skillBDB:er.skillBDB,skillCDB:er.skillCDB,skillXDB:er.skillXDB,sealDB:er.sealDB,skillIds:e_,heroId:l,refine:K,rarity:s}),[e_,l,K,s,er.heroDB,er.weaponDB,er.assistDB,er.specialDB,er.skillADB,er.skillBDB,er.skillCDB,er.skillXDB,er.sealDB]),eS=(0,r.useMemo)(()=>(0,I.f)({rarity:s,stats:eB,iv:t,merge:n,support:c,skillStats:ey.stats,lv1:ei,arena:d,dragonflower:i,resplendent:h,mythicBonus1:k,mythicBonus2:x,mythicBonus3:p,mythicBonus4:m,bloom:w}),[s,eB,t,n,c,ey,ei,d,i,h,k,x,p,m,w]),eD=(0,r.useMemo)(()=>(0,v.Z)({rarity:s,merge:n,bst:Math.max(eS.bst,ey.bst,ew.bst||0),spt:ey.spt}),[s,n,eS.bst,ey.bst,ey.spt,ew]),eM=(0,r.useRef)({}),eA=(0,r.useCallback)(()=>{if(!ea.current)return;let{background:e,foreground:l,foreground2:s,xPlaceholder:t,portrait:n,rarityAtlas:i,weaponTypeAtlas:r,moveTypeAtlas:a,dragonflowerAtlas:c,supportAtlas:o,blessingAtlas:d,numberAtlas:u,weaponIcon:h,assistIcon:k,specialIcon:x,textA:p,textB:m,textC:f,textS:j,textX:g,arenaIcon:I,skillAIcon:v,skillBIcon:b,skillCIcon:C,skillXIcon:w,sealIcon:M,resplendentIcon:K,bloomIcon:F}=eM.current,{title:W,name:L,weaponType:$,moveType:ee}=eo.current,el=!!eo.current.blessing||!!ef.current,es=ea.current.getContext("2d");es.clearRect(0,0,540,960),e.loaded&&function(e){let{context:l,background:s,support:t}=e;t?l.drawImage(s,540,0,540,960,0,0,540,960):l.drawImage(s,0,0,540,960,0,0,540,960)}({context:es,background:e.image,support:ej.current}),n.loaded&&function(e){let{context:l,portrait:s}=e;l.drawImage(s,0,0,540,960,0,0,540,960)}({context:es,portrait:n.image}),l.loaded&&function(e){let{context:l,foreground:s}=e;l.drawImage(s,0,0,540,960,0,0,540,960)}({context:es,foreground:l.image}),s.loaded&&function(e){let{context:l,foreground2:s,dragonflower:t}=e;t?l.drawImage(s,0,50,540,50,0,542,540,50):l.drawImage(s,0,0,540,50,0,542,540,50)}({context:es,foreground2:s.image,dragonflower:ep.current}),ed.current.names.skillX&&function(e){let{context:l,xPlaceholder:s,skillXIcon:t,textX:n}=e;l.drawImage(s,255,851,248,42),l.drawImage(t,275,854,35,35),l.drawImage(n,295,872,18,18)}({context:es,xPlaceholder:t.image,skillXIcon:w.image,textX:g.image}),i.loaded&&function(e){let{context:l,rarityAtlas:s,rarity:t}=e;switch(t){case 5:l.drawImage(s,0,0,153,40,48,380,153,40);break;case 4:l.drawImage(s,0,41,153,40,42,380,153,40)}}({context:es,rarityAtlas:i.image,rarity:eh.current}),r.loaded&&function(e){let{context:l,weaponTypeAtlas:s,weaponType:t}=e,n=B.indexOf(t);n>-1&&l.drawImage(s,56*n,0,56,55,_.x,_.y,28,28)}({context:es,weaponTypeAtlas:r.image,weaponType:$}),a.loaded&&function(e){let{context:l,moveTypeAtlas:s,moveType:t}=e,n=S.indexOf(t);n>-1&&l.drawImage(s,56*n,0,52,52,y.x,y.y,26,26)}({context:es,moveTypeAtlas:a.image,moveType:ee}),c.loaded&&u.loaded&&function(e){let{context:l,dragonflowerAtlas:s,numberAtlas:t,moveType:n,dragonflower:i}=e;if(!i)return;let r=P.indexOf(n);r>-1&&l.drawImage(s,0,58*r,64,58,216,546,48,44);let a=0,c=D.white;A(l,t,c,"+",N.x+14,N.y),a+=1,i>9&&(A(l,t,c,Math.floor(i/10),N.x+X[a],N.y),a+=1),A(l,t,c,i%10,N.x+X[a],N.y)}({context:es,dragonflowerAtlas:c.image,numberAtlas:u.image,moveType:ee,dragonflower:ep.current}),o.loaded&&function(e){let{context:l,supportAtlas:s,support:t,hasBlessing:n}=e;t&&l.drawImage(s,T.x-(n?108:0),T.y,108,115)}({context:es,supportAtlas:o.image,support:ej.current,hasBlessing:el}),d.loaded&&function(e){let{context:l,blessingAtlas:s}=e;l.drawImage(s,432,425,108,115)}({context:es,blessingAtlas:d.image}),u.loaded&&(function(e){let{context:l,numberAtlas:s,lv1:t}=e,n=t?1:40,i=0;n>9&&A(l,s,D.white,4,R.x+H[i],R.y),i+=1,A(l,s,D.white,n%10,R.x+H[i],R.y)}({context:es,numberAtlas:u.image,lv1:eb.current}),function(e){let{context:l,numberAtlas:s,merge:t}=e;if(t<=0)return;let n=0,i=t>9?D.green:D.white;A(l,s,i,"+",E.x+14,E.y),n+=1,t>9&&(A(l,s,i,1,E.x+J[n],E.y),n+=1),A(l,s,i,t%10,E.x+J[n],E.y)}({context:es,numberAtlas:u.image,merge:ex.current}),function(e){let{context:l,numberAtlas:s,stats:t,score:n,sbst:i,bst:r}=e;Object.values(t).forEach((e,t)=>{t>4||O(l,s,e,t,D.yellow)});let a=i>r?D.blue:D.green;O(l,s,r,5,D.green),O(l,s,n,6,a)}({context:es,numberAtlas:u.image,score:eC.current,sbst:Math.max(ed.current.bst||0,eo.current.bst||0),...eu.current}),function(e){let{context:l,numberAtlas:s,accelerate:t,specialCD:n}=e;if(!n)return;let i=D.white;t<0&&(i=D.blue),t>0&&(i=D.red),Q(l,s,Math.max(t+n,1),i)}({context:es,numberAtlas:u.image,accelerate:ed.current.accelerate,specialCD:ed.current.specialCD})),function(e){let{context:l,weaponIcon:s,assistIcon:t,specialIcon:n,textA:i,textB:r,textC:a,textS:c,skillAIcon:o,skillBIcon:d,skillCIcon:u,sealIcon:h}=e;s.loaded&&Z(l,s.image,0),t.loaded&&Z(l,t.image,1),n.loaded&&Z(l,n.image,2),o.loaded&&Z(l,o.image,3),l.drawImage(i.image,295,724,18,18),d.loaded&&Z(l,d.image,4),l.drawImage(r.image,295,761,18,18),u.loaded&&Z(l,u.image,5),l.drawImage(a.image,295,798,18,18),h.loaded&&Z(l,h.image,6),l.drawImage(c.image,295,835,18,18)}({context:es,weaponIcon:h,assistIcon:k,specialIcon:x,textA:p,textB:m,textC:f,textS:j,skillAIcon:v,skillBIcon:b,skillCIcon:C,sealIcon:M}),ec.current.getContext("2d").clearRect(0,0,1080,1920),function(e){let{canvas:l,iv:s,merge:t,bloom:n}=e,i=l.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#101010",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8;let{boon:r,bane:a}=(0,V.$r)(s),c={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};c[r]+=1,c[a]-=1,c[a]=t>0?1:c[a],n&&(c[n]=Math.min(2,c[n]+1)),Y.forEach((e,l)=>{let[s,t]=e,n=1224+74*l;i.fillStyle=q[c[s]],i.strokeText(t,206,n),i.fillText(t,206,n)})}({canvas:ec.current,iv:ek.current,merge:ex.current,bloom:em.current}),function(e){let{canvas:l,refine:s,weapon:t,...n}=e,i=l.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.textAlign="left",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeStyle="#101010",i.fillStyle=s&&"-"!==s?"lime":"white";let r=G.x+("-"===t?4:0),a=G.y;i.strokeText(t,r,a),i.fillText(t,r,a),i.fillStyle="white",Object.keys(n).forEach(e=>{let l=n[e],s=G.y+74*z[e],t="-"===l?4:0;l&&(i.strokeText(l,G.x+t,s),i.fillText(l,G.x+t,s))})}({canvas:ec.current,refine:ev.current,...ed.current.names}),function(e){let{canvas:l,title:s,name:t}=e,n=l.getContext("2d");n.font="500 50px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",n.fillStyle="white",n.strokeStyle="#220d00",n.textAlign="center",n.textBaseline="middle",n.lineJoin="round",n.lineWidth=8,n.strokeText(s,296,876),n.fillText(s,296,876),n.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",n.strokeText(t,336,992),n.fillText(t,336,992)}({canvas:ec.current,title:W,name:L}),eg.current&&I&&function(e){let{context:l,arenaIcon:s}=e;l.drawImage(s,U.x,U.y,50,49)}({context:es,arenaIcon:I.image}),eI.current&&K&&function(e){let{context:l,resplendentIcon:s}=e;l.drawImage(s,195,370,64,63)}({context:es,resplendentIcon:K.image}),em.current&&F&&function(e){let{context:l,bloomIcon:s}=e;l.drawImage(s,5,375,45,45)}({context:es,bloomIcon:F.image}),es.drawImage(ec.current,0,0,540,960)},[]);(0,r.useEffect)(()=>{ec.current=document.createElement("canvas"),ec.current.width=1080,ec.current.height=1920},[]),(0,r.useEffect)(()=>{L.forEach(e=>{let[l,s]=e;eM.current[l]=new C(eA),eM.current[l].load((0,o.Z)(s))})},[eM,eA]),(0,r.useEffect)(()=>{let e=function(e){let{resplendentDB:l,heroId:s,enable:t}=e;return t&&(null==l?void 0:l.includes(s))?"".concat(s,"(R)"):s}({resplendentDB:er.resplendentDB,heroId:ew.id,enable:h});eM.current.portrait.load((0,o.Z)("/portraits/".concat(e,".webp")));let l=function(e){let{heroDB:l,weaponDB:s,assistDB:t,specialDB:n,skillADB:i,skillBDB:r,skillCDB:a,skillXDB:c,sealDB:o,heroId:d,skillIds:u,refine:h}=e,k=j({heroDB:l,weaponDB:s,assistDB:t,specialDB:n,skillADB:i,skillBDB:r,skillCDB:a,skillXDB:c,sealDB:o,heroId:d,skillIds:u}),x={};if(g.forEach(e=>{let l=k[e];x[e]=(null==l?void 0:l.icon)&&"/skills/".concat(l.icon)}),h&&"-"!==h){var p,m,I;let e=f[h]||(null===(I=k.weapon)||void 0===I?void 0:null===(m=I.refine)||void 0===m?void 0:null===(p=m[h])||void 0===p?void 0:p.icon);e&&(x.weapon="/skills/weapon/".concat(e))}return x}({heroDB:er.heroDB,weaponDB:er.weaponDB,assistDB:er.assistDB,specialDB:er.specialDB,skillADB:er.skillADB,skillBDB:er.skillBDB,skillCDB:er.skillCDB,skillXDB:er.skillXDB,sealDB:er.sealDB,skillIds:e_,heroId:ew.id,refine:K});$.forEach(e=>{let{skillName:s,empty:t}=e;eM.current["".concat(s,"Icon")].load((0,o.Z)("".concat(l[s]||t,".webp")))});let s="-"!==ew.blessing&&!!ew.blessing||!!a,t=(0,o.Z)("/assets/blessing-".concat(ew.blessing||a,".webp"));eM.current.blessingAtlas.load(s?t:"")},[ew,h,e_,K,a,eS,er.heroDB,er.weaponDB,er.assistDB,er.specialDB,er.skillADB,er.skillBDB,er.skillCDB,er.skillXDB,er.sealDB,er.resplendentDB]),(0,r.useEffect)(()=>{eo.current=ew,eh.current=s,ek.current=t,ex.current=n,ep.current=i,ef.current=a,ej.current=c,eg.current=d,eI.current=h,ev.current=K,eb.current=ei,eC.current=eD,ed.current=ey,eu.current=eS,em.current=w,eA()},[ew,s,t,n,i,a,c,d,h,K,ei,eD,ey,eS,w,eA]);let eN=(0,r.useCallback)(()=>{let e=ea.current.toDataURL("image/png"),l=document.createElement("a");l.href=e,l.download="".concat(null==ew?void 0:ew.name,"-").concat(null==ew?void 0:ew.title,".png"),l.target="_blank",document.body.appendChild(l),l.click(),document.body.removeChild(l)},[null==ew?void 0:ew.name,null==ew?void 0:ew.title]);return{canvasRef:ea,triggerDownload:eN}},el=s(5859),es=s.n(el),et=(0,r.memo)(function(e){let{openEditor:l,...s}=e,{canvasRef:n,triggerDownload:i}=ee(s);return(0,t.jsxs)("div",{className:es().container,children:[(0,t.jsx)("canvas",{className:es().canvas,width:"540",height:"960",ref:n}),(0,t.jsx)("button",{className:"".concat(es().button," ").concat(es().download),onClick:i,children:(0,t.jsx)(a,{})}),(0,t.jsx)("button",{className:"".concat(es().button," ").concat(es().menu),onClick:l,children:(0,t.jsx)(c,{})})]})});let en=[{name:"+攻擊",value:"atk"},{name:"+速度",value:"spd"},{name:"+防守",value:"def"},{name:"+魔防",value:"res"}];function ei(e){let l=en.find(l=>e===l.value);return(null==l?void 0:l.name)||"-"}let er=[{name:"+HP",value:"hp"},{name:"+攻擊",value:"atk"},{name:"+速度",value:"spd"},{name:"+防守",value:"def"},{name:"+魔防",value:"res"}];var ea=s(9999),ec=s(5755),eo=s.n(ec);function ed(){return(0,t.jsx)("div",{className:eo().checked})}var eu=function(e){let{className:l,checked:s,onChange:n}=e,i=(0,r.useCallback)(e=>{n&&(e.stopPropagation(),n(!s))},[s,n]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{role:"button",className:"".concat(eo().button," ").concat(l),onClick:i,children:s&&(0,t.jsx)(ed,{})})})},eh=s(8872),ek=s.n(eh),ex=function(e){let{children:l,checked:s,onChange:n}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("label",{className:ek().label,children:[l,(0,t.jsx)(eu,{className:ek()["label-checkbox"],checked:s,onChange:n})]})})},ep=s(2508),em=s(3896),ef=s(187),ej=s.n(ef),eg=function(e){let{onClick:l}=e;return(0,t.jsx)("button",{className:ej().button,onClick:l,style:{fontSize:"16px",marginLeft:"1em"},children:"使用原生技能"})},eI=s(776),ev=s(4945),eb=function(e){let{heroId:l,resplendent:s}=e,{heroDB:n,dragonflowersDB:i,assistDB:a,resplendentDB:c}=(0,b.K)(),o=(0,r.useMemo)(()=>(0,u.gO)({heroDB:n,dragonflowersDB:i,assistDB:a,resplendentDB:c,heroId:l,noStat:!0}),[n,i,a,c,l]);return(0,t.jsx)(ev.Z,{...o,faceSrc:s?o.faceSrcR:o.faceSrc})},eC=function(e){let{heroId:l,weaponId:s}=e,{heroDB:n,weaponDB:i}=(0,b.K)();return(0,t.jsx)(t.Fragment,{children:(0,m.fu)({heroDB:n,weaponDB:i,heroId:l,weaponId:s})})},ew=s(6464),e_=function(e){let{heroId:l,weaponId:s,refine:n}=e,{heroDB:i,weaponDB:r}=(0,b.K)(),{icon:a,name:c}=(0,m.Wu)({heroDB:i,weaponDB:r,heroId:l,weaponId:s,refine:n});return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)(ew.JO,{src:"/skills/weapon/".concat(a,".png")}),c]})},eB=function(e){let{assistId:l}=e,{assistDB:s}=(0,b.K)();return(0,t.jsx)(t.Fragment,{children:(0,d.sq)({assistDB:s,assistId:l})})},ey=function(e){let{specialId:l}=e,{specialDB:s}=(0,b.K)();return(0,t.jsx)(t.Fragment,{children:(0,p.R_)({specialDB:s,specialId:l})})};let eS=["skillA","skillB","skillC","skillX"];var eD=function(e){let{skillType:l,skillId:s}=e,n=(0,b.K)();if(eS.includes(l)){let e=n["".concat(l,"DB")],{icon:i,name:r}=(0,x.cp)({skillDB:e,skillId:s});return(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsx)(ew.JO,{src:"/skills/".concat(i)}),r]})}if("seal"===l){let{icon:e,name:l}=function(e){let{sealDB:l,sealId:s}=e,t=k({sealDB:l,sealId:s});return t?{icon:t.icon,name:t.name}:{icon:"",name:""}}({sealDB:n.sealDB,sealId:s});return(0,t.jsxs)(t.Fragment,{children:[e&&(0,t.jsx)(ew.JO,{src:"/skills/".concat(e)}),l]})}return null},eM=function(e){let{hidden:l,heroId:s,rarity:n,iv:i,merge:a,dragonflower:c,blessing:o,support:d,arena:h,resplendent:k,mythicBonus1:x,mythicBonus2:p,mythicBonus3:f,mythicBonus4:j,bloom:g,weaponId:I,refine:v,assistId:C,specialId:w,skillAId:_,skillBId:B,skillCId:y,skillXId:S,sealId:D,lv1:M,maxSkill:A,...N}=e,{hasRarity:X,hasBlessing:P,hasWeapon:T,hasRefine:Z,hasAssist:R,hasSpecial:H,hasSkillA:E,hasSkillB:J,hasSkillC:K,hasSkillX:F,hasSeal:W,blessing:O,isMythic:Q}=function(e){let{heroId:l,weaponId:s,maxSkill:t}=e,{heroDB:n,weaponDB:i}=(0,b.K)(),a=(0,r.useMemo)(()=>(0,u.cK)(n,l),[n,l]),c=(0,r.useMemo)(()=>{if("Feh"===l)return!1;let e=(0,m.CB)({heroDB:n,weaponDB:i,heroId:l});return t?e.filter(e=>e.last).length>0:e.length>0},[n,i,l,t]),o=(0,r.useMemo)(()=>"Feh"!==l&&(0,m.Mf)({heroDB:n,weaponDB:i,heroId:l,weaponId:s}).length>0,[n,i,l,s]),d=(0,r.useMemo)(()=>"Feh"!==l&&"mythic"===a.pool,[l,a]);return"Feh"===l?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1,isMythic:!1}:{hasRarity:a.rarity.length>0,hasBlessing:!!a.blessing,hasWeapon:c,hasRefine:o,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSkillX:!0,hasSeal:!0,blessing:a.blessing,isMythic:d}}({heroId:s,weaponId:I,maxSkill:A});return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsx)("button",{className:ej()["close-button"],onClick:N.closeEditor,children:(0,t.jsx)(ea.Z,{})}),(0,t.jsx)(eI.Dx,{children:(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:"英雄"}),(0,t.jsx)(ex,{checked:M,onChange:N.toggleLv1,children:"Lv1"})]})}),(0,t.jsxs)(eI.VY,{children:[(0,t.jsx)("button",{className:"".concat(ej().button," ").concat(ej()["hero-header"]),onClick:N.openHeroPicker,children:(0,t.jsx)(eb,{heroId:s,resplendent:k})}),(0,t.jsxs)(eI.P9,{children:[(0,t.jsxs)(eI.M9,{disabled:!X,onClick:N.openRarityPicker,children:["稀有度",(0,t.jsx)(eI.BQ,{children:4===n?"4★":"5☆"})]}),(0,t.jsxs)(eI.M9,{disabled:"Feh"===s,onClick:N.openIVPicker,children:["IV",(0,t.jsx)(eI.BQ,{children:(0,V.Zx)(i)})]}),(0,t.jsxs)(eI.M9,{disabled:P,onClick:N.openBlessingPicker,children:["祝福",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(em.Z,{blessing:O||o})})]}),(0,t.jsxs)(eI.M9,{onClick:N.openMergePicker,children:["突破次數",(0,t.jsx)(eI.BQ,{children:a?"+".concat(a):"-"})]}),(0,t.jsxs)(eI.M9,{onClick:N.openDragonflowerPicker,children:["神龍之花",(0,t.jsx)(eI.BQ,{children:c?"+".concat(c):"-"})]})]})]}),(0,t.jsx)(eI.Dx,{children:(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:"技能"}),(0,t.jsx)(ex,{checked:A,onChange:N.toggleMaxSkill,children:"僅高級技能"}),(0,t.jsx)(eg,{onClick:N.setAllSkillDefault})]})}),(0,t.jsxs)(eI.VY,{children:[(0,t.jsxs)(eI.P9,{children:[(0,t.jsxs)(eI.M9,{disabled:!T,onClick:N.openWeaponPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"武器",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eC,{heroId:s,weaponId:I})})]}),(0,t.jsxs)(eI.M9,{disabled:!Z,onClick:N.openRefinePicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"鍛造",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(e_,{heroId:s,weaponId:I,refine:v})})]})]}),(0,t.jsxs)(eI.P9,{children:[(0,t.jsxs)(eI.M9,{disabled:!R,onClick:N.openAssistPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"輔助",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eB,{assistId:C})})]}),(0,t.jsxs)(eI.M9,{disabled:!H,onClick:N.openSpecialPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"奧義",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(ey,{specialId:w})})]})]}),(0,t.jsxs)(eI.P9,{children:[(0,t.jsxs)(eI.M9,{disabled:!E,onClick:N.openSkillAPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A技能",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eD,{skillType:"skillA",skillId:_})})]}),(0,t.jsxs)(eI.M9,{disabled:!J,onClick:N.openSkillBPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B技能",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eD,{skillType:"skillB",skillId:B})})]}),(0,t.jsxs)(eI.M9,{disabled:!K,onClick:N.openSkillCPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C技能",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eD,{skillType:"skillC",skillId:y})})]}),(0,t.jsxs)(eI.M9,{disabled:!W,onClick:N.openSealPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"聖印",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eD,{skillType:"seal",skillId:D})})]}),(0,t.jsxs)(eI.M9,{disabled:!F,onClick:N.openSkillXPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-x.png"}),"X技能",(0,t.jsx)(eI.BQ,{children:(0,t.jsx)(eD,{skillType:"skillX",skillId:S})})]})]})]}),(0,t.jsx)(eI.Dx,{children:"強化"}),(0,t.jsxs)(eI.VY,{children:[(0,t.jsxs)(eI.P9,{children:[(0,t.jsxs)(eI.M9,{onClick:N.toggleSupport,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"召喚師契約",(0,t.jsx)(eu,{checked:d})]}),(0,t.jsxs)(eI.M9,{onClick:N.toggleArena,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"鬥技場",(0,t.jsx)(eu,{checked:h})]}),(0,t.jsxs)(eI.M9,{onClick:N.toggleResplendent,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"神裝",(0,t.jsx)(eu,{checked:k})]}),(0,t.jsxs)(eI.M9,{disabled:"Feh"===s,onClick:N.openBloomPicker,children:[(0,t.jsx)(ep.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Icon_FlowerBud.png"}),"綻放",(0,t.jsx)(eI.BQ,{style:{height:"42px"},children:function(e){let l=er.find(l=>e===l.value);return(null==l?void 0:l.name)||"-"}(g)})]})]}),!Q&&(0,t.jsxs)(eI.P9,{children:[(0,t.jsxs)(eI.M9,{disabled:"Feh"===s,onClick:N.openMythicBonus1,children:["神階1",(0,t.jsx)(eI.BQ,{children:ei(x)})]}),(0,t.jsxs)(eI.M9,{disabled:"Feh"===s,onClick:N.openMythicBonus2,children:["神階2",(0,t.jsx)(eI.BQ,{children:ei(p)})]}),(0,t.jsxs)(eI.M9,{disabled:"Feh"===s,onClick:N.openMythicBonus3,children:["神階3",(0,t.jsx)(eI.BQ,{children:ei(f)})]}),(0,t.jsxs)(eI.M9,{disabled:"Feh"===s,onClick:N.openMythicBonus4,children:["神階4",(0,t.jsx)(eI.BQ,{children:ei(j)})]})]})]})]})},eA=s(2451),eN=s(5948),eX=s(5694),eP=s.n(eX),eT=function(e){let{hidden:l,heroId:s,onChangeHero:n,onClickBack:i,resplendent:a}=e,c=(0,r.useCallback)(e=>{n(e),i()},[n,i]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:i}),"英雄"]}),(0,t.jsx)("div",{className:eP().picker,children:(0,t.jsx)(eA.Z,{heroId:s,onSelect:c,noDropdown:!0,resplendent:a})})]})},eZ=s(5019),eR=function(e){let{hidden:l,rarity:s,selectRarity:n,onClickBack:i}=e,a=(0,r.useCallback)(e=>{n(e),i()},[n,i]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:i}),"稀有度"]}),(0,t.jsx)(eZ.Z,{rarity:s,minRarity:4,onSelect:a})]})},eH=s(613),eE=function(e){let{hidden:l,iv:s,selectIV:n,onClickBack:i}=e,a=(0,r.useCallback)(e=>{n(e),i()},[n,i]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:i}),"IV"]}),(0,t.jsx)(eH.Z,{iv:s,selectIV:a})]})},eJ=s(1803),eK=function(e){let{hidden:l,blessing:s,selectBlessing:n,onClickBack:i}=e,a=(0,r.useCallback)(e=>{n(e),i()},[n,i]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:i}),"IV"]}),(0,t.jsx)(eJ.Z,{blessing:s,selectBlessing:a})]})},eF=s(6042),eW=function(e){let{hidden:l,merge:s,selectMerge:n,onClickBack:i}=e,a=(0,r.useCallback)(e=>{n(e),i()},[n,i]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:i}),"突破次數"]}),(0,t.jsx)(eF.Z,{merge:s,onSelect:a})]})},eO=s(3115),eQ=function(e){let{maxDragonflowerOptions:l,dragonflower:s,maxDragonflower:n,onSelect:i}=e,a=(0,r.useMemo)(()=>Array(l+1).fill(0).map((e,l)=>l),[l]);return(0,t.jsx)(eO.Z,{value:s,max:n,onSelect:i,options:a})},eV=s(2492),eq=function(e){let{hidden:l,heroId:s,dragonflower:n,selectDragonflower:i,onClickBack:a}=e,{heroDB:c,dragonflowersDB:o}=(0,b.K)(),d=(0,r.useMemo)(()=>{let e=(0,u.cK)(c,s);return(0,eV.A)({dfKey:e.dfKey,dragonflowersDB:o})},[o,c,s]),h=(0,r.useMemo)(()=>(0,eV.A)({dfKey:1,dragonflowersDB:o}),[o]),k=(0,r.useCallback)(e=>{i(e),a()},[i,a]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:a}),"神龍之花"]}),(0,t.jsx)(eQ,{maxDragonflowerOptions:h,dragonflower:n,maxDragonflower:d,onSelect:k})]})},eY=s(5903),eG=s.n(eY),ez=function(e){let{active:l,last:s,hidden:n,value:i,children:r,onClick:a}=e;return(0,t.jsx)("button",{className:eG().button,"data-active":l,"data-last":s,value:i,onClick:a,hidden:n,children:r})},eU=s(3426),eL=function(e){let{active:l,weapon:s,hidden:n,onClick:i}=e;return(0,t.jsx)(ez,{active:l,last:s.last,hidden:n,value:s.id,onClick:i,children:(0,t.jsx)(eU.Z,{weapon:s})})},e$=(0,r.memo)(function(e){let{heroId:l,weaponId:s,selectWeaponId:n,filter:i,maxSkill:a}=e,{options:c}=function(e){let{heroId:l,filter:s,maxSkill:t}=e,{heroDB:n,weaponDB:i}=(0,b.K)(),a=(0,r.useMemo)(()=>(0,m.CB)({heroDB:n,weaponDB:i,heroId:l}),[l,n,i]);return{options:(0,r.useMemo)(()=>a.map(e=>{let l=!1;return t&&!e.last&&(l=!0),!l&&s&&(l=!e.query.includes(s.toLowerCase())),{...e,hidden:l}}),[a,s,t])}}({heroId:l,filter:i,maxSkill:a}),o=(0,r.useCallback)(e=>{e.stopPropagation(),n(e.currentTarget.value)},[n]);return(0,t.jsxs)(eI.Ei,{children:[(0,t.jsx)(ez,{active:!s,value:"",onClick:o,children:"無武器"}),c.map(e=>{let{hidden:l,...n}=e;return(0,t.jsx)(eL,{hidden:l,weapon:n,active:s===e.id,onClick:o},e.id)})]})}),e0=function(e){let{hidden:l,onClickBack:s,heroId:n,weaponId:i,selectWeaponId:a,maxSkill:c,toggleMaxSkill:o,setDefaultSkill:d}=e,[u,h]=(0,r.useState)(""),k=(0,r.useCallback)(e=>{h(e.currentTarget.value)},[]),x=(0,r.useCallback)(e=>{a(e),s()},[a,s]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:s}),(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:"武器"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(ex,{checked:c,onChange:o,children:"僅高級技能"}),(0,t.jsx)(eg,{onClick:d})]})]})]}),(0,t.jsx)("input",{className:ej().input,placeholder:"武器名稱",onChange:k}),(0,t.jsx)(eI.qn,{children:(0,t.jsx)(e$,{heroId:n,weaponId:i,filter:u,maxSkill:c,selectWeaponId:x})})]})},e4=s(449),e1=s.n(e4);function e2(e){let{children:l}=e;return(0,t.jsx)("div",{className:e1().refineName,children:l})}function e5(e){let{src:l}=e;return(0,t.jsx)(ep.Z,{src:l,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function e9(e){let{children:l}=e;return(0,t.jsx)("div",{className:e1().might,children:l})}function e3(e){let{children:l}=e;return(0,t.jsx)("div",{className:e1().extractStats,children:l})}function e8(e){let{children:l}=e;return(0,t.jsx)("div",{className:e1().extractStat,children:l})}function e6(e){let{cd:l,children:s}=e;return l?(0,t.jsx)("div",{style:{color:l<0?"lightskyblue":"palevioletred"},children:s}):null}function e7(e){let{children:l}=e;return(0,t.jsx)("div",{style:{color:"salmon"},children:l})}let le=e=>e>0?"+".concat(e):"".concat(e);var ll=function(e){let{active:l,hidden:s,weaponMt:n,refineType:i,refine:r,onClick:a}=e;return(0,t.jsxs)(ez,{active:l,last:!0,hidden:s,value:i,onClick:a,children:[(0,t.jsxs)(e2,{children:[r.icon&&(0,t.jsx)(e5,{src:r.icon}),r.name]}),r.mt&&(0,t.jsxs)(e9,{children:["威力 ",n+r.mt]}),r.cd&&(0,t.jsxs)(e6,{cd:r.cd,children:["奧義 cd",le(r.cd)]}),(0,t.jsxs)(e3,{children:[r.hp&&(0,t.jsxs)(e8,{children:["HP ",le(r.hp)]}),r.atk&&(0,t.jsxs)(e8,{children:["攻擊 ",le(r.atk)]}),r.spd&&(0,t.jsxs)(e8,{children:["速度 ",le(r.spd)]}),r.def&&(0,t.jsxs)(e8,{children:["防守 ",le(r.def)]}),r.res&&(0,t.jsxs)(e8,{children:["魔防 ",le(r.res)]})]}),r.exclusive&&(0,t.jsx)(e7,{children:"限定本人裝備"})]})},ls=(0,r.memo)(function(e){let{heroId:l,weaponId:s,refine:n,selectRefine:i}=e,{weapon:a,options:c}=function(e){let{heroId:l,weaponId:s}=e,{heroDB:t,weaponDB:n}=(0,b.K)(),{weapon:i,refineOptions:a}=(0,r.useMemo)(()=>({weapon:(0,m.i7)({heroDB:t,weaponDB:n,heroId:l,weaponId:s}),refineOptions:(0,m.Mf)({heroDB:t,weaponDB:n,heroId:l,weaponId:s})}),[t,n,l,s]);return{weapon:i,options:a}}({heroId:l,weaponId:s}),o=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]);return(0,t.jsxs)(eI.Ei,{children:[(0,t.jsx)(ez,{active:!n,value:"",onClick:o,children:"無鍛造"}),c.map(e=>{let{value:l,...s}=e;return(0,t.jsx)(ll,{weaponMt:null==a?void 0:a.mt,refineType:l,refine:s,active:n===l,onClick:o},l)})]})}),lt=function(e){let{hidden:l,onClickBack:s,heroId:n,weaponId:i,refine:a,selectRefine:c}=e,o=(0,r.useCallback)(e=>{c(e),s()},[c,s]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:s}),(0,t.jsx)(eI.dH,{children:(0,t.jsx)("span",{children:"鍛造"})})]}),(0,t.jsx)(eI.qn,{children:(0,t.jsx)(ls,{heroId:n,weaponId:i,refine:a,selectRefine:o})})]})},ln=s(6738),li=s(9142),lr=(0,r.memo)(function(e){let{active:l,hidden:s,skill:n,onClick:i}=e;return(0,t.jsxs)(ez,{active:l,last:n.last,hidden:s,value:n.id,onClick:i,children:[(0,t.jsxs)(ew.pp,{children:[(0,t.jsxs)(ew.bP,{children:[n.icon&&(0,t.jsx)(ew.JO,{src:"/skills/".concat(n.icon)}),n.name]}),(0,t.jsxs)(ew.n0,{children:[n.sp,"SP"]})]}),n.mt&&(0,t.jsxs)(ew.XR,{children:["威力 ",n.mt]}),n.cd&&(0,t.jsxs)(ew.eM,{cd:n.cd,children:["奧義 cd",(0,ew.lG)(n.cd)]}),(0,t.jsxs)(ew.lJ,{children:[n.hp&&(0,t.jsxs)(ew.i5,{children:["HP ",(0,ew.lG)(n.hp)]}),n.atk&&(0,t.jsxs)(ew.i5,{children:["攻擊 ",(0,ew.lG)(n.atk)]}),n.spd&&(0,t.jsxs)(ew.i5,{children:["速度 ",(0,ew.lG)(n.spd)]}),n.def&&(0,t.jsxs)(ew.i5,{children:["防守 ",(0,ew.lG)(n.def)]}),n.res&&(0,t.jsxs)(ew.i5,{children:["魔防 ",(0,ew.lG)(n.res)]})]}),n.exclusive&&(0,t.jsx)(ew.Z4,{children:"限定本人裝備"})]})});function la(e){let{index:l,style:s,data:n}=e,{skillId:i,skills:r,onClick:a}=n,c=r[l];return(0,t.jsx)("div",{style:s,children:(0,t.jsx)(lr,{active:i===c.id,skill:c,onClick:a},c.id)})}var lc=(0,r.memo)(function(e){let{heroId:l,weaponId:s,skillType:n,skillId:i,selectSkill:a,skillXId:c,filter:o,maxSkill:d}=e,u=(0,r.useCallback)(e=>{e.stopPropagation(),a(e.currentTarget.value)},[a]),{options:h,spOptions:k,spChecked:p,onCheckSp:m}=function(e){let{heroId:l,weaponId:s,skillType:t,skillXId:n,filter:i,maxSkill:a}=e,c=(0,b.K)(),{rules2DB:o,heroDB:d,weaponDB:u,defaultSkillDB:h}=c,k=c["".concat(t,"DB")],p=(0,r.useMemo)(()=>(0,x.AY)({rules2DB:o,heroDB:d,weaponDB:u,skillDB:k,defaultSkillDB:h,heroId:l,weaponId:s,skillXId:n}),[o,d,u,k,h,l,s,n]),m=(0,r.useMemo)(()=>{let e={};p.forEach(l=>{(!a||l.last)&&(e[l.sp]=l.sp)});let l=Object.values(e).filter(e=>!!e);return l.length<2?[]:l.sort((e,l)=>e-l)},[a,p]),[f,j]=(0,r.useState)([]),g=(0,r.useCallback)(e=>{let l=+e.currentTarget.value;j(e=>e.includes(l)?e.filter(e=>l!==e):(e.push(l),e.slice()))},[]),I=(0,r.useMemo)(()=>p.filter(e=>(!a||!!e.last)&&(!i||!!e.query.includes(i.toLowerCase()))&&(!f.length||!!f.includes(e.sp))),[p,i,a,f]);return(0,r.useEffect)(()=>{j(e=>e.filter(e=>m.includes(e)))},[m]),{options:I,spOptions:m,spChecked:f,onCheckSp:g}}({heroId:l,weaponId:s,skillType:n,skillId:i,skillXId:c,filter:o,maxSkill:d}),f=(0,r.useMemo)(()=>({skillId:i,skills:h,onClick:u}),[i,h,u]),j=(0,r.useCallback)(e=>{let l=h[e],s=40;return(l.mt||l.cd)&&(s+=24),(l.hp||l.atk||l.spd||l.def||l.res)&&(s+=24),l.exclusive&&(s+=24),s+=18},[h]),g=(0,r.useCallback)(e=>h[e].id,[h]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:ej().spButtons,children:k.map(e=>(0,t.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:m,children:e},e))}),(0,t.jsx)("div",{className:ej().listItems,children:(0,t.jsx)(li.ZP,{children:e=>{let{width:l,height:s}=e;return(0,t.jsx)(ln.S_,{width:l,height:s,itemCount:h.length,itemSize:j,itemData:f,itemKey:g,children:la},h.length)}})})]})}),lo=(0,r.memo)(function(e){let{heroId:l,weaponId:s,skillType:n,skillId:i,selectSkill:r,skillXId:a,filter:c,maxSkill:o}=e;return(0,t.jsxs)(eI.Ei,{children:[(0,t.jsx)(ez,{active:!i,value:"",onClick:()=>r(""),children:"無技能"}),(0,t.jsx)(lc,{heroId:l,weaponId:s,skillType:n,skillId:i,selectSkill:r,skillXId:a,filter:c,maxSkill:o})]})}),ld=function(e){let{hidden:l,skillType:s,title:n,onClickBack:i,heroId:a,weaponId:c,skillXId:o,skillId:d,selectSkill:u,maxSkill:h,toggleMaxSkill:k,setDefaultSkill:x}=e,[p,m]=(0,r.useState)(""),f=(0,r.useCallback)(e=>{m(e.currentTarget.value)},[]),j=(0,r.useCallback)(e=>{u(e),i()},[u,i]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:i}),(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:n}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(ex,{checked:h,onChange:k,children:"僅高級技能"}),x&&(0,t.jsx)(eg,{onClick:x})]})]})]}),(0,t.jsx)("input",{className:ej().input,placeholder:"技能名稱",onChange:f}),(0,t.jsx)(eI.qn,{children:(0,t.jsx)(lo,{heroId:a,weaponId:c,skillType:s,skillId:d,selectSkill:j,skillXId:o,filter:p,maxSkill:h})})]})},lu=(0,r.memo)(function(e){let{active:l,hidden:s,assist:n,onClick:i}=e;return(0,t.jsxs)(ez,{active:l,last:n.last,hidden:s,value:n.id,onClick:i,children:[(0,t.jsxs)(ew.pp,{children:[(0,t.jsx)(ew.bP,{children:n.name}),(0,t.jsxs)(ew.n0,{children:[n.sp,"SP"]})]}),n.exclusive&&(0,t.jsx)(ew.Z4,{children:"限定本人裝備"})]})});function lh(e){let{index:l,style:s,data:n}=e,{assistId:i,assists:r,onClick:a}=n,c=r[l];return(0,t.jsx)("div",{style:s,children:(0,t.jsx)(lu,{active:i===c.id,assist:c,onClick:a},c.id)})}var lk=(0,r.memo)(function(e){let{heroId:l,weaponId:s,assistId:n,selectAssist:i,filter:a,maxSkill:c,skillXId:o}=e,u=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]),{options:h,spOptions:k,spChecked:x,onCheckSp:p}=function(e){let{heroId:l,weaponId:s,filter:t,maxSkill:n,skillXId:i}=e,{rules2DB:a,heroDB:c,weaponDB:o,assistDB:u,defaultSkillDB:h}=(0,b.K)(),k=(0,r.useMemo)(()=>(0,d.Gt)({rules2DB:a,heroDB:c,weaponDB:o,assistDB:u,defaultSkillDB:h,heroId:l,weaponId:s,skillXId:i}),[a,c,o,u,h,l,s,i]),x=(0,r.useMemo)(()=>{let e={};k.forEach(l=>{(!n||l.last)&&(e[l.sp]=l.sp)});let l=Object.values(e).filter(e=>!!e);return l.length<2?[]:l.sort((e,l)=>e-l)},[n,k]),[p,m]=(0,r.useState)([]),f=(0,r.useCallback)(e=>{let l=+e.currentTarget.value;m(e=>e.includes(l)?e.filter(e=>l!==e):(e.push(l),e.slice()))},[]);return{options:(0,r.useMemo)(()=>k.filter(e=>(!n||!!e.last)&&(!t||!!e.query.includes(t.toLowerCase()))&&(!p.length||!!p.includes(e.sp))),[k,t,n,p]),spOptions:x,spChecked:p,onCheckSp:f}}({heroId:l,weaponId:s,filter:a,maxSkill:c,skillXId:o}),m=(0,r.useMemo)(()=>({assistId:n,assists:h,onClick:u}),[n,h,u]),f=(0,r.useCallback)(e=>{let l=h[e],s=40;return(l.mt||l.cd)&&(s+=24),(l.hp||l.atk||l.spd||l.def||l.res)&&(s+=24),l.exclusive&&(s+=24),s+=18},[h]),j=(0,r.useCallback)(e=>h[e].id,[h]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:ej().spButtons,children:k.map(e=>(0,t.jsx)("button",{type:"button",value:e,"data-active":x.includes(e),onClick:p,children:e},e))}),(0,t.jsx)("div",{className:ej().listItems,children:(0,t.jsx)(li.ZP,{children:e=>{let{width:l,height:s}=e;return(0,t.jsx)(ln.S_,{width:l,height:s,itemCount:h.length,itemSize:f,itemData:m,itemKey:j,children:lh},h.length)}})})]})}),lx=(0,r.memo)(function(e){let{heroId:l,weaponId:s,assist:n,selectAssist:i,filter:a,maxSkill:c,skillXId:o}=e,d=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]);return(0,t.jsxs)(eI.Ei,{children:[(0,t.jsx)(ez,{active:!n,value:"",onClick:d,children:"無技能"}),(0,t.jsx)(lk,{heroId:l,weaponId:s,assistId:n,filter:a,maxSkill:c,selectAssist:i,skillXId:o})]})}),lp=function(e){let{hidden:l,onClickBack:s,heroId:n,weaponId:i,assist:a,selectAssist:c,maxSkill:o,toggleMaxSkill:d,setDefaultSkill:u,skillXId:h}=e,[k,x]=(0,r.useState)(""),p=(0,r.useCallback)(e=>{x(e.currentTarget.value)},[]),m=(0,r.useCallback)(e=>{c(e),s()},[c,s]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:s}),(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:"輔助"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(ex,{checked:o,onChange:d,children:"僅高級技能"}),u&&(0,t.jsx)(eg,{onClick:u})]})]})]}),(0,t.jsx)("input",{className:ej().input,placeholder:"技能名稱",onChange:p}),(0,t.jsx)(eI.qn,{children:(0,t.jsx)(lx,{heroId:n,weaponId:i,assist:a,selectAssist:m,filter:k,maxSkill:o,skillXId:h})})]})},lm=(0,r.memo)(function(e){let{active:l,hidden:s,special:n,onClick:i}=e;return(0,t.jsxs)(ez,{active:l,last:n.last,hidden:s,value:n.id,onClick:i,children:[(0,t.jsxs)(ew.pp,{children:[(0,t.jsx)(ew.bP,{children:n.name}),(0,t.jsxs)(ew.n0,{children:[n.sp,"SP"]})]}),(0,t.jsxs)("div",{children:["CD ",n.cd]}),n.exclusive&&(0,t.jsx)(ew.Z4,{children:"限定本人裝備"})]})});function lf(e){let{index:l,style:s,data:n}=e,{special:i,skills:r,onClick:a}=n,c=r[l];return(0,t.jsx)("div",{style:s,children:(0,t.jsx)(lm,{active:i===c.id,special:c,onClick:a},c.id)})}var lj=(0,r.memo)(function(e){let{heroId:l,weaponId:s,special:n,selectSpecial:i,skillXId:a,filter:c,maxSkill:o}=e,d=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]),{options:u,spOptions:h,spChecked:k,onCheckSp:x}=function(e){let{heroId:l,weaponId:s,skillXId:t,filter:n,maxSkill:i}=e,{rules2DB:a,heroDB:c,weaponDB:o,specialDB:d,defaultSkillDB:u}=(0,b.K)(),h=(0,r.useMemo)(()=>(0,p.TZ)({rules2DB:a,heroDB:c,weaponDB:o,specialDB:d,defaultSkillDB:u,heroId:l,weaponId:s,skillXId:t}),[a,c,o,d,u,l,s,t]),k=(0,r.useMemo)(()=>{let e={};h.forEach(l=>{(!i||l.last)&&(e[l.sp]=l.sp)});let l=Object.values(e).filter(e=>!!e);return l.length<2?[]:l.sort((e,l)=>e-l)},[i,h]),[x,m]=(0,r.useState)([]),f=(0,r.useCallback)(e=>{let l=+e.currentTarget.value;m(e=>e.includes(l)?e.filter(e=>l!==e):(e.push(l),e.slice()))},[]),j=(0,r.useMemo)(()=>h.filter(e=>(!i||!!e.last)&&(!n||!!e.query.includes(n.toLowerCase()))&&(!x.length||!!x.includes(e.sp))),[h,n,i,x]);return(0,r.useEffect)(()=>{m(e=>e.filter(e=>k.includes(e)))},[k]),{options:j,spOptions:k,spChecked:x,onCheckSp:f}}({heroId:l,weaponId:s,special:n,skillXId:a,filter:c,maxSkill:o}),m=(0,r.useMemo)(()=>({special:n,skills:u,onClick:d}),[n,u,d]),f=(0,r.useCallback)(e=>{let l=u[e],s=40;return(l.mt||l.cd)&&(s+=24),(l.hp||l.atk||l.spd||l.def||l.res)&&(s+=24),l.exclusive&&(s+=24),s+=18},[u]),j=(0,r.useCallback)(e=>u[e].id,[u]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:ej().spButtons,children:h.map(e=>(0,t.jsx)("button",{type:"button",value:e,"data-active":k.includes(e),onClick:x,children:e},e))}),(0,t.jsx)("div",{className:ej().listItems,children:(0,t.jsx)(li.ZP,{children:e=>{let{width:l,height:s}=e;return(0,t.jsx)(ln.S_,{width:l,height:s,itemCount:u.length,itemSize:f,itemData:m,itemKey:j,children:lf},u.length)}})})]})}),lg=(0,r.memo)(function(e){let{heroId:l,weaponId:s,special:n,selectSpecial:i,skillXId:a,filter:c,maxSkill:o}=e,d=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]);return(0,t.jsxs)(eI.Ei,{children:[(0,t.jsx)(ez,{active:!n,value:"",onClick:d,children:"無技能"}),(0,t.jsx)(lj,{heroId:l,weaponId:s,special:n,selectSpecial:i,skillXId:a,filter:c,maxSkill:o})]})}),lI=function(e){let{hidden:l,onClickBack:s,heroId:n,weaponId:i,special:a,selectSpecial:c,skillXId:o,maxSkill:d,toggleMaxSkill:u,setDefaultSkill:h}=e,[k,x]=(0,r.useState)(""),p=(0,r.useCallback)(e=>{x(e.currentTarget.value)},[]),m=(0,r.useCallback)(e=>{c(e),s()},[c,s]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:s}),(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:"奧義"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(ex,{checked:d,onChange:u,children:"僅高級技能"}),h&&(0,t.jsx)(eg,{onClick:h})]})]})]}),(0,t.jsx)("input",{className:ej().input,placeholder:"奧義名稱",onChange:p}),(0,t.jsx)(eI.qn,{children:(0,t.jsx)(lg,{heroId:n,weaponId:i,special:a,selectSpecial:m,skillXId:o,filter:k,maxSkill:d})})]})},lv=(0,r.memo)(function(e){let{active:l,hidden:s,skill:n,onClick:i}=e;return(0,t.jsxs)(ez,{active:l,last:n.last,hidden:s,value:n.id,onClick:i,children:[(0,t.jsxs)(ew.pp,{children:[(0,t.jsxs)(ew.bP,{children:[n.icon&&(0,t.jsx)(ew.JO,{src:"/skills/".concat(n.icon)}),n.name]}),n.sp&&(0,t.jsxs)(ew.n0,{children:[n.sp,"SP"]})]}),n.mt&&(0,t.jsxs)(ew.XR,{children:["威力 ",n.mt]}),n.cd&&(0,t.jsxs)(ew.eM,{cd:n.cd,children:["奧義 cd",(0,ew.lG)(n.cd)]}),(0,t.jsxs)(ew.lJ,{children:[n.hp&&(0,t.jsxs)(ew.i5,{children:["HP ",(0,ew.lG)(n.hp)]}),n.atk&&(0,t.jsxs)(ew.i5,{children:["攻擊 ",(0,ew.lG)(n.atk)]}),n.spd&&(0,t.jsxs)(ew.i5,{children:["速度 ",(0,ew.lG)(n.spd)]}),n.def&&(0,t.jsxs)(ew.i5,{children:["防守 ",(0,ew.lG)(n.def)]}),n.res&&(0,t.jsxs)(ew.i5,{children:["魔防 ",(0,ew.lG)(n.res)]})]}),n.exclusive&&(0,t.jsx)(ew.Z4,{children:"限定本人裝備"})]})});function lb(e){let{index:l,style:s,data:n}=e,{seal:i,skills:r,onClick:a}=n,c=r[l];return"_sealA"===c.id?(0,t.jsx)("div",{style:s,children:(0,t.jsx)(eI.DK,{children:"A技能聖印"})}):"_sealB"===c.id?(0,t.jsx)("div",{style:s,children:(0,t.jsx)(eI.DK,{children:"B技能聖印"})}):"_sealC"===c.id?(0,t.jsx)("div",{style:s,children:(0,t.jsx)(eI.DK,{children:"C技能聖印"})}):"_seal"===c.id?(0,t.jsx)("div",{style:s,children:(0,t.jsx)(eI.DK,{children:"專用聖印"})}):(0,t.jsx)("div",{style:s,children:(0,t.jsx)(lv,{active:i===c.id,skill:c,onClick:a},c.id)})}var lC=(0,r.memo)(function(e){let{heroId:l,weaponId:s,seal:n,selectSeal:i,filter:a,maxSkill:c}=e,o=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]),{options:d,spOptions:u,spChecked:h,onCheckSp:k}=function(e){let{heroId:l,weaponId:s,filter:t,maxSkill:n}=e,{rules2DB:i,heroDB:a,weaponDB:c,sealDB:o,defaultSkillDB:d}=(0,b.K)(),u=(0,r.useMemo)(()=>{let e=(0,x.AY)({rules2DB:i,heroDB:a,weaponDB:c,defaultSkillDB:d,skillDB:o.skillA,heroId:l,weaponId:s,skillXId:""});return[{id:"_sealA",name:"A技能聖印",sp:0,icon:"",query:""},...e,{id:"_sealB",name:"B技能聖印",sp:0,icon:"",query:""},...(0,x.AY)({rules2DB:i,heroDB:a,weaponDB:c,defaultSkillDB:d,skillDB:o.skillB,heroId:l,weaponId:s,skillXId:""}),{id:"_sealC",name:"C技能聖印",sp:0,icon:"",query:""},...(0,x.AY)({rules2DB:i,heroDB:a,weaponDB:c,defaultSkillDB:d,skillDB:o.skillC,heroId:l,weaponId:s,skillXId:""}),{id:"_seal",name:"專用聖印",sp:0,icon:"",query:""},...(0,x.AY)({rules2DB:i,heroDB:a,weaponDB:c,defaultSkillDB:d,skillDB:o.seal,heroId:l,weaponId:s,skillXId:""})]},[i,a,c,o,d,l,s]),h=(0,r.useMemo)(()=>{let e={};u.forEach(l=>{(!n||l.last)&&(e[l.sp]=l.sp)});let l=Object.values(e).filter(e=>!!e);return l.length<2?[]:l.sort((e,l)=>e-l)},[n,u]),[k,p]=(0,r.useState)([]),m=(0,r.useCallback)(e=>{let l=+e.currentTarget.value;p(e=>e.includes(l)?e.filter(e=>l!==e):(e.push(l),e.slice()))},[]),f=(0,r.useMemo)(()=>u.filter(e=>!!["_sealA","_sealB","_sealC","_seal"].includes(e.id)||(!n||!!e.last)&&(!t||!!e.query.includes(t.toLowerCase()))&&(!k.length||!!k.includes(e.sp))),[u,t,n,k]);return(0,r.useEffect)(()=>{p(e=>e.filter(e=>h.includes(e)))},[h]),{options:f,spOptions:h,spChecked:k,onCheckSp:m}}({heroId:l,weaponId:s,filter:a,maxSkill:c}),p=(0,r.useMemo)(()=>({seal:n,skills:d,onClick:o}),[n,d,o]),m=(0,r.useCallback)(e=>{let l=d[e];if(["_sealA","_sealB","_sealC","_seal"].includes(l.id))return 44;let s=40;return(l.mt||l.cd)&&(s+=24),(l.hp||l.atk||l.spd||l.def||l.res)&&(s+=24),l.exclusive&&(s+=24),s+=18},[d]),f=(0,r.useCallback)(e=>d[e].id,[d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:ej().spButtons,children:u.map(e=>(0,t.jsx)("button",{type:"button",value:e,"data-active":h.includes(e),onClick:k,children:e},e))}),(0,t.jsx)("div",{className:ej().listItems,children:(0,t.jsx)(li.ZP,{children:e=>{let{width:l,height:s}=e;return(0,t.jsx)(ln.S_,{width:l,height:s,itemCount:d.length,itemSize:m,itemData:p,itemKey:f,children:lb},d.length)}})})]})}),lw=(0,r.memo)(function(e){let{heroId:l,weaponId:s,seal:n,selectSeal:i,filter:a,maxSkill:c}=e,o=(0,r.useCallback)(e=>{e.stopPropagation(),i(e.currentTarget.value)},[i]);return(0,t.jsxs)(eI.Ei,{children:[(0,t.jsx)(ez,{active:!n,value:"",onClick:o,children:"無聖印"}),(0,t.jsx)(lC,{heroId:l,weaponId:s,seal:n,selectSeal:i,filter:a,maxSkill:c})]})}),l_=function(e){let{hidden:l,onClickBack:s,heroId:n,weaponId:i,seal:a,selectSeal:c,maxSkill:o,toggleMaxSkill:d}=e,[u,h]=(0,r.useState)(""),k=(0,r.useCallback)(e=>{h(e.currentTarget.value)},[]),x=(0,r.useCallback)(e=>{c(e),s()},[c,s]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:s}),(0,t.jsxs)(eI.dH,{children:[(0,t.jsx)("span",{children:"聖印"}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,t.jsx)(ex,{checked:o,onChange:d,children:"僅高級技能"})})]})]}),(0,t.jsx)("input",{className:ej().input,placeholder:"技能名稱",onChange:k}),(0,t.jsx)(eI.qn,{children:(0,t.jsx)(lw,{heroId:n,weaponId:i,seal:a,selectSeal:x,filter:u,maxSkill:o})})]})},lB=s(5049),ly=s.n(lB),lS=e=>{let{bonus:l,selectBonus:s}=e,n=(0,r.useCallback)(e=>{e.stopPropagation(),s(e.currentTarget.value)},[s]);return(0,t.jsxs)("div",{className:ly().container,children:[(0,t.jsx)("button",{className:ly()["neutral-button"],"data-active":!l,value:"",onClick:n,children:"-"}),en.map(e=>(0,t.jsx)("button",{className:ly()["bonus-button"],"data-active":l===e.value,value:e.value,onClick:n,children:e.name},e.value))]})},lD=function(e){let{hidden:l,title:s,bonus:n,selectBonus:i,onClickBack:a}=e,c=(0,r.useCallback)(e=>{i(e),a()},[i,a]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:a}),s]}),(0,t.jsx)(lS,{bonus:n,selectBonus:c})]})},lM=s(5305),lA=s.n(lM),lN=e=>{let{bloom:l,selectBloom:s}=e,n=(0,r.useCallback)(e=>{e.stopPropagation(),s(e.currentTarget.value)},[s]);return(0,t.jsxs)("div",{className:lA().container,children:[(0,t.jsx)("button",{className:lA()["neutral-button"],"data-active":!l,value:"",onClick:n,children:"-"}),er.map(e=>(0,t.jsx)("button",{className:lA()["bloom-button"],"data-active":l===e.value,value:e.value,onClick:n,children:e.name},e.value))]})},lX=function(e){let{hidden:l,title:s,bloom:n,setBloom:i,onClickBack:a}=e,c=(0,r.useCallback)(e=>{i(e),a()},[i,a]);return(0,t.jsxs)(eI.W2,{hidden:l,children:[(0,t.jsxs)(eI.Dx,{children:[(0,t.jsx)(eN.Z,{onClick:a}),s]}),(0,t.jsx)(lN,{bloom:n,selectBloom:c})]})},lP=function(){let[e,l]=(0,r.useState)(""),s=(0,r.useCallback)(()=>{l("hero")},[]),t=(0,r.useCallback)(()=>{l("rarity")},[]),n=(0,r.useCallback)(()=>{l("iv")},[]),i=(0,r.useCallback)(()=>{l("merge")},[]),a=(0,r.useCallback)(()=>{l("dragonflower")},[]),c=(0,r.useCallback)(()=>{l("blessing")},[]),o=(0,r.useCallback)(()=>{l("weapon")},[]),d=(0,r.useCallback)(()=>{l("refine")},[]),u=(0,r.useCallback)(()=>{l("assist")},[]),h=(0,r.useCallback)(()=>{l("special")},[]),k=(0,r.useCallback)(()=>{l("skillA")},[]),x=(0,r.useCallback)(()=>{l("skillB")},[]),p=(0,r.useCallback)(()=>{l("skillC")},[]),m=(0,r.useCallback)(()=>{l("skillX")},[]),f=(0,r.useCallback)(()=>{l("seal")},[]),j=(0,r.useCallback)(()=>{l("mythic1")},[]),g=(0,r.useCallback)(()=>{l("mythic2")},[]),I=(0,r.useCallback)(()=>{l("mythic3")},[]),v=(0,r.useCallback)(()=>{l("mythic4")},[]);return{view:e,openHeroPicker:s,openRarityPicker:t,openIVPicker:n,openMergePicker:i,openDragonflowerPicker:a,openBlessingPicker:c,openBloomPicker:(0,r.useCallback)(()=>{l("bloom")},[]),openWeaponPicker:o,openRefinePicker:d,openAssistPicker:u,openSpecialPicker:h,openSkillAPicker:k,openSkillBPicker:x,openSkillCPicker:p,openSkillXPicker:m,openSealPicker:f,openMythicBonus1:j,openMythicBonus2:g,openMythicBonus3:I,openMythicBonus4:v,onClickBack:(0,r.useCallback)(()=>{l("")},[])}},lT=function(e){let{view:l,openHeroPicker:s,openRarityPicker:n,openIVPicker:i,openMergePicker:r,openDragonflowerPicker:a,openBlessingPicker:c,openBloomPicker:o,openWeaponPicker:d,openRefinePicker:u,openAssistPicker:h,openSpecialPicker:k,openSkillAPicker:x,openSkillBPicker:p,openSkillCPicker:m,openSkillXPicker:f,openSealPicker:j,openMythicBonus1:g,openMythicBonus2:I,openMythicBonus3:v,openMythicBonus4:b,onClickBack:C}=lP();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eM,{hidden:!!l,...e,openHeroPicker:s,openRarityPicker:n,openIVPicker:i,openMergePicker:r,openDragonflowerPicker:a,openBlessingPicker:c,openWeaponPicker:d,openRefinePicker:u,openAssistPicker:h,openSpecialPicker:k,openSkillAPicker:x,openSkillBPicker:p,openSkillCPicker:m,openSkillXPicker:f,openSealPicker:j,openMythicBonus1:g,openMythicBonus2:I,openMythicBonus3:v,openMythicBonus4:b,openBloomPicker:o}),(0,t.jsx)(eT,{hidden:"hero"!==l,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:C,resplendent:e.resplendent}),(0,t.jsx)(eR,{hidden:"rarity"!==l,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:C}),(0,t.jsx)(eE,{hidden:"iv"!==l,iv:e.iv,selectIV:e.setIV,onClickBack:C}),(0,t.jsx)(eK,{hidden:"blessing"!==l,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:C}),(0,t.jsx)(eW,{hidden:"merge"!==l,merge:e.merge,selectMerge:e.setMerge,onClickBack:C}),(0,t.jsx)(eq,{hidden:"dragonflower"!==l,dragonflower:e.dragonflower,heroId:e.heroId,selectDragonflower:e.setDragonflower,onClickBack:C}),(0,t.jsx)(e0,{hidden:"weapon"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,selectWeaponId:e.setWeaponId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,t.jsx)(lt,{hidden:"refine"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,refine:e.refine,selectRefine:e.setRefine}),(0,t.jsx)(lp,{hidden:"assist"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,assist:e.assistId,selectAssist:e.setAssistId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist,skillXId:e.skillXId}),(0,t.jsx)(lI,{title:"奧義",hidden:"special"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,special:e.specialId,selectSpecial:e.setSpecialId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial,skillXId:e.skillXId}),(0,t.jsx)(ld,{skillType:"skillA",title:"A技能",hidden:"skillA"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillAId,selectSkill:e.setSkillAId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA,skillXId:e.skillXId}),(0,t.jsx)(ld,{skillType:"skillB",title:"B技能",hidden:"skillB"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillBId,selectSkill:e.setSkillBId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB,skillXId:e.skillXId}),(0,t.jsx)(ld,{skillType:"skillC",title:"C技能",hidden:"skillC"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillCId,selectSkill:e.setSkillCId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC,skillXId:e.skillXId}),(0,t.jsx)(ld,{skillType:"skillX",title:"X技能",hidden:"skillX"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillXId,selectSkill:e.setSkillXId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillX,skillXId:e.skillXId}),(0,t.jsx)(l_,{hidden:"seal"!==l,onClickBack:C,heroId:e.heroId,weaponId:e.weaponId,seal:e.sealId,selectSeal:e.setSealId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill}),(0,t.jsx)(lD,{hidden:"mythic1"!==l,title:"神階1",onClickBack:C,bonus:e.mythicBonus1,selectBonus:e.setMythicBonus1}),(0,t.jsx)(lD,{hidden:"mythic2"!==l,title:"神階2",onClickBack:C,bonus:e.mythicBonus2,selectBonus:e.setMythicBonus2}),(0,t.jsx)(lD,{hidden:"mythic3"!==l,title:"神階3",onClickBack:C,bonus:e.mythicBonus3,selectBonus:e.setMythicBonus3}),(0,t.jsx)(lD,{hidden:"mythic4"!==l,title:"神階4",onClickBack:C,bonus:e.mythicBonus4,selectBonus:e.setMythicBonus4}),(0,t.jsx)(lX,{hidden:"bloom"!==l,title:"綻放",onClickBack:C,bloom:e.bloom,setBloom:e.setBloom})]})},lZ=s(9003),lR=s(603),lH=s(8333),lE=s.n(lH);function lJ(){let{heroId:e,onChangeHero:l,rarity:s,setRarity:n,iv:a,setIV:c,merge:k,setMerge:f,dragonflower:j,setDragonflower:g,blessing:I,setBlessing:v,support:C,toggleSupport:w,arena:_,toggleArena:B,resplendent:y,toggleResplendent:S,bloom:D,setBloom:M,weaponId:A,setWeaponId:N,refine:X,setRefine:P,assistId:T,setAssistId:Z,specialId:R,setSpecialId:H,skillAId:E,setSkillAId:J,skillBId:K,setSkillBId:F,skillCId:W,setSkillCId:O,skillXId:Q,setSkillXId:V,sealId:q,setSealId:Y,mythicBonus1:G,setMythicBonus1:z,mythicBonus2:U,setMythicBonus2:L,mythicBonus3:$,setMythicBonus3:ee,mythicBonus4:el,setMythicBonus4:es,setDefaultWeapon:en,setDefaultAssist:ei,setDefaultSpecial:er,setDefaultSkillA:ea,setDefaultSkillB:ec,setDefaultSkillC:eo,setDefaultSkillX:ed,setAllSkillDefault:eu,lv1:eh,toggleLv1:ek,maxSkill:ex,toggleMaxSkill:ep,bg:em,editorIsOpen:ef,openEditor:ej,closeEditor:eg}=function(){let{rules2DB:e,heroDB:l,weaponDB:s,assistDB:t,specialDB:n,skillADB:i,skillBDB:a,skillCDB:c,skillXDB:k,sealDB:f,defaultSkillDB:j}=(0,b.K)(),[g,I]=(0,r.useState)("Feh"),[v,C]=(0,r.useState)(5),[w,_]=(0,r.useState)(""),[B,y]=(0,r.useState)(0),[S,D]=(0,r.useState)(0),[M,A]=(0,r.useState)(""),[N,X]=(0,r.useState)(!1),P=(0,r.useCallback)(()=>{X(e=>!e)},[]),[T,Z]=(0,r.useState)(""),R=(0,r.useRef)({weaponId:"",assistId:"",specialId:"",skillAId:"",skillBId:"",skillCId:"",skillXId:""}),H=(0,r.useRef)(""),E=(0,r.useRef)(""),J=(0,r.useRef)(""),[K,F]=(0,r.useState)(""),[W,O]=(0,r.useState)(""),[Q,V]=(0,r.useState)(""),[q,Y]=(0,r.useState)(""),[G,z]=(0,r.useState)(""),[U,L]=(0,r.useState)(""),[$,ee]=(0,r.useState)(""),[el,es]=(0,r.useState)(""),[et,en]=(0,r.useState)(""),[ei,er]=(0,r.useState)(""),[ea,ec]=(0,r.useState)(""),[eo,ed]=(0,r.useState)(""),[eu,eh]=(0,r.useState)(""),ek=(0,r.useCallback)(()=>{E.current=R.current.weaponId,F(R.current.weaponId),O(e=>(0,m.J7)({heroDB:l,weaponDB:s,heroId:H.current,weaponId:R.current.weaponId,refineId:e})?e:"")},[l,s]),ex=(0,r.useCallback)(r=>{F(r),O(e=>e?(0,m.J7)({heroDB:l,weaponDB:s,heroId:H.current,weaponId:r,refineId:e})?e:"":e),V(n=>n?(0,d.ab)({rules2DB:e,heroDB:l,weaponDB:s,assistDB:t,defaultSkillDB:j,heroId:H.current,weaponId:E.current,assistId:n,skillXId:J.current})?n:"":n),Y(t=>t?(0,p.Hh)({rules2DB:e,heroDB:l,weaponDB:s,specialDB:n,defaultSkillDB:j,heroId:H.current,weaponId:r,specialId:t,skillXId:J.current})?t:"":t),z(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:i,defaultSkillDB:j,heroId:H.current,weaponId:r,skillId:t,skillXId:J.current})?t:"":t),L(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:a,defaultSkillDB:j,heroId:H.current,weaponId:r,skillId:t,skillXId:J.current})?t:"":t),ee(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:c,defaultSkillDB:j,heroId:H.current,weaponId:r,skillId:t,skillXId:J.current})?t:"":t),es(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:k,defaultSkillDB:j,heroId:H.current,weaponId:r,skillId:t,skillXId:J.current})?t:"":t)},[e,l,s,t,n,i,a,c,k,j]),ep=(0,r.useCallback)(r=>{V(n=>n?(0,d.ab)({rules2DB:e,heroDB:l,weaponDB:s,assistDB:t,defaultSkillDB:j,heroId:H.current,weaponId:E.current,skillXId:r,assistId:n})?n:"":n),Y(t=>t?(0,p.Hh)({rules2DB:e,heroDB:l,weaponDB:s,specialDB:n,defaultSkillDB:j,heroId:H.current,weaponId:E.current,specialId:t,skillXId:r})?t:"":t),z(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:i,defaultSkillDB:j,heroId:H.current,weaponId:E.current,skillId:t,skillXId:r})?t:"":t),L(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:a,defaultSkillDB:j,heroId:H.current,weaponId:E.current,skillId:t,skillXId:r})?t:"":t),ee(t=>t?(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:c,defaultSkillDB:j,heroId:H.current,weaponId:E.current,skillId:t,skillXId:r})?t:"":t),es(r)},[e,l,s,t,n,i,a,c,j]),em=(0,r.useCallback)(()=>{if(!R.current.assistId){V(R.current.assistId);return}(0,d.ab)({rules2DB:e,heroDB:l,weaponDB:s,assistDB:t,defaultSkillDB:j,heroId:H.current,weaponId:E.current,assistId:R.current.assistId,skillXId:J.current})&&V(R.current.assistId)},[e,l,s,t,j]),ef=(0,r.useCallback)(()=>{if(!R.current.specialId){Y(R.current.specialId);return}(0,p.Hh)({rules2DB:e,heroDB:l,weaponDB:s,specialDB:n,defaultSkillDB:j,heroId:H.current,weaponId:E.current,specialId:R.current.specialId,skillXId:J.current})&&Y(R.current.specialId)},[e,l,s,n,j]),ej=(0,r.useCallback)(()=>{if(!R.current.skillAId){z(R.current.skillAId);return}(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:i,defaultSkillDB:j,heroId:H.current,weaponId:E.current,skillId:R.current.skillAId,skillXId:J.current})&&z(R.current.skillAId)},[e,l,s,i,j]),eg=(0,r.useCallback)(()=>{if(!R.current.skillBId){L(R.current.skillBId);return}(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,defaultSkillDB:j,skillDB:a,heroId:H.current,weaponId:E.current,skillId:R.current.skillBId,skillXId:J.current})&&L(R.current.skillBId)},[e,l,s,a,j]),eI=(0,r.useCallback)(()=>{if(!R.current.skillCId){ee(R.current.skillCId);return}(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:c,defaultSkillDB:j,heroId:H.current,weaponId:E.current,skillId:R.current.skillCId,skillXId:J.current})&&ee(R.current.skillCId)},[e,l,s,c,j]),ev=(0,r.useCallback)(()=>{if(!R.current.skillXId){es(R.current.skillXId);return}(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,defaultSkillDB:j,skillDB:k,heroId:H.current,weaponId:E.current,skillId:R.current.skillXId,skillXId:R.current.skillXId})&&es(R.current.skillXId)},[e,l,s,k,j]),eb=(0,r.useCallback)(()=>{ek(),em(),ef(),ej(),eg(),eI(),ev()},[ek,em,ef,ej,eg,eI,ev]);H.current=g,E.current=K,J.current=el;let eC=(0,r.useCallback)(r=>{I(r),R.current=(0,lR.N)({defaultSkillDB:j,heroId:r}),F(()=>(0,m.Mw)({heroDB:l,weaponDB:s,heroId:r,weaponId:E.current})?E.current:""),O(e=>(0,m.J7)({heroDB:l,weaponDB:s,heroId:r,weaponId:E.current,refineId:e})?e:""),V(n=>(0,d.ab)({rules2DB:e,heroDB:l,weaponDB:s,assistDB:t,defaultSkillDB:j,heroId:r,weaponId:E.current,assistId:n,skillXId:J.current})?n:""),Y(t=>(0,p.Hh)({rules2DB:e,heroDB:l,weaponDB:s,specialDB:n,defaultSkillDB:j,heroId:r,weaponId:E.current,specialId:t,skillXId:J.current})?t:""),z(t=>(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:i,defaultSkillDB:j,heroId:r,weaponId:E.current,skillId:t,skillXId:J.current})?t:""),L(t=>(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:a,defaultSkillDB:j,heroId:r,weaponId:E.current,skillId:t,skillXId:J.current})?t:""),ee(t=>(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:c,defaultSkillDB:j,heroId:r,weaponId:E.current,skillId:t,skillXId:J.current})?t:""),es(t=>(0,x.hJ)({rules2DB:e,heroDB:l,weaponDB:s,skillDB:k,defaultSkillDB:j,heroId:r,weaponId:E.current,skillId:t,skillXId:J.current})?t:""),en(s=>!function(e){let{rules2DB:l,heroDB:s,sealDB:t,heroId:n,sealId:i}=e;if(!s||!t||!n||!i)return!1;let r=(0,u.cK)(s,n);if(!r)return!1;let a=t.skillA[i]||t.skillB[i]||t.skillC[i]||t.seal[i];return!!a&&(0,h.O3)({rules2DB:l,ruleId:a.rules,moveType:r.moveType,colorType:r.colorType,weaponType:r.weaponType})}({rules2DB:e,heroDB:l,sealDB:f,heroId:r,sealId:s})?"":s);let o="mythic"===(0,u.cK)(l,r).pool;er(e=>o?"":e),ec(e=>o?"":e),ed(e=>o?"":e),eh(e=>o?"":e)},[e,l,s,t,n,i,a,c,k,f,j]),[ew,e_]=(0,r.useState)(!1),eB=(0,r.useCallback)(()=>{e_(e=>!e)},[]),[ey,eS]=(0,r.useState)(!1),eD=(0,r.useCallback)(()=>{eS(e=>!e)},[]),[eM,eA]=(0,r.useState)(!1),eN=(0,r.useCallback)(()=>{eA(e=>!e)},[]),[eX,eP]=(0,r.useState)(!0),eT=(0,r.useCallback)(()=>{eP(e=>!e)},[]),[eZ,eR]=(0,r.useState)(!1),eH=(0,r.useCallback)(()=>{eR(!0)},[]),eE=(0,r.useCallback)(()=>{eR(!1)},[]);return{heroId:g,onChangeHero:eC,rarity:v,setRarity:C,iv:w,setIV:_,merge:B,setMerge:y,dragonflower:S,setDragonflower:D,blessing:M,setBlessing:A,support:N,toggleSupport:P,arena:ew,toggleArena:eB,resplendent:ey,toggleResplendent:eD,bloom:T,setBloom:Z,weaponId:K,setWeaponId:ex,refine:W,setRefine:O,assistId:Q,setAssistId:V,specialId:q,setSpecialId:Y,skillAId:G,setSkillAId:z,skillBId:U,setSkillBId:L,skillCId:$,setSkillCId:ee,skillXId:el,setSkillXId:ep,sealId:et,setSealId:en,mythicBonus1:ei,setMythicBonus1:er,mythicBonus2:ea,setMythicBonus2:ec,mythicBonus3:eo,setMythicBonus3:ed,mythicBonus4:eu,setMythicBonus4:eh,setDefaultWeapon:ek,setDefaultAssist:em,setDefaultSpecial:ef,setDefaultSkillA:ej,setDefaultSkillB:eg,setDefaultSkillC:eI,setDefaultSkillX:ev,setAllSkillDefault:eb,lv1:eM,toggleLv1:eN,maxSkill:eX,toggleMaxSkill:eT,bg:(0,o.Z)("/assets/summon-stone.jpg"),editorIsOpen:eZ,openEditor:eH,closeEditor:eE}}();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"單兵製造機"})}),(0,t.jsx)("div",{style:{background:"url('".concat(em,"') center / cover no-repeat fixed")},children:(0,t.jsxs)("div",{className:lE().container,children:[(0,t.jsx)("div",{className:lE().viewer,children:(0,t.jsx)(et,{heroId:e,rarity:s,iv:a,merge:k,dragonflower:j,blessing:I,support:C,arena:_,resplendent:y,mythicBonus1:G,mythicBonus2:U,mythicBonus3:$,mythicBonus4:el,bloom:D,weaponId:A,refine:X,assistId:T,specialId:R,skillAId:E,skillBId:K,skillCId:W,skillXId:Q,sealId:q,lv1:eh,openEditor:ej})}),(0,t.jsx)("div",{className:lE().editor,hidden:!ef,children:(0,t.jsx)(lT,{heroId:e,onChangeHero:l,rarity:s,setRarity:n,iv:a,setIV:c,merge:k,setMerge:f,dragonflower:j,setDragonflower:g,blessing:I,setBlessing:v,support:C,toggleSupport:w,arena:_,toggleArena:B,resplendent:y,toggleResplendent:S,bloom:D,setBloom:M,weaponId:A,setWeaponId:N,refine:X,setRefine:P,assistId:T,setAssistId:Z,specialId:R,setSpecialId:H,skillAId:E,setSkillAId:J,skillBId:K,setSkillBId:F,skillCId:W,setSkillCId:O,skillXId:Q,setSkillXId:V,sealId:q,setSealId:Y,mythicBonus1:G,setMythicBonus1:z,mythicBonus2:U,setMythicBonus2:L,mythicBonus3:$,setMythicBonus3:ee,mythicBonus4:el,setMythicBonus4:es,setDefaultWeapon:en,setDefaultAssist:ei,setDefaultSpecial:er,setDefaultSkillA:ea,setDefaultSkillB:ec,setDefaultSkillC:eo,setDefaultSkillX:ed,setAllSkillDefault:eu,lv1:eh,toggleLv1:ek,maxSkill:ex,toggleMaxSkill:ep,closeEditor:eg})})]})})]})}var lK=function(){return(0,t.jsx)(lZ.Z,{children:(0,t.jsx)(lJ,{})})},lF=function(){return(0,t.jsx)(lK,{})}},5617:function(e){e.exports={blessing:"blessing_blessing__blnCv","blessing-name":"blessing_blessing-name__ziDWm"}},5755:function(e){e.exports={checked:"checkbox_checked__FRt9o",button:"checkbox_button__A9wGG"}},4920:function(e){e.exports={container:"styles_container__xVglQ","neutral-button":"styles_neutral-button__3Jy3p","blessing-button":"styles_blessing-button__uTuYg"}},5305:function(e){e.exports={container:"styles_container__LXEcn","neutral-button":"styles_neutral-button__96Tz7","bloom-button":"styles_bloom-button__YS896","bonus-button":"styles_bonus-button__qw3DR"}},5694:function(e){e.exports={picker:"heropicker_picker__XC68o"}},711:function(e){e.exports={container:"styles_container__tZQ1M","neutral-button":"styles_neutral-button__g5gLf","iv-button":"styles_iv-button__E4oc0"}},5049:function(e){e.exports={container:"styles_container__X7OjJ","neutral-button":"styles_neutral-button__Ge9UB","bonus-button":"styles_bonus-button__Eneum"}},449:function(e){e.exports={refineName:"refineOption_refineName__rieWk",might:"refineOption_might__M5cZj",extractStats:"refineOption_extractStats__0xT_z",extractStat:"refineOption_extractStat__eVD8s"}},187:function(e){e.exports={button:"editor_button__1Aj_h",title:"editor_title__G7mXS","title-textgroup":"editor_title-textgroup__j5Pdh",content:"editor_content__N3y0j",section:"editor_section__Gd9W0","section-group":"editor_section-group___l6ak","hero-header":"editor_hero-header__8nv2V","button-content":"editor_button-content__KL_Lj","editor-img":"editor_editor-img__JmqNm","close-button":"editor_close-button__bPesF",container:"editor_container__jmHAB",input:"editor_input__V7XSN",options:"editor_options__IAlm_",optionsContainer:"editor_optionsContainer__xApnj",skillTitle:"editor_skillTitle__76dd8",skillName:"editor_skillName__RBSFh",skillSp:"editor_skillSp__4PqOu",might:"editor_might__0oY2D",extractStats:"editor_extractStats__e5tKT",extractStat:"editor_extractStat__luCo4",subTitle:"editor_subTitle__tfF5U",spButtons:"editor_spButtons__1ZKIN",listItems:"editor_listItems__kTlQH"}},3862:function(e){e.exports={skillTitle:"skillInfo_skillTitle__RXdU7",skillName:"skillInfo_skillName__meSQy",skillSp:"skillInfo_skillSp__WYlYJ",might:"skillInfo_might__g_UNX",extractStats:"skillInfo_extractStats__cwe7j",extractStat:"skillInfo_extractStat__1diNO"}},6056:function(e){e.exports={weaponTitle:"weaponInfo_weaponTitle__wVM5U",weaponName:"weaponInfo_weaponName__IfHcA",weaponSp:"weaponInfo_weaponSp__OrRZt",might:"weaponInfo_might__UnhBc",extractStats:"weaponInfo_extractStats__vwVGU",extractStat:"weaponInfo_extractStat__xMLPX"}},8872:function(e){e.exports={label:"labelcheckbox_label___erAl","label-checkbox":"labelcheckbox_label-checkbox__qO_m4"}},5903:function(e){e.exports={button:"optionButton_button__iR7_I"}},5101:function(e){e.exports={raritypicker:"raritypicker_raritypicker__wCStY"}},5859:function(e){e.exports={canvas:"UnitViewer_canvas___W2lj",container:"UnitViewer_container__G_o5P",button:"UnitViewer_button__z21Hj",download:"UnitViewer_download__R__70",menu:"UnitViewer_menu__NqcaY"}},8333:function(e){e.exports={container:"UnitEditor_container__Evp4h",viewer:"UnitEditor_viewer__04nZI",editor:"UnitEditor_editor__y_Qoc"}}},function(e){e.O(0,[381,216,267,118,888,774,179],function(){return e(e.s=6314)}),_N_E=e.O()}]);