(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{532:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return t(2053)}])},2053:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return bl}});var l=t(5893),r=t(9008),i=t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a=function(e){return(0,l.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){s(e,n,t[n])}))}return e}({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e,{children:[(0,l.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,l.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=function(e){return(0,l.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){o(e,n,t[n])}))}return e}({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e,{children:[(0,l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},u=t(3354),d=t(3846),h=t(6730),p=t(2734);function f(e){var n=e.sealDB,t=e.seal;return n&&t?n.skillA[t]?n.skillA[t]:n.skillB[t]?n.skillB[t]:n.skillC[t]?n.skillC[t]:n.seal[t]?n.seal[t]:null:null}var k=t(1160),x=t(1541),v=t(2683);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,i=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);s=!0);}catch(o){a=!0,r=o}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B={atk:"atk",spd:"spd",def:"def",res:"res"};function b(e){var n=e.heroDB,t=e.weaponDB,l=e.assistDB,r=e.specialDB,i=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skills;return{weapon:(0,v.i7)({heroDB:n,weaponDB:t,heroId:c,weapon:u.weapon}),assist:(0,d.NV)({assistDB:l,assist:u.assist}),special:(0,x.cf)({specialDB:r,special:u.special}),skillA:(0,k.PU)({skillDB:i,skillId:u.skillA}),skillB:(0,k.PU)({skillDB:s,skillId:u.skillB}),skillC:(0,k.PU)({skillDB:a,skillId:u.skillC}),seal:f({sealDB:o,seal:u.seal})}}var j=["assist","special","skillA","skillB","skillC","seal"];var y=t(2278),w={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var C=function(e){var n=e.rarity,t=void 0===n?5:n,l=e.merge,r=e.bst,i=e.spt,s=e.blesser,a=void 0===s?0:s,o=w[t];return 2*(150+o.base+o.float+2*l+Math.floor(r/5)+Math.floor(i/100)+4*a)};var D=t(5452);function S(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var I=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=n,this.imageData.onload=function(){t.loadedData=!0,t.callback&&t.callback(!0)},this.imageData.onerror=function(){t.loadedData=!1,t.callback&&t.callback(!1)}}var n,t,l;return n=e,(t=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&S(n.prototype,t),l&&S(n,l),e}();var A=t(243),M=16,O=554,P=A.s6;var _=174,T=555,N=["infantry","armored","cavalry","flying"];function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var R=1,H=43,W=85,Z=127,F=169,K=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,n,t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){E(e,n,t[n])}))}return e}({},e,E({},n,34*t+1))}),{});function J(e,n,t,l,r,i){K[l]&&e.drawImage(n,K[l],t,32,40,r,i,16,20)}var V=240,Q=557,q=[14,28,42],z=["infantry","armored","cavalry","flying"];var L=432,U=425;var Y=432,G=425;var X=275,$=594,ee=function(e,n,t){var l=37*t+1+$;e.drawImage(n,X,l,35,35)};var ne=82,te=557,le=[14,28,42];var re=112,ie=557,se=[14,28,42];var ae=130,oe=594,ce=[14,28,42,56],ue=[1e3,100,10],de=function(e,n,t,l){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R,i=8+oe+37*l;ue.forEach((function(l,s){if(t>=l){var a=Math.floor(t/l%10);J(e,n,r,a,ae+ce[s],i)}}));var s=t%10;J(e,n,r,s,ae+ce[3],i)};var he=465,pe=594;function fe(e){var n=e.context,t=e.numberAtlas,l=e.accelerate,r=e.specialCD;if(r){var i=H;l<0&&(i=W),l>0&&(i=Z),function(e,n,t){J(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,t,he,8+pe+74)}(n,t,Math.max(l+r,1),i)}}var ke=t(9298);function xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function ve(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,i=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);s=!0);}catch(o){a=!0,r=o}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return xe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var me=206,ge=1224,Be=["#ffa0af","white","#aaf0fa"],be=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});function je(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var ye=634,we=1224,Ce={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var De=296,Se=876,Ie=336,Ae=992;var Me={x:460,y:530};var Oe=195,Pe=370;function _e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function Te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){Te(e,n,t[n])}))}return e}function Ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,i=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);s=!0);}catch(o){a=!0,r=o}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return _e(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _e(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Re=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"],["bloomIcon","/assets/Icon_FlowerBud.png"]],He=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var We=function(e){var n=e.heroId,t=e.rarity,l=e.iv,r=e.merge,s=e.dragonflower,a=e.blessing,o=e.support,c=e.arena,d=e.resplendent,p=e.mythicBonus1,f=e.mythicBonus2,k=e.mythicBonus3,x=e.mythicBonus4,v=e.bloom,m=e.weapon,w=e.refine,S=e.assist,A=e.special,E=e.skillA,Z=e.skillB,K=e.skillC,ae=e.seal,oe=e.lv1,ce=(0,D.K)(),ue=(0,i.useRef)(null),he=(0,i.useRef)(null),pe=(0,i.useRef)(),xe=(0,i.useRef)(),_e=(0,i.useRef)(),Te=(0,i.useRef)(),We=(0,i.useRef)(),Ze=(0,i.useRef)(),Fe=(0,i.useRef)(),Ke=(0,i.useRef)(),Je=(0,i.useRef)(),Ve=(0,i.useRef)(),Qe=(0,i.useRef)(),qe=(0,i.useRef)(),ze=(0,i.useRef)(),Le=(0,i.useRef)(),Ue=(0,i.useRef)(),Ye=(0,i.useMemo)((function(){return(0,h.cK)(ce.heroDB,n)}),[ce.heroDB,n]),Ge=(0,i.useMemo)((function(){return{weapon:m,assist:S,special:A,skillA:E,skillB:Z,skillC:K,seal:ae}}),[m,S,A,E,Z,K,ae]),Xe=Ye.stats,$e=(0,i.useMemo)((function(){return function(e){var n,t,l,r,i,s,a,o,c,u=e.heroDB,d=e.weaponDB,p=e.assistDB,f=e.specialDB,k=e.skillADB,x=e.skillBDB,v=e.skillCDB,m=e.sealDB,B=e.heroId,j=e.skills,y=e.refine,w=e.rarity,C=(0,h.cK)(u,B),D=b({heroDB:u,weaponDB:d,assistDB:p,specialDB:f,skillADB:k,skillBDB:x,skillCDB:v,sealDB:m,heroId:B,skills:j}),S={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},I=0,A=(null===(n=D.special)||void 0===n?void 0:n.cd)||0;I+=(null===(t=D.weapon)||void 0===t?void 0:t.cd)||0,I+=(null===(l=D.assist)||void 0===l?void 0:l.cd)||0,I+=(null===(r=D.skillA)||void 0===r?void 0:r.cd)||0,I+=(null===(i=D.skillB)||void 0===i?void 0:i.cd)||0,I+=(null===(s=D.skillC)||void 0===s?void 0:s.cd)||0,I+=(null===(a=D.seal)||void 0===a?void 0:a.cd)||0;var M={hp:0,atk:0,spd:0,def:0,res:0},O=0,P=0;Object.entries(D).forEach((function(e){var n=g(e,2),t=n[0],l=n[1];if(S[t]=(null===l||void 0===l?void 0:l.name)||"-",M.hp+=(null===l||void 0===l?void 0:l.hp)||0,M.atk+=((null===l||void 0===l?void 0:l.mt)||0)+((null===l||void 0===l?void 0:l.atk)||0),M.spd+=(null===l||void 0===l?void 0:l.spd)||0,M.def+=(null===l||void 0===l?void 0:l.def)||0,M.res+=(null===l||void 0===l?void 0:l.res)||0,O+=(null===l||void 0===l?void 0:l.sp)||0,5===w){var r=null===l||void 0===l?void 0:l.bst;C.blesser&&(null===l||void 0===l?void 0:l.bbst)&&(r=null===l||void 0===l?void 0:l.bbst),P=Math.max(r||0,P)}}));var _=null===(o=D.weapon)||void 0===o||null===(c=o.refine)||void 0===c?void 0:c[y];return _&&(M.hp+=_.hp||0,M.atk+=(_.mt||0)+(_.atk||0),M.spd+=_.spd||0,M.def+=_.def||0,M.res+=_.res||0,I+=_.cd||0,D.weapon.exclusive||(O+=50),5===w&&(P=Math.max(P,_.bst||0))),{names:S,stats:M,accelerate:I,specialCD:A,spt:O,bst:P}}({heroDB:ce.heroDB,weaponDB:ce.weaponDB,assistDB:ce.assistDB,specialDB:ce.specialDB,skillADB:ce.skillADB,skillBDB:ce.skillBDB,skillCDB:ce.skillCDB,sealDB:ce.sealDB,skills:Ge,heroId:n,refine:w,rarity:t})}),[Ge,n,w,t,ce.heroDB,ce.weaponDB,ce.assistDB,ce.specialDB,ce.skillADB,ce.skillBDB,ce.skillCDB,ce.sealDB]),en=(0,i.useMemo)((function(){return(0,y.f)({rarity:t,stats:Xe,iv:l,merge:r,support:o,skillStats:$e.stats,lv1:oe,arena:c,dragonflower:s,resplendent:d,mythicBonus1:p,mythicBonus2:f,mythicBonus3:k,mythicBonus4:x,bloom:v})}),[t,Xe,l,r,o,$e,oe,c,s,d,p,f,k,x,v]),nn=(0,i.useMemo)((function(){return C({rarity:t,merge:r,bst:Math.max(en.bst,$e.bst,Ye.bst||0),spt:$e.spt})}),[t,r,en.bst,$e.bst,$e.spt,Ye]),tn=(0,i.useRef)({}),ln=(0,i.useCallback)((function(){if(ue.current){var e=tn.current,n=e.background,t=e.foreground,l=e.foreground2,r=e.portrait,i=e.rarityAtlas,s=e.weaponTypeAtlas,a=e.moveTypeAtlas,o=e.dragonflowerAtlas,c=e.supportAtlas,u=e.blessingAtlas,d=e.numberAtlas,h=e.weaponIcon,p=e.assistIcon,f=e.specialIcon,k=e.textA,x=e.textB,v=e.textC,m=e.textS,g=e.arenaIcon,B=e.skillAIcon,b=e.skillBIcon,j=e.skillCIcon,y=e.sealIcon,w=e.resplendentIcon,C=e.bloomIcon,D=pe.current,S=D.title,I=D.name,A=D.weaponType,E=D.moveType,Z=!!pe.current.blessing||!!Je.current,K=ue.current.getContext("2d");K.clearRect(0,0,540,960),n.loaded&&function(e){var n=e.context,t=e.background;e.support?n.drawImage(t,540,0,540,960,0,0,540,960):n.drawImage(t,0,0,540,960,0,0,540,960)}({context:K,background:n.image,support:Ve.current}),r.loaded&&function(e){var n=e.context,t=e.portrait;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:K,portrait:r.image}),t.loaded&&function(e){var n=e.context,t=e.foreground;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:K,foreground:t.image}),l.loaded&&function(e){var n=e.context,t=e.foreground2;e.dragonflower?n.drawImage(t,0,50,540,50,0,542,540,50):n.drawImage(t,0,0,540,50,0,542,540,50)}({context:K,foreground2:l.image,dragonflower:Fe.current}),i.loaded&&function(e){var n=e.context,t=e.rarityAtlas;switch(e.rarity){case 5:n.drawImage(t,0,0,153,40,48,380,153,40);break;case 4:n.drawImage(t,0,41,153,40,42,380,153,40)}}({context:K,rarityAtlas:i.image,rarity:Te.current}),s.loaded&&function(e){var n=e.context,t=e.weaponTypeAtlas,l=e.weaponType,r=P.indexOf(l);r>-1&&n.drawImage(t,56*r,0,56,55,M,O,28,28)}({context:K,weaponTypeAtlas:s.image,weaponType:A}),a.loaded&&function(e){var n=e.context,t=e.moveTypeAtlas,l=e.moveType,r=N.indexOf(l);r>-1&&n.drawImage(t,56*r,0,52,52,_,T,26,26)}({context:K,moveTypeAtlas:a.image,moveType:E}),o.loaded&&d.loaded&&function(e){var n=e.context,t=e.dragonflowerAtlas,l=e.numberAtlas,r=e.moveType,i=e.dragonflower;if(i){var s=z.indexOf(r);s>-1&&n.drawImage(t,0,58*s,64,58,216,546,48,44);var a=0,o=H;J(n,l,o,"+",V+q[0],Q),a+=1,i>9&&(J(n,l,o,Math.floor(i/10),V+q[a],Q),a+=1),J(n,l,o,i%10,V+q[a],Q)}}({context:K,dragonflowerAtlas:o.image,numberAtlas:d.image,moveType:E,dragonflower:Fe.current}),c.loaded&&function(e){var n=e.context,t=e.supportAtlas,l=e.support,r=e.hasBlessing?108:0;l&&n.drawImage(t,L-r,U,108,115)}({context:K,supportAtlas:c.image,support:Ve.current,hasBlessing:Z}),u.loaded&&function(e){var n=e.context,t=e.blessingAtlas;n.drawImage(t,Y,G,108,115)}({context:K,blessingAtlas:u.image}),d.loaded&&(!function(e){var n=e.context,t=e.numberAtlas,l=e.lv1?1:40,r=0;l>9&&J(n,t,H,4,ne+le[r],te),J(n,t,H,l%10,ne+le[r+=1],te)}({context:K,numberAtlas:d.image,lv1:Le.current}),function(e){var n=e.context,t=e.numberAtlas,l=e.merge;if(!(l<=0)){var r=0,i=l>9?F:H;J(n,t,i,"+",re+se[0],ie),r+=1,l>9&&(J(n,t,i,1,re+se[r],ie),r+=1),J(n,t,i,l%10,re+se[r],ie)}}({context:K,numberAtlas:d.image,merge:Ze.current}),function(e){var n=e.context,t=e.numberAtlas,l=e.stats,r=e.score,i=e.sbst,s=e.bst;Object.values(l).forEach((function(e,l){l>4||de(n,t,e,l,R)}));var a=i>s?W:F;de(n,t,s,5,F),de(n,t,r,6,a)}(Ne({context:K,numberAtlas:d.image,score:Ue.current,sbst:Math.max(xe.current.bst||0,pe.current.bst||0)},_e.current)),fe({context:K,numberAtlas:d.image,accelerate:xe.current.accelerate,specialCD:xe.current.specialCD})),function(e){var n=e.context,t=e.weaponIcon,l=e.assistIcon,r=e.specialIcon,i=e.textA,s=e.textB,a=e.textC,o=e.textS,c=e.skillAIcon,u=e.skillBIcon,d=e.skillCIcon,h=e.sealIcon;t.loaded&&ee(n,t.image,0),l.loaded&&ee(n,l.image,1),r.loaded&&ee(n,r.image,2),c.loaded&&ee(n,c.image,3),n.drawImage(i.image,X+20,$+112+18,18,18),u.loaded&&ee(n,u.image,4),n.drawImage(s.image,X+20,$+149+18,18,18),d.loaded&&ee(n,d.image,5),n.drawImage(a.image,X+20,$+186+18,18,18),h.loaded&&ee(n,h.image,6),n.drawImage(o.image,X+20,$+223+18,18,18)}({context:K,weaponIcon:h,assistIcon:p,specialIcon:f,textA:k,textB:x,textC:v,textS:m,skillAIcon:B,skillBIcon:b,skillCIcon:j,sealIcon:y}),he.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var n=e.canvas,t=e.iv,l=e.merge,r=e.bloom,i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#101010",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8;var s=(0,ke.$r)(t),a=s.boon,o=s.bane,c={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};c[a]+=1,c[o]-=1,c[o]=l>0?1:c[o],r&&(c[r]=Math.min(2,c[r]+1)),be.forEach((function(e,n){var t=ve(e,2),l=t[0],r=t[1],s=ge+74*n;i.fillStyle=Be[c[l]],i.strokeText(r,me,s),i.fillText(r,me,s)}))}({canvas:he.current,iv:We.current,merge:Ze.current,bloom:Ke.current}),function(e){var n=e.canvas,t=e.refine,l=e.weapon,r=je(e,["canvas","refine","weapon"]),i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.textAlign="left",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeStyle="#101010",i.fillStyle=t&&"-"!==t?"lime":"white";var s=ye+("-"===l?4:0),a=we;i.strokeText(l,s,a),i.fillText(l,s,a),i.fillStyle="white",Object.keys(r).forEach((function(e){var n=r[e],t=we+74*Ce[e],l="-"===n?4:0;i.strokeText(n,ye+l,t),i.fillText(n,ye+l,t)}))}(Ne({canvas:he.current,refine:ze.current},xe.current.names)),function(e){var n=e.canvas,t=e.title,l=e.name,r=n.getContext("2d");r.font="500 50px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",r.fillStyle="white",r.strokeStyle="#220d00",r.textAlign="center",r.textBaseline="middle",r.lineJoin="round",r.lineWidth=8,r.strokeText(t,De,Se),r.fillText(t,De,Se),r.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",r.strokeText(l,Ie,Ae),r.fillText(l,Ie,Ae)}({canvas:he.current,title:S,name:I}),Qe.current&&g&&function(e){var n=e.context,t=e.arenaIcon;n.drawImage(t,Me.x,Me.y,50,49)}({context:K,arenaIcon:g.image}),qe.current&&w&&function(e){var n=e.context,t=e.resplendentIcon;n.drawImage(t,Oe,Pe,64,63)}({context:K,resplendentIcon:w.image}),Ke.current&&C&&function(e){var n=e.context,t=e.bloomIcon;n.drawImage(t,5,375,45,45)}({context:K,bloomIcon:C.image}),K.drawImage(he.current,0,0,540,960)}}),[]);(0,i.useEffect)((function(){he.current=document.createElement("canvas"),he.current.width=1080,he.current.height=1920}),[]),(0,i.useEffect)((function(){Re.forEach((function(e){var n=Ee(e,2),t=n[0],l=n[1];tn.current[t]=new I(ln),tn.current[t].load((0,u.Z)(l))}))}),[tn,ln]),(0,i.useEffect)((function(){var e=function(e){var n=e.resplendentDB,t=e.heroId;return e.enable&&(null===n||void 0===n?void 0:n.includes(t))?"".concat(t,"(R)"):t}({resplendentDB:ce.resplendentDB,heroId:Ye.id,enable:d});tn.current.portrait.load((0,u.Z)("/portraits/".concat(e,".png")));var n=function(e){var n=e.heroDB,t=e.weaponDB,l=e.assistDB,r=e.specialDB,i=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skills,d=e.refine,h=b({heroDB:n,weaponDB:t,assistDB:l,specialDB:r,skillADB:i,skillBDB:s,skillCDB:a,sealDB:o,heroId:c,skills:u}),p={};if(j.forEach((function(e){var n=h[e];p[e]=(null===n||void 0===n?void 0:n.icon)&&"/skills/".concat(n.icon)})),d&&"-"!==d){var f,k,x,v=B[d]||(null===(f=h.weapon)||void 0===f||null===(k=f.refine)||void 0===k||null===(x=k[d])||void 0===x?void 0:x.icon);v&&(p.weapon="/skills/weapon/".concat(v,".png"))}return p}({heroDB:ce.heroDB,weaponDB:ce.weaponDB,assistDB:ce.assistDB,specialDB:ce.specialDB,skillADB:ce.skillADB,skillBDB:ce.skillBDB,skillCDB:ce.skillCDB,sealDB:ce.sealDB,skills:Ge,heroId:Ye.id,refine:w});He.forEach((function(e){var t=e.skillName,l=e.empty;tn.current["".concat(t,"Icon")].load((0,u.Z)("".concat(n[t]||l)))}));var t="-"!==Ye.blessing&&!!Ye.blessing||!!a,l=(0,u.Z)("/assets/blessing-".concat(Ye.blessing||a,".png"));tn.current.blessingAtlas.load(t?l:"")}),[Ye,d,Ge,w,a,en,ce.heroDB,ce.weaponDB,ce.assistDB,ce.specialDB,ce.skillADB,ce.skillBDB,ce.skillCDB,ce.sealDB,ce.resplendentDB]),(0,i.useEffect)((function(){pe.current=Ye,Te.current=t,We.current=l,Ze.current=r,Fe.current=s,Je.current=a,Ve.current=o,Qe.current=c,qe.current=d,ze.current=w,Le.current=oe,Ue.current=nn,xe.current=$e,_e.current=en,Ke.current=v,ln()}),[Ye,t,l,r,s,a,o,c,d,w,oe,nn,$e,en,v,ln]);var rn=(0,i.useCallback)((function(){var e=ue.current.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="".concat(null===Ye||void 0===Ye?void 0:Ye.name,"-").concat(null===Ye||void 0===Ye?void 0:Ye.title,".png"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[null===Ye||void 0===Ye?void 0:Ye.name,null===Ye||void 0===Ye?void 0:Ye.title]);return{canvasRef:ue,triggerDownload:rn}},Ze=t(2696),Fe=t.n(Ze);function Ke(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function Je(e){var n=e.openEditor,t=Ke(e,["openEditor"]),r=We(t),i=r.canvasRef,s=r.triggerDownload;return(0,l.jsxs)("div",{className:Fe().container,children:[(0,l.jsx)("canvas",{className:Fe().canvas,width:"540",height:"960",ref:i}),(0,l.jsx)("button",{className:"".concat(Fe().button," ").concat(Fe().download),onClick:s,children:(0,l.jsx)(a,{})}),(0,l.jsx)("button",{className:"".concat(Fe().button," ").concat(Fe().menu),onClick:n,children:(0,l.jsx)(c,{})})]})}var Ve=(0,i.memo)(Je);function Qe(e){return 4===e?"4\u2605":"5\u2606"}var qe=[{name:"+\u653b\u64ca",value:"atk"},{name:"+\u901f\u5ea6",value:"spd"},{name:"+\u9632\u5b88",value:"def"},{name:"+\u9b54\u9632",value:"res"}];function ze(e){var n=qe.find((function(n){return e===n.value}));return(null===n||void 0===n?void 0:n.name)||"-"}var Le=[{name:"+HP",value:"hp"},{name:"+\u653b\u64ca",value:"atk"},{name:"+\u901f\u5ea6",value:"spd"},{name:"+\u9632\u5b88",value:"def"},{name:"+\u9b54\u9632",value:"res"}];function Ue(e){var n=Le.find((function(n){return e===n.value}));return(null===n||void 0===n?void 0:n.name)||"-"}var Ye=t(8417),Ge=t(2008),Xe=t.n(Ge);function $e(){return(0,l.jsx)("div",{className:Xe().checked})}var en=function(e){var n=e.className,t=e.checked,r=e.onChange,s=(0,i.useCallback)((function(e){r&&(e.stopPropagation(),r(!t))}),[t,r]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{role:"button",className:"".concat(Xe().button," ").concat(n),onClick:s,children:t&&(0,l.jsx)($e,{})})})},nn=t(7710),tn=t.n(nn);var ln=function(e){var n=e.children,t=e.checked,r=e.onChange;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("label",{className:tn().label,children:[n,(0,l.jsx)(en,{className:tn()["label-checkbox"],checked:t,onChange:r})]})})},rn=t(2718),sn=t(7413),an=t(5497),on=t.n(an);var cn=function(e){var n=e.blessing,t=(0,i.useMemo)((function(){return(0,sn._n)(n)}),[n]),r=t.src,s=t.name;return(0,l.jsxs)("div",{className:on().blessing,children:[r&&(0,l.jsx)(rn.Z,{src:r,loading:"lazy",width:"50px",height:"50px"}),(0,l.jsx)("div",{className:on()["blessing-name"],children:s})]})},un=t(5767),dn=t.n(un);var hn=function(e){var n=e.onClick;return(0,l.jsx)("button",{className:dn().button,onClick:n,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})},pn=t(3511),fn=t(8219);function kn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var xn=function(e){var n=e.heroId,t=e.resplendent,r=(0,D.K)(),s=r.heroDB,a=r.assistDB,o=r.resplendentDB,c=(0,i.useMemo)((function(){return(0,h.gO)({heroDB:s,assistDB:a,resplendentDB:o,heroId:n,noStat:!0})}),[s,a,o,n]);return(0,l.jsx)(fn.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){kn(e,n,t[n])}))}return e}({},c,{faceSrc:t?c.faceSrcR:c.faceSrc}))};var vn=function(e){var n=e.heroId,t=e.weapon,r=(0,D.K)(),i=r.heroDB,s=r.weaponDB;return(0,l.jsx)(l.Fragment,{children:(0,v.fu)({heroDB:i,weaponDB:s,heroId:n,weapon:t})})};var mn=function(e){var n=e.heroId,t=e.weapon,r=e.refine,i=(0,D.K)(),s=i.heroDB,a=i.weaponDB,o=(0,v.Wu)({heroDB:s,weaponDB:a,heroId:n,weapon:t,refine:r}),c=o.icon,u=o.name;return(0,l.jsxs)(l.Fragment,{children:[c&&(0,l.jsx)(pn.JO,{src:"/skills/weapon/".concat(c,".png")}),u]})};var gn=function(e){var n=e.assist,t=(0,D.K)().assistDB;return(0,l.jsx)(l.Fragment,{children:(0,d.sq)({assistDB:t,assist:n})})};var Bn=function(e){var n=e.special,t=(0,D.K)().specialDB;return(0,l.jsx)(l.Fragment,{children:(0,x.R_)({specialDB:t,special:n})})},bn=["skillA","skillB","skillC"];var jn=function(e){var n=e.skillType,t=e.skillId,r=(0,D.K)();if(bn.includes(n)){var i=r["".concat(n,"DB")],s=(0,k.cp)({skillDB:i,skillId:t}),a=s.icon,o=s.name;return(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsx)(pn.JO,{src:"/skills/".concat(a)}),o]})}if("seal"===n){var c=function(e){var n=f({sealDB:e.sealDB,seal:e.seal});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({sealDB:r.sealDB,seal:t}),u=c.icon,d=c.name;return(0,l.jsxs)(l.Fragment,{children:[u&&(0,l.jsx)(pn.JO,{src:"/skills/".concat(u)}),d]})}return null};function yn(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var wn=function(e){var n=e.hidden,t=e.heroId,r=e.rarity,s=e.iv,a=e.merge,o=e.dragonflower,c=e.blessing,u=e.support,d=e.arena,p=e.resplendent,f=e.mythicBonus1,k=e.mythicBonus2,x=e.mythicBonus3,m=e.mythicBonus4,g=e.bloom,B=e.weapon,b=e.refine,j=e.assist,y=e.special,w=e.skillA,C=e.skillB,S=e.skillC,I=e.seal,A=e.lv1,M=e.maxSkill,O=yn(e,["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","mythicBonus1","mythicBonus2","mythicBonus3","mythicBonus4","bloom","weapon","refine","assist","special","skillA","skillB","skillC","seal","lv1","maxSkill"]),P=function(e){var n=e.heroId,t=e.weapon,l=e.maxSkill,r=(0,D.K)(),s=r.heroDB,a=r.weaponDB,o=(0,i.useMemo)((function(){return(0,h.cK)(s,n)}),[s,n]),c=(0,i.useMemo)((function(){if("Feh"===n)return!1;var e=(0,v.CB)({heroDB:s,weaponDB:a,heroId:n});return l?e.filter((function(e){return e.last})).length>0:e.length>0}),[s,a,n,l]),u=(0,i.useMemo)((function(){return"Feh"!==n&&(0,v.Mf)({heroDB:s,weaponDB:a,heroId:n,weapon:t}).length>0}),[s,a,n,t]),d=(0,i.useMemo)((function(){return"Feh"!==n&&"mythic"===o.pool}),[n,o]);return"Feh"===n?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1,isMythic:!1}:{hasRarity:o.rarity.length>0,hasBlessing:!!o.blessing,hasWeapon:c,hasRefine:u,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:o.blessing,isMythic:d}}({heroId:t,weapon:B,maxSkill:M}),_=P.hasRarity,T=P.hasBlessing,N=P.hasWeapon,E=P.hasRefine,R=P.hasAssist,H=P.hasSpecial,W=P.hasSkillA,Z=P.hasSkillB,F=P.hasSkillC,K=P.hasSeal,J=P.blessing,V=P.isMythic;return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsx)("button",{className:dn()["close-button"],onClick:O.closeEditor,children:(0,l.jsx)(Ye.Z,{})}),(0,l.jsx)(pn.Dx,{children:(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:"\u82f1\u96c4"}),(0,l.jsx)(ln,{checked:A,onChange:O.toggleLv1,children:"Lv1"})]})}),(0,l.jsxs)(pn.VY,{children:[(0,l.jsx)("button",{className:"".concat(dn().button," ").concat(dn()["hero-header"]),onClick:O.openHeroPicker,children:(0,l.jsx)(xn,{heroId:t,resplendent:p})}),(0,l.jsxs)(pn.P9,{children:[(0,l.jsxs)(pn.M9,{disabled:!_,onClick:O.openRarityPicker,children:["\u7a00\u6709\u5ea6",(0,l.jsx)(pn.BQ,{children:Qe(r)})]}),(0,l.jsxs)(pn.M9,{disabled:"Feh"===t,onClick:O.openIVPicker,children:["IV",(0,l.jsx)(pn.BQ,{children:(0,ke.Zx)(s)})]}),(0,l.jsxs)(pn.M9,{disabled:T,onClick:O.openBlessingPicker,children:["\u795d\u798f",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(cn,{blessing:J||c})})]}),(0,l.jsxs)(pn.M9,{onClick:O.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",(0,l.jsx)(pn.BQ,{children:a?"+".concat(a):"-"})]}),(0,l.jsxs)(pn.M9,{onClick:O.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",(0,l.jsx)(pn.BQ,{children:o?"+".concat(o):"-"})]})]})]}),(0,l.jsx)(pn.Dx,{children:(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:"\u6280\u80fd"}),(0,l.jsx)(ln,{checked:M,onChange:O.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,l.jsx)(hn,{onClick:O.setAllSkillDefault})]})}),(0,l.jsxs)(pn.VY,{children:[(0,l.jsxs)(pn.P9,{children:[(0,l.jsxs)(pn.M9,{disabled:!N,onClick:O.openWeaponPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(vn,{heroId:t,weapon:B})})]}),(0,l.jsxs)(pn.M9,{disabled:!E,onClick:O.openRefinePicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(mn,{heroId:t,weapon:B,refine:b})})]})]}),(0,l.jsxs)(pn.P9,{children:[(0,l.jsxs)(pn.M9,{disabled:!R,onClick:O.openAssistPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(gn,{assist:j})})]}),(0,l.jsxs)(pn.M9,{disabled:!H,onClick:O.openSpecialPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(Bn,{special:y})})]})]}),(0,l.jsxs)(pn.P9,{children:[(0,l.jsxs)(pn.M9,{disabled:!W,onClick:O.openSkillAPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(jn,{skillType:"skillA",skillId:w})})]}),(0,l.jsxs)(pn.M9,{disabled:!Z,onClick:O.openSkillBPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(jn,{skillType:"skillB",skillId:C})})]}),(0,l.jsxs)(pn.M9,{disabled:!F,onClick:O.openSkillCPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(jn,{skillType:"skillC",skillId:S})})]}),(0,l.jsxs)(pn.M9,{disabled:!K,onClick:O.openSealPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",(0,l.jsx)(pn.BQ,{children:(0,l.jsx)(jn,{skillType:"seal",skillId:I})})]})]})]}),(0,l.jsx)(pn.Dx,{children:"\u5f37\u5316"}),(0,l.jsxs)(pn.VY,{children:[(0,l.jsxs)(pn.P9,{children:[(0,l.jsxs)(pn.M9,{onClick:O.toggleSupport,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"\u53ec\u559a\u5e2b\u5951\u7d04",(0,l.jsx)(en,{checked:u})]}),(0,l.jsxs)(pn.M9,{onClick:O.toggleArena,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"\u9b25\u6280\u5834",(0,l.jsx)(en,{checked:d})]}),(0,l.jsxs)(pn.M9,{onClick:O.toggleResplendent,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"\u795e\u88dd",(0,l.jsx)(en,{checked:p})]}),(0,l.jsxs)(pn.M9,{disabled:"Feh"===t,onClick:O.openBloomPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Icon_FlowerBud.png"}),"\u7dbb\u653e",(0,l.jsx)(pn.BQ,{style:{height:"42px"},children:Ue(g)})]})]}),!V&&(0,l.jsxs)(pn.P9,{children:[(0,l.jsxs)(pn.M9,{disabled:"Feh"===t,onClick:O.openMythicBonus1,children:["\u795e\u968e1",(0,l.jsx)(pn.BQ,{children:ze(f)})]}),(0,l.jsxs)(pn.M9,{disabled:"Feh"===t,onClick:O.openMythicBonus2,children:["\u795e\u968e2",(0,l.jsx)(pn.BQ,{children:ze(k)})]}),(0,l.jsxs)(pn.M9,{disabled:"Feh"===t,onClick:O.openMythicBonus3,children:["\u795e\u968e3",(0,l.jsx)(pn.BQ,{children:ze(x)})]}),(0,l.jsxs)(pn.M9,{disabled:"Feh"===t,onClick:O.openMythicBonus4,children:["\u795e\u968e4",(0,l.jsx)(pn.BQ,{children:ze(m)})]})]})]})]})},Cn=t(4074);function Dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Sn=function(e){return(0,l.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){Dn(e,n,t[n])}))}return e}({width:"24",height:"24",viewBox:"0 0 24 24"},e,{children:[(0,l.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,l.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var In=function(e){var n=e.onClick;return(0,l.jsx)("button",{onClick:n,style:{backgroundColor:"transparent",display:"block"},children:(0,l.jsx)(Sn,{fill:"white"})})},An=t(1698),Mn=t.n(An);var On=function(e){var n=e.hidden,t=e.heroId,r=e.onChangeHero,s=e.onClickBack,a=e.resplendent,o=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),"\u82f1\u96c4"]}),(0,l.jsx)("div",{className:Mn().picker,children:(0,l.jsx)(Cn.Z,{heroId:t,onSelect:o,noDropdown:!0,resplendent:a})})]})},Pn=t(1865);var _n=function(e){var n=e.hidden,t=e.rarity,r=e.selectRarity,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),"\u7a00\u6709\u5ea6"]}),(0,l.jsx)(Pn.Z,{rarity:t,minRarity:4,onSelect:a})]})},Tn=t(5711),Nn=t.n(Tn),En=function(e){var n=e.iv,t=e.selectIV,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:Nn().container,children:[(0,l.jsx)("button",{className:Nn()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),ke.YM.map((function(e){return(0,l.jsx)("button",{className:Nn()["iv-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var Rn=function(e){var n=e.hidden,t=e.iv,r=e.selectIV,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),"IV"]}),(0,l.jsx)(En,{iv:t,selectIV:a})]})},Hn=t(2884),Wn=t.n(Hn),Zn=function(e){var n=e.blessing,t=e.selectBlessing,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:Wn().container,children:[(0,l.jsx)("button",{className:Wn()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),sn.YM.map((function(e){return(0,l.jsx)("button",{className:Wn()["blessing-button"],"data-active":n===e.value,value:e.value,onClick:r,children:(0,l.jsx)(cn,{blessing:e.value})},e.value)}))]})};var Fn=function(e){var n=e.hidden,t=e.blessing,r=e.selectBlessing,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),"IV"]}),(0,l.jsx)(Zn,{blessing:t,selectBlessing:a})]})},Kn=t(9365);var Jn=function(e){var n=e.hidden,t=e.merge,r=e.selectMerge,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),"\u7a81\u7834\u6b21\u6578"]}),(0,l.jsx)(Kn.Z,{merge:t,onSelect:a})]})},Vn=t(5431),Qn=new Array(26).fill(0).map((function(e,n){return n}));var qn=function(e){var n=e.dragonflower,t=e.onSelect;return(0,l.jsx)(Vn.Z,{value:n,onSelect:t,options:Qn})};var zn=function(e){var n=e.hidden,t=e.dragonflower,r=e.selectDragonflower,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),"\u795e\u9f8d\u4e4b\u82b1"]}),(0,l.jsx)(qn,{dragonflower:t,onSelect:a})]})},Ln=t(1237),Un=t.n(Ln);var Yn=function(e){var n=e.active,t=e.last,r=e.hidden,i=e.value,s=e.children,a=e.onClick;return(0,l.jsx)("button",{className:Un().button,"data-active":n,"data-last":t,value:i,onClick:a,hidden:r,children:s})};function Gn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Xn(e){var n=e.heroId,t=e.filter,l=e.maxSkill,r=(0,D.K)(),s=r.heroDB,a=r.weaponDB,o=(0,i.useMemo)((function(){return(0,v.CB)({heroDB:s,weaponDB:a,heroId:n})}),[n,s,a]),c=(0,i.useMemo)((function(){return o.map((function(e){var n=!1;return l&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){Gn(e,n,t[n])}))}return e}({},e,{hidden:n})}))}),[o,t,l]);return{options:c}}var $n=t(959);var et=function(e){var n=e.active,t=e.weapon,r=e.hidden,i=e.onClick;return(0,l.jsx)(Yn,{active:n,last:t.last,hidden:r,value:t.id,onClick:i,children:(0,l.jsx)($n.Z,{weapon:t})})};function nt(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function tt(e){var n=e.heroId,t=e.weapon,r=e.selectWeapon,s=Xn({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,a=(0,i.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,l.jsxs)(pn.Ei,{children:[(0,l.jsx)(Yn,{active:!t,value:"",onClick:a,children:"\u7121\u6b66\u5668"}),s.map((function(e){var n=e.hidden,r=nt(e,["hidden"]);return(0,l.jsx)(et,{hidden:n,weapon:r,active:t===e.id,onClick:a},e.id)}))]})}var lt=(0,i.memo)(tt);var rt=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weapon,a=e.selectWeapon,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,i.useState)(""),h=d[0],p=d[1],f=(0,i.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,i.useCallback)((function(e){a(e),t()}),[a,t]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:t}),(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:"\u6b66\u5668"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,l.jsx)(hn,{onClick:u})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:f}),(0,l.jsx)(pn.qn,{children:(0,l.jsx)(lt,{heroId:r,weapon:s,filter:h,maxSkill:o,selectWeapon:k})})]})};var it=t(934),st=t.n(it);function at(e){var n=e.children;return(0,l.jsx)("div",{className:st().refineName,children:n})}function ot(e){var n=e.src;return(0,l.jsx)(rn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function ct(e){var n=e.children;return(0,l.jsx)("div",{className:st().might,children:n})}function ut(e){var n=e.children;return(0,l.jsx)("div",{className:st().extractStats,children:n})}function dt(e){var n=e.children;return(0,l.jsx)("div",{className:st().extractStat,children:n})}function ht(e){var n=e.cd,t=e.children;return n?(0,l.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function pt(e){var n=e.children;return(0,l.jsx)("div",{style:{color:"salmon"},children:n})}var ft=function(e){return e>0?"+".concat(e):"".concat(e)};var kt=function(e){var n=e.active,t=e.hidden,r=e.refineType,i=e.refine,s=e.onClick;return(0,l.jsxs)(Yn,{active:n,last:!0,hidden:t,value:r,onClick:s,children:[(0,l.jsxs)(at,{children:[i.icon&&(0,l.jsx)(ot,{src:i.icon}),i.name]}),i.mt&&(0,l.jsxs)(ct,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,l.jsxs)(ht,{cd:i.cd,children:["\u5967\u7fa9 cd",ft(i.cd)]}),(0,l.jsxs)(ut,{children:[i.hp&&(0,l.jsxs)(dt,{children:["HP ",ft(i.hp)]}),i.atk&&(0,l.jsxs)(dt,{children:["\u653b\u64ca ",ft(i.atk)]}),i.spd&&(0,l.jsxs)(dt,{children:["\u901f\u5ea6 ",ft(i.spd)]}),i.def&&(0,l.jsxs)(dt,{children:["\u9632\u5b88 ",ft(i.def)]}),i.res&&(0,l.jsxs)(dt,{children:["\u9b54\u9632 ",ft(i.res)]})]}),i.exclusive&&(0,l.jsx)(pt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function xt(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function vt(e){var n=e.heroId,t=e.weapon,r=e.refine,s=e.selectRefine,a=function(e){var n=e.heroId,t=e.weapon,l=(0,D.K)(),r=l.heroDB,s=l.weaponDB;return{options:(0,i.useMemo)((function(){return(0,v.Mf)({heroDB:r,weaponDB:s,heroId:n,weapon:t})}),[r,s,n,t])}}({heroId:n,weapon:t}).options,o=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]);return(0,l.jsxs)(pn.Ei,{children:[(0,l.jsx)(Yn,{active:!r,value:"",onClick:o,children:"\u7121\u935b\u9020"}),a.map((function(e){var n=e.value,t=xt(e,["value"]);return(0,l.jsx)(kt,{refineType:n,refine:t,active:r===n,onClick:o},n)}))]})}var mt=(0,i.memo)(vt);var gt=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weapon,a=e.refine,o=e.selectRefine,c=(0,i.useCallback)((function(e){o(e),t()}),[o,t]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:t}),(0,l.jsx)(pn.dH,{children:(0,l.jsx)("span",{children:"\u935b\u9020"})})]}),(0,l.jsx)(pn.qn,{children:(0,l.jsx)(mt,{heroId:r,weapon:s,refine:a,selectRefine:c})})]})},Bt=t(6738),bt=t(1728);function jt(e){var n=e.active,t=e.hidden,r=e.skill,i=e.onClick;return(0,l.jsxs)(Yn,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(pn.pp,{children:[(0,l.jsxs)(pn.bP,{children:[r.icon&&(0,l.jsx)(pn.JO,{src:"/skills/".concat(r.icon)}),r.name]}),(0,l.jsxs)(pn.n0,{children:[r.sp,"SP"]})]}),r.mt&&(0,l.jsxs)(pn.XR,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,l.jsxs)(pn.eM,{cd:r.cd,children:["\u5967\u7fa9 cd",(0,pn.lG)(r.cd)]}),(0,l.jsxs)(pn.lJ,{children:[r.hp&&(0,l.jsxs)(pn.i5,{children:["HP ",(0,pn.lG)(r.hp)]}),r.atk&&(0,l.jsxs)(pn.i5,{children:["\u653b\u64ca ",(0,pn.lG)(r.atk)]}),r.spd&&(0,l.jsxs)(pn.i5,{children:["\u901f\u5ea6 ",(0,pn.lG)(r.spd)]}),r.def&&(0,l.jsxs)(pn.i5,{children:["\u9632\u5b88 ",(0,pn.lG)(r.def)]}),r.res&&(0,l.jsxs)(pn.i5,{children:["\u9b54\u9632 ",(0,pn.lG)(r.res)]})]}),r.exclusive&&(0,l.jsx)(pn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var yt=(0,i.memo)(jt);function wt(e){var n=e.index,t=e.style,r=e.data,i=r.skillId,s=r.skills,a=r.onClick,o=s[n];return(0,l.jsx)("div",{style:t,children:(0,l.jsx)(yt,{active:i===o.id,skill:o,onClick:a},o.id)})}function Ct(e){var n=e.heroId,t=e.weaponId,r=e.skillType,s=e.skillId,a=e.selectSkill,o=e.filter,c=e.maxSkill,u=(0,i.useCallback)((function(e){e.stopPropagation(),a(e.currentTarget.value)}),[a]),d=function(e){var n=e.heroId,t=e.weaponId,l=e.skillType,r=e.filter,s=e.maxSkill,a=(0,D.K)(),o=a.rules2DB,c=a.heroDB,u=a.weaponDB,d=a["".concat(l,"DB")],h=(0,i.useMemo)((function(){return(0,k.AY)({rules2DB:o,heroDB:c,weaponDB:u,skillDB:d,heroId:n,weaponId:t})}),[o,c,u,d,n,t]),p=(0,i.useMemo)((function(){var e={};h.forEach((function(n){s&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[s,h]),f=(0,i.useState)([]),x=f[0],v=f[1],m=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;v((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),g=(0,i.useMemo)((function(){return h.filter((function(e){return!(s&&!e.last)&&!(r&&!e.query.includes(r.toLowerCase()))&&!(x.length&&!x.includes(e.sp))}))}),[h,r,s,x]);return(0,i.useEffect)((function(){v((function(e){return e.filter((function(e){return p.includes(e)}))}))}),[p]),{options:g,spOptions:p,spChecked:x,onCheckSp:m}}({heroId:n,weaponId:t,skillType:r,skillId:s,filter:o,maxSkill:c}),h=d.options,p=d.spOptions,f=d.spChecked,x=d.onCheckSp,v=(0,i.useMemo)((function(){return{skillId:s,skills:h,onClick:u}}),[s,h,u]),m=(0,i.useCallback)((function(e){var n=h[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[h]),g=(0,i.useCallback)((function(e){return h[e].id}),[h]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:p.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":f.includes(e),onClick:x,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(bt.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(Bt.S_,{width:n,height:t,itemCount:h.length,itemSize:m,itemData:v,itemKey:g,children:wt},h.length)}})})]})}var Dt=(0,i.memo)(Ct);function St(e){var n=e.heroId,t=e.weaponId,r=e.skillType,i=e.skillId,s=e.selectSkill,a=e.filter,o=e.maxSkill;return(0,l.jsxs)(pn.Ei,{children:[(0,l.jsx)(Yn,{active:!i,value:"",onClick:function(){return s("")},children:"\u7121\u6280\u80fd"}),(0,l.jsx)(Dt,{heroId:n,weaponId:t,skillType:r,skillId:i,selectSkill:s,filter:a,maxSkill:o})]})}var It=(0,i.memo)(St);var At=function(e){var n=e.hidden,t=e.skillType,r=e.title,s=e.onClickBack,a=e.heroId,o=e.weaponId,c=e.skillId,u=e.selectSkill,d=e.maxSkill,h=e.toggleMaxSkill,p=e.setDefaultSkill,f=(0,i.useState)(""),k=f[0],x=f[1],v=(0,i.useCallback)((function(e){x(e.currentTarget.value)}),[]),m=(0,i.useCallback)((function(e){u(e),s()}),[u,s]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:s}),(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:r}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:d,onChange:h,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),p&&(0,l.jsx)(hn,{onClick:p})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:v}),(0,l.jsx)(pn.qn,{children:(0,l.jsx)(It,{heroId:a,weaponId:o,skillType:t,skillId:c,selectSkill:m,filter:k,maxSkill:d})})]})};function Mt(e){var n=e.active,t=e.hidden,r=e.assist,i=e.onClick;return(0,l.jsxs)(Yn,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(pn.pp,{children:[(0,l.jsx)(pn.bP,{children:r.name}),(0,l.jsxs)(pn.n0,{children:[r.sp,"SP"]})]}),r.exclusive&&(0,l.jsx)(pn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Ot=(0,i.memo)(Mt);function Pt(e){var n=e.index,t=e.style,r=e.data,i=r.assistId,s=r.assists,a=r.onClick,o=s[n];return(0,l.jsx)("div",{style:t,children:(0,l.jsx)(Ot,{active:i===o.id,assist:o,onClick:a},o.id)})}function _t(e){var n=e.heroId,t=e.assistId,r=e.selectAssist,s=e.filter,a=e.maxSkill,o=(0,i.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]),c=function(e){var n=e.heroId,t=e.filter,l=e.maxSkill,r=(0,D.K)(),s=r.rules2DB,a=r.heroDB,o=r.assistDB,c=(0,i.useMemo)((function(){return(0,d.Gt)({rules2DB:s,heroDB:a,assistDB:o,heroId:n})}),[s,a,o,n]),u=(0,i.useMemo)((function(){var e={};c.forEach((function(n){l&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[l,c]),h=(0,i.useState)([]),p=h[0],f=h[1],k=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;f((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),x=(0,i.useMemo)((function(){return c.filter((function(e){return!(l&&!e.last)&&!(t&&!e.query.includes(t.toLowerCase()))&&!(p.length&&!p.includes(e.sp))}))}),[c,t,l,p]);return{options:x,spOptions:u,spChecked:p,onCheckSp:k}}({heroId:n,filter:s,maxSkill:a}),u=c.options,h=c.spOptions,p=c.spChecked,f=c.onCheckSp,k=(0,i.useMemo)((function(){return{assistId:t,assists:u,onClick:o}}),[t,u,o]),x=(0,i.useCallback)((function(e){var n=u[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[u]),v=(0,i.useCallback)((function(e){return u[e].id}),[u]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:h.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:f,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(bt.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(Bt.S_,{width:n,height:t,itemCount:u.length,itemSize:x,itemData:k,itemKey:v,children:Pt},u.length)}})})]})}var Tt=(0,i.memo)(_t);function Nt(e){var n=e.heroId,t=e.assist,r=e.selectAssist,s=e.filter,a=e.maxSkill,o=(0,i.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,l.jsxs)(pn.Ei,{children:[(0,l.jsx)(Yn,{active:!t,value:"",onClick:o,children:"\u7121\u6280\u80fd"}),(0,l.jsx)(Tt,{heroId:n,assistId:t,filter:s,maxSkill:a,selectAssist:r})]})}var Et=(0,i.memo)(Nt);var Rt=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.assist,a=e.selectAssist,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,i.useState)(""),h=d[0],p=d[1],f=(0,i.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,i.useCallback)((function(e){a(e),t()}),[a,t]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:t}),(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:"\u652f\u63f4"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,l.jsx)(hn,{onClick:u})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,l.jsx)(pn.qn,{children:(0,l.jsx)(Et,{heroId:r,assist:s,selectAssist:k,filter:h,maxSkill:o})})]})};function Ht(e){var n=e.active,t=e.hidden,r=e.special,i=e.onClick;return(0,l.jsxs)(Yn,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(pn.pp,{children:[(0,l.jsx)(pn.bP,{children:r.name}),(0,l.jsxs)(pn.n0,{children:[r.sp,"SP"]})]}),(0,l.jsxs)("div",{children:["CD ",r.cd]}),r.exclusive&&(0,l.jsx)(pn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Wt=(0,i.memo)(Ht);function Zt(e){var n=e.index,t=e.style,r=e.data,i=r.special,s=r.skills,a=r.onClick,o=s[n];return(0,l.jsx)("div",{style:t,children:(0,l.jsx)(Wt,{active:i===o.id,special:o,onClick:a},o.id)})}function Ft(e){var n=e.heroId,t=e.weaponId,r=e.special,s=e.selectSpecial,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]),u=function(e){var n=e.heroId,t=e.weaponId,l=e.filter,r=e.maxSkill,s=(0,D.K)(),a=s.rules2DB,o=s.heroDB,c=s.weaponDB,u=s.specialDB,d=(0,i.useMemo)((function(){return(0,x.TZ)({rules2DB:a,heroDB:o,weaponDB:c,specialDB:u,heroId:n,weaponId:t})}),[a,o,c,u,n,t]),h=(0,i.useMemo)((function(){var e={};d.forEach((function(n){r&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[r,d]),p=(0,i.useState)([]),f=p[0],k=p[1],v=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;k((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),m=(0,i.useMemo)((function(){return d.filter((function(e){return!(r&&!e.last)&&!(l&&!e.query.includes(l.toLowerCase()))&&!(f.length&&!f.includes(e.sp))}))}),[d,l,r,f]);return(0,i.useEffect)((function(){k((function(e){return e.filter((function(e){return h.includes(e)}))}))}),[h]),{options:m,spOptions:h,spChecked:f,onCheckSp:v}}({heroId:n,weaponId:t,special:r,filter:a,maxSkill:o}),d=u.options,h=u.spOptions,p=u.spChecked,f=u.onCheckSp,k=(0,i.useMemo)((function(){return{special:r,skills:d,onClick:c}}),[r,d,c]),v=(0,i.useCallback)((function(e){var n=d[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[d]),m=(0,i.useCallback)((function(e){return d[e].id}),[d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:h.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:f,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(bt.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(Bt.S_,{width:n,height:t,itemCount:d.length,itemSize:v,itemData:k,itemKey:m,children:Zt},d.length)}})})]})}var Kt=(0,i.memo)(Ft);function Jt(e){var n=e.heroId,t=e.weaponId,r=e.special,s=e.selectSpecial,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]);return(0,l.jsxs)(pn.Ei,{children:[(0,l.jsx)(Yn,{active:!r,value:"",onClick:c,children:"\u7121\u6280\u80fd"}),(0,l.jsx)(Kt,{heroId:n,weaponId:t,special:r,selectSpecial:s,filter:a,maxSkill:o})]})}var Vt=(0,i.memo)(Jt);var Qt=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weaponId,a=e.special,o=e.selectSpecial,c=e.maxSkill,u=e.toggleMaxSkill,d=e.setDefaultSkill,h=(0,i.useState)(""),p=h[0],f=h[1],k=(0,i.useCallback)((function(e){f(e.currentTarget.value)}),[]),x=(0,i.useCallback)((function(e){o(e),t()}),[o,t]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:t}),(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:"\u5967\u7fa9"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:c,onChange:u,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),d&&(0,l.jsx)(hn,{onClick:d})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:k}),(0,l.jsx)(pn.qn,{children:(0,l.jsx)(Vt,{heroId:r,weaponId:s,special:a,selectSpecial:x,filter:p,maxSkill:c})})]})};function qt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function zt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return qt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qt(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e){var n=e.active,t=e.hidden,r=e.skill,i=e.onClick;return(0,l.jsxs)(Yn,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(pn.pp,{children:[(0,l.jsxs)(pn.bP,{children:[r.icon&&(0,l.jsx)(pn.JO,{src:"/skills/".concat(r.icon)}),r.name]}),r.sp&&(0,l.jsxs)(pn.n0,{children:[r.sp,"SP"]})]}),r.mt&&(0,l.jsxs)(pn.XR,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,l.jsxs)(pn.eM,{cd:r.cd,children:["\u5967\u7fa9 cd",(0,pn.lG)(r.cd)]}),(0,l.jsxs)(pn.lJ,{children:[r.hp&&(0,l.jsxs)(pn.i5,{children:["HP ",(0,pn.lG)(r.hp)]}),r.atk&&(0,l.jsxs)(pn.i5,{children:["\u653b\u64ca ",(0,pn.lG)(r.atk)]}),r.spd&&(0,l.jsxs)(pn.i5,{children:["\u901f\u5ea6 ",(0,pn.lG)(r.spd)]}),r.def&&(0,l.jsxs)(pn.i5,{children:["\u9632\u5b88 ",(0,pn.lG)(r.def)]}),r.res&&(0,l.jsxs)(pn.i5,{children:["\u9b54\u9632 ",(0,pn.lG)(r.res)]})]}),r.exclusive&&(0,l.jsx)(pn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Ut=(0,i.memo)(Lt);function Yt(e){var n=e.index,t=e.style,r=e.data,i=r.seal,s=r.skills,a=r.onClick,o=s[n];return"_sealA"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(pn.DK,{children:"A\u6280\u80fd\u8056\u5370"})}):"_sealB"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(pn.DK,{children:"B\u6280\u80fd\u8056\u5370"})}):"_sealC"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(pn.DK,{children:"C\u6280\u80fd\u8056\u5370"})}):"_seal"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(pn.DK,{children:"\u5c08\u7528\u8056\u5370"})}):(0,l.jsx)("div",{style:t,children:(0,l.jsx)(Ut,{active:i===o.id,skill:o,onClick:a},o.id)})}function Gt(e){var n=e.heroId,t=e.weaponId,r=e.seal,s=e.selectSeal,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]),u=function(e){var n=e.heroId,t=e.weaponId,l=e.filter,r=e.maxSkill,s=(0,D.K)(),a=s.rules2DB,o=s.heroDB,c=s.weaponDB,u=s.sealDB,d=(0,i.useMemo)((function(){var e=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.skillA,heroId:n,weaponId:t}),l=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.skillB,heroId:n,weaponId:t}),r=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.skillC,heroId:n,weaponId:t}),i=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.seal,heroId:n,weaponId:t});return[{id:"_sealA",name:"A\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}].concat(zt(e),[{id:"_sealB",name:"B\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}],zt(l),[{id:"_sealC",name:"C\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}],zt(r),[{id:"_seal",name:"\u5c08\u7528\u8056\u5370",sp:0,icon:"",query:""}],zt(i))}),[a,o,c,u,n,t]),h=(0,i.useMemo)((function(){var e={};d.forEach((function(n){r&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[r,d]),p=(0,i.useState)([]),f=p[0],x=p[1],v=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;x((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),m=(0,i.useMemo)((function(){return d.filter((function(e){return!!["_sealA","_sealB","_sealC","_seal"].includes(e.id)||!(r&&!e.last)&&!(l&&!e.query.includes(l.toLowerCase()))&&!(f.length&&!f.includes(e.sp))}))}),[d,l,r,f]);return(0,i.useEffect)((function(){x((function(e){return e.filter((function(e){return h.includes(e)}))}))}),[h]),{options:m,spOptions:h,spChecked:f,onCheckSp:v}}({heroId:n,weaponId:t,filter:a,maxSkill:o}),d=u.options,h=u.spOptions,p=u.spChecked,f=u.onCheckSp,x=(0,i.useMemo)((function(){return{seal:r,skills:d,onClick:c}}),[r,d,c]),v=(0,i.useCallback)((function(e){var n=d[e];if(["_sealA","_sealB","_sealC","_seal"].includes(n.id))return 44;var t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[d]),m=(0,i.useCallback)((function(e){return d[e].id}),[d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:h.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:f,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(bt.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(Bt.S_,{width:n,height:t,itemCount:d.length,itemSize:v,itemData:x,itemKey:m,children:Yt},d.length)}})})]})}var Xt=(0,i.memo)(Gt);function $t(e){var n=e.heroId,t=e.weaponId,r=e.seal,s=e.selectSeal,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]);return(0,l.jsxs)(pn.Ei,{children:[(0,l.jsx)(Yn,{active:!r,value:"",onClick:c,children:"\u7121\u8056\u5370"}),(0,l.jsx)(Xt,{heroId:n,weaponId:t,seal:r,selectSeal:s,filter:a,maxSkill:o})]})}var el=(0,i.memo)($t);var nl=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weaponId,a=e.seal,o=e.selectSeal,c=e.maxSkill,u=e.toggleMaxSkill,d=(0,i.useState)(""),h=d[0],p=d[1],f=(0,i.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,i.useCallback)((function(e){o(e),t()}),[o,t]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:t}),(0,l.jsxs)(pn.dH,{children:[(0,l.jsx)("span",{children:"\u8056\u5370"}),(0,l.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,l.jsx)(ln,{checked:c,onChange:u,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,l.jsx)(pn.qn,{children:(0,l.jsx)(el,{heroId:r,weaponId:s,seal:a,selectSeal:k,filter:h,maxSkill:c})})]})},tl=t(7861),ll=t.n(tl),rl=function(e){var n=e.bonus,t=e.selectBonus,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:ll().container,children:[(0,l.jsx)("button",{className:ll()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),qe.map((function(e){return(0,l.jsx)("button",{className:ll()["bonus-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var il=function(e){var n=e.hidden,t=e.title,r=e.bonus,s=e.selectBonus,a=e.onClickBack,o=(0,i.useCallback)((function(e){s(e),a()}),[s,a]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:a}),t]}),(0,l.jsx)(rl,{bonus:r,selectBonus:o})]})},sl=t(4299),al=t.n(sl),ol=function(e){var n=e.bloom,t=e.selectBloom,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:al().container,children:[(0,l.jsx)("button",{className:al()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),Le.map((function(e){return(0,l.jsx)("button",{className:al()["bloom-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var cl=function(e){var n=e.hidden,t=e.title,r=e.bloom,s=e.setBloom,a=e.onClickBack,o=(0,i.useCallback)((function(e){s(e),a()}),[s,a]);return(0,l.jsxs)(pn.W2,{hidden:n,children:[(0,l.jsxs)(pn.Dx,{children:[(0,l.jsx)(In,{onClick:a}),t]}),(0,l.jsx)(ol,{bloom:r,selectBloom:o})]})};var ul=function(){var e=(0,i.useState)(""),n=e[0],t=e[1],l=(0,i.useCallback)((function(){t("hero")}),[]),r=(0,i.useCallback)((function(){t("rarity")}),[]),s=(0,i.useCallback)((function(){t("iv")}),[]),a=(0,i.useCallback)((function(){t("merge")}),[]),o=(0,i.useCallback)((function(){t("dragonflower")}),[]),c=(0,i.useCallback)((function(){t("blessing")}),[]),u=(0,i.useCallback)((function(){t("weapon")}),[]),d=(0,i.useCallback)((function(){t("refine")}),[]),h=(0,i.useCallback)((function(){t("assist")}),[]),p=(0,i.useCallback)((function(){t("special")}),[]),f=(0,i.useCallback)((function(){t("skillA")}),[]),k=(0,i.useCallback)((function(){t("skillB")}),[]),x=(0,i.useCallback)((function(){t("skillC")}),[]),v=(0,i.useCallback)((function(){t("seal")}),[]),m=(0,i.useCallback)((function(){t("mythic1")}),[]),g=(0,i.useCallback)((function(){t("mythic2")}),[]),B=(0,i.useCallback)((function(){t("mythic3")}),[]),b=(0,i.useCallback)((function(){t("mythic4")}),[]);return{view:n,openHeroPicker:l,openRarityPicker:r,openIVPicker:s,openMergePicker:a,openDragonflowerPicker:o,openBlessingPicker:c,openBloomPicker:(0,i.useCallback)((function(){t("bloom")}),[]),openWeaponPicker:u,openRefinePicker:d,openAssistPicker:h,openSpecialPicker:p,openSkillAPicker:f,openSkillBPicker:k,openSkillCPicker:x,openSealPicker:v,openMythicBonus1:m,openMythicBonus2:g,openMythicBonus3:B,openMythicBonus4:b,onClickBack:(0,i.useCallback)((function(){t("")}),[])}};function dl(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function hl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){dl(e,n,t[n])}))}return e}var pl=function(e){var n=ul(),t=n.view,r=n.openHeroPicker,i=n.openRarityPicker,s=n.openIVPicker,a=n.openMergePicker,o=n.openDragonflowerPicker,c=n.openBlessingPicker,u=n.openBloomPicker,d=n.openWeaponPicker,h=n.openRefinePicker,p=n.openAssistPicker,f=n.openSpecialPicker,k=n.openSkillAPicker,x=n.openSkillBPicker,v=n.openSkillCPicker,m=n.openSealPicker,g=n.openMythicBonus1,B=n.openMythicBonus2,b=n.openMythicBonus3,j=n.openMythicBonus4,y=n.onClickBack;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(wn,hl({hidden:!!t},e,{openHeroPicker:r,openRarityPicker:i,openIVPicker:s,openMergePicker:a,openDragonflowerPicker:o,openBlessingPicker:c,openWeaponPicker:d,openRefinePicker:h,openAssistPicker:p,openSpecialPicker:f,openSkillAPicker:k,openSkillBPicker:x,openSkillCPicker:v,openSealPicker:m,openMythicBonus1:g,openMythicBonus2:B,openMythicBonus3:b,openMythicBonus4:j,openBloomPicker:u})),(0,l.jsx)(On,{hidden:"hero"!==t,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:y,resplendent:e.resplendent}),(0,l.jsx)(_n,{hidden:"rarity"!==t,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:y}),(0,l.jsx)(Rn,{hidden:"iv"!==t,iv:e.iv,selectIV:e.setIV,onClickBack:y}),(0,l.jsx)(Fn,{hidden:"blessing"!==t,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:y}),(0,l.jsx)(Jn,{hidden:"merge"!==t,merge:e.merge,selectMerge:e.setMerge,onClickBack:y}),(0,l.jsx)(zn,{hidden:"dragonflower"!==t,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:y}),(0,l.jsx)(rt,{hidden:"weapon"!==t,onClickBack:y,heroId:e.heroId,weapon:e.weapon,selectWeapon:e.setWeapon,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,l.jsx)(gt,{hidden:"refine"!==t,onClickBack:y,heroId:e.heroId,weapon:e.weapon,refine:e.refine,selectRefine:e.setRefine}),(0,l.jsx)(Rt,{hidden:"assist"!==t,onClickBack:y,heroId:e.heroId,assist:e.assist,selectAssist:e.setAssist,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),(0,l.jsx)(Qt,{title:"\u5967\u7fa9",hidden:"special"!==t,onClickBack:y,heroId:e.heroId,weaponId:e.weapon,special:e.special,selectSpecial:e.setSpecial,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),(0,l.jsx)(At,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==t,onClickBack:y,heroId:e.heroId,weaponId:e.weapon,skillId:e.skillA,selectSkill:e.setSkillA,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),(0,l.jsx)(At,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==t,onClickBack:y,heroId:e.heroId,weaponId:e.weapon,skillId:e.skillB,selectSkill:e.setSkillB,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),(0,l.jsx)(At,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==t,onClickBack:y,heroId:e.heroId,weaponId:e.weapon,skillId:e.skillC,selectSkill:e.setSkillC,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),(0,l.jsx)(nl,{hidden:"seal"!==t,onClickBack:y,heroId:e.heroId,weaponId:e.weapon,seal:e.skillC,selectSeal:e.setSeal,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill}),(0,l.jsx)(il,{hidden:"mythic1"!==t,title:"\u795e\u968e1",onClickBack:y,bonus:e.mythicBonus1,selectBonus:e.setMythicBonus1}),(0,l.jsx)(il,{hidden:"mythic2"!==t,title:"\u795e\u968e2",onClickBack:y,bonus:e.mythicBonus2,selectBonus:e.setMythicBonus2}),(0,l.jsx)(il,{hidden:"mythic3"!==t,title:"\u795e\u968e3",onClickBack:y,bonus:e.mythicBonus3,selectBonus:e.setMythicBonus3}),(0,l.jsx)(il,{hidden:"mythic4"!==t,title:"\u795e\u968e4",onClickBack:y,bonus:e.mythicBonus4,selectBonus:e.setMythicBonus4}),(0,l.jsx)(cl,{hidden:"bloom"!==t,title:"\u7dbb\u653e",onClickBack:y,bloom:e.bloom,setBloom:e.setBloom})]})},fl=t(449),kl=t(4411);function xl(){var e=(0,D.K)(),n=e.rules2DB,t=e.heroDB,l=e.weaponDB,r=e.assistDB,s=e.specialDB,a=e.skillADB,o=e.skillBDB,c=e.skillCDB,f=e.sealDB,m=e.defaultSkillDB,g=(0,i.useState)("Feh"),B=g[0],b=g[1],j=(0,i.useState)(5),y=j[0],w=j[1],C=(0,i.useState)(""),S=C[0],I=C[1],A=(0,i.useState)(0),M=A[0],O=A[1],P=(0,i.useState)(0),_=P[0],T=P[1],N=(0,i.useState)(""),E=N[0],R=N[1],H=(0,i.useState)(!1),W=H[0],Z=H[1],F=(0,i.useCallback)((function(){Z((function(e){return!e}))}),[]),K=(0,i.useState)(""),J=K[0],V=K[1],Q=(0,i.useRef)({weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""}),q=(0,i.useRef)(""),z=(0,i.useRef)(""),L=(0,i.useState)(""),U=L[0],Y=L[1],G=(0,i.useState)(""),X=G[0],$=G[1],ee=(0,i.useState)(""),ne=ee[0],te=ee[1],le=(0,i.useState)(""),re=le[0],ie=le[1],se=(0,i.useState)(""),ae=se[0],oe=se[1],ce=(0,i.useState)(""),ue=ce[0],de=ce[1],he=(0,i.useState)(""),pe=he[0],fe=he[1],ke=(0,i.useState)(""),xe=ke[0],ve=ke[1],me=(0,i.useState)(""),ge=me[0],Be=me[1],be=(0,i.useState)(""),je=be[0],ye=be[1],we=(0,i.useState)(""),Ce=we[0],De=we[1],Se=(0,i.useState)(""),Ie=Se[0],Ae=Se[1],Me=(0,i.useCallback)((function(){z.current=Q.current.weapon,Y(Q.current.weapon),$((function(e){return(0,v.J7)({heroDB:t,weaponDB:l,heroId:q.current,weaponId:Q.current.weapon,refineId:e})?e:""}))}),[t,l]),Oe=(0,i.useCallback)((function(e){Y(e),$((function(n){return n?(0,v.J7)({heroDB:t,weaponDB:l,heroId:q.current,weaponId:e,refineId:n})?n:"":n})),ie((function(r){return r?(0,x.Hh)({rules2DB:n,heroDB:t,weaponDB:l,specialDB:s,heroId:q.current,weaponId:e,specialId:r})?r:"":r})),oe((function(r){return r?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:a,heroId:q.current,weaponId:e,skillId:r})?r:"":r})),de((function(r){return r?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:o,heroId:q.current,weaponId:e,skillId:r})?r:"":r})),fe((function(r){return r?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:c,heroId:q.current,weaponId:e,skillId:r})?r:"":r}))}),[n,t,l,s,a,o,c]),Pe=(0,i.useCallback)((function(){te(Q.current.assist)}),[]),_e=(0,i.useCallback)((function(){Q.current.special?(0,x.Hh)({rules2DB:n,heroDB:t,weaponDB:l,specialDB:s,heroId:q.current,weaponId:z.current,specialId:Q.current.special})&&ie(Q.current.special):ie(Q.current.special)}),[n,t,l,s]),Te=(0,i.useCallback)((function(){Q.current.skillA?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:a,heroId:q.current,weaponId:z.current,skillId:Q.current.skillA})&&oe(Q.current.skillA):oe(Q.current.skillA)}),[n,t,l,a]),Ne=(0,i.useCallback)((function(){Q.current.skillB?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:o,heroId:q.current,weaponId:z.current,skillId:Q.current.skillB})&&de(Q.current.skillB):de(Q.current.skillB)}),[n,t,l,o]),Ee=(0,i.useCallback)((function(){Q.current.skillC?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:c,heroId:q.current,weaponId:z.current,skillId:Q.current.skillC})&&fe(Q.current.skillC):fe(Q.current.skillC)}),[n,t,l,c]),Re=(0,i.useCallback)((function(){Me(),Pe(),_e(),Te(),Ne(),Ee()}),[Me,Pe,_e,Te,Ne,Ee]);q.current=B,z.current=U;var He=(0,i.useCallback)((function(e){b(e),Q.current=(0,kl.N)({defaultSkillDB:m,heroId:e}),Y((function(){return(0,v.Mw)({heroDB:t,weaponDB:l,heroId:e,weaponId:z.current})?z.current:""})),$((function(n){return(0,v.J7)({heroDB:t,weaponDB:l,heroId:e,weaponId:z.current,refineId:n})?n:""})),te((function(l){return(0,d.ab)({rules2DB:n,heroDB:t,assistDB:r,heroId:e,assistId:l})?l:""})),ie((function(r){return(0,x.Hh)({rules2DB:n,heroDB:t,weaponDB:l,specialDB:s,heroId:e,weaponId:z.current,specialId:r})?r:""})),oe((function(r){return(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:a,heroId:e,weaponId:z.current,skillId:r})?r:""})),de((function(r){return(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:o,heroId:e,weaponId:z.current,skillId:r})?r:""})),fe((function(r){return(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:c,heroId:e,weaponId:z.current,skillId:r})?r:""})),ve((function(l){var r=function(e){var n=e.rules2DB,t=e.heroDB,l=e.sealDB,r=e.heroId,i=e.sealId;if(!t||!l||!r||!i)return!1;var s=(0,h.cK)(t,r);if(!s)return!1;var a=l.skillA[i]||l.skillB[i]||l.skillC[i]||l.seal[i];return!!a&&(0,p.O)({rules2DB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType})}({rules2DB:n,heroDB:t,sealDB:f,heroId:e,sealId:l});return r?l:""}));var i="mythic"===(0,h.cK)(t,e).pool;Be((function(e){return i?"":e})),ye((function(e){return i?"":e})),De((function(e){return i?"":e})),Ae((function(e){return i?"":e}))}),[n,t,l,r,s,a,o,c,f,m]),We=(0,i.useState)(!1),Ze=We[0],Fe=We[1],Ke=(0,i.useCallback)((function(){Fe((function(e){return!e}))}),[]),Je=(0,i.useState)(!1),Ve=Je[0],Qe=Je[1],qe=(0,i.useCallback)((function(){Qe((function(e){return!e}))}),[]),ze=(0,i.useState)(!1),Le=ze[0],Ue=ze[1],Ye=(0,i.useCallback)((function(){Ue((function(e){return!e}))}),[]),Ge=(0,i.useState)(!0),Xe=Ge[0],$e=Ge[1],en=(0,i.useCallback)((function(){$e((function(e){return!e}))}),[]),nn=(0,i.useState)(!1),tn=nn[0],ln=nn[1],rn=(0,i.useCallback)((function(){ln(!0)}),[]),sn=(0,i.useCallback)((function(){ln(!1)}),[]),an=(0,u.Z)("/assets/summon-stone.jpg");return{heroId:B,onChangeHero:He,rarity:y,setRarity:w,iv:S,setIV:I,merge:M,setMerge:O,dragonflower:_,setDragonflower:T,blessing:E,setBlessing:R,support:W,toggleSupport:F,arena:Ze,toggleArena:Ke,resplendent:Ve,toggleResplendent:qe,bloom:J,setBloom:V,weapon:U,setWeapon:Oe,refine:X,setRefine:$,assist:ne,setAssist:te,special:re,setSpecial:ie,skillA:ae,setSkillA:oe,skillB:ue,setSkillB:de,skillC:pe,setSkillC:fe,seal:xe,setSeal:ve,mythicBonus1:ge,setMythicBonus1:Be,mythicBonus2:je,setMythicBonus2:ye,mythicBonus3:Ce,setMythicBonus3:De,mythicBonus4:Ie,setMythicBonus4:Ae,setDefaultWeapon:Me,setDefaultAssist:Pe,setDefaultSpecial:_e,setDefaultSkillA:Te,setDefaultSkillB:Ne,setDefaultSkillC:Ee,setAllSkillDefault:Re,lv1:Le,toggleLv1:Ye,maxSkill:Xe,toggleMaxSkill:en,bg:an,editorIsOpen:tn,openEditor:rn,closeEditor:sn}}var vl=t(7378),ml=t.n(vl);function gl(){var e=xl(),n=e.heroId,t=e.onChangeHero,i=e.rarity,s=e.setRarity,a=e.iv,o=e.setIV,c=e.merge,u=e.setMerge,d=e.dragonflower,h=e.setDragonflower,p=e.blessing,f=e.setBlessing,k=e.support,x=e.toggleSupport,v=e.arena,m=e.toggleArena,g=e.resplendent,B=e.toggleResplendent,b=e.bloom,j=e.setBloom,y=e.weapon,w=e.setWeapon,C=e.refine,D=e.setRefine,S=e.assist,I=e.setAssist,A=e.special,M=e.setSpecial,O=e.skillA,P=e.setSkillA,_=e.skillB,T=e.setSkillB,N=e.skillC,E=e.setSkillC,R=e.seal,H=e.setSeal,W=e.mythicBonus1,Z=e.setMythicBonus1,F=e.mythicBonus2,K=e.setMythicBonus2,J=e.mythicBonus3,V=e.setMythicBonus3,Q=e.mythicBonus4,q=e.setMythicBonus4,z=e.setDefaultWeapon,L=e.setDefaultAssist,U=e.setDefaultSpecial,Y=e.setDefaultSkillA,G=e.setDefaultSkillB,X=e.setDefaultSkillC,$=e.setAllSkillDefault,ee=e.lv1,ne=e.toggleLv1,te=e.maxSkill,le=e.toggleMaxSkill,re=e.bg,ie=e.editorIsOpen,se=e.openEditor,ae=e.closeEditor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.default,{children:(0,l.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),(0,l.jsx)("div",{style:{background:"url('".concat(re,"') center / cover no-repeat fixed")},children:(0,l.jsxs)("div",{className:ml().container,children:[(0,l.jsx)("div",{className:ml().viewer,children:(0,l.jsx)(Ve,{heroId:n,rarity:i,iv:a,merge:c,dragonflower:d,blessing:p,support:k,arena:v,resplendent:g,mythicBonus1:W,mythicBonus2:F,mythicBonus3:J,mythicBonus4:Q,bloom:b,weapon:y,refine:C,assist:S,special:A,skillA:O,skillB:_,skillC:N,seal:R,lv1:ee,openEditor:se})}),(0,l.jsx)("div",{className:ml().editor,hidden:!ie,children:(0,l.jsx)(pl,{heroId:n,onChangeHero:t,rarity:i,setRarity:s,iv:a,setIV:o,merge:c,setMerge:u,dragonflower:d,setDragonflower:h,blessing:p,setBlessing:f,support:k,toggleSupport:x,arena:v,toggleArena:m,resplendent:g,toggleResplendent:B,bloom:b,setBloom:j,weapon:y,setWeapon:w,refine:C,setRefine:D,assist:S,setAssist:I,special:A,setSpecial:M,skillA:O,setSkillA:P,skillB:_,setSkillB:T,skillC:N,setSkillC:E,seal:R,setSeal:H,mythicBonus1:W,setMythicBonus1:Z,mythicBonus2:F,setMythicBonus2:K,mythicBonus3:J,setMythicBonus3:V,mythicBonus4:Q,setMythicBonus4:q,setDefaultWeapon:z,setDefaultAssist:L,setDefaultSpecial:U,setDefaultSkillA:Y,setDefaultSkillB:G,setDefaultSkillC:X,setAllSkillDefault:$,lv1:ee,toggleLv1:ne,maxSkill:te,toggleMaxSkill:le,closeEditor:ae})})]})})]})}var Bl=function(){return(0,l.jsx)(fl.Z,{children:(0,l.jsx)(gl,{})})};var bl=function(){return(0,l.jsx)(Bl,{})}},5497:function(e){e.exports={blessing:"blessing_blessing__mVJnu","blessing-name":"blessing_blessing-name__O0ue_"}},2008:function(e){e.exports={checked:"checkbox_checked__gHbwk",button:"checkbox_button__d5nfX"}},2884:function(e){e.exports={container:"styles_container__YYoO2","neutral-button":"styles_neutral-button__0mamt","blessing-button":"styles_blessing-button__d1Pw5"}},4299:function(e){e.exports={container:"styles_container__zPOZX","neutral-button":"styles_neutral-button__5drcu","bloom-button":"styles_bloom-button__iOTb0","bonus-button":"styles_bonus-button__J3IcJ"}},1698:function(e){e.exports={picker:"heropicker_picker__a1u_q"}},5711:function(e){e.exports={container:"styles_container__gMrf9","neutral-button":"styles_neutral-button__qNLXK","iv-button":"styles_iv-button__PxFG8"}},7861:function(e){e.exports={container:"styles_container__GlT2N","neutral-button":"styles_neutral-button__oX55C","bonus-button":"styles_bonus-button__7uZxk"}},934:function(e){e.exports={refineName:"refineOption_refineName__je15K",might:"refineOption_might__Ljo2p",extractStats:"refineOption_extractStats____CPj",extractStat:"refineOption_extractStat__OPzWF"}},7710:function(e){e.exports={label:"labelcheckbox_label__20PyM","label-checkbox":"labelcheckbox_label-checkbox__utUa_"}},1237:function(e){e.exports={button:"optionButton_button__L_RWi"}},2696:function(e){e.exports={canvas:"UnitViewer_canvas__Wx4QC",container:"UnitViewer_container__VnbTD",button:"UnitViewer_button__JbsTA",download:"UnitViewer_download__B1uAE",menu:"UnitViewer_menu__CrjVM"}},7378:function(e){e.exports={container:"UnitEditor_container__Osi54",viewer:"UnitEditor_viewer__Nr6JT",editor:"UnitEditor_editor__3Vl3u"}}},function(e){e.O(0,[406,881,255,608,965,774,888,179],(function(){return n=532,e(e.s=n);var n}));var n=e.O();_N_E=n}]);