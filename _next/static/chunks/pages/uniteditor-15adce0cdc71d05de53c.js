(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{8205:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return ci},default:function(){return ui}});var r=t(4808),i=t(9008),l=t(4925),s=t(7294),a=t(4942),o=t(5893);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=function(e){return(0,o.jsxs)("svg",u(u({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),{},{children:[(0,o.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,o.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=function(e){return(0,o.jsxs)("svg",p(p({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,o.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,o.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},k=t(885),v=t(6899),x=t(7901);function g(e){var n=e.rules2DB,t=e.ruleId;return n&&t?n[t]:null}function j(e,n){return!(!e||!n)&&0===(e&n)}function m(e){var n=e.rules2DB,t=e.ruleId,r=e.moveType,i=e.colorType,l=e.weaponType;if("allDisabled"===t)return!1;var s=g({rules2DB:n,ruleId:r}),a=g({rules2DB:n,ruleId:i}),o=g({rules2DB:n,ruleId:l}),c=g({rules2DB:n,ruleId:t});return!c||!j(c.moveType,null===s||void 0===s?void 0:s.moveType)&&(!j(c.colorType,null===a||void 0===a?void 0:a.colorType)&&!j(c.weaponType,null===o||void 0===o?void 0:o.weaponType))}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function B(e){var n=e.assistDB,t=e.assist;return n&&t?n[t]:null}function w(e){var n=B({assistDB:e.assistDB,assist:e.assist});return(null===n||void 0===n?void 0:n.name)||""}function D(e){var n=e.sealDB,t=e.seal;return n&&t?n.skillA[t]?n.skillA[t]:n.skillB[t]?n.skillB[t]:n.skillC[t]?n.skillC[t]:n.seal[t]?n.seal[t]:null:null}function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function O(e){var n=e.rules2DB,t=e.heroDB,r=e.skillDB,i=e.heroId;if(!n||!t||!r||!i)return[];var l=(0,x.cK)(t,i);return l?Object.values(r).filter((function(e){return e.exclusive?e.exclusive.includes(i):m({rules2DB:n,ruleId:e.rules,moveType:l.moveType,colorType:l.colorType,weaponType:l.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return S(S({},e),{},{query:n})})):[]}function I(e){var n=e.rules2DB,t=e.heroDB,r=e.skillDB,i=e.heroId,l=e.skillId;if(!n||!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var a=r[l];return!!a&&(a.exclusive?a.exclusive.includes(i):m({rules2DB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}function P(e){var n=e.skillDB,t=e.skillId;return n&&t?n[t]:null}function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(e){var n=e.specialDB,t=e.special;return n&&t?n[t]:null}function M(e){var n=T({specialDB:e.specialDB,special:e.special});return(null===n||void 0===n?void 0:n.name)||""}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Z(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function R(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId;if(!t||!n||!r)return[];var i=(0,x.cK)(n,r);if(!i)return[];var l=Z(i.weaponType),s=t[l];return l?Object.values(s).filter((function(e){return!e.exclusive||e.exclusive.includes(r)})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return N(N({},e),{},{query:n})})):[]}function H(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weaponId;if(!t||!n||!r||!i)return!1;var l=(0,x.cK)(n,r);if(!l)return!1;var s=Z(l.weaponType),a=t[s];if(!s)return!1;var o=a[i];return!!o&&(!o.exclusive||o.exclusive.includes(r))}function F(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weapon;if(!t||!n||!i||!r)return null;var l=(0,x.cK)(n,r);return l?t[Z(l.weaponType)][i]:null}function K(e){var n=F({heroDB:e.heroDB,weaponDB:e.weaponDB,heroId:e.heroId,weapon:e.weapon});return(null===n||void 0===n?void 0:n.name)||""}var W={atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};function z(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weapon,l=F({heroDB:n,weaponDB:t,heroId:r,weapon:i});return l&&l.refine?Object.entries(l.refine).filter((function(e){var n=(0,k.Z)(e,2)[1];return!n.exclusive||n.exclusive.includes(r)})).map((function(e){var n=(0,k.Z)(e,2),t=n[0],r=N({value:t},n[1]);return r.name||(r.name=W[t]||t),r.icon&&(r.icon="/skills/weapon/".concat(r.icon,".png")),!r.icon&&W[t]&&(r.icon="/skills/weapon/".concat(t,".png")),r})):[]}function L(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weaponId,l=e.refineId;if(!H({heroDB:n,weaponDB:t,heroId:r,weaponId:i}))return!1;var s=F({heroDB:n,weaponDB:t,heroId:r,weapon:i});return!!(s&&s.refine&&s.refine[l])&&(!s.refine[l].exclusive||s.refine[l].exclusive.includes(r))}function V(e){var n,t=e.heroDB,r=e.weaponDB,i=e.heroId,l=e.weapon,s=e.refine,a=F({heroDB:t,weaponDB:r,heroId:i,weapon:l});return null===a||void 0===a||null===(n=a.refine)||void 0===n?void 0:n[s]}var q={atk:"atk",spd:"spd",def:"def",res:"res"};function U(e){var n=e.heroDB,t=e.weaponDB,r=e.assistDB,i=e.specialDB,l=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skills;return{weapon:F({heroDB:n,weaponDB:t,heroId:c,weapon:u.weapon}),assist:B({assistDB:r,assist:u.assist}),special:T({specialDB:i,special:u.special}),skillA:P({skillDB:l,skillId:u.skillA}),skillB:P({skillDB:s,skillId:u.skillB}),skillC:P({skillDB:a,skillId:u.skillC}),seal:D({sealDB:o,seal:u.seal})}}var Y=["assist","special","skillA","skillB","skillC","seal"];var J=t(443),Q={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var X=function(e){var n=e.rarity,t=void 0===n?5:n,r=e.merge,i=e.bst,l=e.spt,s=e.blesser,a=void 0===s?0:s,o=Q[t];return 2*(150+o.base+o.float+2*r+Math.floor(i/5)+Math.floor(l/100)+4*a)};function G(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(0,a.Z)(this,"imageData",void 0),(0,a.Z)(this,"src",void 0),(0,a.Z)(this,"loadedData",void 0),(0,a.Z)(this,"callback",void 0),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=n,this.imageData.onload=function(){t.loadedData=!0,t.callback&&t.callback(!0)},this.imageData.onerror=function(){t.loadedData=!1,t.callback&&t.callback(!1)}}var n,t,r;return n=e,(t=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&G(n.prototype,t),r&&G(n,r),e}();var ee=t(2406),ne=16,te=554,re=ee.s6;var ie=174,le=555,se=["infantry","armored","cavalry","flying"];function ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ae(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ce=1,ue=43,de=85,he=127,pe=169,fe=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,n,t){return oe(oe({},e),{},(0,a.Z)({},n,34*t+1))}),{});function ke(e,n,t,r,i,l){fe[r]&&e.drawImage(n,fe[r],t,32,40,i,l,16,20)}var ve=240,xe=557,ge=[14,28,42],je=["infantry","armored","cavalry","flying"];var me=432,be=425;var ye=432,Be=425;var we=275,De=594,Ce=function(e,n,t){var r=37*t+1+De;e.drawImage(n,we,r,35,35)};var Se=82,Oe=557,Ie=[14,28,42];var Pe=112,Ae=557,_e=[14,28,42];var Te=130,Me=594,Ee=[14,28,42,56],Ne=[1e3,100,10],Ze=function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ce,l=8+Me+37*r;Ne.forEach((function(r,s){if(t>=r){var a=Math.floor(t/r%10);ke(e,n,i,a,Te+Ee[s],l)}}));var s=t%10;ke(e,n,i,s,Te+Ee[3],l)};var Re=465,He=594;function Fe(e){var n=e.context,t=e.numberAtlas,r=e.accelerate,i=e.specialCD;if(i){var l=ue;r<0&&(l=de),r>0&&(l=he),function(e,n,t){ke(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue,t,Re,8+He+74)}(n,t,r+i,l)}}var Ke=t(5294),We=206,ze=1224,Le=["#ffa0af","white","#aaf0fa"],Ve=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});var qe=["canvas","refine","weapon"],Ue=634,Ye=1224,Je={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var Qe=296,Xe=876,Ge=336,$e=992;var en={x:460,y:530};var nn=195,tn=370;function rn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rn(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var sn=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"]],an=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var on=function(e){var n=e.heroId,t=e.rarity,i=e.iv,a=e.merge,o=e.dragonflower,c=e.blessing,u=e.support,d=e.arena,h=e.resplendent,p=e.mythicBonus1,f=e.mythicBonus2,g=e.mythicBonus3,j=e.mythicBonus4,m=e.weapon,b=e.refine,y=e.assist,B=e.special,w=e.skillA,D=e.skillB,C=e.skillC,S=e.seal,O=e.lv1,I=(0,r.K)(),P=(0,s.useRef)(null),A=(0,s.useRef)(null),_=(0,s.useRef)(),T=(0,s.useRef)(),M=(0,s.useRef)(),E=(0,s.useRef)(),N=(0,s.useRef)(),Z=(0,s.useRef)(),R=(0,s.useRef)(),H=(0,s.useRef)(),F=(0,s.useRef)(),K=(0,s.useRef)(),W=(0,s.useRef)(),z=(0,s.useRef)(),L=(0,s.useRef)(),V=(0,s.useRef)(),Q=(0,s.useMemo)((function(){return(0,x.cK)(I.heroDB,n)}),[I.heroDB,n]),G=(0,s.useMemo)((function(){return{weapon:m,assist:y,special:B,skillA:w,skillB:D,skillC:C,seal:S}}),[m,y,B,w,D,C,S]),ee=Q.stats,ae=(0,s.useMemo)((function(){return function(e){var n,t,r,i,l,s,a,o,c,u=e.heroDB,d=e.weaponDB,h=e.assistDB,p=e.specialDB,f=e.skillADB,v=e.skillBDB,g=e.skillCDB,j=e.sealDB,m=e.heroId,b=e.skills,y=e.refine,B=e.rarity,w=(0,x.cK)(u,m),D=U({heroDB:u,weaponDB:d,assistDB:h,specialDB:p,skillADB:f,skillBDB:v,skillCDB:g,sealDB:j,heroId:m,skills:b}),C={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},S=0,O=(null===(n=D.special)||void 0===n?void 0:n.cd)||0;S+=(null===(t=D.weapon)||void 0===t?void 0:t.cd)||0,S+=(null===(r=D.assist)||void 0===r?void 0:r.cd)||0,S+=(null===(i=D.skillA)||void 0===i?void 0:i.cd)||0,S+=(null===(l=D.skillB)||void 0===l?void 0:l.cd)||0,S+=(null===(s=D.skillC)||void 0===s?void 0:s.cd)||0,S+=(null===(a=D.seal)||void 0===a?void 0:a.cd)||0;var I={hp:0,atk:0,spd:0,def:0,res:0},P=0,A=0;Object.entries(D).forEach((function(e){var n=(0,k.Z)(e,2),t=n[0],r=n[1];if(C[t]=(null===r||void 0===r?void 0:r.name)||"-",I.hp+=(null===r||void 0===r?void 0:r.hp)||0,I.atk+=((null===r||void 0===r?void 0:r.mt)||0)+((null===r||void 0===r?void 0:r.atk)||0),I.spd+=(null===r||void 0===r?void 0:r.spd)||0,I.def+=(null===r||void 0===r?void 0:r.def)||0,I.res+=(null===r||void 0===r?void 0:r.res)||0,P+=(null===r||void 0===r?void 0:r.sp)||0,5===B){var i=null===r||void 0===r?void 0:r.bst;w.blesser&&null!==r&&void 0!==r&&r.bbst&&(i=null===r||void 0===r?void 0:r.bbst),A=Math.max(i||0,A)}}));var _=null===(o=D.weapon)||void 0===o||null===(c=o.refine)||void 0===c?void 0:c[y];return _&&(I.hp+=_.hp||0,I.atk+=(_.mt||0)+(_.atk||0),I.spd+=_.spd||0,I.def+=_.def||0,I.res+=_.res||0,S+=_.cd||0,D.weapon.exclusive||(P+=50),5===B&&(A=Math.max(A,_.bst||0))),{names:C,stats:I,accelerate:S,specialCD:O,spt:P,bst:A}}({heroDB:I.heroDB,weaponDB:I.weaponDB,assistDB:I.assistDB,specialDB:I.specialDB,skillADB:I.skillADB,skillBDB:I.skillBDB,skillCDB:I.skillCDB,sealDB:I.sealDB,skills:G,heroId:n,refine:b,rarity:t})}),[G,n,b,t,I.heroDB,I.weaponDB,I.assistDB,I.specialDB,I.skillADB,I.skillBDB,I.skillCDB,I.sealDB]),oe=(0,s.useMemo)((function(){return(0,J.f)({rarity:t,stats:ee,iv:i,merge:a,support:u,skillStats:ae.stats,lv1:O,arena:d,dragonflower:o,resplendent:h,mythicBonus1:p,mythicBonus2:f,mythicBonus3:g,mythicBonus4:j})}),[t,ee,i,a,u,ae,O,d,o,h,p,f,g,j]),he=(0,s.useMemo)((function(){return X({rarity:t,merge:a,bst:Math.max(oe.bst,ae.bst,Q.bst||0),spt:ae.spt})}),[t,a,oe.bst,ae.bst,ae.spt,Q]),fe=(0,s.useRef)({}),Te=(0,s.useCallback)((function(){if(P.current){var e=fe.current,n=e.background,t=e.foreground,r=e.foreground2,i=e.portrait,s=e.rarityAtlas,a=e.weaponTypeAtlas,o=e.moveTypeAtlas,c=e.dragonflowerAtlas,u=e.supportAtlas,d=e.blessingAtlas,h=e.numberAtlas,p=e.weaponIcon,f=e.assistIcon,v=e.specialIcon,x=e.textA,g=e.textB,j=e.textC,m=e.textS,b=e.arenaIcon,y=e.skillAIcon,B=e.skillBIcon,w=e.skillCIcon,D=e.sealIcon,C=e.resplendentIcon,S=_.current,O=S.title,I=S.name,q=S.weaponType,U=S.moveType,Y=!!_.current.blessing||!!H.current,J=P.current.getContext("2d");J.clearRect(0,0,540,960),n.loaded&&function(e){var n=e.context,t=e.background;e.support?n.drawImage(t,540,0,540,960,0,0,540,960):n.drawImage(t,0,0,540,960,0,0,540,960)}({context:J,background:n.image,support:F.current}),i.loaded&&function(e){var n=e.context,t=e.portrait;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:J,portrait:i.image}),t.loaded&&function(e){var n=e.context,t=e.foreground;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:J,foreground:t.image}),r.loaded&&function(e){var n=e.context,t=e.foreground2;e.dragonflower?n.drawImage(t,0,50,540,50,0,542,540,50):n.drawImage(t,0,0,540,50,0,542,540,50)}({context:J,foreground2:r.image,dragonflower:R.current}),s.loaded&&function(e){var n=e.context,t=e.rarityAtlas;switch(e.rarity){case 5:n.drawImage(t,0,0,153,40,42,380,153,40);break;case 4:n.drawImage(t,0,41,153,40,42,380,153,40)}}({context:J,rarityAtlas:s.image,rarity:E.current}),a.loaded&&function(e){var n=e.context,t=e.weaponTypeAtlas,r=e.weaponType,i=re.indexOf(r);i>-1&&n.drawImage(t,56*i,0,56,55,ne,te,28,28)}({context:J,weaponTypeAtlas:a.image,weaponType:q}),o.loaded&&function(e){var n=e.context,t=e.moveTypeAtlas,r=e.moveType,i=se.indexOf(r);i>-1&&n.drawImage(t,56*i,0,52,52,ie,le,26,26)}({context:J,moveTypeAtlas:o.image,moveType:U}),c.loaded&&h.loaded&&function(e){var n=e.context,t=e.dragonflowerAtlas,r=e.numberAtlas,i=e.moveType,l=e.dragonflower;if(l){var s=je.indexOf(i);s>-1&&n.drawImage(t,0,58*s,64,58,216,546,48,44);var a=0,o=ue;ke(n,r,o,"+",ve+ge[0],xe),a+=1,l>9&&(ke(n,r,o,Math.floor(l/10),ve+ge[a],xe),a+=1),ke(n,r,o,l%10,ve+ge[a],xe)}}({context:J,dragonflowerAtlas:c.image,numberAtlas:h.image,moveType:U,dragonflower:R.current}),u.loaded&&function(e){var n=e.context,t=e.supportAtlas,r=e.support,i=e.hasBlessing?108:0;r&&n.drawImage(t,me-i,be,108,115)}({context:J,supportAtlas:u.image,support:F.current,hasBlessing:Y}),d.loaded&&function(e){var n=e.context,t=e.blessingAtlas;n.drawImage(t,ye,Be,108,115)}({context:J,blessingAtlas:d.image}),h.loaded&&(!function(e){var n=e.context,t=e.numberAtlas,r=e.lv1?1:40,i=0;r>9&&ke(n,t,ue,4,Se+Ie[i],Oe),ke(n,t,ue,r%10,Se+Ie[i+=1],Oe)}({context:J,numberAtlas:h.image,lv1:L.current}),function(e){var n=e.context,t=e.numberAtlas,r=e.merge;if(!(r<=0)){var i=0,l=r>9?pe:ue;ke(n,t,l,"+",Pe+_e[0],Ae),i+=1,r>9&&(ke(n,t,l,1,Pe+_e[i],Ae),i+=1),ke(n,t,l,r%10,Pe+_e[i],Ae)}}({context:J,numberAtlas:h.image,merge:Z.current}),function(e){var n=e.context,t=e.numberAtlas,r=e.stats,i=e.score,l=e.sbst,s=e.bst;Object.values(r).forEach((function(e,r){Ze(n,t,e,r,ce)}));var a=l>s?de:pe;Ze(n,t,s,5,pe),Ze(n,t,i,6,a)}(ln({context:J,numberAtlas:h.image,score:V.current,sbst:Math.max(T.current.bst||0,_.current.bst||0)},M.current)),Fe({context:J,numberAtlas:h.image,accelerate:T.current.accelerate,specialCD:T.current.specialCD})),function(e){var n=e.context,t=e.weaponIcon,r=e.assistIcon,i=e.specialIcon,l=e.textA,s=e.textB,a=e.textC,o=e.textS,c=e.skillAIcon,u=e.skillBIcon,d=e.skillCIcon,h=e.sealIcon;t.loaded&&Ce(n,t.image,0),r.loaded&&Ce(n,r.image,1),i.loaded&&Ce(n,i.image,2),c.loaded&&Ce(n,c.image,3),n.drawImage(l.image,we+20,De+112+18,18,18),u.loaded&&Ce(n,u.image,4),n.drawImage(s.image,we+20,De+149+18,18,18),d.loaded&&Ce(n,d.image,5),n.drawImage(a.image,we+20,De+186+18,18,18),h.loaded&&Ce(n,h.image,6),n.drawImage(o.image,we+20,De+223+18,18,18)}({context:J,weaponIcon:p,assistIcon:f,specialIcon:v,textA:x,textB:g,textC:j,textS:m,skillAIcon:y,skillBIcon:B,skillCIcon:w,sealIcon:D}),A.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var n=e.canvas,t=e.iv,r=e.merge,i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#101010",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8;var l=(0,Ke.$r)(t),s=l.boon,a=l.bane,o={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};o[s]+=1,o[a]-=1,o[a]=r>0?1:o[a],Ve.forEach((function(e,n){var t=(0,k.Z)(e,2),r=t[0],l=t[1],s=ze+74*n;i.fillStyle=Le[o[r]],i.strokeText(l,We,s),i.fillText(l,We,s)}))}({canvas:A.current,iv:N.current,merge:Z.current}),function(e){var n=e.canvas,t=e.refine,r=e.weapon,i=(0,l.Z)(e,qe),s=n.getContext("2d");s.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",s.textAlign="left",s.textBaseline="middle",s.lineJoin="round",s.lineWidth=8,s.strokeStyle="#101010",s.fillStyle=t&&"-"!==t?"lime":"white";var a=Ue+("-"===r?4:0),o=Ye;s.strokeText(r,a,o),s.fillText(r,a,o),s.fillStyle="white",Object.keys(i).forEach((function(e){var n=i[e],t=Ye+74*Je[e],r="-"===n?4:0;s.strokeText(n,Ue+r,t),s.fillText(n,Ue+r,t)}))}(ln({canvas:A.current,refine:z.current},T.current.names)),function(e){var n=e.canvas,t=e.title,r=e.name,i=n.getContext("2d");i.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#220d00",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeText(t,Qe,Xe),i.fillText(t,Qe,Xe),i.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",i.strokeText(r,Ge,$e),i.fillText(r,Ge,$e)}({canvas:A.current,title:O,name:I}),K.current&&b&&function(e){var n=e.context,t=e.arenaIcon;n.drawImage(t,en.x,en.y,50,49)}({context:J,arenaIcon:b.image}),W.current&&C&&function(e){var n=e.context,t=e.resplendentIcon;n.drawImage(t,nn,tn,64,63)}({context:J,resplendentIcon:C.image}),J.drawImage(A.current,0,0,540,960)}}),[]);(0,s.useEffect)((function(){A.current=document.createElement("canvas"),A.current.width=1080,A.current.height=1920}),[]),(0,s.useEffect)((function(){sn.forEach((function(e){var n=(0,k.Z)(e,2),t=n[0],r=n[1];fe.current[t]=new $(Te),fe.current[t].load((0,v.Z)(r))}))}),[fe,Te]),(0,s.useEffect)((function(){var e=function(e){var n=e.resplendentDB,t=e.heroId;return e.enable&&null!==n&&void 0!==n&&n.includes(t)?"".concat(t,"(R)"):t}({resplendentDB:I.resplendentDB,heroId:Q.id,enable:h});fe.current.portrait.load((0,v.Z)("/portraits/".concat(e,".png")));var n=function(e){var n=e.heroDB,t=e.weaponDB,r=e.assistDB,i=e.specialDB,l=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skills,d=e.refine,h=U({heroDB:n,weaponDB:t,assistDB:r,specialDB:i,skillADB:l,skillBDB:s,skillCDB:a,sealDB:o,heroId:c,skills:u}),p={};if(Y.forEach((function(e){var n=h[e];p[e]=(null===n||void 0===n?void 0:n.icon)&&"/skills/".concat(n.icon)})),d&&"-"!==d){var f,k,v,x=q[d]||(null===(f=h.weapon)||void 0===f||null===(k=f.refine)||void 0===k||null===(v=k[d])||void 0===v?void 0:v.icon);x&&(p.weapon="/skills/weapon/".concat(x,".png"))}return p}({heroDB:I.heroDB,weaponDB:I.weaponDB,assistDB:I.assistDB,specialDB:I.specialDB,skillADB:I.skillADB,skillBDB:I.skillBDB,skillCDB:I.skillCDB,sealDB:I.sealDB,skills:G,heroId:Q.id,refine:b});an.forEach((function(e){var t=e.skillName,r=e.empty;fe.current["".concat(t,"Icon")].load((0,v.Z)("".concat(n[t]||r)))}));var t="-"!==Q.blessing&&!!Q.blessing||!!c,r=(0,v.Z)("/assets/blessing-".concat(Q.blessing||c,".png"));fe.current.blessingAtlas.load(t?r:"")}),[Q,h,G,b,c,oe,I.heroDB,I.weaponDB,I.assistDB,I.specialDB,I.skillADB,I.skillBDB,I.skillCDB,I.sealDB,I.resplendentDB]),(0,s.useEffect)((function(){_.current=Q,E.current=t,N.current=i,Z.current=a,R.current=o,H.current=c,F.current=u,K.current=d,W.current=h,z.current=b,L.current=O,V.current=he,T.current=ae,M.current=oe,Te()}),[Q,t,i,a,o,c,u,d,h,b,O,he,ae,oe,Te]);var Me=(0,s.useCallback)((function(){var e=P.current.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="".concat(null===Q||void 0===Q?void 0:Q.name,"-").concat(null===Q||void 0===Q?void 0:Q.title,".png"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[null===Q||void 0===Q?void 0:Q.name,null===Q||void 0===Q?void 0:Q.title]);return{canvasRef:P,triggerDownload:Me}},cn=t(3196),un=t.n(cn),dn=["openEditor"];function hn(e){var n=e.openEditor,t=(0,l.Z)(e,dn),r=on(t),i=r.canvasRef,s=r.triggerDownload;return(0,o.jsxs)("div",{className:un().container,children:[(0,o.jsx)("canvas",{className:un().canvas,width:"540",height:"960",ref:i}),(0,o.jsx)("button",{className:"".concat(un().button," ").concat(un().download),onClick:s,children:(0,o.jsx)(d,{})}),(0,o.jsx)("button",{className:"".concat(un().button," ").concat(un().menu),onClick:n,children:(0,o.jsx)(f,{})})]})}var pn=(0,s.memo)(hn);function fn(e){return 4===e?"4\u2605":"5\u2606"}var kn=[{name:"+\u653b\u64ca",value:"atk"},{name:"+\u901f\u5ea6",value:"spd"},{name:"+\u9632\u5b88",value:"def"},{name:"+\u9b54\u9632",value:"res"}];function vn(e){var n=kn.find((function(n){return e===n.value}));return(null===n||void 0===n?void 0:n.name)||"-"}function xn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xn(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var jn=function(e){return(0,o.jsxs)("svg",gn(gn({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,o.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),(0,o.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}))},mn=t(5988);function bn(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-2629191159"}),(0,o.jsx)(mn.default,{id:"2629191159",children:["div.jsx-2629191159{width:1.5em;height:1.5em;border-radius:0.5em;background-color:white;}"]})]})}var yn=function(e){var n=e.className,t=e.checked,r=e.onChange,i=(0,s.useCallback)((function(e){r&&(e.stopPropagation(),r(!t))}),[t,r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{role:"button",onClick:i,className:"jsx-19544621 "+(n||""),children:t&&(0,o.jsx)(bn,{})}),(0,o.jsx)(mn.default,{id:"19544621",children:["div.jsx-19544621{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:0.5em;width:2.5em;height:2.5em;font-size:1em;border:solid 1px white;background-color:transparent;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},Bn=t(9517),wn=t.n(Bn);var Dn=function(e){var n=e.children,t=e.checked,r=e.onChange;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("label",{className:wn().label,children:[n,(0,o.jsx)(yn,{className:wn()["label-checkbox"],checked:t,onChange:r})]})})},Cn=t(75),Sn=t(6736);var On=function(e){var n=e.blessing,t=(0,s.useMemo)((function(){return(0,Sn._n)(n)}),[n]),r=t.src,i=t.name;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-3356831981",children:[r&&(0,o.jsx)(Cn.Z,{src:r,loading:"lazy",width:"50px",height:"50px"}),(0,o.jsx)("div",{className:"jsx-3356831981 blessing-name",children:i})]}),(0,o.jsx)(mn.default,{id:"3356831981",children:["div.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}","div.jsx-3356831981 img.jsx-3356831981{width:2.5em;height:2.5em;margin-right:0.25em;}","div.jsx-3356831981 .blessing-name.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;}"]})]})},In=t(1946),Pn=t.n(In);var An=function(e){var n=e.onClick;return(0,o.jsx)("button",{className:Pn().button,onClick:n,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})};function _n(e){var n=e.hidden,t=e.style,r=e.children;return(0,o.jsx)("div",{hidden:n,className:Pn().container,style:t,children:r})}function Tn(e){var n=e.children,t=e.style;return(0,o.jsx)("div",{className:Pn().title,style:t,children:n})}function Mn(e){var n=e.children;return(0,o.jsx)("div",{className:Pn()["title-textgroup"],children:n})}function En(e){var n=e.children;return(0,o.jsx)("div",{className:Pn().content,children:n})}function Nn(e){var n=e.children;return(0,o.jsx)("div",{className:Pn()["section-group"],children:n})}function Zn(e){var n=e.children,t=e.disabled,r=e.onClick;return(0,o.jsx)("button",{className:"".concat(Pn().button," ").concat(Pn().section),disabled:t,onClick:r,children:n})}function Rn(e){var n=e.children;return(0,o.jsx)("div",{className:Pn()["button-content"],children:n})}function Hn(e){var n=e.children;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-3303034820",children:n}),(0,o.jsx)(mn.default,{id:"3303034820",children:["div.jsx-3303034820{overflow-y:auto;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-overflow-scrolling:touch;height:calc(100vh - 9em);}"]})]})}function Fn(e){var n=e.children;return(0,o.jsx)("div",{className:Pn().options,children:n})}function Kn(e){var n=e.children;return(0,o.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function Wn(e){var n=e.children;return(0,o.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function zn(e){var n=e.children;return(0,o.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Ln(e){var n=e.src;return(0,o.jsx)(Cn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"},loading:"lazy"})}function Vn(e){var n=e.children;return(0,o.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function qn(e){var n=e.children;return(0,o.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Un(e){var n=e.children;return(0,o.jsx)("div",{style:{display:"flex"},children:n})}function Yn(e){var n=e.children;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-2400499899",children:n}),(0,o.jsx)(mn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Jn(e){var n=e.cd,t=e.children;return n?(0,o.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function Qn(e){var n=e.children;return(0,o.jsx)("div",{style:{color:"salmon"},children:n})}var Xn=function(e){return e>0?"+".concat(e):"".concat(e)};function Gn(e){var n=e.children;return(0,o.jsx)("div",{style:{fontSize:"1.35em",padding:"0.25em",backgroundColor:"#1d3e53"},children:n})}var $n=t(8132);function et(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function nt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?et(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):et(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var tt=function(e){var n=e.heroId,t=e.resplendent,i=(0,r.K)(),l=i.heroDB,a=i.assistDB,c=i.resplendentDB,u=(0,s.useMemo)((function(){return(0,x.gO)({heroDB:l,assistDB:a,resplendentDB:c,heroId:n,noStat:!0})}),[l,a,c,n]);return(0,o.jsx)($n.Z,nt(nt({},u),{},{faceSrc:t?u.faceSrcR:u.faceSrc}))};var rt=function(e){var n=e.heroId,t=e.weapon,i=(0,r.K)(),l=i.heroDB,s=i.weaponDB;return(0,o.jsx)(o.Fragment,{children:K({heroDB:l,weaponDB:s,heroId:n,weapon:t})})};var it=function(e){var n=e.heroId,t=e.weapon,i=e.refine,l=(0,r.K)(),s=function(e){var n=e.heroDB,t=e.weaponDB,r=e.heroId,i=e.weapon,l=e.refine,s=V({heroDB:n,weaponDB:t,heroId:r,weapon:i,refine:l});return s?W[l]?{icon:l,name:W[l]}:{icon:s.icon,name:s.name}:{icon:"",name:""}}({heroDB:l.heroDB,weaponDB:l.weaponDB,heroId:n,weapon:t,refine:i}),a=s.icon,c=s.name;return(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsx)(Ln,{src:"/skills/weapon/".concat(a,".png")}),c]})};var lt=function(e){var n=e.assist,t=(0,r.K)().assistDB;return(0,o.jsx)(o.Fragment,{children:w({assistDB:t,assist:n})})};var st=function(e){var n=e.special,t=(0,r.K)().specialDB;return(0,o.jsx)(o.Fragment,{children:M({specialDB:t,special:n})})},at=["skillA","skillB","skillC"];var ot=function(e){var n=e.skillType,t=e.skillId,i=(0,r.K)();if(at.includes(n)){var l=function(e){var n=P({skillDB:e.skillDB,skillId:e.skillId});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({skillDB:i["".concat(n,"DB")],skillId:t}),s=l.icon,a=l.name;return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)(Ln,{src:"/skills/".concat(s)}),a]})}if("seal"===n){var c=function(e){var n=D({sealDB:e.sealDB,seal:e.seal});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({sealDB:i.sealDB,seal:t}),u=c.icon,d=c.name;return(0,o.jsxs)(o.Fragment,{children:[u&&(0,o.jsx)(Ln,{src:"/skills/".concat(u)}),d]})}return null};var ct=["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","mythicBonus1","mythicBonus2","mythicBonus3","mythicBonus4","weapon","refine","assist","special","skillA","skillB","skillC","seal","lv1","maxSkill"];var ut=function(e){var n=e.hidden,t=e.heroId,i=e.rarity,a=e.iv,c=e.merge,u=e.dragonflower,d=e.blessing,h=e.support,p=e.arena,f=e.resplendent,k=e.mythicBonus1,v=e.mythicBonus2,g=e.mythicBonus3,j=e.mythicBonus4,m=e.weapon,b=e.refine,y=e.assist,B=e.special,w=e.skillA,D=e.skillB,C=e.skillC,S=e.seal,O=e.lv1,I=e.maxSkill,P=(0,l.Z)(e,ct),A=function(e){var n=e.heroId,t=e.weapon,i=e.maxSkill,l=(0,r.K)(),a=l.heroDB,o=l.weaponDB,c=(0,s.useMemo)((function(){return(0,x.cK)(a,n)}),[a,n]),u=(0,s.useMemo)((function(){if("Feh"===n)return!1;var e=R({heroDB:a,weaponDB:o,heroId:n});return i?e.filter((function(e){return e.last})).length>0:e.length>0}),[a,o,n,i]),d=(0,s.useMemo)((function(){return"Feh"!==n&&z({heroDB:a,weaponDB:o,heroId:n,weapon:t}).length>0}),[a,o,n,t]),h=(0,s.useMemo)((function(){return"Feh"!==n&&"mythic"===c.pool}),[n,c]);return"Feh"===n?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1,isMythic:!1}:{hasRarity:c.rarity.length>0,hasBlessing:!!c.blessing,hasWeapon:u,hasRefine:d,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:c.blessing,isMythic:h}}({heroId:t,weapon:m,maxSkill:I}),_=A.hasRarity,T=A.hasBlessing,M=A.hasWeapon,E=A.hasRefine,N=A.hasAssist,Z=A.hasSpecial,H=A.hasSkillA,F=A.hasSkillB,K=A.hasSkillC,W=A.hasSeal,L=A.blessing,V=A.isMythic;return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsx)("button",{className:Pn()["close-button"],onClick:P.closeEditor,children:(0,o.jsx)(jn,{})}),(0,o.jsx)(Tn,{children:(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:"\u82f1\u96c4"}),(0,o.jsx)(Dn,{checked:O,onChange:P.toggleLv1,children:"Lv1"})]})}),(0,o.jsxs)(En,{children:[(0,o.jsx)("button",{className:"".concat(Pn().button," ").concat(Pn()["hero-header"]),onClick:P.openHeroPicker,children:(0,o.jsx)(tt,{heroId:t,resplendent:f})}),(0,o.jsxs)(Nn,{children:[(0,o.jsxs)(Zn,{disabled:!_,onClick:P.openRarityPicker,children:["\u7a00\u6709\u5ea6",(0,o.jsx)(Rn,{children:fn(i)})]}),(0,o.jsxs)(Zn,{disabled:"Feh"===t,onClick:P.openIVPicker,children:["IV",(0,o.jsx)(Rn,{children:(0,Ke.Zx)(a)})]}),(0,o.jsxs)(Zn,{disabled:T,onClick:P.openBlessingPicker,children:["\u795d\u798f",(0,o.jsx)(Rn,{children:(0,o.jsx)(On,{blessing:L||d})})]}),(0,o.jsxs)(Zn,{onClick:P.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",(0,o.jsx)(Rn,{children:c?"+".concat(c):"-"})]}),(0,o.jsxs)(Zn,{onClick:P.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",(0,o.jsx)(Rn,{children:u?"+".concat(u):"-"})]})]})]}),(0,o.jsx)(Tn,{children:(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:"\u6280\u80fd"}),(0,o.jsx)(Dn,{checked:I,onChange:P.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,o.jsx)(An,{onClick:P.setAllSkillDefault})]})}),(0,o.jsxs)(En,{children:[(0,o.jsxs)(Nn,{children:[(0,o.jsxs)(Zn,{disabled:!M,onClick:P.openWeaponPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",(0,o.jsx)(Rn,{children:(0,o.jsx)(rt,{heroId:t,weapon:m})})]}),(0,o.jsxs)(Zn,{disabled:!E,onClick:P.openRefinePicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",(0,o.jsx)(Rn,{children:(0,o.jsx)(it,{heroId:t,weapon:m,refine:b})})]})]}),(0,o.jsxs)(Nn,{children:[(0,o.jsxs)(Zn,{disabled:!N,onClick:P.openAssistPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",(0,o.jsx)(Rn,{children:(0,o.jsx)(lt,{assist:y})})]}),(0,o.jsxs)(Zn,{disabled:!Z,onClick:P.openSpecialPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",(0,o.jsx)(Rn,{children:(0,o.jsx)(st,{special:B})})]})]}),(0,o.jsxs)(Nn,{children:[(0,o.jsxs)(Zn,{disabled:!H,onClick:P.openSkillAPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",(0,o.jsx)(Rn,{children:(0,o.jsx)(ot,{skillType:"skillA",skillId:w})})]}),(0,o.jsxs)(Zn,{disabled:!F,onClick:P.openSkillBPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",(0,o.jsx)(Rn,{children:(0,o.jsx)(ot,{skillType:"skillB",skillId:D})})]}),(0,o.jsxs)(Zn,{disabled:!K,onClick:P.openSkillCPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",(0,o.jsx)(Rn,{children:(0,o.jsx)(ot,{skillType:"skillC",skillId:C})})]}),(0,o.jsxs)(Zn,{disabled:!W,onClick:P.openSealPicker,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",(0,o.jsx)(Rn,{children:(0,o.jsx)(ot,{skillType:"seal",skillId:S})})]})]})]}),(0,o.jsx)(Tn,{children:"\u5f37\u5316"}),(0,o.jsxs)(En,{children:[(0,o.jsxs)(Nn,{children:[(0,o.jsxs)(Zn,{onClick:P.toggleSupport,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"\u53ec\u559a\u5e2b\u5951\u7d04",(0,o.jsx)(yn,{checked:h})]}),(0,o.jsxs)(Zn,{onClick:P.toggleArena,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"\u9b25\u6280\u5834",(0,o.jsx)(yn,{checked:p})]}),(0,o.jsxs)(Zn,{onClick:P.toggleResplendent,children:[(0,o.jsx)(Cn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"\u795e\u88dd",(0,o.jsx)(yn,{checked:f})]})]}),!V&&(0,o.jsxs)(Nn,{children:[(0,o.jsxs)(Zn,{disabled:"Feh"===t,onClick:P.openMythicBonus1,children:["\u795e\u968e1",(0,o.jsx)(Rn,{children:vn(k)})]}),(0,o.jsxs)(Zn,{disabled:"Feh"===t,onClick:P.openMythicBonus2,children:["\u795e\u968e2",(0,o.jsx)(Rn,{children:vn(v)})]}),(0,o.jsxs)(Zn,{disabled:"Feh"===t,onClick:P.openMythicBonus3,children:["\u795e\u968e3",(0,o.jsx)(Rn,{children:vn(g)})]}),(0,o.jsxs)(Zn,{disabled:"Feh"===t,onClick:P.openMythicBonus4,children:["\u795e\u968e4",(0,o.jsx)(Rn,{children:vn(j)})]})]})]})]})},dt=t(1720);function ht(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ht(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ht(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ft=function(e){return(0,o.jsxs)("svg",pt(pt({width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,o.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,o.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var kt=function(e){var n=e.onClick;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:n,className:"jsx-3918608153",children:(0,o.jsx)(ft,{fill:"white"})}),(0,o.jsx)(mn.default,{id:"3918608153",children:["button.jsx-3918608153{background-color:transparent;display:block;}"]})]})},vt=t(226),xt=t.n(vt);var gt=function(e){var n=e.hidden,t=e.heroId,r=e.onChangeHero,i=e.onClickBack,l=e.resplendent,a=(0,s.useCallback)((function(e){r(e),i()}),[r,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),"\u82f1\u96c4"]}),(0,o.jsx)("div",{className:xt().picker,children:(0,o.jsx)(dt.Z,{heroId:t,onSelect:a,noDropdown:!0,resplendent:l})})]})},jt=t(6349);var mt=function(e){var n=e.hidden,t=e.rarity,r=e.selectRarity,i=e.onClickBack,l=(0,s.useCallback)((function(e){r(e),i()}),[r,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),"\u7a00\u6709\u5ea6"]}),(0,o.jsx)(jt.Z,{rarity:t,minRarity:4,onSelect:l})]})},bt=t(4921),yt=t.n(bt),Bt=function(e){var n=e.iv,t=e.selectIV,r=(0,s.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,o.jsxs)("div",{className:yt().container,children:[(0,o.jsx)("button",{className:yt()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),Ke.YM.map((function(e){return(0,o.jsx)("button",{className:yt()["iv-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var wt=function(e){var n=e.hidden,t=e.iv,r=e.selectIV,i=e.onClickBack,l=(0,s.useCallback)((function(e){r(e),i()}),[r,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),"IV"]}),(0,o.jsx)(Bt,{iv:t,selectIV:l})]})},Dt=t(9838),Ct=t.n(Dt),St=function(e){var n=e.blessing,t=e.selectBlessing,r=(0,s.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,o.jsxs)("div",{className:Ct().container,children:[(0,o.jsx)("button",{className:Ct()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),Sn.YM.map((function(e){return(0,o.jsx)("button",{className:Ct()["blessing-button"],"data-active":n===e.value,value:e.value,onClick:r,children:(0,o.jsx)(On,{blessing:e.value})},e.value)}))]})};var Ot=function(e){var n=e.hidden,t=e.blessing,r=e.selectBlessing,i=e.onClickBack,l=(0,s.useCallback)((function(e){r(e),i()}),[r,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),"IV"]}),(0,o.jsx)(St,{blessing:t,selectBlessing:l})]})},It=t(6870);var Pt=function(e){var n=e.hidden,t=e.merge,r=e.selectMerge,i=e.onClickBack,l=(0,s.useCallback)((function(e){r(e),i()}),[r,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),"\u7a81\u7834\u6b21\u6578"]}),(0,o.jsx)(It.Z,{merge:t,onSelect:l})]})},At=t(4637),_t=new Array(21).fill(0).map((function(e,n){return n}));var Tt=function(e){var n=e.dragonflower,t=e.onSelect;return(0,o.jsx)(At.Z,{value:n,onSelect:t,options:_t})};var Mt=function(e){var n=e.hidden,t=e.dragonflower,r=e.selectDragonflower,i=e.onClickBack,l=(0,s.useCallback)((function(e){r(e),i()}),[r,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),"\u795e\u9f8d\u4e4b\u82b1"]}),(0,o.jsx)(Tt,{dragonflower:t,onSelect:l})]})};var Et=function(e){var n=e.active,t=e.last,r=e.hidden,i=e.value,l=e.children,s=e.onClick;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{"data-active":n,value:i,onClick:s,hidden:r,className:mn.default.dynamic([["2665293084",[t?1:.618]]]),children:l}),(0,o.jsx)(mn.default,{id:"2665293084",dynamic:[t?1:.618],children:[".__jsx-style-dynamic-selector{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;text-align:left;outline:none;line-height:1.5;opacity:".concat(t?1:.618,";}"),"button.__jsx-style-dynamic-selector{padding:0.5em;margin-bottom:0.5em;border-bottom:1px solid #1d3e53;cursor:pointer;display:block;color:white;width:100%;background-color:transparent;}","button.__jsx-style-dynamic-selector:hover{background-color:#77abb7aa;}","button[hidden].__jsx-style-dynamic-selector{display:none;}","button[data-active='true'].__jsx-style-dynamic-selector{background-color:#476d7c;}"]})]})};function Nt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Zt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Nt(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Rt(e){var n=e.children;return(0,o.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function Ht(e){var n=e.children;return(0,o.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder"},children:n})}function Ft(e){var n=e.children;return(0,o.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Kt(e){var n=e.children;return(0,o.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Wt(e){var n=e.children;return(0,o.jsx)("div",{style:{display:"flex"},children:n})}function zt(e){var n=e.children;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-2400499899",children:n}),(0,o.jsx)(mn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Lt(e){var n=e.cd,t=e.children;return n?(0,o.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function Vt(e){var n=e.children;return(0,o.jsx)("div",{style:{color:"salmon"},children:n})}var qt=function(e){return e>0?"+".concat(e):"".concat(e)};var Ut=function(e){var n=e.active,t=e.weapon,r=e.hidden,i=e.onClick;return(0,o.jsxs)(Et,{active:n,last:t.last,hidden:r,value:t.id,onClick:i,children:[(0,o.jsxs)(Rt,{children:[(0,o.jsx)(Ht,{children:t.name}),(0,o.jsxs)(Ft,{children:[t.sp,"SP"]})]}),(0,o.jsxs)(Kt,{children:["\u5a01\u529b ",t.mt]}),t.cd&&(0,o.jsxs)(Lt,{cd:t.cd,children:["\u5967\u7fa9 cd",qt(t.cd)]}),(0,o.jsxs)(Wt,{children:[t.hp&&(0,o.jsxs)(zt,{children:["HP ",qt(t.hp)]}),t.atk&&(0,o.jsxs)(zt,{children:["\u653b\u64ca ",qt(t.atk)]}),t.spd&&(0,o.jsxs)(zt,{children:["\u901f\u5ea6 ",qt(t.spd)]}),t.def&&(0,o.jsxs)(zt,{children:["\u9632\u5b88 ",qt(t.def)]}),t.res&&(0,o.jsxs)(zt,{children:["\u9b54\u9632 ",qt(t.res)]})]}),t.exclusive&&(0,o.jsx)(Vt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})},Yt=["hidden"];function Jt(e){var n=e.heroId,t=e.weapon,i=e.selectWeapon,a=function(e){var n=e.heroId,t=e.filter,i=e.maxSkill,l=(0,r.K)(),a=l.heroDB,o=l.weaponDB,c=(0,s.useMemo)((function(){return R({heroDB:a,weaponDB:o,heroId:n})}),[n,a,o]);return{options:(0,s.useMemo)((function(){return c.map((function(e){var n=!1;return i&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),Zt(Zt({},e),{},{hidden:n})}))}),[c,t,i])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,c=(0,s.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,o.jsxs)(Fn,{children:[(0,o.jsx)(Et,{active:!t,value:"",onClick:c,children:"\u7121\u6b66\u5668"}),a.map((function(e){var n=e.hidden,r=(0,l.Z)(e,Yt);return(0,o.jsx)(Ut,{hidden:n,weapon:r,active:t===e.id,onClick:c},e.id)}))]})}var Qt=(0,s.memo)(Jt);var Xt=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,i=e.weapon,l=e.selectWeapon,a=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,s.useState)(""),h=d[0],p=d[1],f=(0,s.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,s.useCallback)((function(e){l(e),t()}),[l,t]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:t}),(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:"\u6b66\u5668"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(Dn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,o.jsx)(An,{onClick:u})]})]})]}),(0,o.jsx)("input",{className:Pn().input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:f}),(0,o.jsx)(Hn,{children:(0,o.jsx)(Qt,{heroId:r,weapon:i,filter:h,maxSkill:a,selectWeapon:k})})]})};function Gt(e){var n=e.children;return(0,o.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function $t(e){var n=e.src;return(0,o.jsx)(Cn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function er(e){var n=e.children;return(0,o.jsx)("div",{style:{fontWeight:"bold"},children:n})}function nr(e){var n=e.children;return(0,o.jsx)("div",{style:{display:"flex"},children:n})}function tr(e){var n=e.children;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"jsx-2400499899",children:n}),(0,o.jsx)(mn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function rr(e){var n=e.cd,t=e.children;return n?(0,o.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function ir(e){var n=e.children;return(0,o.jsx)("div",{style:{color:"salmon"},children:n})}var lr=function(e){return e>0?"+".concat(e):"".concat(e)};var sr=function(e){var n=e.active,t=e.hidden,r=e.refineType,i=e.refine,l=e.onClick;return(0,o.jsxs)(Et,{active:n,last:!0,hidden:t,value:r,onClick:l,children:[(0,o.jsxs)(Gt,{children:[i.icon&&(0,o.jsx)($t,{src:i.icon}),i.name]}),i.mt&&(0,o.jsxs)(er,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,o.jsxs)(rr,{cd:i.cd,children:["\u5967\u7fa9 cd",lr(i.cd)]}),(0,o.jsxs)(nr,{children:[i.hp&&(0,o.jsxs)(tr,{children:["HP ",lr(i.hp)]}),i.atk&&(0,o.jsxs)(tr,{children:["\u653b\u64ca ",lr(i.atk)]}),i.spd&&(0,o.jsxs)(tr,{children:["\u901f\u5ea6 ",lr(i.spd)]}),i.def&&(0,o.jsxs)(tr,{children:["\u9632\u5b88 ",lr(i.def)]}),i.res&&(0,o.jsxs)(tr,{children:["\u9b54\u9632 ",lr(i.res)]})]}),i.exclusive&&(0,o.jsx)(ir,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})},ar=["value"];function or(e){var n=e.heroId,t=e.weapon,i=e.refine,a=e.selectRefine,c=function(e){var n=e.heroId,t=e.weapon,i=(0,r.K)(),l=i.heroDB,a=i.weaponDB;return{options:(0,s.useMemo)((function(){return z({heroDB:l,weaponDB:a,heroId:n,weapon:t})}),[l,a,n,t])}}({heroId:n,weapon:t}).options,u=(0,s.useCallback)((function(e){e.stopPropagation(),a(e.currentTarget.value)}),[a]);return(0,o.jsxs)(Fn,{children:[(0,o.jsx)(Et,{active:!i,value:"",onClick:u,children:"\u7121\u935b\u9020"}),c.map((function(e){var n=e.value,t=(0,l.Z)(e,ar);return(0,o.jsx)(sr,{refineType:n,refine:t,active:i===n,onClick:u},n)}))]})}var cr=(0,s.memo)(or);var ur=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,i=e.weapon,l=e.refine,a=e.selectRefine,c=(0,s.useCallback)((function(e){a(e),t()}),[a,t]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:t}),(0,o.jsx)(Mn,{children:(0,o.jsx)("span",{children:"\u935b\u9020"})})]}),(0,o.jsx)(Hn,{children:(0,o.jsx)(cr,{heroId:r,weapon:i,refine:l,selectRefine:c})})]})},dr=t(4825),hr=t(1728);function pr(e){var n=e.active,t=e.hidden,r=e.skill,i=e.onClick;return(0,o.jsxs)(Et,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,o.jsxs)(Kn,{children:[(0,o.jsxs)(Wn,{children:[r.icon&&(0,o.jsx)(Ln,{src:"/skills/".concat(r.icon)}),r.name]}),(0,o.jsxs)(zn,{children:[r.sp,"SP"]})]}),r.mt&&(0,o.jsxs)(qn,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,o.jsxs)(Jn,{cd:r.cd,children:["\u5967\u7fa9 cd",Xn(r.cd)]}),(0,o.jsxs)(Un,{children:[r.hp&&(0,o.jsxs)(Yn,{children:["HP ",Xn(r.hp)]}),r.atk&&(0,o.jsxs)(Yn,{children:["\u653b\u64ca ",Xn(r.atk)]}),r.spd&&(0,o.jsxs)(Yn,{children:["\u901f\u5ea6 ",Xn(r.spd)]}),r.def&&(0,o.jsxs)(Yn,{children:["\u9632\u5b88 ",Xn(r.def)]}),r.res&&(0,o.jsxs)(Yn,{children:["\u9b54\u9632 ",Xn(r.res)]})]}),r.exclusive&&(0,o.jsx)(Qn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var fr=(0,s.memo)(pr);function kr(e){var n=e.index,t=e.style,r=e.data,i=r.skillId,l=r.skills,s=r.onClick,a=l[n];return(0,o.jsx)("div",{style:t,children:(0,o.jsx)(fr,{active:i===a.id,skill:a,onClick:s},a.id)})}function vr(e){var n=e.heroId,t=e.skillType,i=e.skillId,l=e.selectSkill,a=e.filter,c=e.maxSkill,u=(0,s.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]),d=function(e){var n=e.heroId,t=e.skillType,i=e.filter,l=e.maxSkill,a=(0,r.K)(),o=a.rules2DB,c=a.heroDB,u=a["".concat(t,"DB")],d=(0,s.useMemo)((function(){return O({rules2DB:o,heroDB:c,skillDB:u,heroId:n})}),[o,c,u,n]);return{options:(0,s.useMemo)((function(){return d.filter((function(e){return!(l&&!e.last)&&(!i||e.query.includes(i.toLowerCase()))}))}),[d,i,l])}}({heroId:n,skillType:t,skillId:i,filter:a,maxSkill:c}).options,h=(0,s.useMemo)((function(){return{skillId:i,skills:d,onClick:u}}),[i,d,u]),p=(0,s.useCallback)((function(e){var n=d[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[d]),f=(0,s.useCallback)((function(e){return d[e].id}),[d]);return(0,o.jsx)(hr.Z,{children:function(e){var n=e.width,t=e.height;return(0,o.jsx)(dr.S_,{width:n,height:t,itemCount:d.length,itemSize:p,itemData:h,itemKey:f,children:kr},d.length)}})}var xr=(0,s.memo)(vr);function gr(e){var n=e.heroId,t=e.skillType,r=e.skillId,i=e.selectSkill,l=e.filter,s=e.maxSkill;return(0,o.jsxs)(Fn,{children:[(0,o.jsx)(Et,{active:!r,value:"",onClick:function(){return i("")},children:"\u7121\u6280\u80fd"}),(0,o.jsx)(xr,{heroId:n,skillType:t,skillId:r,selectSkill:i,filter:l,maxSkill:s})]})}var jr=(0,s.memo)(gr);var mr=function(e){var n=e.hidden,t=e.skillType,r=e.title,i=e.onClickBack,l=e.heroId,a=e.skillId,c=e.selectSkill,u=e.maxSkill,d=e.toggleMaxSkill,h=e.setDefaultSkill,p=(0,s.useState)(""),f=p[0],k=p[1],v=(0,s.useCallback)((function(e){k(e.currentTarget.value)}),[]),x=(0,s.useCallback)((function(e){c(e),i()}),[c,i]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:i}),(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:r}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(Dn,{checked:u,onChange:d,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),h&&(0,o.jsx)(An,{onClick:h})]})]})]}),(0,o.jsx)("input",{className:Pn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:v}),(0,o.jsx)(Hn,{children:(0,o.jsx)(jr,{heroId:l,skillType:t,skillId:a,selectSkill:x,filter:f,maxSkill:u})})]})};function br(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function yr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?br(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):br(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Br(e){var n=e.heroId,t=e.filter,i=e.maxSkill,l=(0,r.K)(),a=l.rules2DB,o=l.heroDB,c=l.assistDB,u=(0,s.useMemo)((function(){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.assistDB,i=e.heroId;if(!n||!t||!r||!i)return[];var l=(0,x.cK)(t,i);return l?Object.values(r).filter((function(e){return e.exclusive?e.exclusive.includes(i):m({rules2DB:n,ruleId:e.rules,moveType:l.moveType,colorType:l.colorType,weaponType:l.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return y(y({},e),{},{query:n})})):[]}({rules2DB:a,heroDB:o,assistDB:c,heroId:n})}),[a,o,c,n]);return{options:(0,s.useMemo)((function(){return u.map((function(e){var n=!1;return i&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),yr(yr({},e),{},{hidden:n})}))}),[u,t,i])}}function wr(e){var n=e.active,t=e.hidden,r=e.assist,i=e.onClick;return(0,o.jsxs)(Et,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,o.jsxs)(Kn,{children:[(0,o.jsx)(Wn,{children:r.name}),(0,o.jsxs)(Vn,{children:[r.sp,"SP"]})]}),r.exclusive&&(0,o.jsx)(Qn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Dr=(0,s.memo)(wr),Cr=["hidden"];function Sr(e){var n=e.heroId,t=e.assist,r=e.selectAssist,i=Br({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,a=(0,s.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,o.jsxs)(Fn,{children:[(0,o.jsx)(Et,{active:!t,value:"",onClick:a,children:"\u7121\u6280\u80fd"}),i.map((function(e){var n=e.hidden,r=(0,l.Z)(e,Cr);return(0,o.jsx)(Dr,{hidden:n,active:t===r.id,assist:r,onClick:a},r.id)}))]})}var Or=(0,s.memo)(Sr);var Ir=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,i=e.assist,l=e.selectAssist,a=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,s.useState)(""),h=d[0],p=d[1],f=(0,s.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,s.useCallback)((function(e){l(e),t()}),[l,t]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:t}),(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:"\u652f\u63f4"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(Dn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,o.jsx)(An,{onClick:u})]})]})]}),(0,o.jsx)("input",{className:Pn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,o.jsx)(Hn,{children:(0,o.jsx)(Or,{heroId:r,assist:i,selectAssist:k,filter:h,maxSkill:a})})]})};function Pr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ar(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pr(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _r(e){var n=e.heroId,t=e.filter,i=e.maxSkill,l=(0,r.K)(),a=l.rules2DB,o=l.heroDB,c=l.specialDB,u=(0,s.useMemo)((function(){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.specialDB,i=e.heroId;if(!n||!t||!r||!i)return[];var l=(0,x.cK)(t,i);return l?Object.values(r).filter((function(e){return e.exclusive?e.exclusive.includes(i):m({rules2DB:n,ruleId:e.rules,moveType:l.moveType,colorType:l.colorType,weaponType:l.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return _(_({},e),{},{query:n})})):[]}({rules2DB:a,heroDB:o,specialDB:c,heroId:n})}),[a,o,c,n]);return{options:(0,s.useMemo)((function(){return u.map((function(e){var n=!1;return i&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),Ar(Ar({},e),{},{hidden:n})}))}),[u,t,i])}}function Tr(e){var n=e.active,t=e.hidden,r=e.special,i=e.onClick;return(0,o.jsxs)(Et,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,o.jsxs)(Kn,{children:[(0,o.jsx)(Wn,{children:r.name}),(0,o.jsxs)(Vn,{children:[r.sp,"SP"]})]}),(0,o.jsxs)("div",{children:["CD ",r.cd]}),r.exclusive&&(0,o.jsx)(Qn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Mr=(0,s.memo)(Tr),Er=["hidden"];function Nr(e){var n=e.heroId,t=e.special,r=e.selectSpecial,i=_r({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,a=(0,s.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,o.jsxs)(Fn,{children:[(0,o.jsx)(Et,{active:!t,value:"",onClick:a,children:"\u7121\u6280\u80fd"}),i.map((function(e){var n=e.hidden,r=(0,l.Z)(e,Er);return(0,o.jsx)(Mr,{hidden:n,active:t===r.id,special:r,onClick:a},r.id)}))]})}var Zr=(0,s.memo)(Nr);var Rr=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,i=e.special,l=e.selectSpecial,a=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,s.useState)(""),h=d[0],p=d[1],f=(0,s.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,s.useCallback)((function(e){l(e),t()}),[l,t]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:t}),(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:"\u5967\u7fa9"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(Dn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,o.jsx)(An,{onClick:u})]})]})]}),(0,o.jsx)("input",{className:Pn().input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:f}),(0,o.jsx)(Hn,{children:(0,o.jsx)(Zr,{heroId:r,special:i,selectSpecial:k,filter:h,maxSkill:a})})]})},Hr=t(907);var Fr=t(181);function Kr(e){return function(e){if(Array.isArray(e))return(0,Hr.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,Fr.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e){var n=e.active,t=e.hidden,r=e.skill,i=e.onClick;return(0,o.jsxs)(Et,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,o.jsxs)(Kn,{children:[(0,o.jsxs)(Wn,{children:[r.icon&&(0,o.jsx)(Ln,{src:"/skills/".concat(r.icon)}),r.name]}),r.sp&&(0,o.jsxs)(zn,{children:[r.sp,"SP"]})]}),r.mt&&(0,o.jsxs)(qn,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,o.jsxs)(Jn,{cd:r.cd,children:["\u5967\u7fa9 cd",Xn(r.cd)]}),(0,o.jsxs)(Un,{children:[r.hp&&(0,o.jsxs)(Yn,{children:["HP ",Xn(r.hp)]}),r.atk&&(0,o.jsxs)(Yn,{children:["\u653b\u64ca ",Xn(r.atk)]}),r.spd&&(0,o.jsxs)(Yn,{children:["\u901f\u5ea6 ",Xn(r.spd)]}),r.def&&(0,o.jsxs)(Yn,{children:["\u9632\u5b88 ",Xn(r.def)]}),r.res&&(0,o.jsxs)(Yn,{children:["\u9b54\u9632 ",Xn(r.res)]})]}),r.exclusive&&(0,o.jsx)(Qn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var zr=(0,s.memo)(Wr);function Lr(e){var n=e.index,t=e.style,r=e.data,i=r.seal,l=r.skills,s=r.onClick,a=l[n];return"_sealA"===a.id?(0,o.jsx)("div",{style:t,children:(0,o.jsx)(Gn,{children:"A\u6280\u80fd\u8056\u5370"})}):"_sealB"===a.id?(0,o.jsx)("div",{style:t,children:(0,o.jsx)(Gn,{children:"B\u6280\u80fd\u8056\u5370"})}):"_sealC"===a.id?(0,o.jsx)("div",{style:t,children:(0,o.jsx)(Gn,{children:"C\u6280\u80fd\u8056\u5370"})}):"_seal"===a.id?(0,o.jsx)("div",{style:t,children:(0,o.jsx)(Gn,{children:"\u5c08\u7528\u8056\u5370"})}):(0,o.jsx)("div",{style:t,children:(0,o.jsx)(zr,{active:i===a.id,skill:a,onClick:s},a.id)})}function Vr(e){var n=e.heroId,t=e.seal,i=e.selectSeal,l=e.filter,a=e.maxSkill,c=(0,s.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]),u=function(e){var n=e.heroId,t=e.filter,i=e.maxSkill,l=(0,r.K)(),a=l.rules2DB,o=l.heroDB,c=l.sealDB,u=(0,s.useMemo)((function(){var e=O({rules2DB:a,heroDB:o,skillDB:c.skillA,heroId:n}),t=O({rules2DB:a,heroDB:o,skillDB:c.skillB,heroId:n}),r=O({rules2DB:a,heroDB:o,skillDB:c.skillC,heroId:n}),i=O({rules2DB:a,heroDB:o,skillDB:c.seal,heroId:n});return[{id:"_sealA",name:"A\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}].concat(Kr(e),[{id:"_sealB",name:"B\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}],Kr(t),[{id:"_sealC",name:"C\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}],Kr(r),[{id:"_seal",name:"\u5c08\u7528\u8056\u5370",sp:0,icon:"",query:""}],Kr(i))}),[a,o,c,n]);return{options:(0,s.useMemo)((function(){return u.filter((function(e){return!!["_sealA","_sealB","_sealC","_seal"].includes(e.id)||!(i&&!e.last)&&(!t||e.query.includes(t.toLowerCase()))}))}),[u,t,i])}}({heroId:n,filter:l,maxSkill:a}).options,d=(0,s.useMemo)((function(){return{seal:t,skills:u,onClick:c}}),[t,u,c]),h=(0,s.useCallback)((function(e){var n=u[e];if(["_sealA","_sealB","_sealC","_seal"].includes(n.id))return 44;var t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[u]),p=(0,s.useCallback)((function(e){return u[e].id}),[u]);return(0,o.jsx)(hr.Z,{children:function(e){var n=e.width,t=e.height;return(0,o.jsx)(dr.S_,{width:n,height:t,itemCount:u.length,itemSize:h,itemData:d,itemKey:p,children:Lr},u.length)}})}var qr=(0,s.memo)(Vr);function Ur(e){var n=e.heroId,t=e.seal,r=e.selectSeal,i=e.filter,l=e.maxSkill,a=(0,s.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,o.jsxs)(Fn,{children:[(0,o.jsx)(Et,{active:!t,value:"",onClick:a,children:"\u7121\u8056\u5370"}),(0,o.jsx)(qr,{heroId:n,seal:t,selectSeal:r,filter:i,maxSkill:l})]})}var Yr=(0,s.memo)(Ur);var Jr=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,i=e.seal,l=e.selectSeal,a=e.maxSkill,c=e.toggleMaxSkill,u=(0,s.useState)(""),d=u[0],h=u[1],p=(0,s.useCallback)((function(e){h(e.currentTarget.value)}),[]),f=(0,s.useCallback)((function(e){l(e),t()}),[l,t]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:t}),(0,o.jsxs)(Mn,{children:[(0,o.jsx)("span",{children:"\u8056\u5370"}),(0,o.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,o.jsx)(Dn,{checked:a,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),(0,o.jsx)("input",{className:Pn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:p}),(0,o.jsx)(Hn,{children:(0,o.jsx)(Yr,{heroId:r,seal:i,selectSeal:f,filter:d,maxSkill:a})})]})},Qr=t(9658),Xr=t.n(Qr),Gr=function(e){var n=e.bonus,t=e.selectBonus,r=(0,s.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,o.jsxs)("div",{className:Xr().container,children:[(0,o.jsx)("button",{className:Xr()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),kn.map((function(e){return(0,o.jsx)("button",{className:Xr()["bonus-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var $r=function(e){var n=e.hidden,t=e.title,r=e.bonus,i=e.selectBonus,l=e.onClickBack,a=(0,s.useCallback)((function(e){i(e),l()}),[i,l]);return(0,o.jsxs)(_n,{hidden:n,children:[(0,o.jsxs)(Tn,{children:[(0,o.jsx)(kt,{onClick:l}),t]}),(0,o.jsx)(Gr,{bonus:r,selectBonus:a})]})};var ei=function(){var e=(0,s.useState)(""),n=e[0],t=e[1];return{view:n,openHeroPicker:(0,s.useCallback)((function(){t("hero")}),[]),openRarityPicker:(0,s.useCallback)((function(){t("rarity")}),[]),openIVPicker:(0,s.useCallback)((function(){t("iv")}),[]),openMergePicker:(0,s.useCallback)((function(){t("merge")}),[]),openDragonflowerPicker:(0,s.useCallback)((function(){t("dragonflower")}),[]),openBlessingPicker:(0,s.useCallback)((function(){t("blessing")}),[]),openWeaponPicker:(0,s.useCallback)((function(){t("weapon")}),[]),openRefinePicker:(0,s.useCallback)((function(){t("refine")}),[]),openAssistPicker:(0,s.useCallback)((function(){t("assist")}),[]),openSpecialPicker:(0,s.useCallback)((function(){t("special")}),[]),openSkillAPicker:(0,s.useCallback)((function(){t("skillA")}),[]),openSkillBPicker:(0,s.useCallback)((function(){t("skillB")}),[]),openSkillCPicker:(0,s.useCallback)((function(){t("skillC")}),[]),openSealPicker:(0,s.useCallback)((function(){t("seal")}),[]),openMythicBonus1:(0,s.useCallback)((function(){t("mythic1")}),[]),openMythicBonus2:(0,s.useCallback)((function(){t("mythic2")}),[]),openMythicBonus3:(0,s.useCallback)((function(){t("mythic3")}),[]),openMythicBonus4:(0,s.useCallback)((function(){t("mythic4")}),[]),onClickBack:(0,s.useCallback)((function(){t("")}),[])}};function ni(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ti(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ni(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ni(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ri=function(e){var n=ei(),t=n.view,r=n.openHeroPicker,i=n.openRarityPicker,l=n.openIVPicker,s=n.openMergePicker,a=n.openDragonflowerPicker,c=n.openBlessingPicker,u=n.openWeaponPicker,d=n.openRefinePicker,h=n.openAssistPicker,p=n.openSpecialPicker,f=n.openSkillAPicker,k=n.openSkillBPicker,v=n.openSkillCPicker,x=n.openSealPicker,g=n.openMythicBonus1,j=n.openMythicBonus2,m=n.openMythicBonus3,b=n.openMythicBonus4,y=n.onClickBack;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ut,ti(ti({hidden:!!t},e),{},{openHeroPicker:r,openRarityPicker:i,openIVPicker:l,openMergePicker:s,openDragonflowerPicker:a,openBlessingPicker:c,openWeaponPicker:u,openRefinePicker:d,openAssistPicker:h,openSpecialPicker:p,openSkillAPicker:f,openSkillBPicker:k,openSkillCPicker:v,openSealPicker:x,openMythicBonus1:g,openMythicBonus2:j,openMythicBonus3:m,openMythicBonus4:b})),(0,o.jsx)(gt,{hidden:"hero"!==t,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:y,resplendent:e.resplendent}),(0,o.jsx)(mt,{hidden:"rarity"!==t,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:y}),(0,o.jsx)(wt,{hidden:"iv"!==t,iv:e.iv,selectIV:e.setIV,onClickBack:y}),(0,o.jsx)(Ot,{hidden:"blessing"!==t,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:y}),(0,o.jsx)(Pt,{hidden:"merge"!==t,merge:e.merge,selectMerge:e.setMerge,onClickBack:y}),(0,o.jsx)(Mt,{hidden:"dragonflower"!==t,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:y}),(0,o.jsx)(Xt,{hidden:"weapon"!==t,onClickBack:y,heroId:e.heroId,weapon:e.weapon,selectWeapon:e.setWeapon,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,o.jsx)(ur,{hidden:"refine"!==t,onClickBack:y,heroId:e.heroId,weapon:e.weapon,refine:e.refine,selectRefine:e.setRefine}),(0,o.jsx)(Ir,{hidden:"assist"!==t,onClickBack:y,heroId:e.heroId,assist:e.assist,selectAssist:e.setAssist,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),(0,o.jsx)(Rr,{title:"A\u6280\u80fd",hidden:"special"!==t,onClickBack:y,heroId:e.heroId,special:e.special,selectSpecial:e.setSpecial,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),(0,o.jsx)(mr,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==t,onClickBack:y,heroId:e.heroId,skillId:e.skillA,selectSkill:e.setSkillA,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),(0,o.jsx)(mr,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==t,onClickBack:y,heroId:e.heroId,skillId:e.skillB,selectSkill:e.setSkillB,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),(0,o.jsx)(mr,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==t,onClickBack:y,heroId:e.heroId,skillId:e.skillC,selectSkill:e.setSkillC,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),(0,o.jsx)(Jr,{hidden:"seal"!==t,onClickBack:y,heroId:e.heroId,seal:e.skillC,selectSeal:e.setSeal,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill}),(0,o.jsx)($r,{hidden:"mythic1"!==t,title:"\u795e\u968e1",onClickBack:y,bonus:e.mythicBonus1,selectBonus:e.setMythicBonus1}),(0,o.jsx)($r,{hidden:"mythic2"!==t,title:"\u795e\u968e2",onClickBack:y,bonus:e.mythicBonus2,selectBonus:e.setMythicBonus2}),(0,o.jsx)($r,{hidden:"mythic3"!==t,title:"\u795e\u968e3",onClickBack:y,bonus:e.mythicBonus3,selectBonus:e.setMythicBonus3}),(0,o.jsx)($r,{hidden:"mythic4"!==t,title:"\u795e\u968e4",onClickBack:y,bonus:e.mythicBonus4,selectBonus:e.setMythicBonus4})]})},ii={weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""};function li(){var e=(0,r.K)(),n=e.rules2DB,t=e.heroDB,i=e.weaponDB,l=e.assistDB,a=e.specialDB,o=e.skillADB,c=e.skillBDB,u=e.skillCDB,d=e.sealDB,h=e.defaultSkillDB,p=(0,s.useState)("Feh"),f=p[0],k=p[1],g=(0,s.useState)(5),j=g[0],b=g[1],y=(0,s.useState)(""),B=y[0],w=y[1],D=(0,s.useState)(0),C=D[0],S=D[1],O=(0,s.useState)(0),P=O[0],A=O[1],_=(0,s.useState)(""),T=_[0],M=_[1],E=(0,s.useState)(!1),N=E[0],Z=E[1],R=(0,s.useCallback)((function(){Z((function(e){return!e}))}),[]),F=(0,s.useRef)({weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""}),K=(0,s.useRef)(""),W=(0,s.useRef)(""),z=(0,s.useState)(""),V=z[0],q=z[1],U=(0,s.useState)(""),Y=U[0],J=U[1],Q=(0,s.useState)(""),X=Q[0],G=Q[1],$=(0,s.useState)(""),ee=$[0],ne=$[1],te=(0,s.useState)(""),re=te[0],ie=te[1],le=(0,s.useState)(""),se=le[0],ae=le[1],oe=(0,s.useState)(""),ce=oe[0],ue=oe[1],de=(0,s.useState)(""),he=de[0],pe=de[1],fe=(0,s.useState)(""),ke=fe[0],ve=fe[1],xe=(0,s.useState)(""),ge=xe[0],je=xe[1],me=(0,s.useState)(""),be=me[0],ye=me[1],Be=(0,s.useState)(""),we=Be[0],De=Be[1],Ce=(0,s.useCallback)((function(){q(F.current.weapon),J((function(e){return L({heroDB:t,weaponDB:i,heroId:K.current,weaponId:F.current.weapon,refineId:e})?e:""}))}),[t,i]),Se=(0,s.useCallback)((function(e){q(e),J((function(n){return L({heroDB:t,weaponDB:i,heroId:K.current,weaponId:e,refineId:n})?n:""}))}),[t,i]),Oe=(0,s.useCallback)((function(){G(F.current.assist)}),[]),Ie=(0,s.useCallback)((function(){ne(F.current.special)}),[]),Pe=(0,s.useCallback)((function(){ie(F.current.skillA)}),[]),Ae=(0,s.useCallback)((function(){ae(F.current.skillB)}),[]),_e=(0,s.useCallback)((function(){ue(F.current.skillC)}),[]),Te=(0,s.useCallback)((function(){Ce(),Oe(),Ie(),Pe(),Ae(),_e()}),[Ce,Oe,Ie,Pe,Ae,_e]);K.current=f,W.current=V;var Me=(0,s.useCallback)((function(e){k(e),F.current=function(e){var n=e.defaultSkillDB,t=e.heroId;if(!n||!t||!n[t])return ii;var r=n[t],i="",l="",s="",a="",o="",c="";return r.weapon&&(i=Object.keys(r.weapon).pop()),r.assist&&(l=Object.keys(r.assist).pop()),r.special&&(s=Object.keys(r.special).pop()),r.skillA&&(a=Object.keys(r.skillA).pop()),r.skillB&&(o=Object.keys(r.skillB).pop()),r.skillC&&(c=Object.keys(r.skillC).pop()),{weapon:i,assist:l,special:s,skillA:a,skillB:o,skillC:c}}({defaultSkillDB:h,heroId:e}),q((function(){return H({heroDB:t,weaponDB:i,heroId:e,weaponId:W.current})?W.current:""})),J((function(n){return L({heroDB:t,weaponDB:i,heroId:e,weaponId:W.current,refineId:n})?n:""})),G((function(r){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.assistDB,i=e.heroId,l=e.assistId;if(!n||!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var a=r[l];return!!a&&(a.exclusive?a.exclusive.includes(i):m({rules2DB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}({rules2DB:n,heroDB:t,assistDB:l,heroId:e,assistId:r})?r:""})),ne((function(r){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.specialDB,i=e.heroId,l=e.specialId;if(!n||!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var a=r[l];return!!a&&(a.exclusive?a.exclusive.includes(i):m({rules2DB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}({rules2DB:n,heroDB:t,specialDB:a,heroId:e,specialId:r})?r:""})),ie((function(r){return I({rules2DB:n,heroDB:t,skillDB:o,heroId:e,skillId:r})?r:""})),ae((function(r){return I({rules2DB:n,heroDB:t,skillDB:c,heroId:e,skillId:r})?r:""})),ue((function(r){return I({rules2DB:n,heroDB:t,skillDB:u,heroId:e,skillId:r})?r:""})),pe((function(r){return function(e){var n=e.rules2DB,t=e.heroDB,r=e.sealDB,i=e.heroId,l=e.sealId;if(!t||!r||!i||!l)return!1;var s=(0,x.cK)(t,i);if(!s)return!1;var a=r.skillA[l]||r.skillB[l]||r.skillC[l]||r.seal[l];return!!a&&m({rules2DB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType})}({rules2DB:n,heroDB:t,sealDB:d,heroId:e,sealId:r})?r:""}));var r="mythic"===(0,x.cK)(t,e).pool;ve((function(e){return r?"":e})),je((function(e){return r?"":e})),ye((function(e){return r?"":e})),De((function(e){return r?"":e}))}),[n,t,i,l,a,o,c,u,d,h]),Ee=(0,s.useState)(!1),Ne=Ee[0],Ze=Ee[1],Re=(0,s.useCallback)((function(){Ze((function(e){return!e}))}),[]),He=(0,s.useState)(!1),Fe=He[0],Ke=He[1],We=(0,s.useCallback)((function(){Ke((function(e){return!e}))}),[]),ze=(0,s.useState)(!1),Le=ze[0],Ve=ze[1],qe=(0,s.useCallback)((function(){Ve((function(e){return!e}))}),[]),Ue=(0,s.useState)(!0),Ye=Ue[0],Je=Ue[1],Qe=(0,s.useCallback)((function(){Je((function(e){return!e}))}),[]),Xe=(0,s.useState)(!1),Ge=Xe[0],$e=Xe[1],en=(0,s.useCallback)((function(){$e(!0)}),[]),nn=(0,s.useCallback)((function(){$e(!1)}),[]),tn=(0,v.Z)("/assets/summon-stone.jpg");return{heroId:f,onChangeHero:Me,rarity:j,setRarity:b,iv:B,setIV:w,merge:C,setMerge:S,dragonflower:P,setDragonflower:A,blessing:T,setBlessing:M,support:N,toggleSupport:R,arena:Ne,toggleArena:Re,resplendent:Fe,toggleResplendent:We,weapon:V,setWeapon:Se,refine:Y,setRefine:J,assist:X,setAssist:G,special:ee,setSpecial:ne,skillA:re,setSkillA:ie,skillB:se,setSkillB:ae,skillC:ce,setSkillC:ue,seal:he,setSeal:pe,mythicBonus1:ke,setMythicBonus1:ve,mythicBonus2:ge,setMythicBonus2:je,mythicBonus3:be,setMythicBonus3:ye,mythicBonus4:we,setMythicBonus4:De,setDefaultWeapon:Ce,setDefaultAssist:Oe,setDefaultSpecial:Ie,setDefaultSkillA:Pe,setDefaultSkillB:Ae,setDefaultSkillC:_e,setAllSkillDefault:Te,lv1:Le,toggleLv1:qe,maxSkill:Ye,toggleMaxSkill:Qe,bg:tn,editorIsOpen:Ge,openEditor:en,closeEditor:nn}}var si=t(965),ai=t.n(si);var oi=function(){var e=li(),n=e.heroId,t=e.onChangeHero,r=e.rarity,l=e.setRarity,s=e.iv,a=e.setIV,c=e.merge,u=e.setMerge,d=e.dragonflower,h=e.setDragonflower,p=e.blessing,f=e.setBlessing,k=e.support,v=e.toggleSupport,x=e.arena,g=e.toggleArena,j=e.resplendent,m=e.toggleResplendent,b=e.weapon,y=e.setWeapon,B=e.refine,w=e.setRefine,D=e.assist,C=e.setAssist,S=e.special,O=e.setSpecial,I=e.skillA,P=e.setSkillA,A=e.skillB,_=e.setSkillB,T=e.skillC,M=e.setSkillC,E=e.seal,N=e.setSeal,Z=e.mythicBonus1,R=e.setMythicBonus1,H=e.mythicBonus2,F=e.setMythicBonus2,K=e.mythicBonus3,W=e.setMythicBonus3,z=e.mythicBonus4,L=e.setMythicBonus4,V=e.setDefaultWeapon,q=e.setDefaultAssist,U=e.setDefaultSpecial,Y=e.setDefaultSkillA,J=e.setDefaultSkillB,Q=e.setDefaultSkillC,X=e.setAllSkillDefault,G=e.lv1,$=e.toggleLv1,ee=e.maxSkill,ne=e.toggleMaxSkill,te=e.bg,re=e.editorIsOpen,ie=e.openEditor,le=e.closeEditor;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.default,{children:(0,o.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),(0,o.jsx)("div",{style:{background:"url('".concat(te,"') center / cover no-repeat fixed")},children:(0,o.jsxs)("div",{className:ai().container,children:[(0,o.jsx)("div",{className:ai().viewer,children:(0,o.jsx)(pn,{heroId:n,rarity:r,iv:s,merge:c,dragonflower:d,blessing:p,support:k,arena:x,resplendent:j,mythicBonus1:Z,mythicBonus2:H,mythicBonus3:K,mythicBonus4:z,weapon:b,refine:B,assist:D,special:S,skillA:I,skillB:A,skillC:T,seal:E,lv1:G,openEditor:ie})}),(0,o.jsx)("div",{className:ai().editor,hidden:!re,children:(0,o.jsx)(ri,{heroId:n,onChangeHero:t,rarity:r,setRarity:l,iv:s,setIV:a,merge:c,setMerge:u,dragonflower:d,setDragonflower:h,blessing:p,setBlessing:f,support:k,toggleSupport:v,arena:x,toggleArena:g,resplendent:j,toggleResplendent:m,weapon:b,setWeapon:y,refine:B,setRefine:w,assist:D,setAssist:C,special:S,setSpecial:O,skillA:I,setSkillA:P,skillB:A,setSkillB:_,skillC:T,setSkillC:M,seal:E,setSeal:N,mythicBonus1:Z,setMythicBonus1:R,mythicBonus2:H,setMythicBonus2:F,mythicBonus3:K,setMythicBonus3:W,mythicBonus4:z,setMythicBonus4:L,setDefaultWeapon:V,setDefaultAssist:q,setDefaultSpecial:U,setDefaultSkillA:Y,setDefaultSkillB:J,setDefaultSkillC:Q,setAllSkillDefault:X,lv1:G,toggleLv1:$,maxSkill:ee,toggleMaxSkill:ne,closeEditor:le})})]})})]})};var ci=!0,ui=function(e){var n=e.db;return(0,o.jsx)(r.Q.Provider,{value:n,children:(0,o.jsx)(oi,{})})}},532:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return t(8205)}])},9838:function(e){e.exports={container:"styles_container__1uNtQ","neutral-button":"styles_neutral-button__HXZYg","blessing-button":"styles_blessing-button__m41R8"}},226:function(e){e.exports={picker:"heropicker_picker__1qgzU"}},4921:function(e){e.exports={container:"styles_container__3csrI","neutral-button":"styles_neutral-button__2Xm3a","iv-button":"styles_iv-button__2PgFW"}},9658:function(e){e.exports={container:"styles_container__2Avf5","neutral-button":"styles_neutral-button__3dVkm","bonus-button":"styles_bonus-button__1pzC1"}},1946:function(e){e.exports={button:"editor_button__2bje7",title:"editor_title__38fof","title-textgroup":"editor_title-textgroup__1ohLJ",content:"editor_content__1OtHF",section:"editor_section__f2th3","section-group":"editor_section-group__242gp","hero-header":"editor_hero-header__rwTMX","button-content":"editor_button-content__3umvY","editor-img":"editor_editor-img__1daYT","close-button":"editor_close-button__3FeSO",container:"editor_container__3yfjQ",input:"editor_input__16kLJ",options:"editor_options__2QYDS"}},9517:function(e){e.exports={label:"labelcheckbox_label__1h2GM","label-checkbox":"labelcheckbox_label-checkbox__3dshW"}},3196:function(e){e.exports={canvas:"UnitViewer_canvas__ZU91i",container:"UnitViewer_container__2EDNF",button:"UnitViewer_button__1Aa1C",download:"UnitViewer_download__2J1oh",menu:"UnitViewer_menu__3HcnP"}},965:function(e){e.exports={container:"UnitEditor_container__1PG6T",viewer:"UnitEditor_viewer__2ZQQp",editor:"UnitEditor_editor__36g2J"}}},function(e){e.O(0,[223,424,909,451,774,888,179],(function(){return n=532,e(e.s=n);var n}));var n=e.O();_N_E=n}]);