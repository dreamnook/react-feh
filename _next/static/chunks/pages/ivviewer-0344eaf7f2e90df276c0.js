(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{3988:function(t,e,r){"use strict";r.r(e),r.d(e,{__N_SSG:function(){return T},default:function(){return M}});var n=r(5893),a=r(9127),s=r(6156),c=r(9008),i=r(6234),o=r(5170),u=r(4162),l=r(9487),d=r(7294),v=r(1406),f=r.n(v),p=["hp","atk","spd","def","res"],h={hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};var m=function(t){var e=t.stats,r=t.lv1Stats,a=t.lv40Stats,s=t.selectStat,c=(0,d.useCallback)((function(t){var e=t.currentTarget.dataset,r=e.type,n=Number(e.option);s(r,n)}),[s]);return(0,n.jsxs)("div",{className:f().container,children:[(0,n.jsxs)("div",{className:f()["stat-row"],children:[(0,n.jsx)("h3",{className:f().title,children:"\u5c6c\u6027"}),(0,n.jsx)("h3",{className:f().title,children:"Lv1"}),(0,n.jsx)("h3",{className:f().title,children:"Lv40"})]}),p.map((function(t){return(0,n.jsxs)("div",{className:f()["stat-row"],children:[(0,n.jsx)("div",{className:f()["stat-name"],children:h[t]}),(0,n.jsx)("div",{className:f()["stat-picker"],children:r[t].map((function(r){var a=r.option,s=r.stat;return(0,n.jsx)("button",{className:f()["stat-button"],"data-type":t,"data-option":a,disabled:"-"===s,"data-active":a===e[t],onClick:c,children:s},a)}))}),(0,n.jsx)("div",{className:f()["stat-button"],children:a[t]})]},t)})),(0,n.jsx)("h3",{className:f().title,children:a.sum})]})},b=r(7375),j=r(3391),S=r(8172),_=r(2565),y=r(5545),g=r(1665),O=r(6032);function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){(0,s.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var N=function(t){return t+1},k=function(t){return t-1},P=function(t){return t},Z=function(){return"-"};function I(t){var e=t.hero,r=t.rarity,n=t.merge,a=(0,d.useState)({hp:1,atk:1,spd:1,def:1,res:1}),c=a[0],i=a[1],o=(0,d.useCallback)((function(t,e){i((function(r){return(0,S.ZP)(r,(function(r){r[t]=e}))}))}),[]),u=(0,d.useCallback)((function(){i({hp:1,atk:1,spd:1,def:1,res:1})}),[]),l=(0,d.useMemo)((function(){var t=!Object.values(c).some((function(t){return 1!==t})),a=e.stats["".concat(r,"-1")],i=e.stats["".concat(r)],o=function(t){var e=t.heroId,r=t.data,n="Feh"===e?[Z,P,Z]:[k,P,N],a=[0,1,2];return Object.entries(r).reduce((function(t,e){var r=(0,j.Z)(e,2),c=r[0],i=r[1];return x(x({},t),{},(0,s.Z)({},c,a.map((function(t,e){return{option:t,stat:n[e](i)}}))))}),{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:e.id,data:a}),u=function(t){var e=t.heroId,r=t.stats,n=t.neutral,a=t.data,c=t.merge;if("Feh"===e){var i=a;return x(x({},i),{},{sum:i.hp+i.atk+i.spd+i.def+i.res})}var o=a;return Object.entries(r).reduce((function(t,e){var r,n=(0,j.Z)(e,2),a=n[0],i=n[1];return x(x({},t),{},(r={},(0,s.Z)(r,a,o[a][i||c&&1]),(0,s.Z)(r,"sum",o[a][c?i||1:i]+t.sum),r))}),{sum:c&&n?3:0})}({heroId:e.id,stats:c,neutral:t,data:i,merge:n});return{lv1Stats:o,lv40Stats:function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats,a=n.sum,c=(0,b.Z)(n,["sum"]),i=t.neutral,o=t.merge,u=Object.entries(r).reduce((function(t,r){var n=(0,j.Z)(r,2),a=n[0],c=n[1];return x(x({},t),{},(0,s.Z)({},a,c[e[a]].stat))}),{}),l=(0,O.h)(u),d=(0,g.s)(l,o,i);return Object.entries(c).reduce((function(t,e){var r=(0,j.Z)(e,2),n=r[0],a=r[1];return x(x({},t),{},(0,s.Z)({},n,a+d[n]))}),{sum:a})}({stats:c,lv1Stats:o,lv40Stats:u,neutral:t,merge:n})}}),[e,c,n,r]),v=l.lv1Stats,f=l.lv40Stats;return{stats:c,selectStat:o,resetStats:u,lv1Stats:v,lv40Stats:f}}var C=r(8714),D=r.n(C);function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){(0,s.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var R=function(){var t=function(){var t=(0,a.K)().heroDB,e=(0,d.useState)("Feh"),r=e[0],n=e[1],s=(0,d.useState)(5),c=s[0],i=s[1],o=(0,d.useState)(0),u=o[0],l=o[1],v=(0,d.useCallback)((function(t){i(t)}),[]),f=(0,d.useCallback)((function(t){l(t)}),[]),p=(0,_.Z)("/assets/summon-stone.jpg"),h=(0,d.useMemo)((function(){return t[r]}),[t,r]),m=I({hero:h,rarity:c,merge:u}),b=m.stats,j=m.selectStat,S=m.resetStats,g=m.lv1Stats,O=m.lv40Stats,w=(0,d.useCallback)((function(t){S(),i(5),n(t)}),[S]),x=(0,d.useMemo)((function(){var t=(0,y.eM)(h);return{id:t.id,title:t.title,name:t.name,weaponType:t.weaponType,moveType:t.moveType,rarity:t.rarity,pool:t.pool,query:t.query,bst:t.bst,faceSrc:t.faceSrc,blessingSrc:t.blessingSrc}}),[h]),N=(0,d.useMemo)((function(){var t;return(null===h||void 0===h||null===(t=h.rarity)||void 0===t?void 0:t.length)>1?4:5}),[h]);return{bg:p,heroId:r,onSelectHero:w,rarity:c,minRarity:N,onChangeRarity:v,merge:u,onChangeMerge:f,heroHeaderInfo:x,stats:b,selectStat:j,lv1Stats:g,lv40Stats:O}}(),e=t.bg,r=t.heroId,s=t.onSelectHero,v=t.rarity,f=t.minRarity,p=t.onChangeRarity,h=t.merge,b=t.onChangeMerge,j=t.heroHeaderInfo,S=t.stats,g=t.lv1Stats,O=t.lv40Stats,w=t.selectStat;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.default,{children:(0,n.jsx)("title",{children:"IV\u5feb\u9ede\u67e5"})}),(0,n.jsx)("div",{className:D().container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:(0,n.jsxs)("div",{className:D()["bg-layer"],children:[(0,n.jsxs)("div",{className:D()["header-container"],children:[(0,n.jsx)(l.Z,{heroId:r,onSelect:s}),(0,n.jsx)(i.Z,V({},j))]}),(0,n.jsx)("h2",{className:D().title,children:"\u7a00\u6709\u5ea6"}),(0,n.jsx)(o.Z,{rarity:v,minRarity:f,onSelect:p}),(0,n.jsx)("h2",{className:D().title,children:"\u7a81\u7834\u6b21\u6578"}),(0,n.jsx)(u.Z,{merge:h,onSelect:b}),(0,n.jsx)(m,{stats:S,lv1Stats:g,lv40Stats:O,selectStat:w})]})})]})};var T=!0,M=function(t){var e=t.db;return(0,n.jsx)(a.Q.Provider,{value:e,children:(0,n.jsx)(R,{})})}},374:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return r(3988)}])},8714:function(t){t.exports={container:"IVViewer_container__RgSXZ","bg-layer":"IVViewer_bg-layer__3B7JG",title:"IVViewer_title__17Lm1","header-container":"IVViewer_header-container__3DTLG"}},1406:function(t){t.exports={"stat-button":"statview_stat-button__RF9K-",title:"statview_title__1ErLN","stat-row":"statview_stat-row__2_NER","stat-name":"statview_stat-name__2mrxU","stat-picker":"statview_stat-picker__1SUDk","max-stat":"statview_max-stat__2Y2ya",container:"statview_container__3YxVj"}}},function(t){t.O(0,[774,688,744,758,736],(function(){return e=374,t(t.s=e);var e}));var e=t.O();_N_E=e}]);