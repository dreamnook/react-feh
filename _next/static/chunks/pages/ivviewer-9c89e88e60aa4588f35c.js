(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{3061:function(t,e,r){"use strict";r.r(e),r.d(e,{__N_SSG:function(){return M},default:function(){return F}});var n=r(4808),a=r(4942),s=r(9008),c=r(8132),i=r(6349),o=r(6870),u=r(1720),l=r(7294),d=r(1597),v=r.n(d),f=r(5893),p=["hp","atk","spd","def","res"],h={hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};var m=function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats,a=t.selectStat,s=(0,l.useCallback)((function(t){var e=t.currentTarget.dataset,r=e.type,n=Number(e.option);a(r,n)}),[a]);return(0,f.jsxs)("div",{className:v().container,children:[(0,f.jsxs)("div",{className:v()["stat-row"],children:[(0,f.jsx)("h3",{className:v().title,children:"\u5c6c\u6027"}),(0,f.jsx)("h3",{className:v().title,children:"Lv1"}),(0,f.jsx)("h3",{className:v().title,children:"Lv40"})]}),p.map((function(t){return(0,f.jsxs)("div",{className:v()["stat-row"],children:[(0,f.jsx)("div",{className:v()["stat-name"],children:h[t]}),(0,f.jsx)("div",{className:v()["stat-picker"],children:r[t].map((function(r){var n=r.option,a=r.stat;return(0,f.jsx)("button",{className:v()["stat-button"],"data-type":t,"data-option":n,disabled:"-"===a,"data-active":n===e[t],onClick:s,children:a},n)}))}),(0,f.jsx)("div",{className:v()["stat-button"],children:n[t]})]},t)})),(0,f.jsx)("h3",{className:v().title,children:n.sum})]})},b=r(4925),j=r(885),S=r(8172),_=r(6899),y=r(7901),g=r(6832),O=r(443),w=["sum"];function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var k=function(t){return t+1},P=function(t){return t-1},Z=function(t){return t},I=function(){return"-"};function C(t){var e=t.hero,r=t.rarity,n=t.merge,s=(0,l.useState)({hp:1,atk:1,spd:1,def:1,res:1}),c=s[0],i=s[1],o=(0,l.useCallback)((function(t,e){i((function(r){return(0,S.ZP)(r,(function(r){r[t]=e}))}))}),[]),u=(0,l.useCallback)((function(){i({hp:1,atk:1,spd:1,def:1,res:1})}),[]),d=(0,l.useMemo)((function(){var t=!Object.values(c).some((function(t){return 1!==t})),s=e.stats["".concat(r,"-1")],i=e.stats["".concat(r)],o=function(t){var e=t.heroId,r=t.data,n="Feh"===e?[I,Z,I]:[P,Z,k],s=[0,1,2];return Object.entries(r).reduce((function(t,e){var r=(0,j.Z)(e,2),c=r[0],i=r[1];return N(N({},t),{},(0,a.Z)({},c,s.map((function(t,e){return{option:t,stat:n[e](i)}}))))}),{hp:[],atk:[],spd:[],def:[],res:[]})}({heroId:e.id,data:s}),u=function(t){var e=t.heroId,r=t.stats,n=t.neutral,s=t.data,c=t.merge;if("Feh"===e){var i=s;return N(N({},i),{},{sum:i.hp+i.atk+i.spd+i.def+i.res})}var o=s;return Object.entries(r).reduce((function(t,e){var r,n=(0,j.Z)(e,2),s=n[0],i=n[1];return N(N({},t),{},(r={},(0,a.Z)(r,s,o[s][i||c&&1]),(0,a.Z)(r,"sum",o[s][c?i||1:i]+t.sum),r))}),{sum:c&&n?3:0})}({heroId:e.id,stats:c,neutral:t,data:i,merge:n});return{lv1Stats:o,lv40Stats:function(t){var e=t.stats,r=t.lv1Stats,n=t.lv40Stats,s=n.sum,c=(0,b.Z)(n,w),i=t.neutral,o=t.merge,u=Object.entries(r).reduce((function(t,r){var n=(0,j.Z)(r,2),s=n[0],c=n[1];return N(N({},t),{},(0,a.Z)({},s,c[e[s]].stat))}),{}),l=(0,O.h)(u),d=(0,g.s)(l,o,i);return Object.entries(c).reduce((function(t,e){var r=(0,j.Z)(e,2),n=r[0],s=r[1];return N(N({},t),{},(0,a.Z)({},n,s+d[n]))}),{sum:s})}({stats:c,lv1Stats:o,lv40Stats:u,neutral:t,merge:n})}}),[e,c,n,r]),v=d.lv1Stats,f=d.lv40Stats;return{stats:c,selectStat:o,resetStats:u,lv1Stats:v,lv40Stats:f}}var D=r(918),E=r.n(D);function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var T=function(){var t=function(){var t=(0,n.K)().heroDB,e=(0,l.useState)("Feh"),r=e[0],a=e[1],s=(0,l.useState)(5),c=s[0],i=s[1],o=(0,l.useState)(0),u=o[0],d=o[1],v=(0,l.useCallback)((function(t){i(t)}),[]),f=(0,l.useCallback)((function(t){d(t)}),[]),p=(0,_.Z)("/assets/summon-stone.jpg"),h=(0,l.useMemo)((function(){return t[r]}),[t,r]),m=C({hero:h,rarity:c,merge:u}),b=m.stats,j=m.selectStat,S=m.resetStats,g=m.lv1Stats,O=m.lv40Stats,w=(0,l.useCallback)((function(t){S(),i(5),a(t)}),[S]),x=(0,l.useMemo)((function(){var t=(0,y.eM)(h);return{id:t.id,title:t.title,name:t.name,weaponType:t.weaponType,moveType:t.moveType,rarity:t.rarity,pool:t.pool,query:t.query,bst:t.bst,faceSrc:t.faceSrc,blessingSrc:t.blessingSrc}}),[h]),N=(0,l.useMemo)((function(){var t;return(null===h||void 0===h||null===(t=h.rarity)||void 0===t?void 0:t.length)>1?4:5}),[h]);return{bg:p,heroId:r,onSelectHero:w,rarity:c,minRarity:N,onChangeRarity:v,merge:u,onChangeMerge:f,heroHeaderInfo:x,stats:b,selectStat:j,lv1Stats:g,lv40Stats:O}}(),e=t.bg,r=t.heroId,a=t.onSelectHero,d=t.rarity,v=t.minRarity,p=t.onChangeRarity,h=t.merge,b=t.onChangeMerge,j=t.heroHeaderInfo,S=t.stats,g=t.lv1Stats,O=t.lv40Stats,w=t.selectStat;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.default,{children:(0,f.jsx)("title",{children:"IV\u5feb\u9ede\u67e5"})}),(0,f.jsx)("div",{className:E().container,style:{background:"url('".concat(e,"') center / cover no-repeat fixed")},children:(0,f.jsxs)("div",{className:E()["bg-layer"],children:[(0,f.jsxs)("div",{className:E()["header-container"],children:[(0,f.jsx)(u.Z,{heroId:r,onSelect:a}),(0,f.jsx)(c.Z,R({},j))]}),(0,f.jsx)("h2",{className:E().title,children:"\u7a00\u6709\u5ea6"}),(0,f.jsx)(i.Z,{rarity:d,minRarity:v,onSelect:p}),(0,f.jsx)("h2",{className:E().title,children:"\u7a81\u7834\u6b21\u6578"}),(0,f.jsx)(o.Z,{merge:h,onSelect:b}),(0,f.jsx)(m,{stats:S,lv1Stats:g,lv40Stats:O,selectStat:w})]})})]})};var M=!0,F=function(t){var e=t.db;return(0,f.jsx)(n.Q.Provider,{value:e,children:(0,f.jsx)(T,{})})}},374:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ivviewer",function(){return r(3061)}])},918:function(t){t.exports={container:"IVViewer_container__RgSXZ","bg-layer":"IVViewer_bg-layer__3B7JG",title:"IVViewer_title__17Lm1","header-container":"IVViewer_header-container__3DTLG"}},1597:function(t){t.exports={"stat-button":"statview_stat-button__RF9K-",title:"statview_title__1ErLN","stat-row":"statview_stat-row__2_NER","stat-name":"statview_stat-name__2mrxU","stat-picker":"statview_stat-picker__1SUDk","max-stat":"statview_max-stat__2Y2ya",container:"statview_container__3YxVj"}}},function(t){t.O(0,[223,424,909,451,774,888,179],(function(){return e=374,t(t.s=e);var e}));var e=t.O();_N_E=e}]);