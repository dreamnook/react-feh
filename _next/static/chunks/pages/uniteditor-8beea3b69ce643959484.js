_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"4NHs":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return Fr}));var r=n("nKUr"),c=n("OyYD"),i=n("g4pe"),l=n.n(i),s=n("Ff2n"),a=n("q1tI"),o=n("EMxf"),u=n.n(o),d=n("rePB");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){return Object(r.jsxs)("svg",b(b({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),{},{children:[Object(r.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),Object(r.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return Object(r.jsxs)("svg",O(O({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(r.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},k=n("ODXe"),v=n("20a2"),x=n("I5BY");function g(e){var t=e.rulesDB,n=e.ruleId;return t&&n?t[n]:null}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=e.assistDB,n=e.assist;return t&&n?t[n]:null}function D(e){var t=w({assistDB:e.assistDB,assist:e.assist});return(null===t||void 0===t?void 0:t.name)||""}function B(e){var t=e.sealDB,n=e.seal;return t&&n?t.skillA[n]?t.skillA[n]:t.skillB[n]?t.skillB[n]:t.skillC[n]?t.skillC[n]:t.seal[n]?t.seal[n]:null:null}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=e.rulesDB,n=e.heroDB,r=e.skillDB,c=e.heroId;if(!t||!n||!r||!c)return[];var i=Object(x.c)(n,c);return i?Object.values(r).filter((function(e){if(e.exclusive)return e.exclusive.includes(c);var n=g({rulesDB:t,ruleId:e.rules});return!n||(!n.moveType||!1!==n.moveType[i.moveType])&&(!n.weaponType||!1!==n.weaponType[i.weaponType])})).map((function(e){var t="".concat(e.id.toLowerCase(),"|").concat(e.name);return C(C({},e),{},{query:t})})):[]}function P(e){var t=e.rulesDB,n=e.heroDB,r=e.skillDB,c=e.heroId,i=e.skillId;if(!t||!n||!r||!c||!i)return!1;var l=Object(x.c)(n,c);if(!l)return!1;var s=r[i];if(!s)return!1;if(s.exclusive)return s.exclusive.includes(c);var a=g({rulesDB:t,ruleId:s.rules});return!a||(!a.moveType||!1!==a.moveType[l.moveType])&&(!a.weaponType||!1!==a.weaponType[l.weaponType])}function A(e){var t=e.skillDB,n=e.skillId;return t&&n?t[n]:null}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){var t=e.specialDB,n=e.special;return t&&n?t[n]:null}function E(e){var t=M({specialDB:e.specialDB,special:e.special});return(null===t||void 0===t?void 0:t.name)||""}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function W(e){var t=e.heroDB,n=e.weaponDB,r=e.heroId;if(!n||!t||!r)return[];var c=Object(x.c)(t,r);if(!c)return[];var i=H(c.weaponType),l=n[i];return i?Object.values(l).filter((function(e){return!e.exclusive||e.exclusive.includes(r)})).map((function(e){var t="".concat(e.id.toLowerCase(),"|").concat(e.name);return R(R({},e),{},{query:t})})):[]}function F(e){var t=e.heroDB,n=e.weaponDB,r=e.heroId,c=e.weaponId;if(!n||!t||!r||!c)return!1;var i=Object(x.c)(t,r);if(!i)return!1;var l=H(i.weaponType),s=n[l];if(!l)return!1;var a=s[c];return!!a&&(!a.exclusive||a.exclusive.includes(r))}function L(e){var t=e.heroDB,n=e.weaponDB,r=e.heroId,c=e.weapon;if(!n||!t||!c||!r)return null;var i=Object(x.c)(t,r);return i?n[H(i.weaponType)][c]:null}function z(e){var t=L({heroDB:e.heroDB,weaponDB:e.weaponDB,heroId:e.heroId,weapon:e.weapon});return(null===t||void 0===t?void 0:t.name)||""}var V={atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};function Y(e){var t=e.heroDB,n=e.weaponDB,r=e.heroId,c=e.weapon,i=L({heroDB:t,weaponDB:n,heroId:r,weapon:c});return i&&i.refine?Object.entries(i.refine).filter((function(e){var t=Object(k.a)(e,2)[1];return!t.exclusive||t.exclusive.includes(r)})).map((function(e){var t=Object(k.a)(e,2),n=t[0],r=R({value:n},t[1]);return r.name||(r.name=V[n]||n),r.icon&&(r.icon="/skills/weapon/".concat(r.icon,".png")),!r.icon&&V[n]&&(r.icon="/skills/weapon/".concat(n,".png")),r})):[]}function q(e){var t=e.heroDB,n=e.weaponDB,r=e.heroId,c=e.weapon,i=e.refine,l=function(e){var t,n=e.heroDB,r=e.weaponDB,c=e.heroId,i=e.weapon,l=e.refine,s=L({heroDB:n,weaponDB:r,heroId:c,weapon:i});return null===s||void 0===s||null===(t=s.refine)||void 0===t?void 0:t[l]}({heroDB:t,weaponDB:n,heroId:r,weapon:c,refine:i});return l?V[i]?V[i]:l.name:""}var U={atk:"atk",spd:"spd",def:"def",res:"res"};function J(e){var t=e.heroDB,n=e.weaponDB,r=e.assistDB,c=e.specialDB,i=e.skillADB,l=e.skillBDB,s=e.skillCDB,a=e.sealDB,o=e.heroId,u=e.skills;return{weapon:L({heroDB:t,weaponDB:n,heroId:o,weapon:u.weapon}),assist:w({assistDB:r,assist:u.assist}),special:M({specialDB:c,special:u.special}),skillA:A({skillDB:i,skillId:u.skillA}),skillB:A({skillDB:l,skillId:u.skillB}),skillC:A({skillDB:s,skillId:u.skillC}),seal:B({sealDB:a,seal:u.seal})}}var X=["assist","special","skillA","skillB","skillC","seal"];var K=n("ufDn"),Z={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var Q=function(e){var t=e.rarity,n=void 0===t?5:t,r=e.merge,c=e.bst,i=e.spt,l=e.blesser,s=void 0===l?0:l,a=Z[n];return 2*(150+a.base+a.float+2*r+Math.floor(c/5)+Math.floor(i/100)+4*s)},G=[];function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(d.a)(this,"imageData",void 0),Object(d.a)(this,"src",void 0),Object(d.a)(this,"loadedData",void 0),Object(d.a)(this,"callback",void 0),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=t,this.imageData.onload=function(){n.loadedData=!0,n.callback&&n.callback(!0)},this.imageData.onerror=function(){n.loadedData=!1,n.callback&&n.callback(!1)}}var t,n,r;return t=e,(n=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&$(t.prototype,n),r&&$(t,r),e}(),te=n("oh6S"),ne=16,re=554,ce=te.c,ie=174,le=555,se=["infantry","armored","cavalry","flying"];function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=1,de=43,je=85,be=127,pe=169,he=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,t,n){return oe(oe({},e),{},Object(d.a)({},t,34*n+1))}),{}),Oe=function(e,t,n,r,c,i){he[r]&&e.drawImage(t,he[r],n,32,40,c,i,16,20)},fe=240,ke=557,ve=[14,28,42],xe=["infantry","armored","cavalry","flying"],ge=432,me=425,ye=432,we=425,De=275,Be=594,Se=function(e,t,n){var r=37*n+1+Be;e.drawImage(t,De,r,35,35)},Ce=82,Ie=557,Pe=[14,28,42],Ae=112,_e=557,Te=[14,28,42],Me=130,Ee=594,Ne=[14,28,42,56],Re=[1e3,100,10],He=function(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ue,i=8+Ee+37*r;Re.forEach((function(r,l){if(n>=r){var s=Math.floor(n/r%10);Oe(e,t,c,s,Me+Ne[l],i)}}));var l=n%10;Oe(e,t,c,l,Me+Ne[3],i)},We=465,Fe=594,Le=function(e){var t=e.context,n=e.numberAtlas,r=e.accelerate,c=e.specialCD;if(c){var i=de;r<0&&(i=je),r>0&&(i=be),function(e,t,n){Oe(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:de,n,We,8+Fe+74)}(t,n,r+c,i)}},ze=n("W8is"),Ve=206,Ye=1224,qe=["#ffa0af","white","#aaf0fa"],Ue=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"}),Je=634,Xe=1224,Ke={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var Ze=296,Qe=876,Ge=336,$e=992,et={x:460,y:530},tt=195,nt=370;function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"]],lt=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var st=function(e){var t=e.heroId,n=e.rarity,r=e.iv,i=e.merge,l=e.dragonflower,o=e.blessing,u=e.support,d=e.arena,j=e.resplendent,b=e.weapon,p=e.refine,h=e.assist,O=e.special,f=e.skillA,g=e.skillB,m=e.skillC,y=e.seal,w=e.lv1,D=Object(v.useRouter)().basePath,B=Object(c.b)(),S=Object(a.useRef)(null),C=Object(a.useRef)(null),I=Object(a.useRef)(),P=Object(a.useRef)(),A=Object(a.useRef)(),_=Object(a.useRef)(),T=Object(a.useRef)(),M=Object(a.useRef)(),E=Object(a.useRef)(),N=Object(a.useRef)(),R=Object(a.useRef)(),H=Object(a.useRef)(),W=Object(a.useRef)(),F=Object(a.useRef)(),L=Object(a.useRef)(),z=Object(a.useRef)(),V=Object(a.useMemo)((function(){return Object(x.c)(B.heroDB,t)}),[B.heroDB,t]),Y=Object(a.useMemo)((function(){return{weapon:b,assist:h,special:O,skillA:f,skillB:g,skillC:m,seal:y}}),[b,h,O,f,g,m,y]),q=V.stats,Z=Object(a.useMemo)((function(){return function(e){var t,n,r,c,i,l,s,a,o,u=e.heroDB,d=e.weaponDB,j=e.assistDB,b=e.specialDB,p=e.skillADB,h=e.skillBDB,O=e.skillCDB,f=e.sealDB,v=e.heroId,x=e.skills,g=e.refine,m=e.rarity,y=J({heroDB:u,weaponDB:d,assistDB:j,specialDB:b,skillADB:p,skillBDB:h,skillCDB:O,sealDB:f,heroId:v,skills:x}),w={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},D=0,B=(null===(t=y.special)||void 0===t?void 0:t.cd)||0;D+=(null===(n=y.weapon)||void 0===n?void 0:n.cd)||0,D+=(null===(r=y.assist)||void 0===r?void 0:r.cd)||0,D+=(null===(c=y.skillA)||void 0===c?void 0:c.cd)||0,D+=(null===(i=y.skillB)||void 0===i?void 0:i.cd)||0,D+=(null===(l=y.skillC)||void 0===l?void 0:l.cd)||0,D+=(null===(s=y.seal)||void 0===s?void 0:s.cd)||0;var S={hp:0,atk:0,spd:0,def:0,res:0},C=0,I=0;Object.entries(y).forEach((function(e){var t=Object(k.a)(e,2),n=t[0],r=t[1];w[n]=(null===r||void 0===r?void 0:r.name)||"-",S.hp+=(null===r||void 0===r?void 0:r.hp)||0,S.atk+=((null===r||void 0===r?void 0:r.mt)||0)+((null===r||void 0===r?void 0:r.atk)||0),S.spd+=(null===r||void 0===r?void 0:r.spd)||0,S.def+=(null===r||void 0===r?void 0:r.def)||0,S.res+=(null===r||void 0===r?void 0:r.res)||0,C+=(null===r||void 0===r?void 0:r.sp)||0,5===m&&(I=Math.max((null===r||void 0===r?void 0:r.bst)||0,I))}));var P=null===(a=y.weapon)||void 0===a||null===(o=a.refine)||void 0===o?void 0:o[g];return P&&(S.hp+=P.hp||0,S.atk+=(P.mt||0)+(P.atk||0),S.spd+=P.spd||0,S.def+=P.def||0,S.res+=P.res||0,D+=P.cd||0,y.weapon.exclusive||(C+=50),5===m&&(I=Math.max(I,P.bst||0))),{names:w,stats:S,accelerate:D,specialCD:B,spt:C,bst:I}}({heroDB:B.heroDB,weaponDB:B.weaponDB,assistDB:B.assistDB,specialDB:B.specialDB,skillADB:B.skillADB,skillBDB:B.skillBDB,skillCDB:B.skillCDB,sealDB:B.sealDB,skills:Y,heroId:t,refine:p,rarity:n})}),[Y,t,p,n,B.heroDB,B.weaponDB,B.assistDB,B.specialDB,B.skillADB,B.skillBDB,B.skillCDB,B.sealDB]),$=Object(a.useMemo)((function(){return Object(K.b)(n,q,r,i,u,Z.stats,w,d,l,j)}),[n,q,r,i,u,Z,w,d,l,j]),te=Object(a.useMemo)((function(){return Q({rarity:n,merge:i,bst:Math.max($.bst,Z.bst,V.bst||0),spt:Z.spt})}),[n,i,$.bst,Z.bst,Z.spt,V]),ae=Object(a.useRef)({}),oe=Object(a.useCallback)((function(){if(S.current){var e=ae.current,t=e.background,n=e.foreground,r=e.foreground2,c=e.portrait,i=e.rarityAtlas,l=e.weaponTypeAtlas,a=e.moveTypeAtlas,o=e.dragonflowerAtlas,u=e.supportAtlas,d=e.blessingAtlas,j=e.numberAtlas,b=e.weaponIcon,p=e.assistIcon,h=e.specialIcon,O=e.textA,f=e.textB,v=e.textC,x=e.textS,g=e.arenaIcon,m=e.skillAIcon,y=e.skillBIcon,w=e.skillCIcon,D=e.sealIcon,B=e.resplendentIcon,V=I.current,Y=V.title,q=V.name,U=V.weaponType,J=V.moveType,X=!!I.current.blessing||!!N.current,K=S.current.getContext("2d");K.clearRect(0,0,540,960),t.loaded&&function(e){var t=e.context,n=e.background;e.support?t.drawImage(n,540,0,540,960,0,0,540,960):t.drawImage(n,0,0,540,960,0,0,540,960)}({context:K,background:t.image,support:R.current}),c.loaded&&function(e){var t=e.context,n=e.portrait;t.drawImage(n,0,0,540,960,0,0,540,960)}({context:K,portrait:c.image}),n.loaded&&function(e){var t=e.context,n=e.foreground;t.drawImage(n,0,0,540,960,0,0,540,960)}({context:K,foreground:n.image}),r.loaded&&function(e){var t=e.context,n=e.foreground2;e.dragonflower?t.drawImage(n,0,50,540,50,0,542,540,50):t.drawImage(n,0,0,540,50,0,542,540,50)}({context:K,foreground2:r.image,dragonflower:E.current}),i.loaded&&function(e){var t=e.context,n=e.rarityAtlas;switch(e.rarity){case 5:t.drawImage(n,0,0,153,40,42,380,153,40);break;case 4:t.drawImage(n,0,41,153,40,42,380,153,40)}}({context:K,rarityAtlas:i.image,rarity:_.current}),l.loaded&&function(e){var t=e.context,n=e.weaponTypeAtlas,r=e.weaponType,c=ce.indexOf(r);c>-1&&t.drawImage(n,56*c,0,56,55,ne,re,28,28)}({context:K,weaponTypeAtlas:l.image,weaponType:U}),a.loaded&&function(e){var t=e.context,n=e.moveTypeAtlas,r=e.moveType,c=se.indexOf(r);c>-1&&t.drawImage(n,56*c,0,52,52,ie,le,26,26)}({context:K,moveTypeAtlas:a.image,moveType:J}),o.loaded&&j.loaded&&function(e){var t=e.context,n=e.dragonflowerAtlas,r=e.numberAtlas,c=e.moveType,i=e.dragonflower;if(i){var l=xe.indexOf(c);l>-1&&t.drawImage(n,0,58*l,64,58,216,546,48,44);var s=0,a=de;Oe(t,r,a,"+",fe+ve[0],ke),s+=1,i>9&&(Oe(t,r,a,1,fe+ve[s],ke),s+=1),Oe(t,r,a,i%10,fe+ve[s],ke)}}({context:K,dragonflowerAtlas:o.image,numberAtlas:j.image,moveType:J,dragonflower:E.current}),u.loaded&&function(e){var t=e.context,n=e.supportAtlas,r=e.support,c=e.hasBlessing?108:0;r&&t.drawImage(n,ge-c,me,108,115)}({context:K,supportAtlas:u.image,support:R.current,hasBlessing:X}),d.loaded&&function(e){var t=e.context,n=e.blessingAtlas;t.drawImage(n,ye,we,108,115)}({context:K,blessingAtlas:d.image}),j.loaded&&(!function(e){var t=e.context,n=e.numberAtlas,r=e.lv1?1:40,c=0;r>9&&Oe(t,n,de,4,Ce+Pe[c],Ie),Oe(t,n,de,r%10,Ce+Pe[c+=1],Ie)}({context:K,numberAtlas:j.image,lv1:L.current}),function(e){var t=e.context,n=e.numberAtlas,r=e.merge;if(!(r<=0)){var c=0,i=r>9?pe:de;Oe(t,n,i,"+",Ae+Te[0],_e),c+=1,r>9&&(Oe(t,n,i,1,Ae+Te[c],_e),c+=1),Oe(t,n,i,r%10,Ae+Te[c],_e)}}({context:K,numberAtlas:j.image,merge:M.current}),function(e){var t=e.context,n=e.numberAtlas,r=e.stats,c=e.score,i=e.sbst,l=e.bst;Object.values(r).forEach((function(e,r){He(t,n,e,r,ue)}));var s=i>l?je:pe;He(t,n,l,5,pe),He(t,n,c,6,s)}(ct({context:K,numberAtlas:j.image,score:z.current,sbst:Math.max(P.current.bst,I.current.bst)},A.current)),Le({context:K,numberAtlas:j.image,accelerate:P.current.accelerate,specialCD:P.current.specialCD})),function(e){var t=e.context,n=e.weaponIcon,r=e.assistIcon,c=e.specialIcon,i=e.textA,l=e.textB,s=e.textC,a=e.textS,o=e.skillAIcon,u=e.skillBIcon,d=e.skillCIcon,j=e.sealIcon;n.loaded&&Se(t,n.image,0),r.loaded&&Se(t,r.image,1),c.loaded&&Se(t,c.image,2),o.loaded&&Se(t,o.image,3),t.drawImage(i.image,De+20,Be+112+18,18,18),u.loaded&&Se(t,u.image,4),t.drawImage(l.image,De+20,Be+149+18,18,18),d.loaded&&Se(t,d.image,5),t.drawImage(s.image,De+20,Be+186+18,18,18),j.loaded&&Se(t,j.image,6),t.drawImage(a.image,De+20,Be+223+18,18,18)}({context:K,weaponIcon:b,assistIcon:p,specialIcon:h,textA:O,textB:f,textC:v,textS:x,skillAIcon:m,skillBIcon:y,skillCIcon:w,sealIcon:D}),C.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var t=e.canvas,n=e.iv,r=e.merge,c=t.getContext("2d");c.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",c.fillStyle="white",c.strokeStyle="#101010",c.textAlign="center",c.textBaseline="middle",c.lineJoin="round",c.lineWidth=8;var i=Object(ze.a)(n),l=i.boon,s=i.bane,a={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};a[l]+=1,a[s]-=1,a[s]=r>0?1:a[s],Ue.forEach((function(e,t){var n=Object(k.a)(e,2),r=n[0],i=n[1],l=Ye+74*t;c.fillStyle=qe[a[r]],c.strokeText(i,Ve,l),c.fillText(i,Ve,l)}))}({canvas:C.current,iv:T.current,merge:M.current}),function(e){var t=e.canvas,n=e.refine,r=e.weapon,c=Object(s.a)(e,["canvas","refine","weapon"]),i=t.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.textAlign="left",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeStyle="#101010",i.fillStyle=n&&"-"!==n?"lime":"white";var l=Je+("-"===r?4:0),a=Xe;i.strokeText(r,l,a),i.fillText(r,l,a),i.fillStyle="white",Object.keys(c).forEach((function(e){var t=c[e],n=Xe+74*Ke[e],r="-"===t?4:0;i.strokeText(t,Je+r,n),i.fillText(t,Je+r,n)}))}(ct({canvas:C.current,refine:F.current},P.current.names)),function(e){var t=e.canvas,n=e.title,r=e.name,c=t.getContext("2d");c.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",c.fillStyle="white",c.strokeStyle="#220d00",c.textAlign="center",c.textBaseline="middle",c.lineJoin="round",c.lineWidth=8,c.strokeText(n,Ze,Qe),c.fillText(n,Ze,Qe),c.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",c.strokeText(r,Ge,$e),c.fillText(r,Ge,$e)}({canvas:C.current,title:Y,name:q}),H.current&&g&&function(e){var t=e.context,n=e.arenaIcon;t.drawImage(n,et.x,et.y,50,49)}({context:K,arenaIcon:g.image}),W.current&&B&&function(e){var t=e.context,n=e.resplendentIcon;t.drawImage(n,tt,nt,64,63)}({context:K,resplendentIcon:B.image}),K.drawImage(C.current,0,0,540,960)}}),[]);Object(a.useEffect)((function(){C.current=document.createElement("canvas"),C.current.width=1080,C.current.height=1920}),[]),Object(a.useEffect)((function(){it.forEach((function(e){var t=Object(k.a)(e,2),n=t[0],r=t[1];ae.current[n]=new ee(oe),ae.current[n].load("".concat(D).concat(r))}))}),[D,ae,oe]),Object(a.useEffect)((function(){var e=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!G.includes(e)?"".concat(e,"(R)"):e}(V.id,j);ae.current.portrait.load("".concat(D,"/portraits/").concat(e,".png"));var t=function(e){var t=e.heroDB,n=e.weaponDB,r=e.assistDB,c=e.specialDB,i=e.skillADB,l=e.skillBDB,s=e.skillCDB,a=e.sealDB,o=e.heroId,u=e.skills,d=e.refine,j=J({heroDB:t,weaponDB:n,assistDB:r,specialDB:c,skillADB:i,skillBDB:l,skillCDB:s,sealDB:a,heroId:o,skills:u}),b={};if(X.forEach((function(e){var t=j[e];b[e]=(null===t||void 0===t?void 0:t.icon)&&"/skills/".concat(t.icon)})),d&&"-"!==d){var p,h,O=U[d]||(null===(p=j.weapon.refine)||void 0===p||null===(h=p[d])||void 0===h?void 0:h.icon);O&&(b.weapon="/skills/weapon/".concat(O,".png"))}return b}({heroDB:B.heroDB,weaponDB:B.weaponDB,assistDB:B.assistDB,specialDB:B.specialDB,skillADB:B.skillADB,skillBDB:B.skillBDB,skillCDB:B.skillCDB,sealDB:B.sealDB,skills:Y,heroId:V.id,refine:p});lt.forEach((function(e){var n=e.skillName,r=e.empty;ae.current["".concat(n,"Icon")].load("".concat(D).concat(t[n]||r))}));var n="-"!==V.blessing&&!!V.blessing||!!o;ae.current.blessingAtlas.load(n?"".concat(D,"/assets/blessing-").concat(V.blessing||o,".png"):"")}),[V,j,Y,p,o,$,B.heroDB,B.weaponDB,B.assistDB,B.specialDB,B.skillADB,B.skillBDB,B.skillCDB,B.sealDB,D]),Object(a.useEffect)((function(){I.current=V,_.current=n,T.current=r,M.current=i,E.current=l,N.current=o,R.current=u,H.current=d,W.current=j,F.current=p,L.current=w,z.current=te,P.current=Z,A.current=$,oe()}),[V,n,r,i,l,o,u,d,j,p,w,te,Z,$,oe]);var be=Object(a.useCallback)((function(){var e=S.current.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="".concat(null===V||void 0===V?void 0:V.name,"-").concat(null===V||void 0===V?void 0:V.title,".png"),t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}),[null===V||void 0===V?void 0:V.name,null===V||void 0===V?void 0:V.title]);return{canvasRef:S,triggerDownload:be}};function at(e){var t=e.openEditor,n=Object(s.a)(e,["openEditor"]),c=st(n),i=c.canvasRef,l=c.triggerDownload;return Object(r.jsxs)("div",{className:u.a.container,children:[Object(r.jsx)("canvas",{className:u.a.canvas,width:"540",height:"960",ref:i}),Object(r.jsx)("button",{className:"".concat(u.a.button," ").concat(u.a.download),onClick:l,children:Object(r.jsx)(p,{})}),Object(r.jsx)("button",{className:"".concat(u.a.button," ").concat(u.a.menu),onClick:t,children:Object(r.jsx)(f,{})})]})}var ot=Object(a.memo)(at);function ut(e){return 4===e?"4\u2605":"5\u2606"}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bt=function(e){return Object(r.jsxs)("svg",jt(jt({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(r.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),Object(r.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}))},pt=n("MX0m"),ht=n.n(pt);function Ot(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"jsx-2629191159"}),Object(r.jsx)(ht.a,{id:"2629191159",children:["div.jsx-2629191159{width:1.5em;height:1.5em;border-radius:0.5em;background-color:white;}"]})]})}var ft=function(e){var t=e.className,n=e.checked,c=e.onChange,i=Object(a.useCallback)((function(e){e.stopPropagation(),c&&c(!n)}),[n,c]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{role:"button",onClick:i,className:"jsx-19544621 "+(t||""),children:n&&Object(r.jsx)(Ot,{})}),Object(r.jsx)(ht.a,{id:"19544621",children:["div.jsx-19544621{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:0.5em;width:2.5em;height:2.5em;font-size:1em;border:solid 1px white;background-color:transparent;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},kt=n("ORp4"),vt=n.n(kt);var xt=function(e){var t=e.children,n=e.checked,c=e.onChange;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("label",{className:vt.a.label,children:[t,Object(r.jsx)(ft,{className:vt.a["label-checkbox"],checked:n,onChange:c})]})})},gt=n("niDk"),mt=n("Uwun");var yt=function(e){var t=e.blessing,n=Object(a.useMemo)((function(){return Object(mt.b)(t)}),[t]),c=n.src,i=n.name;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"jsx-3356831981",children:[c&&Object(r.jsx)(gt.a,{src:c,loading:"lazy",width:"50px",height:"50px"}),Object(r.jsx)("div",{className:"jsx-3356831981 blessing-name",children:i})]}),Object(r.jsx)(ht.a,{id:"3356831981",children:["div.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}","div.jsx-3356831981 img.jsx-3356831981{width:2.5em;height:2.5em;margin-right:0.25em;}","div.jsx-3356831981 .blessing-name.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;}"]})]})},wt=n("xjvT"),Dt=n.n(wt);var Bt=function(e){var t=e.onClick;return Object(r.jsx)("button",{className:Dt.a.button,onClick:t,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})};function St(e){var t=e.hidden,n=e.style,c=e.children;return Object(r.jsx)("div",{hidden:t,className:Dt.a.container,style:n,children:c})}function Ct(e){var t=e.children,n=e.style;return Object(r.jsx)("div",{className:Dt.a.title,style:n,children:t})}function It(e){var t=e.children;return Object(r.jsx)("div",{className:Dt.a["title-textgroup"],children:t})}function Pt(e){var t=e.children;return Object(r.jsx)("div",{className:Dt.a.content,children:t})}function At(e){var t=e.children;return Object(r.jsx)("div",{className:Dt.a["section-group"],children:t})}function _t(e){var t=e.children,n=e.disabled,c=e.onClick;return Object(r.jsx)("button",{className:"".concat(Dt.a.button," ").concat(Dt.a.section),disabled:n,onClick:c,children:t})}function Tt(e){var t=e.children;return Object(r.jsx)("div",{className:Dt.a["button-content"],children:t})}function Mt(e){var t=e.children;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"jsx-773961252",children:t}),Object(r.jsx)(ht.a,{id:"773961252",children:["div.jsx-773961252{overflow-y:auto;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-bottom:1em;-webkit-overflow-scrolling:touch;}"]})]})}function Et(e){var t=e.children;return Object(r.jsx)("div",{className:Dt.a.options,children:t})}function Nt(e){var t=e.children;return Object(r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:t})}function Rt(e){var t=e.children;return Object(r.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:t})}function Ht(e){var t=e.src;return Object(r.jsx)(gt.a,{src:t,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function Wt(e){var t=e.children;return Object(r.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:t})}function Ft(e){var t=e.children;return Object(r.jsx)("div",{style:{fontWeight:"bold"},children:t})}function Lt(e){var t=e.children;return Object(r.jsx)("div",{style:{display:"flex"},children:t})}function zt(e){var t=e.children;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"jsx-2400499899",children:t}),Object(r.jsx)(ht.a,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Vt(e){var t=e.cd,n=e.children;return t?Object(r.jsx)("div",{style:{color:t<0?"lightskyblue":"palevioletred"},children:n}):null}function Yt(e){var t=e.children;return Object(r.jsx)("div",{style:{color:"salmon"},children:t})}var qt=function(e){return e>0?"+".concat(e):"".concat(e)};function Ut(e){var t=e.children;return Object(r.jsx)("div",{style:{fontSize:"1.35em",padding:"0.25em",backgroundColor:"#1d3e53"},children:t})}var Jt=n("0unf");function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=function(e){var t=e.heroId,n=e.resplendent,i=Object(c.b)(),l=i.heroDB,s=i.assistDB,o=i.resplendentDB,u=Object(a.useMemo)((function(){return Object(x.a)({heroDB:l,assistDB:s,resplendentDB:o,heroId:t,noStat:!0})}),[l,s,o,t]);return Object(r.jsx)(Jt.a,Kt(Kt({},u),{},{faceSrc:n?u.faceSrcR:u.faceSrc}))};var Qt=function(e){var t=e.heroId,n=e.weapon,i=Object(c.b)(),l=i.heroDB,s=i.weaponDB;return Object(r.jsx)(r.Fragment,{children:z({heroDB:l,weaponDB:s,heroId:t,weapon:n})})};var Gt=function(e){var t=e.heroId,n=e.weapon,i=e.refine,l=Object(c.b)(),s=l.heroDB,a=l.weaponDB;return Object(r.jsx)(r.Fragment,{children:q({heroDB:s,weaponDB:a,heroId:t,weapon:n,refine:i})})};var $t=function(e){var t=e.assist,n=Object(c.b)().assistDB;return Object(r.jsx)(r.Fragment,{children:D({assistDB:n,assist:t})})};var en=function(e){var t=e.special,n=Object(c.b)().specialDB;return Object(r.jsx)(r.Fragment,{children:E({specialDB:n,special:t})})},tn=["skillA","skillB","skillC"];var nn=function(e){var t=e.skillType,n=e.skillId,i=Object(c.b)();if(tn.includes(t)){var l=function(e){var t=A({skillDB:e.skillDB,skillId:e.skillId});return t?{icon:t.icon,name:t.name}:{icon:"",name:""}}({skillDB:i["".concat(t,"DB")],skillId:n}),s=l.icon,a=l.name;return Object(r.jsxs)(r.Fragment,{children:[s&&Object(r.jsx)(Ht,{src:"/skills/".concat(s)}),a]})}if("seal"===t){var o=function(e){var t=B({sealDB:e.sealDB,seal:e.seal});return t?{icon:t.icon,name:t.name}:{icon:"",name:""}}({sealDB:i.sealDB,seal:n}),u=o.icon,d=o.name;return Object(r.jsxs)(r.Fragment,{children:[u&&Object(r.jsx)(Ht,{src:"/skills/".concat(u)}),d]})}return null};var rn=function(e){var t=e.hidden,n=e.heroId,i=e.rarity,l=e.iv,o=e.merge,u=e.dragonflower,d=e.blessing,j=e.support,b=e.arena,p=e.resplendent,h=e.weapon,O=e.refine,f=e.assist,k=e.special,v=e.skillA,g=e.skillB,m=e.skillC,y=e.seal,w=e.lv1,D=e.maxSkill,B=Object(s.a)(e,["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","weapon","refine","assist","special","skillA","skillB","skillC","seal","lv1","maxSkill"]),S=function(e){var t=e.heroId,n=e.weapon,r=e.maxSkill,i=Object(c.b)(),l=i.heroDB,s=i.weaponDB,o=Object(a.useMemo)((function(){return Object(x.c)(l,t)}),[l,t]),u=Object(a.useMemo)((function(){if("Feh"===t)return[];var e=W({heroDB:l,weaponDB:s,heroId:t});return r?e.filter((function(e){return e.last})).length>0:e.length>0}),[l,s,t,r]),d=Object(a.useMemo)((function(){return"Feh"!==t&&Y({heroDB:l,weaponDB:s,heroId:t,weapon:n}).length>0}),[l,s,t,n]);return"Feh"===t?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1}:{hasRarity:o.rarity.length>0,hasBlessing:!!o.blessing,hasWeapon:u,hasRefine:d,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:o.blessing&&o.blessing}}({heroId:n,weapon:h,maxSkill:D}),C=S.hasRarity,I=S.hasBlessing,P=S.hasWeapon,A=S.hasRefine,_=S.hasAssist,T=S.hasSpecial,M=S.hasSkillA,E=S.hasSkillB,N=S.hasSkillC,R=S.hasSeal,H=S.blessing;return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsx)("button",{className:Dt.a["close-button"],onClick:B.closeEditor,children:Object(r.jsx)(bt,{})}),Object(r.jsx)(Ct,{children:Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:"\u82f1\u96c4"}),Object(r.jsx)(xt,{checked:w,onChange:B.toggleLv1,children:"Lv1"})]})}),Object(r.jsxs)(Pt,{children:[Object(r.jsx)("button",{className:"".concat(Dt.a.button," ").concat(Dt.a["hero-header"]),onClick:B.openHeroPicker,children:Object(r.jsx)(Zt,{heroId:n,resplendent:p})}),Object(r.jsxs)(At,{children:[Object(r.jsxs)(_t,{disabled:!C,onClick:B.openRarityPicker,children:["\u7a00\u6709\u5ea6",Object(r.jsx)(Tt,{children:ut(i)})]}),Object(r.jsxs)(_t,{disabled:"Feh"===n,onClick:B.openIVPicker,children:["IV",Object(r.jsx)(Tt,{children:Object(ze.b)(l)})]}),Object(r.jsxs)(_t,{disabled:I,onClick:B.openBlessingPicker,children:["\u795d\u798f",Object(r.jsx)(Tt,{children:Object(r.jsx)(yt,{blessing:H||d})})]}),Object(r.jsxs)(_t,{onClick:B.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",Object(r.jsx)(Tt,{children:o?"+".concat(o):"-"})]}),Object(r.jsxs)(_t,{onClick:B.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",Object(r.jsx)(Tt,{children:u?"+".concat(u):"-"})]})]})]}),Object(r.jsx)(Ct,{children:Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:"\u6280\u80fd"}),Object(r.jsx)(xt,{checked:D,onChange:B.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),Object(r.jsx)(Bt,{onClick:B.setAllSkillDefault})]})}),Object(r.jsxs)(Pt,{children:[Object(r.jsxs)(At,{children:[Object(r.jsxs)(_t,{disabled:!P,onClick:B.openWeaponPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",Object(r.jsx)(Tt,{children:Object(r.jsx)(Qt,{heroId:n,weapon:h})})]}),Object(r.jsxs)(_t,{disabled:!A,onClick:B.openRefinePicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",Object(r.jsx)(Tt,{children:Object(r.jsx)(Gt,{heroId:n,weapon:h,refine:O})})]})]}),Object(r.jsxs)(At,{children:[Object(r.jsxs)(_t,{disabled:!_,onClick:B.openAssistPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",Object(r.jsx)(Tt,{children:Object(r.jsx)($t,{assist:f})})]}),Object(r.jsxs)(_t,{disabled:!T,onClick:B.openSpecialPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",Object(r.jsx)(Tt,{children:Object(r.jsx)(en,{special:k})})]})]}),Object(r.jsxs)(At,{children:[Object(r.jsxs)(_t,{disabled:!M,onClick:B.openSkillAPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",Object(r.jsx)(Tt,{children:Object(r.jsx)(nn,{skillType:"skillA",skillId:v})})]}),Object(r.jsxs)(_t,{disabled:!E,onClick:B.openSkillBPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",Object(r.jsx)(Tt,{children:Object(r.jsx)(nn,{skillType:"skillB",skillId:g})})]}),Object(r.jsxs)(_t,{disabled:!N,onClick:B.openSkillCPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",Object(r.jsx)(Tt,{children:Object(r.jsx)(nn,{skillType:"skillC",skillId:m})})]}),Object(r.jsxs)(_t,{disabled:!R,onClick:B.openSealPicker,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",Object(r.jsx)(Tt,{children:Object(r.jsx)(nn,{skillType:"seal",skillId:y})})]})]})]}),Object(r.jsx)(Ct,{children:"\u5f37\u5316"}),Object(r.jsx)(Pt,{children:Object(r.jsxs)(At,{children:[Object(r.jsxs)(_t,{onClick:B.toggleSupport,children:["\u53ec\u559a\u5e2b\u5951\u7d04",Object(r.jsx)(ft,{checked:j})]}),Object(r.jsxs)(_t,{onClick:B.toggleSupport,children:["\u9b25\u6280\u5834",Object(r.jsx)(ft,{checked:b})]}),Object(r.jsxs)(_t,{onClick:B.toggleResplendent,children:[Object(r.jsx)(gt.a,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/god-wear.png"}),"\u795e\u88dd",Object(r.jsx)(ft,{checked:p})]})]})})]})},cn=n("C5HV");function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=function(e){return Object(r.jsxs)("svg",sn(sn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[Object(r.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),Object(r.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var on=function(e){var t=e.onClick;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:t,className:"jsx-3918608153",children:Object(r.jsx)(an,{fill:"white"})}),Object(r.jsx)(ht.a,{id:"3918608153",children:["button.jsx-3918608153{background-color:transparent;display:block;}"]})]})};var un=function(e){var t=e.hidden,n=e.heroId,c=e.onChangeHero,i=e.onClickBack,l=Object(a.useCallback)((function(e){c(e),i()}),[c,i]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:i}),"\u82f1\u96c4"]}),Object(r.jsx)(cn.a,{heroId:n,onSelect:l,noDropdown:!0,noStat:!0})]})},dn=n("XJgP"),jn=n.n(dn),bn=function(e){var t=e.iv,n=e.selectIV,c=Object(a.useCallback)((function(e){e.stopPropagation(),n(e.currentTarget.value)}),[n]);return Object(r.jsxs)("div",{className:jn.a.container,children:[Object(r.jsx)("button",{className:jn.a["neutral-button"],"data-active":!t,value:"",onClick:c,children:"-"}),ze.e.map((function(e){return Object(r.jsx)("button",{className:jn.a["iv-button"],"data-active":t===e.value,value:e.value,onClick:c,children:e.name},e.value)}))]})};var pn=function(e){var t=e.hidden,n=e.iv,c=e.selectIV,i=e.onClickBack,l=Object(a.useCallback)((function(e){c(e),i()}),[c,i]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:i}),"IV"]}),Object(r.jsx)(bn,{iv:n,selectIV:l})]})},hn=n("dLxW"),On=n.n(hn),fn=function(e){var t=e.blessing,n=e.selectBlessing,c=Object(a.useCallback)((function(e){e.stopPropagation(),n(e.currentTarget.value)}),[n]);return Object(r.jsxs)("div",{className:On.a.container,children:[Object(r.jsx)("button",{className:On.a["neutral-button"],"data-active":!t,value:"",onClick:c,children:"-"}),mt.c.map((function(e){return Object(r.jsx)("button",{className:On.a["blessing-button"],"data-active":t===e.value,value:e.value,onClick:c,children:Object(r.jsx)(yt,{blessing:e.value})},e.value)}))]})};var kn=function(e){var t=e.hidden,n=e.blessing,c=e.selectBlessing,i=e.onClickBack,l=Object(a.useCallback)((function(e){c(e),i()}),[c,i]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:i}),"IV"]}),Object(r.jsx)(fn,{blessing:n,selectBlessing:l})]})},vn=n("PY5n");var xn=function(e){var t=e.hidden,n=e.merge,c=e.selectMerge,i=e.onClickBack,l=Object(a.useCallback)((function(e){c(e),i()}),[c,i]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:i}),"\u7a81\u7834\u6b21\u6578"]}),Object(r.jsx)(vn.a,{merge:n,onSelect:l})]})},gn=n("KWow"),mn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];var yn=function(e){var t=e.dragonflower,n=e.onSelect;return Object(r.jsx)(gn.a,{value:t,onSelect:n,options:mn})};var wn=function(e){var t=e.hidden,n=e.dragonflower,c=e.selectDragonflower,i=e.onClickBack,l=Object(a.useCallback)((function(e){c(e),i()}),[c,i]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:i}),"\u795e\u9f8d\u4e4b\u82b1"]}),Object(r.jsx)(yn,{dragonflower:n,onSelect:l})]})};var Dn=function(e){var t=e.active,n=e.last,c=e.hidden,i=e.value,l=e.children,s=e.onClick;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{"data-active":t,value:i,onClick:s,hidden:c,className:ht.a.dynamic([["2665293084",[n?1:.618]]]),children:l}),Object(r.jsx)(ht.a,{id:"2665293084",dynamic:[n?1:.618],children:[".__jsx-style-dynamic-selector{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;text-align:left;outline:none;line-height:1.5;opacity:".concat(n?1:.618,";}"),"button.__jsx-style-dynamic-selector{padding:0.5em;margin-bottom:0.5em;border-bottom:1px solid #1d3e53;cursor:pointer;display:block;color:white;width:100%;background-color:transparent;}","button.__jsx-style-dynamic-selector:hover{background-color:#77abb7aa;}","button[hidden].__jsx-style-dynamic-selector{display:none;}","button[data-active='true'].__jsx-style-dynamic-selector{background-color:#476d7c;}"]})]})};function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e){var t=e.children;return Object(r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:t})}function In(e){var t=e.children;return Object(r.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder"},children:t})}function Pn(e){var t=e.children;return Object(r.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:t})}function An(e){var t=e.children;return Object(r.jsx)("div",{style:{fontWeight:"bold"},children:t})}function _n(e){var t=e.children;return Object(r.jsx)("div",{style:{display:"flex"},children:t})}function Tn(e){var t=e.children;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"jsx-2400499899",children:t}),Object(r.jsx)(ht.a,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Mn(e){var t=e.cd,n=e.children;return t?Object(r.jsx)("div",{style:{color:t<0?"lightskyblue":"palevioletred"},children:n}):null}function En(e){var t=e.children;return Object(r.jsx)("div",{style:{color:"salmon"},children:t})}var Nn=function(e){return e>0?"+".concat(e):"".concat(e)};var Rn=function(e){var t=e.active,n=e.weapon,c=e.hidden,i=e.onClick;return Object(r.jsxs)(Dn,{active:t,last:n.last,hidden:c,value:n.id,onClick:i,children:[Object(r.jsxs)(Cn,{children:[Object(r.jsx)(In,{children:n.name}),Object(r.jsxs)(Pn,{children:[n.sp,"SP"]})]}),Object(r.jsxs)(An,{children:["\u5a01\u529b ",n.mt]}),n.cd&&Object(r.jsxs)(Mn,{cd:n.cd,children:["\u5967\u7fa9 cd",Nn(n.cd)]}),Object(r.jsxs)(_n,{children:[n.hp&&Object(r.jsxs)(Tn,{children:["HP ",Nn(n.hp)]}),n.atk&&Object(r.jsxs)(Tn,{children:["\u653b\u64ca ",Nn(n.atk)]}),n.spd&&Object(r.jsxs)(Tn,{children:["\u901f\u5ea6 ",Nn(n.spd)]}),n.def&&Object(r.jsxs)(Tn,{children:["\u9632\u5b88 ",Nn(n.def)]}),n.res&&Object(r.jsxs)(Tn,{children:["\u9b54\u9632 ",Nn(n.res)]})]}),n.exclusive&&Object(r.jsx)(En,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Hn(e){var t=e.heroId,n=e.weapon,i=e.selectWeapon,l=function(e){var t=e.heroId,n=e.filter,r=e.maxSkill,i=Object(c.b)(),l=i.heroDB,s=i.weaponDB,o=Object(a.useMemo)((function(){return W({heroDB:l,weaponDB:s,heroId:t})}),[t,l,s]);return{options:Object(a.useMemo)((function(){return o.map((function(e){var t=!1;return r&&!e.last&&(t=!0),!t&&n&&(t=!e.query.includes(n.toLowerCase())),Sn(Sn({},e),{},{hidden:t})}))}),[o,n,r])}}({heroId:t,filter:e.filter,maxSkill:e.maxSkill}).options,o=Object(a.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return Object(r.jsxs)(Et,{children:[Object(r.jsx)(Dn,{active:!n,value:"",onClick:o,children:"\u7121\u6b66\u5668"}),l.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(Rn,{hidden:t,weapon:c,active:n===e.id,onClick:o},e.id)}))]})}var Wn=Object(a.memo)(Hn);var Fn=function(e){var t=e.hidden,n=e.onClickBack,c=e.heroId,i=e.weapon,l=e.selectWeapon,s=e.maxSkill,o=e.toggleMaxSkill,u=e.setDefaultSkill,d=Object(a.useState)(""),j=d[0],b=d[1],p=Object(a.useCallback)((function(e){b(e.currentTarget.value)}),[]),h=Object(a.useCallback)((function(e){l(e),n()}),[l,n]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:n}),Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:"\u6b66\u5668"}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(xt,{checked:s,onChange:o,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),Object(r.jsx)(Bt,{onClick:u})]})]})]}),Object(r.jsx)("input",{className:Dt.a.input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:p}),Object(r.jsx)(Mt,{children:Object(r.jsx)(Wn,{heroId:c,weapon:i,filter:j,maxSkill:s,selectWeapon:h})})]})};function Ln(e){var t=e.children;return Object(r.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:t})}function zn(e){var t=e.src;return Object(r.jsx)(gt.a,{src:t,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function Vn(e){var t=e.children;return Object(r.jsx)("div",{style:{fontWeight:"bold"},children:t})}function Yn(e){var t=e.children;return Object(r.jsx)("div",{style:{display:"flex"},children:t})}function qn(e){var t=e.children;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"jsx-2400499899",children:t}),Object(r.jsx)(ht.a,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Un(e){var t=e.cd,n=e.children;return t?Object(r.jsx)("div",{style:{color:t<0?"lightskyblue":"palevioletred"},children:n}):null}function Jn(e){var t=e.children;return Object(r.jsx)("div",{style:{color:"salmon"},children:t})}var Xn=function(e){return e>0?"+".concat(e):"".concat(e)};var Kn=function(e){var t=e.active,n=e.hidden,c=e.refineType,i=e.refine,l=e.onClick;return Object(r.jsxs)(Dn,{active:t,last:!0,hidden:n,value:c,onClick:l,children:[Object(r.jsxs)(Ln,{children:[i.icon&&Object(r.jsx)(zn,{src:i.icon}),i.name]}),i.mt&&Object(r.jsxs)(Vn,{children:["\u5a01\u529b ",i.mt]}),i.cd&&Object(r.jsxs)(Un,{cd:i.cd,children:["\u5967\u7fa9 cd",Xn(i.cd)]}),Object(r.jsxs)(Yn,{children:[i.hp&&Object(r.jsxs)(qn,{children:["HP ",Xn(i.hp)]}),i.atk&&Object(r.jsxs)(qn,{children:["\u653b\u64ca ",Xn(i.atk)]}),i.spd&&Object(r.jsxs)(qn,{children:["\u901f\u5ea6 ",Xn(i.spd)]}),i.def&&Object(r.jsxs)(qn,{children:["\u9632\u5b88 ",Xn(i.def)]}),i.res&&Object(r.jsxs)(qn,{children:["\u9b54\u9632 ",Xn(i.res)]})]}),i.exclusive&&Object(r.jsx)(Jn,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Zn(e){var t=e.heroId,n=e.weapon,i=e.refine,l=e.selectRefine,o=function(e){var t=e.heroId,n=e.weapon,r=Object(c.b)(),i=r.heroDB,l=r.weaponDB;return{options:Object(a.useMemo)((function(){return Y({heroDB:i,weaponDB:l,heroId:t,weapon:n})}),[i,l,t,n])}}({heroId:t,weapon:n}).options,u=Object(a.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return Object(r.jsxs)(Et,{children:[Object(r.jsx)(Dn,{active:!i,value:"",onClick:u,children:"\u7121\u935b\u9020"}),o.map((function(e){var t=e.value,n=Object(s.a)(e,["value"]);return Object(r.jsx)(Kn,{refineType:t,refine:n,active:i===t,onClick:u},t)}))]})}var Qn=Object(a.memo)(Zn);var Gn=function(e){var t=e.hidden,n=e.onClickBack,c=e.heroId,i=e.weapon,l=e.refine,s=e.selectRefine,o=Object(a.useCallback)((function(e){s(e),n()}),[s,n]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:n}),Object(r.jsx)(It,{children:Object(r.jsx)("span",{children:"\u935b\u9020"})})]}),Object(r.jsx)(Mt,{children:Object(r.jsx)(Qn,{heroId:c,weapon:i,refine:l,selectRefine:o})})]})};function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tr(e){var t=e.active,n=e.hidden,c=e.skill,i=e.onClick;return Object(r.jsxs)(Dn,{active:t,last:c.last,hidden:n,value:c.id,onClick:i,children:[Object(r.jsxs)(Rt,{children:[c.icon&&Object(r.jsx)(Ht,{src:"/skills/".concat(c.icon)}),c.name]}),c.mt&&Object(r.jsxs)(Ft,{children:["\u5a01\u529b ",c.mt]}),c.cd&&Object(r.jsxs)(Vt,{cd:c.cd,children:["\u5967\u7fa9 cd",qt(c.cd)]}),Object(r.jsxs)(Lt,{children:[c.hp&&Object(r.jsxs)(zt,{children:["HP ",qt(c.hp)]}),c.atk&&Object(r.jsxs)(zt,{children:["\u653b\u64ca ",qt(c.atk)]}),c.spd&&Object(r.jsxs)(zt,{children:["\u901f\u5ea6 ",qt(c.spd)]}),c.def&&Object(r.jsxs)(zt,{children:["\u9632\u5b88 ",qt(c.def)]}),c.res&&Object(r.jsxs)(zt,{children:["\u9b54\u9632 ",qt(c.res)]})]}),c.exclusive&&Object(r.jsx)(Yt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var nr=Object(a.memo)(tr);function rr(e){var t=e.heroId,n=e.skillType,i=e.skillId,l=e.selectSkill,o=e.filter,u=e.maxSkill,d=function(e){var t=e.heroId,n=e.skillType,r=e.filter,i=e.maxSkill,l=Object(c.b)(),s=l.rulesDB,o=l.heroDB,u=l["".concat(n,"DB")],d=Object(a.useMemo)((function(){return I({rulesDB:s,heroDB:o,skillDB:u,heroId:t})}),[s,o,u,t]);return{options:Object(a.useMemo)((function(){return d.map((function(e){var t=!1;return i&&!e.last&&(t=!0),!t&&r&&(t=!e.query.includes(r.toLowerCase())),er(er({},e),{},{hidden:t})}))}),[d,r,i])}}({heroId:t,skillType:n,skillId:i,filter:o,maxSkill:u}).options,j=Object(a.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return Object(r.jsxs)(Et,{children:[Object(r.jsx)(Dn,{active:!i,value:"",onClick:j,children:"\u7121\u6280\u80fd"}),d.map((function(e){var t=e.hidden,n=Object(s.a)(e,["hidden"]);return Object(r.jsx)(nr,{hidden:t,active:i===n.id,skill:n,onClick:j},n.id)}))]})}var cr=Object(a.memo)(rr);var ir=function(e){var t=e.hidden,n=e.skillType,c=e.title,i=e.onClickBack,l=e.heroId,s=e.skillId,o=e.selectSkill,u=e.maxSkill,d=e.toggleMaxSkill,j=e.setDefaultSkill,b=Object(a.useState)(""),p=b[0],h=b[1],O=Object(a.useCallback)((function(e){h(e.currentTarget.value)}),[]),f=Object(a.useCallback)((function(e){o(e),i()}),[o,i]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:i}),Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:c}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(xt,{checked:u,onChange:d,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),j&&Object(r.jsx)(Bt,{onClick:j})]})]})]}),Object(r.jsx)("input",{className:Dt.a.input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:O}),Object(r.jsx)(Mt,{children:Object(r.jsx)(cr,{heroId:l,skillType:n,skillId:s,selectSkill:f,filter:p,maxSkill:u})})]})};function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ar(e){var t=e.heroId,n=e.filter,r=e.maxSkill,i=Object(c.b)(),l=i.rulesDB,s=i.heroDB,o=i.assistDB,u=Object(a.useMemo)((function(){return function(e){var t=e.rulesDB,n=e.heroDB,r=e.assistDB,c=e.heroId;if(!t||!n||!r||!c)return[];var i=Object(x.c)(n,c);return i?Object.values(r).filter((function(e){if(e.exclusive)return e.exclusive.includes(c);var n=g({rulesDB:t,ruleId:e.rules});return!n||(!n.moveType||!1!==n.moveType[i.moveType])&&(!n.weaponType||!1!==n.weaponType[i.weaponType])})).map((function(e){var t="".concat(e.id.toLowerCase(),"|").concat(e.name);return y(y({},e),{},{query:t})})):[]}({rulesDB:l,heroDB:s,assistDB:o,heroId:t})}),[l,s,o,t]);return{options:Object(a.useMemo)((function(){return u.map((function(e){var t=!1;return r&&!e.last&&(t=!0),!t&&n&&(t=!e.query.includes(n.toLowerCase())),sr(sr({},e),{},{hidden:t})}))}),[u,n,r])}}function or(e){var t=e.active,n=e.hidden,c=e.assist,i=e.onClick;return Object(r.jsxs)(Dn,{active:t,last:c.last,hidden:n,value:c.id,onClick:i,children:[Object(r.jsxs)(Nt,{children:[Object(r.jsx)(Rt,{children:c.name}),Object(r.jsxs)(Wt,{children:[c.sp,"SP"]})]}),c.exclusive&&Object(r.jsx)(Yt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var ur=Object(a.memo)(or);function dr(e){var t=e.heroId,n=e.assist,c=e.selectAssist,i=ar({heroId:t,filter:e.filter,maxSkill:e.maxSkill}).options,l=Object(a.useCallback)((function(e){e.stopPropagation(),c(e.currentTarget.value)}),[c]);return Object(r.jsxs)(Et,{children:[Object(r.jsx)(Dn,{active:!n,value:"",onClick:l,children:"\u7121\u6280\u80fd"}),i.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(ur,{hidden:t,active:n===c.id,assist:c,onClick:l},c.id)}))]})}var jr=Object(a.memo)(dr);var br=function(e){var t=e.hidden,n=e.onClickBack,c=e.heroId,i=e.assist,l=e.selectAssist,s=e.maxSkill,o=e.toggleMaxSkill,u=e.setDefaultSkill,d=Object(a.useState)(""),j=d[0],b=d[1],p=Object(a.useCallback)((function(e){b(e.currentTarget.value)}),[]),h=Object(a.useCallback)((function(e){l(e),n()}),[l,n]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:n}),Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:"\u652f\u63f4"}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(xt,{checked:s,onChange:o,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&Object(r.jsx)(Bt,{onClick:u})]})]})]}),Object(r.jsx)("input",{className:Dt.a.input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:p}),Object(r.jsx)(Mt,{children:Object(r.jsx)(jr,{heroId:c,assist:i,selectAssist:h,filter:j,maxSkill:s})})]})};function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Or(e){var t=e.heroId,n=e.filter,r=e.maxSkill,i=Object(c.b)(),l=i.rulesDB,s=i.heroDB,o=i.specialDB,u=Object(a.useMemo)((function(){return function(e){var t=e.rulesDB,n=e.heroDB,r=e.specialDB,c=e.heroId;if(!t||!n||!r||!c)return[];var i=Object(x.c)(n,c);return i?Object.values(r).filter((function(e){if(e.exclusive)return e.exclusive.includes(c);var n=g({rulesDB:t,ruleId:e.rules});return!n||(!n.moveType||!1!==n.moveType[i.moveType])&&(!n.weaponType||!1!==n.weaponType[i.weaponType])})).map((function(e){var t="".concat(e.id.toLowerCase(),"|").concat(e.name);return T(T({},e),{},{query:t})})):[]}({rulesDB:l,heroDB:s,specialDB:o,heroId:t})}),[l,s,o,t]);return{options:Object(a.useMemo)((function(){return u.map((function(e){var t=!1;return r&&!e.last&&(t=!0),!t&&n&&(t=!e.query.includes(n.toLowerCase())),hr(hr({},e),{},{hidden:t})}))}),[u,n,r])}}function fr(e){var t=e.active,n=e.hidden,c=e.special,i=e.onClick;return Object(r.jsxs)(Dn,{active:t,last:c.last,hidden:n,value:c.id,onClick:i,children:[Object(r.jsxs)(Nt,{children:[Object(r.jsx)(Rt,{children:c.name}),Object(r.jsxs)(Wt,{children:[c.sp,"SP"]})]}),Object(r.jsxs)("div",{children:["CD ",c.cd]}),c.exclusive&&Object(r.jsx)(Yt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var kr=Object(a.memo)(fr);function vr(e){var t=e.heroId,n=e.special,c=e.selectSpecial,i=Or({heroId:t,filter:e.filter,maxSkill:e.maxSkill}).options,l=Object(a.useCallback)((function(e){e.stopPropagation(),c(e.currentTarget.value)}),[c]);return Object(r.jsxs)(Et,{children:[Object(r.jsx)(Dn,{active:!n,value:"",onClick:l,children:"\u7121\u6280\u80fd"}),i.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(kr,{hidden:t,active:n===c.id,special:c,onClick:l},c.id)}))]})}var xr=Object(a.memo)(vr);var gr=function(e){var t=e.hidden,n=e.onClickBack,c=e.heroId,i=e.special,l=e.selectSpecial,s=e.maxSkill,o=e.toggleMaxSkill,u=e.setDefaultSkill,d=Object(a.useState)(""),j=d[0],b=d[1],p=Object(a.useCallback)((function(e){b(e.currentTarget.value)}),[]),h=Object(a.useCallback)((function(e){l(e),n()}),[l,n]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:n}),Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:"\u5967\u7fa9"}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(xt,{checked:s,onChange:o,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&Object(r.jsx)(Bt,{onClick:u})]})]})]}),Object(r.jsx)("input",{className:Dt.a.input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:p}),Object(r.jsx)(Mt,{children:Object(r.jsx)(xr,{heroId:c,special:i,selectSpecial:h,filter:j,maxSkill:s})})]})};function mr(e){var t=e.active,n=e.hidden,c=e.skill,i=e.onClick;return Object(r.jsxs)(Dn,{active:t,last:c.last,hidden:n,value:c.id,onClick:i,children:[Object(r.jsxs)(Rt,{children:[c.icon&&Object(r.jsx)(Ht,{src:"/skills/".concat(c.icon)}),c.name]}),c.mt&&Object(r.jsxs)(Ft,{children:["\u5a01\u529b ",c.mt]}),c.cd&&Object(r.jsxs)(Vt,{cd:c.cd,children:["\u5967\u7fa9 cd",qt(c.cd)]}),Object(r.jsxs)(Lt,{children:[c.hp&&Object(r.jsxs)(zt,{children:["HP ",qt(c.hp)]}),c.atk&&Object(r.jsxs)(zt,{children:["\u653b\u64ca ",qt(c.atk)]}),c.spd&&Object(r.jsxs)(zt,{children:["\u901f\u5ea6 ",qt(c.spd)]}),c.def&&Object(r.jsxs)(zt,{children:["\u9632\u5b88 ",qt(c.def)]}),c.res&&Object(r.jsxs)(zt,{children:["\u9b54\u9632 ",qt(c.res)]})]}),c.exclusive&&Object(r.jsx)(Yt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var yr=Object(a.memo)(mr);function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e){var t=e.skill,n=e.maxSkill,r=e.filter,c=!1;return n&&!t.last&&(c=!0),!c&&r&&(c=!t.query.includes(r.toLowerCase())),Dr(Dr({},t),{},{hidden:c})}function Sr(e){var t=e.heroId,n=e.seal,i=e.selectSeal,l=function(e){var t=e.heroId,n=e.filter,r=e.maxSkill,i=Object(c.b)(),l=i.rulesDB,s=i.heroDB,o=i.sealDB;return{skillAOptions:Object(a.useMemo)((function(){return I({rulesDB:l,heroDB:s,skillDB:o.skillA,heroId:t}).map((function(e){return Br({skill:e,maxSkill:r,filter:n})}))}),[l,s,o,t,n,r]),skillBOptions:Object(a.useMemo)((function(){return I({rulesDB:l,heroDB:s,skillDB:o.skillB,heroId:t}).map((function(e){return Br({skill:e,maxSkill:r,filter:n})}))}),[l,s,o,t,n,r]),skillCOptions:Object(a.useMemo)((function(){return I({rulesDB:l,heroDB:s,skillDB:o.skillC,heroId:t}).map((function(e){return Br({skill:e,maxSkill:r,filter:n})}))}),[l,s,o,t,n,r]),sealOptions:Object(a.useMemo)((function(){return I({rulesDB:l,heroDB:s,skillDB:o.seal,heroId:t}).map((function(e){return Br({skill:e,maxSkill:r,filter:n})}))}),[l,s,o,t,n,r])}}({heroId:t,filter:e.filter,maxSkill:e.maxSkill}),o=l.skillAOptions,u=l.skillBOptions,d=l.skillCOptions,j=l.sealOptions,b=Object(a.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return Object(r.jsxs)(Et,{children:[Object(r.jsx)(Dn,{active:!n,value:"",onClick:b,children:"\u7121\u8056\u5370"}),Object(r.jsx)(Ut,{children:"A\u6280\u80fd\u8056\u5370"}),o.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(yr,{hidden:t,active:n===c.id,skill:c,onClick:b},c.id)})),Object(r.jsx)(Ut,{children:"B\u6280\u80fd\u8056\u5370"}),u.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(yr,{hidden:t,active:n===c.id,skill:c,onClick:b},c.id)})),Object(r.jsx)(Ut,{children:"C\u6280\u80fd\u8056\u5370"}),d.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(yr,{hidden:t,active:n===c.id,skill:c,onClick:b},c.id)})),Object(r.jsx)(Ut,{children:"\u5c08\u7528\u8056\u5370"}),j.map((function(e){var t=e.hidden,c=Object(s.a)(e,["hidden"]);return Object(r.jsx)(yr,{hidden:t,active:n===c.id,skill:c,onClick:b},c.id)}))]})}var Cr=Object(a.memo)(Sr);var Ir=function(e){var t=e.hidden,n=e.onClickBack,c=e.heroId,i=e.seal,l=e.selectSeal,s=e.maxSkill,o=e.toggleMaxSkill,u=Object(a.useState)(""),d=u[0],j=u[1],b=Object(a.useCallback)((function(e){j(e.currentTarget.value)}),[]),p=Object(a.useCallback)((function(e){l(e),n()}),[l,n]);return Object(r.jsxs)(St,{hidden:t,children:[Object(r.jsxs)(Ct,{children:[Object(r.jsx)(on,{onClick:n}),Object(r.jsxs)(It,{children:[Object(r.jsx)("span",{children:"\u8056\u5370"}),Object(r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:Object(r.jsx)(xt,{checked:s,onChange:o,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),Object(r.jsx)("input",{className:Dt.a.input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:b}),Object(r.jsx)(Mt,{children:Object(r.jsx)(Cr,{heroId:c,seal:i,selectSeal:p,filter:d,maxSkill:s})})]})};var Pr=function(){var e=Object(a.useState)(""),t=e[0],n=e[1];return{view:t,openHeroPicker:Object(a.useCallback)((function(){n("hero")}),[]),openRarityPicker:Object(a.useCallback)((function(){n("rarity")}),[]),openIVPicker:Object(a.useCallback)((function(){n("iv")}),[]),openMergePicker:Object(a.useCallback)((function(){n("merge")}),[]),openDragonflowerPicker:Object(a.useCallback)((function(){n("dragonflower")}),[]),openBlessingPicker:Object(a.useCallback)((function(){n("blessing")}),[]),openWeaponPicker:Object(a.useCallback)((function(){n("weapon")}),[]),openRefinePicker:Object(a.useCallback)((function(){n("refine")}),[]),openAssistPicker:Object(a.useCallback)((function(){n("assist")}),[]),openSpecialPicker:Object(a.useCallback)((function(){n("special")}),[]),openSkillAPicker:Object(a.useCallback)((function(){n("skillA")}),[]),openSkillBPicker:Object(a.useCallback)((function(){n("skillB")}),[]),openSkillCPicker:Object(a.useCallback)((function(){n("skillC")}),[]),openSealPicker:Object(a.useCallback)((function(){n("seal")}),[]),onClickBack:Object(a.useCallback)((function(){n("")}),[])}};function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tr=function(e){var t=Pr(),n=t.view,c=t.openHeroPicker,i=t.openRarityPicker,l=t.openIVPicker,s=t.openMergePicker,a=t.openDragonflowerPicker,o=t.openBlessingPicker,u=t.openWeaponPicker,d=t.openRefinePicker,j=t.openAssistPicker,b=t.openSpecialPicker,p=t.openSkillAPicker,h=t.openSkillBPicker,O=t.openSkillCPicker,f=t.openSealPicker,k=t.onClickBack;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(rn,_r(_r({hidden:!!n},e),{},{openHeroPicker:c,openRarityPicker:i,openIVPicker:l,openMergePicker:s,openDragonflowerPicker:a,openBlessingPicker:o,openWeaponPicker:u,openRefinePicker:d,openAssistPicker:j,openSpecialPicker:b,openSkillAPicker:p,openSkillBPicker:h,openSkillCPicker:O,openSealPicker:f})),Object(r.jsx)(un,{hidden:"hero"!==n,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:k}),Object(r.jsx)(pn,{hidden:"iv"!==n,iv:e.iv,selectIV:e.setIV,onClickBack:k}),Object(r.jsx)(kn,{hidden:"blessing"!==n,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:k}),Object(r.jsx)(xn,{hidden:"merge"!==n,merge:e.merge,selectMerge:e.setMerge,onClickBack:k}),Object(r.jsx)(wn,{hidden:"dragonflower"!==n,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:k}),Object(r.jsx)(Fn,{hidden:"weapon"!==n,onClickBack:k,heroId:e.heroId,weapon:e.weapon,selectWeapon:e.setWeapon,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),Object(r.jsx)(Gn,{hidden:"refine"!==n,onClickBack:k,heroId:e.heroId,weapon:e.weapon,refine:e.refine,selectRefine:e.setRefine}),Object(r.jsx)(br,{hidden:"assist"!==n,onClickBack:k,heroId:e.heroId,assist:e.assist,selectAssist:e.setAssist,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),Object(r.jsx)(gr,{title:"A\u6280\u80fd",hidden:"special"!==n,onClickBack:k,heroId:e.heroId,special:e.special,selectSpecial:e.setSpecial,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),Object(r.jsx)(ir,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==n,onClickBack:k,heroId:e.heroId,skillId:e.skillA,selectSkill:e.setSkillA,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),Object(r.jsx)(ir,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==n,onClickBack:k,heroId:e.heroId,skillId:e.skillB,selectSkill:e.setSkillB,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),Object(r.jsx)(ir,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==n,onClickBack:k,heroId:e.heroId,skillId:e.skillC,selectSkill:e.setSkillC,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),Object(r.jsx)(Ir,{hidden:"seal"!==n,onClickBack:k,heroId:e.heroId,seal:e.skillC,selectSeal:e.setSeal,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill})]})},Mr=n("YnUv"),Er=n.n(Mr),Nr=n("YVe8"),Rr={weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""};function Hr(){var e=Object(c.b)(),t=e.rulesDB,n=e.heroDB,r=e.weaponDB,i=e.assistDB,l=e.specialDB,s=e.skillADB,o=e.skillBDB,u=e.skillCDB,d=e.sealDB,j=e.defaultSkillDB,b=Object(a.useState)("Feh"),p=b[0],h=b[1],O=Object(a.useState)(5),f=O[0],k=O[1],v=Object(a.useState)(""),m=v[0],y=v[1],w=Object(a.useState)(0),D=w[0],B=w[1],S=Object(a.useState)(0),C=S[0],I=S[1],A=Object(a.useState)(""),_=A[0],T=A[1],M=Object(a.useState)(!1),E=M[0],N=M[1],R=Object(a.useCallback)((function(){N((function(e){return!e}))}),[]),H=Object(a.useRef)({weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""}),W=Object(a.useRef)(""),z=Object(a.useState)(""),V=z[0],Y=z[1],q=Object(a.useState)(""),U=q[0],J=q[1],X=Object(a.useState)(""),K=X[0],Z=X[1],Q=Object(a.useState)(""),G=Q[0],$=Q[1],ee=Object(a.useState)(""),te=ee[0],ne=ee[1],re=Object(a.useState)(""),ce=re[0],ie=re[1],le=Object(a.useState)(""),se=le[0],ae=le[1],oe=Object(a.useState)(""),ue=oe[0],de=oe[1],je=Object(a.useCallback)((function(){Y(H.current.weapon)}),[]),be=Object(a.useCallback)((function(){Z(H.current.assist)}),[]),pe=Object(a.useCallback)((function(){$(H.current.special)}),[]),he=Object(a.useCallback)((function(){ne(H.current.skillA)}),[]),Oe=Object(a.useCallback)((function(){ie(H.current.skillB)}),[]),fe=Object(a.useCallback)((function(){ae(H.current.skillC)}),[]),ke=Object(a.useCallback)((function(){je(),be(),pe(),he(),Oe(),fe()}),[je,be,pe,he,Oe,fe]);W.current=V;var ve=Object(a.useCallback)((function(e){h(e),H.current=function(e){var t=e.defaultSkillDB,n=e.heroId;if(!t||!n||!t[n])return Rr;var r=t[n],c="",i="",l="",s="",a="",o="";return r.weapon&&(c=Object.keys(r.weapon).pop()),r.assist&&(i=Object.keys(r.assist).pop()),r.special&&(l=Object.keys(r.special).pop()),r.skillA&&(s=Object.keys(r.skillA).pop()),r.skillB&&(a=Object.keys(r.skillB).pop()),r.skillC&&(o=Object.keys(r.skillC).pop()),{weapon:c,assist:i,special:l,skillA:s,skillB:a,skillC:o}}({defaultSkillDB:j,heroId:e}),Y((function(){return F({heroDB:n,weaponDB:r,heroId:e,weaponId:W.current})?W.current:""})),J((function(t){return function(e){var t=e.heroDB,n=e.weaponDB,r=e.heroId,c=e.weaponId,i=e.refineId;if(!F({heroDB:t,weaponDB:n,heroId:r,weaponId:c}))return!1;var l=L({heroDB:t,weaponDB:n,heroId:r,weapon:c});return!!(l&&l.refine&&l.refine[i])&&(!l.refine[i].exclusive||l.refine[i].exclusive.includes(r))}({heroDB:n,weaponDB:r,heroId:e,weaponId:W.current,refineId:t})?t:""})),Z((function(r){return function(e){var t=e.rulesDB,n=e.heroDB,r=e.assistDB,c=e.heroId,i=e.assistId;if(!t||!n||!r||!c||!i)return!1;var l=Object(x.c)(n,c);if(!l)return!1;var s=r[i];if(!s)return!1;if(s.exclusive)return s.exclusive.includes(c);var a=g({rulesDB:t,ruleId:s.rules});return!a||(!a.moveType||!1!==a.moveType[l.moveType])&&(!a.weaponType||!1!==a.weaponType[l.weaponType])}({rulesDB:t,heroDB:n,assistDB:i,heroId:e,assistId:r})?r:""})),$((function(r){return function(e){var t=e.rulesDB,n=e.heroDB,r=e.specialDB,c=e.heroId,i=e.specialId;if(!t||!n||!r||!c||!i)return!1;var l=Object(x.c)(n,c);if(!l)return!1;var s=r[i];if(!s)return!1;if(s.exclusive)return s.exclusive.includes(c);var a=g({rulesDB:t,ruleId:s.rules});return!a||(!a.moveType||!1!==a.moveType[l.moveType])&&(!a.weaponType||!1!==a.weaponType[l.weaponType])}({rulesDB:t,heroDB:n,specialDB:l,heroId:e,specialId:r})?r:""})),ne((function(r){return P({rulesDB:t,heroDB:n,skillDB:s,heroId:e,skillId:r})?r:""})),ie((function(r){return P({rulesDB:t,heroDB:n,skillDB:o,heroId:e,skillId:r})?r:""})),ae((function(r){return P({rulesDB:t,heroDB:n,skillDB:u,heroId:e,skillId:r})?r:""})),de((function(r){return function(e){var t=e.rulesDB,n=e.heroDB,r=e.sealDB,c=e.heroId,i=e.sealId;if(!n||!r||!c||!i)return!1;var l=Object(x.c)(n,c);if(!l)return!1;var s=r.skillA[i]||r.skillB[i]||r.skillC[i]||r.seal[i];if(!s)return!1;var a=g({rulesDB:t,ruleId:s.rules});return!a||(!a.moveType||!1!==a.moveType[l.moveType])&&(!a.weaponType||!1!==a.weaponType[l.weaponType])}({rulesDB:t,heroDB:n,sealDB:d,heroId:e,sealId:r})?r:""}))}),[t,n,r,i,l,s,o,u,d,j]),xe=Object(a.useState)(!1),ge=xe[0],me=xe[1],ye=Object(a.useCallback)((function(){me((function(e){return!e}))}),[]),we=Object(a.useState)(!1),De=we[0],Be=we[1],Se=Object(a.useCallback)((function(){Be((function(e){return!e}))}),[]),Ce=Object(a.useState)(!1),Ie=Ce[0],Pe=Ce[1],Ae=Object(a.useCallback)((function(){Pe((function(e){return!e}))}),[]),_e=Object(a.useState)(!0),Te=_e[0],Me=_e[1],Ee=Object(a.useCallback)((function(){Me((function(e){return!e}))}),[]),Ne=Object(a.useState)(!1),Re=Ne[0],He=Ne[1],We=Object(a.useCallback)((function(){He(!0)}),[]),Fe=Object(a.useCallback)((function(){He(!1)}),[]),Le=Object(Nr.a)("/assets/summon-stone.jpg");return{heroId:p,onChangeHero:ve,rarity:f,setRarity:k,iv:m,setIV:y,merge:D,setMerge:B,dragonflower:C,setDragonflower:I,blessing:_,setBlessing:T,support:E,toggleSupport:R,arena:ge,toggleArena:ye,resplendent:De,toggleResplendent:Se,weapon:V,setWeapon:Y,refine:U,setRefine:J,assist:K,setAssist:Z,special:G,setSpecial:$,skillA:te,setSkillA:ne,skillB:ce,setSkillB:ie,skillC:se,setSkillC:ae,seal:ue,setSeal:de,setDefaultWeapon:je,setDefaultAssist:be,setDefaultSpecial:pe,setDefaultSkillA:he,setDefaultSkillB:Oe,setDefaultSkillC:fe,setAllSkillDefault:ke,lv1:Ie,toggleLv1:Ae,maxSkill:Te,toggleMaxSkill:Ee,bg:Le,editorIsOpen:Re,openEditor:We,closeEditor:Fe}}var Wr=function(){var e=Hr(),t=e.heroId,n=e.onChangeHero,c=e.rarity,i=e.setRarity,s=e.iv,a=e.setIV,o=e.merge,u=e.setMerge,d=e.dragonflower,j=e.setDragonflower,b=e.blessing,p=e.setBlessing,h=e.support,O=e.toggleSupport,f=e.arena,k=e.toggleArena,v=e.resplendent,x=e.toggleResplendent,g=e.weapon,m=e.setWeapon,y=e.refine,w=e.setRefine,D=e.assist,B=e.setAssist,S=e.special,C=e.setSpecial,I=e.skillA,P=e.setSkillA,A=e.skillB,_=e.setSkillB,T=e.skillC,M=e.setSkillC,E=e.seal,N=e.setSeal,R=e.setDefaultWeapon,H=e.setDefaultAssist,W=e.setDefaultSpecial,F=e.setDefaultSkillA,L=e.setDefaultSkillB,z=e.setDefaultSkillC,V=e.setAllSkillDefault,Y=e.lv1,q=e.toggleLv1,U=e.maxSkill,J=e.toggleMaxSkill,X=e.bg,K=e.editorIsOpen,Z=e.openEditor,Q=e.closeEditor;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(l.a,{children:Object(r.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),Object(r.jsx)("div",{style:{background:"url('".concat(X,"') center / cover no-repeat fixed")},children:Object(r.jsxs)("div",{className:Er.a.container,children:[Object(r.jsx)("div",{className:Er.a.viewer,children:Object(r.jsx)(ot,{heroId:t,rarity:c,iv:s,merge:o,dragonflower:d,blessing:b,support:h,arena:f,resplendent:v,weapon:g,refine:y,assist:D,special:S,skillA:I,skillB:A,skillC:T,seal:E,lv1:Y,openEditor:Z})}),Object(r.jsx)("div",{className:Er.a.editor,hidden:!K,children:Object(r.jsx)(Tr,{heroId:t,onChangeHero:n,rarity:c,setRarity:i,iv:s,setIV:a,merge:o,setMerge:u,dragonflower:d,setDragonflower:j,blessing:b,setBlessing:p,support:h,toggleSupport:O,arena:f,toggleArena:k,resplendent:v,toggleResplendent:x,weapon:g,setWeapon:m,refine:y,setRefine:w,assist:D,setAssist:B,special:S,setSpecial:C,skillA:I,setSkillA:P,skillB:A,setSkillB:_,skillC:T,setSkillC:M,seal:E,setSeal:N,setDefaultWeapon:R,setDefaultAssist:H,setDefaultSpecial:W,setDefaultSkillA:F,setDefaultSkillB:L,setDefaultSkillC:z,setAllSkillDefault:V,lv1:Y,toggleLv1:q,maxSkill:U,toggleMaxSkill:J,closeEditor:Q})})]})})]})};var Fr=!0;t.default=function(e){var t=e.db;return Object(r.jsx)(c.a.Provider,{value:t,children:Object(r.jsx)(Wr,{})})}},EMxf:function(e,t,n){e.exports={canvas:"unitviewer_canvas__1B3ct",container:"unitviewer_container__3VZmP",button:"unitviewer_button__2TX0S",download:"unitviewer_download__3Uy5D",menu:"unitviewer_menu__2M5q2"}},ORp4:function(e,t,n){e.exports={label:"labelcheckbox_label__2oYYn","label-checkbox":"labelcheckbox_label-checkbox__sIM3t"}},XJgP:function(e,t,n){e.exports={container:"styles_container__3csrI","neutral-button":"styles_neutral-button__2Xm3a","iv-button":"styles_iv-button__2PgFW"}},YnUv:function(e,t,n){e.exports={container:"uniteditor_container__1sFaN",viewer:"uniteditor_viewer__3R3bp",editor:"uniteditor_editor__3iyeY"}},dLxW:function(e,t,n){e.exports={container:"styles_container__1uNtQ","neutral-button":"styles_neutral-button__HXZYg","blessing-button":"styles_blessing-button__m41R8"}},jsgU:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return n("4NHs")}])},xjvT:function(e,t,n){e.exports={button:"editor_button__2Z2Kz",title:"editor_title__2zWFs","title-textgroup":"editor_title-textgroup__2jYvF",content:"editor_content__3FUd5",section:"editor_section__3UQua","section-group":"editor_section-group__2EmUU","hero-header":"editor_hero-header__3PATq","button-content":"editor_button-content__eni0J","editor-img":"editor_editor-img__2WL8i","close-button":"editor_close-button__38zOJ",container:"editor_container__2qbrs",input:"editor_input__3m_fH",options:"editor_options__v_lcK"}}},[["jsgU",0,2,1,3,4,5]]]);