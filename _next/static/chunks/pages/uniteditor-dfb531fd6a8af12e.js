(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{532:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return t(5958)}])},5958:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Pl}});var l=t(5893),r=t(9008),i=t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a=function(e){return(0,l.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){s(e,n,t[n])}))}return e}({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e,{children:[(0,l.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,l.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=function(e){return(0,l.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){o(e,n,t[n])}))}return e}({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e,{children:[(0,l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},u=t(3354),d=t(3846),h=t(6730),p=t(2734);function f(e){var n=e.sealDB,t=e.sealId;return n&&t?n.skillA[t]?n.skillA[t]:n.skillB[t]?n.skillB[t]:n.skillC[t]?n.skillC[t]:n.seal[t]?n.seal[t]:null:null}var k=t(1160),v=t(1541),x=t(2683);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,i=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);s=!0);}catch(o){a=!0,r=o}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b={atk:"atk",spd:"spd",def:"def",res:"res"};function B(e){var n=e.heroDB,t=e.weaponDB,l=e.assistDB,r=e.specialDB,i=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skillIds;return{weapon:(0,x.i7)({heroDB:n,weaponDB:t,heroId:c,weaponId:u.weaponId}),assist:(0,d.NV)({assistDB:l,assistId:u.assistId}),special:(0,v.cf)({specialDB:r,specialId:u.specialId}),skillA:(0,k.PU)({skillDB:i,skillId:u.skillAId}),skillB:(0,k.PU)({skillDB:s,skillId:u.skillBId}),skillC:(0,k.PU)({skillDB:a,skillId:u.skillCId}),seal:f({sealDB:o,sealId:u.sealId})}}var I=["assist","special","skillA","skillB","skillC","seal"];var j=t(2278),y={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var w=function(e){var n=e.rarity,t=void 0===n?5:n,l=e.merge,r=e.bst,i=e.spt,s=e.blesser,a=void 0===s?0:s,o=y[t];return 2*(150+o.base+o.float+2*l+Math.floor(r/5)+Math.floor(i/100)+4*a)};var C=t(5452);function D(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var S=function(){function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=n,this.imageData.onload=function(){t.loadedData=!0,t.callback&&t.callback(!0)},this.imageData.onerror=function(){t.loadedData=!1,t.callback&&t.callback(!1)}}var n,t,l;return n=e,(t=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&D(n.prototype,t),l&&D(n,l),e}();var _=t(243),A=16,O=554,P=_.s6;var M=174,T=555,N=["infantry","armored","cavalry","flying"];function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var E=1,H=43,Z=85,F=127,J=169,K=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,n,t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){R(e,n,t[n])}))}return e}({},e,R({},n,34*t+1))}),{});function V(e,n,t,l,r,i){K[l]&&e.drawImage(n,K[l],t,32,40,r,i,16,20)}var W=240,L=557,U=[14,28,42],G=["infantry","armored","cavalry","flying"];var z=432,Y=425;var q=432,X=425;var $=275,Q=594,ee=function(e,n,t){var l=37*t+1+Q;e.drawImage(n,$,l,35,35)};var ne=82,te=557,le=[14,28,42];var re=112,ie=557,se=[14,28,42];var ae=130,oe=594,ce=[14,28,42,56],ue=[1e3,100,10],de=function(e,n,t,l){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,i=8+oe+37*l;ue.forEach((function(l,s){if(t>=l){var a=Math.floor(t/l%10);V(e,n,r,a,ae+ce[s],i)}}));var s=t%10;V(e,n,r,s,ae+ce[3],i)};var he=465,pe=594;function fe(e){var n=e.context,t=e.numberAtlas,l=e.accelerate,r=e.specialCD;if(r){var i=H;l<0&&(i=Z),l>0&&(i=F),function(e,n,t){V(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,t,he,8+pe+74)}(n,t,Math.max(l+r,1),i)}}var ke=t(9298);function ve(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function xe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,i=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);s=!0);}catch(o){a=!0,r=o}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ve(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var me=206,ge=1224,be=["#ffa0af","white","#aaf0fa"],Be=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});function Ie(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var je=634,ye=1224,we={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var Ce=296,De=876,Se=336,_e=992;var Ae={x:460,y:530};var Oe=195,Pe=370;function Me(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function Te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){Te(e,n,t[n])}))}return e}function Re(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,i=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);s=!0);}catch(o){a=!0,r=o}finally{try{s||null==t.return||t.return()}finally{if(a)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Me(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Me(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ee=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"],["bloomIcon","/assets/Icon_FlowerBud.png"]],He=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var Ze=function(e){var n=e.heroId,t=e.rarity,l=e.iv,r=e.merge,s=e.dragonflower,a=e.blessing,o=e.support,c=e.arena,d=e.resplendent,p=e.mythicBonus1,f=e.mythicBonus2,k=e.mythicBonus3,v=e.mythicBonus4,x=e.bloom,m=e.weaponId,y=e.refine,D=e.assistId,_=e.specialId,R=e.skillAId,F=e.skillBId,K=e.skillCId,ae=e.sealId,oe=e.lv1,ce=(0,C.K)(),ue=(0,i.useRef)(null),he=(0,i.useRef)(null),pe=(0,i.useRef)(),ve=(0,i.useRef)(),Me=(0,i.useRef)(),Te=(0,i.useRef)(),Ze=(0,i.useRef)(),Fe=(0,i.useRef)(),Je=(0,i.useRef)(),Ke=(0,i.useRef)(),Ve=(0,i.useRef)(),We=(0,i.useRef)(),Le=(0,i.useRef)(),Ue=(0,i.useRef)(),Ge=(0,i.useRef)(),ze=(0,i.useRef)(),Ye=(0,i.useRef)(),qe=(0,i.useMemo)((function(){return(0,h.cK)(ce.heroDB,n)}),[ce.heroDB,n]),Xe=(0,i.useMemo)((function(){return{weaponId:m,assistId:D,specialId:_,skillAId:R,skillBId:F,skillCId:K,sealId:ae}}),[D,ae,R,F,K,_,m]),$e=qe.stats,Qe=(0,i.useMemo)((function(){return function(e){var n,t,l,r,i,s,a,o,c,u=e.heroDB,d=e.weaponDB,p=e.assistDB,f=e.specialDB,k=e.skillADB,v=e.skillBDB,x=e.skillCDB,m=e.sealDB,b=e.heroId,I=e.skillIds,j=e.refine,y=e.rarity,w=(0,h.cK)(u,b),C=B({heroDB:u,weaponDB:d,assistDB:p,specialDB:f,skillADB:k,skillBDB:v,skillCDB:x,sealDB:m,heroId:b,skillIds:I}),D={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},S=0,_=(null===(n=C.special)||void 0===n?void 0:n.cd)||0;S+=(null===(t=C.weapon)||void 0===t?void 0:t.cd)||0,S+=(null===(l=C.assist)||void 0===l?void 0:l.cd)||0,S+=(null===(r=C.skillA)||void 0===r?void 0:r.cd)||0,S+=(null===(i=C.skillB)||void 0===i?void 0:i.cd)||0,S+=(null===(s=C.skillC)||void 0===s?void 0:s.cd)||0,S+=(null===(a=C.seal)||void 0===a?void 0:a.cd)||0;var A={hp:0,atk:0,spd:0,def:0,res:0},O=0,P=0;Object.entries(C).forEach((function(e){var n=g(e,2),t=n[0],l=n[1];if(D[t]=(null===l||void 0===l?void 0:l.name)||"-",A.hp+=(null===l||void 0===l?void 0:l.hp)||0,A.atk+=((null===l||void 0===l?void 0:l.mt)||0)+((null===l||void 0===l?void 0:l.atk)||0),A.spd+=(null===l||void 0===l?void 0:l.spd)||0,A.def+=(null===l||void 0===l?void 0:l.def)||0,A.res+=(null===l||void 0===l?void 0:l.res)||0,O+=(null===l||void 0===l?void 0:l.sp)||0,5===y){var r=null===l||void 0===l?void 0:l.bst;w.blesser&&(null===l||void 0===l?void 0:l.bbst)&&(r=null===l||void 0===l?void 0:l.bbst),P=Math.max(r||0,P)}}));var M=null===(o=C.weapon)||void 0===o||null===(c=o.refine)||void 0===c?void 0:c[j];return M&&(A.hp+=M.hp||0,A.atk+=(M.mt||0)+(M.atk||0),A.spd+=M.spd||0,A.def+=M.def||0,A.res+=M.res||0,S+=M.cd||0,C.weapon.exclusive||(O+=50),5===y&&(P=Math.max(P,M.bst||0))),{names:D,stats:A,accelerate:S,specialCD:_,spt:O,bst:P}}({heroDB:ce.heroDB,weaponDB:ce.weaponDB,assistDB:ce.assistDB,specialDB:ce.specialDB,skillADB:ce.skillADB,skillBDB:ce.skillBDB,skillCDB:ce.skillCDB,sealDB:ce.sealDB,skillIds:Xe,heroId:n,refine:y,rarity:t})}),[Xe,n,y,t,ce.heroDB,ce.weaponDB,ce.assistDB,ce.specialDB,ce.skillADB,ce.skillBDB,ce.skillCDB,ce.sealDB]),en=(0,i.useMemo)((function(){return(0,j.f)({rarity:t,stats:$e,iv:l,merge:r,support:o,skillStats:Qe.stats,lv1:oe,arena:c,dragonflower:s,resplendent:d,mythicBonus1:p,mythicBonus2:f,mythicBonus3:k,mythicBonus4:v,bloom:x})}),[t,$e,l,r,o,Qe,oe,c,s,d,p,f,k,v,x]),nn=(0,i.useMemo)((function(){return w({rarity:t,merge:r,bst:Math.max(en.bst,Qe.bst,qe.bst||0),spt:Qe.spt})}),[t,r,en.bst,Qe.bst,Qe.spt,qe]),tn=(0,i.useRef)({}),ln=(0,i.useCallback)((function(){if(ue.current){var e=tn.current,n=e.background,t=e.foreground,l=e.foreground2,r=e.portrait,i=e.rarityAtlas,s=e.weaponTypeAtlas,a=e.moveTypeAtlas,o=e.dragonflowerAtlas,c=e.supportAtlas,u=e.blessingAtlas,d=e.numberAtlas,h=e.weaponIcon,p=e.assistIcon,f=e.specialIcon,k=e.textA,v=e.textB,x=e.textC,m=e.textS,g=e.arenaIcon,b=e.skillAIcon,B=e.skillBIcon,I=e.skillCIcon,j=e.sealIcon,y=e.resplendentIcon,w=e.bloomIcon,C=pe.current,D=C.title,S=C.name,_=C.weaponType,R=C.moveType,F=!!pe.current.blessing||!!Ve.current,K=ue.current.getContext("2d");K.clearRect(0,0,540,960),n.loaded&&function(e){var n=e.context,t=e.background;e.support?n.drawImage(t,540,0,540,960,0,0,540,960):n.drawImage(t,0,0,540,960,0,0,540,960)}({context:K,background:n.image,support:We.current}),r.loaded&&function(e){var n=e.context,t=e.portrait;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:K,portrait:r.image}),t.loaded&&function(e){var n=e.context,t=e.foreground;n.drawImage(t,0,0,540,960,0,0,540,960)}({context:K,foreground:t.image}),l.loaded&&function(e){var n=e.context,t=e.foreground2;e.dragonflower?n.drawImage(t,0,50,540,50,0,542,540,50):n.drawImage(t,0,0,540,50,0,542,540,50)}({context:K,foreground2:l.image,dragonflower:Je.current}),i.loaded&&function(e){var n=e.context,t=e.rarityAtlas;switch(e.rarity){case 5:n.drawImage(t,0,0,153,40,48,380,153,40);break;case 4:n.drawImage(t,0,41,153,40,42,380,153,40)}}({context:K,rarityAtlas:i.image,rarity:Te.current}),s.loaded&&function(e){var n=e.context,t=e.weaponTypeAtlas,l=e.weaponType,r=P.indexOf(l);r>-1&&n.drawImage(t,56*r,0,56,55,A,O,28,28)}({context:K,weaponTypeAtlas:s.image,weaponType:_}),a.loaded&&function(e){var n=e.context,t=e.moveTypeAtlas,l=e.moveType,r=N.indexOf(l);r>-1&&n.drawImage(t,56*r,0,52,52,M,T,26,26)}({context:K,moveTypeAtlas:a.image,moveType:R}),o.loaded&&d.loaded&&function(e){var n=e.context,t=e.dragonflowerAtlas,l=e.numberAtlas,r=e.moveType,i=e.dragonflower;if(i){var s=G.indexOf(r);s>-1&&n.drawImage(t,0,58*s,64,58,216,546,48,44);var a=0,o=H;V(n,l,o,"+",W+U[0],L),a+=1,i>9&&(V(n,l,o,Math.floor(i/10),W+U[a],L),a+=1),V(n,l,o,i%10,W+U[a],L)}}({context:K,dragonflowerAtlas:o.image,numberAtlas:d.image,moveType:R,dragonflower:Je.current}),c.loaded&&function(e){var n=e.context,t=e.supportAtlas,l=e.support,r=e.hasBlessing?108:0;l&&n.drawImage(t,z-r,Y,108,115)}({context:K,supportAtlas:c.image,support:We.current,hasBlessing:F}),u.loaded&&function(e){var n=e.context,t=e.blessingAtlas;n.drawImage(t,q,X,108,115)}({context:K,blessingAtlas:u.image}),d.loaded&&(!function(e){var n=e.context,t=e.numberAtlas,l=e.lv1?1:40,r=0;l>9&&V(n,t,H,4,ne+le[r],te),V(n,t,H,l%10,ne+le[r+=1],te)}({context:K,numberAtlas:d.image,lv1:ze.current}),function(e){var n=e.context,t=e.numberAtlas,l=e.merge;if(!(l<=0)){var r=0,i=l>9?J:H;V(n,t,i,"+",re+se[0],ie),r+=1,l>9&&(V(n,t,i,1,re+se[r],ie),r+=1),V(n,t,i,l%10,re+se[r],ie)}}({context:K,numberAtlas:d.image,merge:Fe.current}),function(e){var n=e.context,t=e.numberAtlas,l=e.stats,r=e.score,i=e.sbst,s=e.bst;Object.values(l).forEach((function(e,l){l>4||de(n,t,e,l,E)}));var a=i>s?Z:J;de(n,t,s,5,J),de(n,t,r,6,a)}(Ne({context:K,numberAtlas:d.image,score:Ye.current,sbst:Math.max(ve.current.bst||0,pe.current.bst||0)},Me.current)),fe({context:K,numberAtlas:d.image,accelerate:ve.current.accelerate,specialCD:ve.current.specialCD})),function(e){var n=e.context,t=e.weaponIcon,l=e.assistIcon,r=e.specialIcon,i=e.textA,s=e.textB,a=e.textC,o=e.textS,c=e.skillAIcon,u=e.skillBIcon,d=e.skillCIcon,h=e.sealIcon;t.loaded&&ee(n,t.image,0),l.loaded&&ee(n,l.image,1),r.loaded&&ee(n,r.image,2),c.loaded&&ee(n,c.image,3),n.drawImage(i.image,$+20,Q+112+18,18,18),u.loaded&&ee(n,u.image,4),n.drawImage(s.image,$+20,Q+149+18,18,18),d.loaded&&ee(n,d.image,5),n.drawImage(a.image,$+20,Q+186+18,18,18),h.loaded&&ee(n,h.image,6),n.drawImage(o.image,$+20,Q+223+18,18,18)}({context:K,weaponIcon:h,assistIcon:p,specialIcon:f,textA:k,textB:v,textC:x,textS:m,skillAIcon:b,skillBIcon:B,skillCIcon:I,sealIcon:j}),he.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var n=e.canvas,t=e.iv,l=e.merge,r=e.bloom,i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#101010",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8;var s=(0,ke.$r)(t),a=s.boon,o=s.bane,c={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};c[a]+=1,c[o]-=1,c[o]=l>0?1:c[o],r&&(c[r]=Math.min(2,c[r]+1)),Be.forEach((function(e,n){var t=xe(e,2),l=t[0],r=t[1],s=ge+74*n;i.fillStyle=be[c[l]],i.strokeText(r,me,s),i.fillText(r,me,s)}))}({canvas:he.current,iv:Ze.current,merge:Fe.current,bloom:Ke.current}),function(e){var n=e.canvas,t=e.refine,l=e.weapon,r=Ie(e,["canvas","refine","weapon"]),i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.textAlign="left",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeStyle="#101010",i.fillStyle=t&&"-"!==t?"lime":"white";var s=je+("-"===l?4:0),a=ye;i.strokeText(l,s,a),i.fillText(l,s,a),i.fillStyle="white",Object.keys(r).forEach((function(e){var n=r[e],t=ye+74*we[e],l="-"===n?4:0;i.strokeText(n,je+l,t),i.fillText(n,je+l,t)}))}(Ne({canvas:he.current,refine:Ge.current},ve.current.names)),function(e){var n=e.canvas,t=e.title,l=e.name,r=n.getContext("2d");r.font="500 50px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",r.fillStyle="white",r.strokeStyle="#220d00",r.textAlign="center",r.textBaseline="middle",r.lineJoin="round",r.lineWidth=8,r.strokeText(t,Ce,De),r.fillText(t,Ce,De),r.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",r.strokeText(l,Se,_e),r.fillText(l,Se,_e)}({canvas:he.current,title:D,name:S}),Le.current&&g&&function(e){var n=e.context,t=e.arenaIcon;n.drawImage(t,Ae.x,Ae.y,50,49)}({context:K,arenaIcon:g.image}),Ue.current&&y&&function(e){var n=e.context,t=e.resplendentIcon;n.drawImage(t,Oe,Pe,64,63)}({context:K,resplendentIcon:y.image}),Ke.current&&w&&function(e){var n=e.context,t=e.bloomIcon;n.drawImage(t,5,375,45,45)}({context:K,bloomIcon:w.image}),K.drawImage(he.current,0,0,540,960)}}),[]);(0,i.useEffect)((function(){he.current=document.createElement("canvas"),he.current.width=1080,he.current.height=1920}),[]),(0,i.useEffect)((function(){Ee.forEach((function(e){var n=Re(e,2),t=n[0],l=n[1];tn.current[t]=new S(ln),tn.current[t].load((0,u.Z)(l))}))}),[tn,ln]),(0,i.useEffect)((function(){var e=function(e){var n=e.resplendentDB,t=e.heroId;return e.enable&&(null===n||void 0===n?void 0:n.includes(t))?"".concat(t,"(R)"):t}({resplendentDB:ce.resplendentDB,heroId:qe.id,enable:d});tn.current.portrait.load((0,u.Z)("/portraits/".concat(e,".png")));var n=function(e){var n=e.heroDB,t=e.weaponDB,l=e.assistDB,r=e.specialDB,i=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skillIds,d=e.refine,h=B({heroDB:n,weaponDB:t,assistDB:l,specialDB:r,skillADB:i,skillBDB:s,skillCDB:a,sealDB:o,heroId:c,skillIds:u}),p={};if(I.forEach((function(e){var n=h[e];p[e]=(null===n||void 0===n?void 0:n.icon)&&"/skills/".concat(n.icon)})),d&&"-"!==d){var f,k,v,x=b[d]||(null===(f=h.weapon)||void 0===f||null===(k=f.refine)||void 0===k||null===(v=k[d])||void 0===v?void 0:v.icon);x&&(p.weapon="/skills/weapon/".concat(x,".png"))}return p}({heroDB:ce.heroDB,weaponDB:ce.weaponDB,assistDB:ce.assistDB,specialDB:ce.specialDB,skillADB:ce.skillADB,skillBDB:ce.skillBDB,skillCDB:ce.skillCDB,sealDB:ce.sealDB,skillIds:Xe,heroId:qe.id,refine:y});He.forEach((function(e){var t=e.skillName,l=e.empty;tn.current["".concat(t,"Icon")].load((0,u.Z)("".concat(n[t]||l)))}));var t="-"!==qe.blessing&&!!qe.blessing||!!a,l=(0,u.Z)("/assets/blessing-".concat(qe.blessing||a,".png"));tn.current.blessingAtlas.load(t?l:"")}),[qe,d,Xe,y,a,en,ce.heroDB,ce.weaponDB,ce.assistDB,ce.specialDB,ce.skillADB,ce.skillBDB,ce.skillCDB,ce.sealDB,ce.resplendentDB]),(0,i.useEffect)((function(){pe.current=qe,Te.current=t,Ze.current=l,Fe.current=r,Je.current=s,Ve.current=a,We.current=o,Le.current=c,Ue.current=d,Ge.current=y,ze.current=oe,Ye.current=nn,ve.current=Qe,Me.current=en,Ke.current=x,ln()}),[qe,t,l,r,s,a,o,c,d,y,oe,nn,Qe,en,x,ln]);var rn=(0,i.useCallback)((function(){var e=ue.current.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="".concat(null===qe||void 0===qe?void 0:qe.name,"-").concat(null===qe||void 0===qe?void 0:qe.title,".png"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[null===qe||void 0===qe?void 0:qe.name,null===qe||void 0===qe?void 0:qe.title]);return{canvasRef:ue,triggerDownload:rn}},Fe=t(2696),Je=t.n(Fe);function Ke(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function Ve(e){var n=e.openEditor,t=Ke(e,["openEditor"]),r=Ze(t),i=r.canvasRef,s=r.triggerDownload;return(0,l.jsxs)("div",{className:Je().container,children:[(0,l.jsx)("canvas",{className:Je().canvas,width:"540",height:"960",ref:i}),(0,l.jsx)("button",{className:"".concat(Je().button," ").concat(Je().download),onClick:s,children:(0,l.jsx)(a,{})}),(0,l.jsx)("button",{className:"".concat(Je().button," ").concat(Je().menu),onClick:n,children:(0,l.jsx)(c,{})})]})}var We=(0,i.memo)(Ve);function Le(e){return 4===e?"4\u2605":"5\u2606"}var Ue=[{name:"+\u653b\u64ca",value:"atk"},{name:"+\u901f\u5ea6",value:"spd"},{name:"+\u9632\u5b88",value:"def"},{name:"+\u9b54\u9632",value:"res"}];function Ge(e){var n=Ue.find((function(n){return e===n.value}));return(null===n||void 0===n?void 0:n.name)||"-"}var ze=[{name:"+HP",value:"hp"},{name:"+\u653b\u64ca",value:"atk"},{name:"+\u901f\u5ea6",value:"spd"},{name:"+\u9632\u5b88",value:"def"},{name:"+\u9b54\u9632",value:"res"}];function Ye(e){var n=ze.find((function(n){return e===n.value}));return(null===n||void 0===n?void 0:n.name)||"-"}var qe=t(8417),Xe=t(2008),$e=t.n(Xe);function Qe(){return(0,l.jsx)("div",{className:$e().checked})}var en=function(e){var n=e.className,t=e.checked,r=e.onChange,s=(0,i.useCallback)((function(e){r&&(e.stopPropagation(),r(!t))}),[t,r]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{role:"button",className:"".concat($e().button," ").concat(n),onClick:s,children:t&&(0,l.jsx)(Qe,{})})})},nn=t(7710),tn=t.n(nn);var ln=function(e){var n=e.children,t=e.checked,r=e.onChange;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("label",{className:tn().label,children:[n,(0,l.jsx)(en,{className:tn()["label-checkbox"],checked:t,onChange:r})]})})},rn=t(2718),sn=t(7413),an=t(5497),on=t.n(an);var cn=function(e){var n=e.blessing,t=(0,i.useMemo)((function(){return(0,sn._n)(n)}),[n]),r=t.src,s=t.name;return(0,l.jsxs)("div",{className:on().blessing,children:[r&&(0,l.jsx)(rn.Z,{src:r,loading:"lazy",width:"50px",height:"50px"}),(0,l.jsx)("div",{className:on()["blessing-name"],children:s})]})},un=t(5767),dn=t.n(un);var hn=function(e){var n=e.onClick;return(0,l.jsx)("button",{className:dn().button,onClick:n,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})};function pn(e){var n=e.hidden,t=e.style,r=e.children;return(0,l.jsx)("div",{hidden:n,className:dn().container,style:t,children:r})}function fn(e){var n=e.children,t=e.style;return(0,l.jsx)("div",{className:dn().title,style:t,children:n})}function kn(e){var n=e.children;return(0,l.jsx)("div",{className:dn()["title-textgroup"],children:n})}function vn(e){var n=e.children;return(0,l.jsx)("div",{className:dn().content,children:n})}function xn(e){var n=e.children;return(0,l.jsx)("div",{className:dn()["section-group"],children:n})}function mn(e){var n=e.children,t=e.disabled,r=e.onClick;return(0,l.jsx)("button",{className:"".concat(dn().button," ").concat(dn().section),disabled:t,onClick:r,children:n})}function gn(e){var n=e.children,t=e.style;return(0,l.jsx)("div",{className:dn()["button-content"],style:t,children:n})}function bn(e){var n=e.children;return(0,l.jsx)("div",{className:dn().optionsContainer,children:n})}function Bn(e){var n=e.children;return(0,l.jsx)("div",{className:dn().options,children:n})}function In(e){var n=e.children;return(0,l.jsx)("div",{className:dn().subTitle,children:n})}var jn=t(8219);function yn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var wn=function(e){var n=e.heroId,t=e.resplendent,r=(0,C.K)(),s=r.heroDB,a=r.dragonflowersDB,o=r.assistDB,c=r.resplendentDB,u=(0,i.useMemo)((function(){return(0,h.gO)({heroDB:s,dragonflowersDB:a,assistDB:o,resplendentDB:c,heroId:n,noStat:!0})}),[s,a,o,c,n]);return(0,l.jsx)(jn.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){yn(e,n,t[n])}))}return e}({},u,{faceSrc:t?u.faceSrcR:u.faceSrc}))};var Cn=function(e){var n=e.heroId,t=e.weaponId,r=(0,C.K)(),i=r.heroDB,s=r.weaponDB;return(0,l.jsx)(l.Fragment,{children:(0,x.fu)({heroDB:i,weaponDB:s,heroId:n,weaponId:t})})},Dn=t(8180);var Sn=function(e){var n=e.heroId,t=e.weaponId,r=e.refine,i=(0,C.K)(),s=i.heroDB,a=i.weaponDB,o=(0,x.Wu)({heroDB:s,weaponDB:a,heroId:n,weaponId:t,refine:r}),c=o.icon,u=o.name;return(0,l.jsxs)(l.Fragment,{children:[c&&(0,l.jsx)(Dn.JO,{src:"/skills/weapon/".concat(c,".png")}),u]})};var _n=function(e){var n=e.assistId,t=(0,C.K)().assistDB;return(0,l.jsx)(l.Fragment,{children:(0,d.sq)({assistDB:t,assistId:n})})};var An=function(e){var n=e.specialId,t=(0,C.K)().specialDB;return(0,l.jsx)(l.Fragment,{children:(0,v.R_)({specialDB:t,specialId:n})})},On=["skillA","skillB","skillC"];var Pn=function(e){var n=e.skillType,t=e.skillId,r=(0,C.K)();if(On.includes(n)){var i=r["".concat(n,"DB")],s=(0,k.cp)({skillDB:i,skillId:t}),a=s.icon,o=s.name;return(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsx)(Dn.JO,{src:"/skills/".concat(a)}),o]})}if("seal"===n){var c=function(e){var n=f({sealDB:e.sealDB,sealId:e.sealId});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({sealDB:r.sealDB,sealId:t}),u=c.icon,d=c.name;return(0,l.jsxs)(l.Fragment,{children:[u&&(0,l.jsx)(Dn.JO,{src:"/skills/".concat(u)}),d]})}return null};function Mn(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var Tn=function(e){var n=e.hidden,t=e.heroId,r=e.rarity,s=e.iv,a=e.merge,o=e.dragonflower,c=e.blessing,u=e.support,d=e.arena,p=e.resplendent,f=e.mythicBonus1,k=e.mythicBonus2,v=e.mythicBonus3,m=e.mythicBonus4,g=e.bloom,b=e.weaponId,B=e.refine,I=e.assistId,j=e.specialId,y=e.skillAId,w=e.skillBId,D=e.skillCId,S=e.sealId,_=e.lv1,A=e.maxSkill,O=Mn(e,["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","mythicBonus1","mythicBonus2","mythicBonus3","mythicBonus4","bloom","weaponId","refine","assistId","specialId","skillAId","skillBId","skillCId","sealId","lv1","maxSkill"]),P=function(e){var n=e.heroId,t=e.weaponId,l=e.maxSkill,r=(0,C.K)(),s=r.heroDB,a=r.weaponDB,o=(0,i.useMemo)((function(){return(0,h.cK)(s,n)}),[s,n]),c=(0,i.useMemo)((function(){if("Feh"===n)return!1;var e=(0,x.CB)({heroDB:s,weaponDB:a,heroId:n});return l?e.filter((function(e){return e.last})).length>0:e.length>0}),[s,a,n,l]),u=(0,i.useMemo)((function(){return"Feh"!==n&&(0,x.Mf)({heroDB:s,weaponDB:a,heroId:n,weaponId:t}).length>0}),[s,a,n,t]),d=(0,i.useMemo)((function(){return"Feh"!==n&&"mythic"===o.pool}),[n,o]);return"Feh"===n?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1,isMythic:!1}:{hasRarity:o.rarity.length>0,hasBlessing:!!o.blessing,hasWeapon:c,hasRefine:u,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:o.blessing,isMythic:d}}({heroId:t,weaponId:b,maxSkill:A}),M=P.hasRarity,T=P.hasBlessing,N=P.hasWeapon,R=P.hasRefine,E=P.hasAssist,H=P.hasSpecial,Z=P.hasSkillA,F=P.hasSkillB,J=P.hasSkillC,K=P.hasSeal,V=P.blessing,W=P.isMythic;return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsx)("button",{className:dn()["close-button"],onClick:O.closeEditor,children:(0,l.jsx)(qe.Z,{})}),(0,l.jsx)(fn,{children:(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:"\u82f1\u96c4"}),(0,l.jsx)(ln,{checked:_,onChange:O.toggleLv1,children:"Lv1"})]})}),(0,l.jsxs)(vn,{children:[(0,l.jsx)("button",{className:"".concat(dn().button," ").concat(dn()["hero-header"]),onClick:O.openHeroPicker,children:(0,l.jsx)(wn,{heroId:t,resplendent:p})}),(0,l.jsxs)(xn,{children:[(0,l.jsxs)(mn,{disabled:!M,onClick:O.openRarityPicker,children:["\u7a00\u6709\u5ea6",(0,l.jsx)(gn,{children:Le(r)})]}),(0,l.jsxs)(mn,{disabled:"Feh"===t,onClick:O.openIVPicker,children:["IV",(0,l.jsx)(gn,{children:(0,ke.Zx)(s)})]}),(0,l.jsxs)(mn,{disabled:T,onClick:O.openBlessingPicker,children:["\u795d\u798f",(0,l.jsx)(gn,{children:(0,l.jsx)(cn,{blessing:V||c})})]}),(0,l.jsxs)(mn,{onClick:O.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",(0,l.jsx)(gn,{children:a?"+".concat(a):"-"})]}),(0,l.jsxs)(mn,{onClick:O.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",(0,l.jsx)(gn,{children:o?"+".concat(o):"-"})]})]})]}),(0,l.jsx)(fn,{children:(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:"\u6280\u80fd"}),(0,l.jsx)(ln,{checked:A,onChange:O.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,l.jsx)(hn,{onClick:O.setAllSkillDefault})]})}),(0,l.jsxs)(vn,{children:[(0,l.jsxs)(xn,{children:[(0,l.jsxs)(mn,{disabled:!N,onClick:O.openWeaponPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",(0,l.jsx)(gn,{children:(0,l.jsx)(Cn,{heroId:t,weaponId:b})})]}),(0,l.jsxs)(mn,{disabled:!R,onClick:O.openRefinePicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",(0,l.jsx)(gn,{children:(0,l.jsx)(Sn,{heroId:t,weaponId:b,refine:B})})]})]}),(0,l.jsxs)(xn,{children:[(0,l.jsxs)(mn,{disabled:!E,onClick:O.openAssistPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",(0,l.jsx)(gn,{children:(0,l.jsx)(_n,{assistId:I})})]}),(0,l.jsxs)(mn,{disabled:!H,onClick:O.openSpecialPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",(0,l.jsx)(gn,{children:(0,l.jsx)(An,{specialId:j})})]})]}),(0,l.jsxs)(xn,{children:[(0,l.jsxs)(mn,{disabled:!Z,onClick:O.openSkillAPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",(0,l.jsx)(gn,{children:(0,l.jsx)(Pn,{skillType:"skillA",skillId:y})})]}),(0,l.jsxs)(mn,{disabled:!F,onClick:O.openSkillBPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",(0,l.jsx)(gn,{children:(0,l.jsx)(Pn,{skillType:"skillB",skillId:w})})]}),(0,l.jsxs)(mn,{disabled:!J,onClick:O.openSkillCPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",(0,l.jsx)(gn,{children:(0,l.jsx)(Pn,{skillType:"skillC",skillId:D})})]}),(0,l.jsxs)(mn,{disabled:!K,onClick:O.openSealPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",(0,l.jsx)(gn,{children:(0,l.jsx)(Pn,{skillType:"seal",skillId:S})})]})]})]}),(0,l.jsx)(fn,{children:"\u5f37\u5316"}),(0,l.jsxs)(vn,{children:[(0,l.jsxs)(xn,{children:[(0,l.jsxs)(mn,{onClick:O.toggleSupport,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"\u53ec\u559a\u5e2b\u5951\u7d04",(0,l.jsx)(en,{checked:u})]}),(0,l.jsxs)(mn,{onClick:O.toggleArena,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"\u9b25\u6280\u5834",(0,l.jsx)(en,{checked:d})]}),(0,l.jsxs)(mn,{onClick:O.toggleResplendent,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"\u795e\u88dd",(0,l.jsx)(en,{checked:p})]}),(0,l.jsxs)(mn,{disabled:"Feh"===t,onClick:O.openBloomPicker,children:[(0,l.jsx)(rn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Icon_FlowerBud.png"}),"\u7dbb\u653e",(0,l.jsx)(gn,{style:{height:"42px"},children:Ye(g)})]})]}),!W&&(0,l.jsxs)(xn,{children:[(0,l.jsxs)(mn,{disabled:"Feh"===t,onClick:O.openMythicBonus1,children:["\u795e\u968e1",(0,l.jsx)(gn,{children:Ge(f)})]}),(0,l.jsxs)(mn,{disabled:"Feh"===t,onClick:O.openMythicBonus2,children:["\u795e\u968e2",(0,l.jsx)(gn,{children:Ge(k)})]}),(0,l.jsxs)(mn,{disabled:"Feh"===t,onClick:O.openMythicBonus3,children:["\u795e\u968e3",(0,l.jsx)(gn,{children:Ge(v)})]}),(0,l.jsxs)(mn,{disabled:"Feh"===t,onClick:O.openMythicBonus4,children:["\u795e\u968e4",(0,l.jsx)(gn,{children:Ge(m)})]})]})]})]})},Nn=t(4074);function Rn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var En=function(e){return(0,l.jsxs)("svg",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){Rn(e,n,t[n])}))}return e}({width:"24",height:"24",viewBox:"0 0 24 24"},e,{children:[(0,l.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,l.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var Hn=function(e){var n=e.onClick;return(0,l.jsx)("button",{onClick:n,style:{backgroundColor:"transparent",display:"block"},children:(0,l.jsx)(En,{fill:"white"})})},Zn=t(1698),Fn=t.n(Zn);var Jn=function(e){var n=e.hidden,t=e.heroId,r=e.onChangeHero,s=e.onClickBack,a=e.resplendent,o=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),"\u82f1\u96c4"]}),(0,l.jsx)("div",{className:Fn().picker,children:(0,l.jsx)(Nn.Z,{heroId:t,onSelect:o,noDropdown:!0,resplendent:a})})]})},Kn=t(1865);var Vn=function(e){var n=e.hidden,t=e.rarity,r=e.selectRarity,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),"\u7a00\u6709\u5ea6"]}),(0,l.jsx)(Kn.Z,{rarity:t,minRarity:4,onSelect:a})]})},Wn=t(5711),Ln=t.n(Wn),Un=function(e){var n=e.iv,t=e.selectIV,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:Ln().container,children:[(0,l.jsx)("button",{className:Ln()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),ke.YM.map((function(e){return(0,l.jsx)("button",{className:Ln()["iv-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var Gn=function(e){var n=e.hidden,t=e.iv,r=e.selectIV,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),"IV"]}),(0,l.jsx)(Un,{iv:t,selectIV:a})]})},zn=t(2884),Yn=t.n(zn),qn=function(e){var n=e.blessing,t=e.selectBlessing,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:Yn().container,children:[(0,l.jsx)("button",{className:Yn()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),sn.YM.map((function(e){return(0,l.jsx)("button",{className:Yn()["blessing-button"],"data-active":n===e.value,value:e.value,onClick:r,children:(0,l.jsx)(cn,{blessing:e.value})},e.value)}))]})};var Xn=function(e){var n=e.hidden,t=e.blessing,r=e.selectBlessing,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),"IV"]}),(0,l.jsx)(qn,{blessing:t,selectBlessing:a})]})},$n=t(9365);var Qn=function(e){var n=e.hidden,t=e.merge,r=e.selectMerge,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),"\u7a81\u7834\u6b21\u6578"]}),(0,l.jsx)($n.Z,{merge:t,onSelect:a})]})},et=t(5431),nt=new Array(31).fill(0).map((function(e,n){return n}));var tt=function(e){var n=e.dragonflower,t=e.onSelect;return(0,l.jsx)(et.Z,{value:n,onSelect:t,options:nt})};var lt=function(e){var n=e.hidden,t=e.dragonflower,r=e.selectDragonflower,s=e.onClickBack,a=(0,i.useCallback)((function(e){r(e),s()}),[r,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),"\u795e\u9f8d\u4e4b\u82b1"]}),(0,l.jsx)(tt,{dragonflower:t,onSelect:a})]})},rt=t(1237),it=t.n(rt);var st=function(e){var n=e.active,t=e.last,r=e.hidden,i=e.value,s=e.children,a=e.onClick;return(0,l.jsx)("button",{className:it().button,"data-active":n,"data-last":t,value:i,onClick:a,hidden:r,children:s})};function at(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ot(e){var n=e.heroId,t=e.filter,l=e.maxSkill,r=(0,C.K)(),s=r.heroDB,a=r.weaponDB,o=(0,i.useMemo)((function(){return(0,x.CB)({heroDB:s,weaponDB:a,heroId:n})}),[n,s,a]),c=(0,i.useMemo)((function(){return o.map((function(e){var n=!1;return l&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){at(e,n,t[n])}))}return e}({},e,{hidden:n})}))}),[o,t,l]);return{options:c}}var ct=t(959);var ut=function(e){var n=e.active,t=e.weapon,r=e.hidden,i=e.onClick;return(0,l.jsx)(st,{active:n,last:t.last,hidden:r,value:t.id,onClick:i,children:(0,l.jsx)(ct.Z,{weapon:t})})};function dt(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function ht(e){var n=e.heroId,t=e.weaponId,r=e.selectWeaponId,s=ot({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,a=(0,i.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,l.jsxs)(Bn,{children:[(0,l.jsx)(st,{active:!t,value:"",onClick:a,children:"\u7121\u6b66\u5668"}),s.map((function(e){var n=e.hidden,r=dt(e,["hidden"]);return(0,l.jsx)(ut,{hidden:n,weapon:r,active:t===e.id,onClick:a},e.id)}))]})}var pt=(0,i.memo)(ht);var ft=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weaponId,a=e.selectWeaponId,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,i.useState)(""),h=d[0],p=d[1],f=(0,i.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,i.useCallback)((function(e){a(e),t()}),[a,t]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:t}),(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:"\u6b66\u5668"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,l.jsx)(hn,{onClick:u})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:f}),(0,l.jsx)(bn,{children:(0,l.jsx)(pt,{heroId:r,weaponId:s,filter:h,maxSkill:o,selectWeaponId:k})})]})};var kt=t(934),vt=t.n(kt);function xt(e){var n=e.children;return(0,l.jsx)("div",{className:vt().refineName,children:n})}function mt(e){var n=e.src;return(0,l.jsx)(rn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function gt(e){var n=e.children;return(0,l.jsx)("div",{className:vt().might,children:n})}function bt(e){var n=e.children;return(0,l.jsx)("div",{className:vt().extractStats,children:n})}function Bt(e){var n=e.children;return(0,l.jsx)("div",{className:vt().extractStat,children:n})}function It(e){var n=e.cd,t=e.children;return n?(0,l.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:t}):null}function jt(e){var n=e.children;return(0,l.jsx)("div",{style:{color:"salmon"},children:n})}var yt=function(e){return e>0?"+".concat(e):"".concat(e)};var wt=function(e){var n=e.active,t=e.hidden,r=e.refineType,i=e.refine,s=e.onClick;return(0,l.jsxs)(st,{active:n,last:!0,hidden:t,value:r,onClick:s,children:[(0,l.jsxs)(xt,{children:[i.icon&&(0,l.jsx)(mt,{src:i.icon}),i.name]}),i.mt&&(0,l.jsxs)(gt,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,l.jsxs)(It,{cd:i.cd,children:["\u5967\u7fa9 cd",yt(i.cd)]}),(0,l.jsxs)(bt,{children:[i.hp&&(0,l.jsxs)(Bt,{children:["HP ",yt(i.hp)]}),i.atk&&(0,l.jsxs)(Bt,{children:["\u653b\u64ca ",yt(i.atk)]}),i.spd&&(0,l.jsxs)(Bt,{children:["\u901f\u5ea6 ",yt(i.spd)]}),i.def&&(0,l.jsxs)(Bt,{children:["\u9632\u5b88 ",yt(i.def)]}),i.res&&(0,l.jsxs)(Bt,{children:["\u9b54\u9632 ",yt(i.res)]})]}),i.exclusive&&(0,l.jsx)(jt,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Ct(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function Dt(e){var n=e.heroId,t=e.weaponId,r=e.refine,s=e.selectRefine,a=function(e){var n=e.heroId,t=e.weaponId,l=(0,C.K)(),r=l.heroDB,s=l.weaponDB;return{options:(0,i.useMemo)((function(){return(0,x.Mf)({heroDB:r,weaponDB:s,heroId:n,weaponId:t})}),[r,s,n,t])}}({heroId:n,weaponId:t}).options,o=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]);return(0,l.jsxs)(Bn,{children:[(0,l.jsx)(st,{active:!r,value:"",onClick:o,children:"\u7121\u935b\u9020"}),a.map((function(e){var n=e.value,t=Ct(e,["value"]);return(0,l.jsx)(wt,{refineType:n,refine:t,active:r===n,onClick:o},n)}))]})}var St=(0,i.memo)(Dt);var _t=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weaponId,a=e.refine,o=e.selectRefine,c=(0,i.useCallback)((function(e){o(e),t()}),[o,t]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:t}),(0,l.jsx)(kn,{children:(0,l.jsx)("span",{children:"\u935b\u9020"})})]}),(0,l.jsx)(bn,{children:(0,l.jsx)(St,{heroId:r,weaponId:s,refine:a,selectRefine:c})})]})},At=t(6738),Ot=t(1728);function Pt(e){var n=e.active,t=e.hidden,r=e.skill,i=e.onClick;return(0,l.jsxs)(st,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(Dn.pp,{children:[(0,l.jsxs)(Dn.bP,{children:[r.icon&&(0,l.jsx)(Dn.JO,{src:"/skills/".concat(r.icon)}),r.name]}),(0,l.jsxs)(Dn.n0,{children:[r.sp,"SP"]})]}),r.mt&&(0,l.jsxs)(Dn.XR,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,l.jsxs)(Dn.eM,{cd:r.cd,children:["\u5967\u7fa9 cd",(0,Dn.lG)(r.cd)]}),(0,l.jsxs)(Dn.lJ,{children:[r.hp&&(0,l.jsxs)(Dn.i5,{children:["HP ",(0,Dn.lG)(r.hp)]}),r.atk&&(0,l.jsxs)(Dn.i5,{children:["\u653b\u64ca ",(0,Dn.lG)(r.atk)]}),r.spd&&(0,l.jsxs)(Dn.i5,{children:["\u901f\u5ea6 ",(0,Dn.lG)(r.spd)]}),r.def&&(0,l.jsxs)(Dn.i5,{children:["\u9632\u5b88 ",(0,Dn.lG)(r.def)]}),r.res&&(0,l.jsxs)(Dn.i5,{children:["\u9b54\u9632 ",(0,Dn.lG)(r.res)]})]}),r.exclusive&&(0,l.jsx)(Dn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Mt=(0,i.memo)(Pt);function Tt(e){var n=e.index,t=e.style,r=e.data,i=r.skillId,s=r.skills,a=r.onClick,o=s[n];return(0,l.jsx)("div",{style:t,children:(0,l.jsx)(Mt,{active:i===o.id,skill:o,onClick:a},o.id)})}function Nt(e){var n=e.heroId,t=e.weaponId,r=e.skillType,s=e.skillId,a=e.selectSkill,o=e.filter,c=e.maxSkill,u=(0,i.useCallback)((function(e){e.stopPropagation(),a(e.currentTarget.value)}),[a]),d=function(e){var n=e.heroId,t=e.weaponId,l=e.skillType,r=e.filter,s=e.maxSkill,a=(0,C.K)(),o=a.rules2DB,c=a.heroDB,u=a.weaponDB,d=a["".concat(l,"DB")],h=(0,i.useMemo)((function(){return(0,k.AY)({rules2DB:o,heroDB:c,weaponDB:u,skillDB:d,heroId:n,weaponId:t})}),[o,c,u,d,n,t]),p=(0,i.useMemo)((function(){var e={};h.forEach((function(n){s&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[s,h]),f=(0,i.useState)([]),v=f[0],x=f[1],m=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;x((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),g=(0,i.useMemo)((function(){return h.filter((function(e){return!(s&&!e.last)&&!(r&&!e.query.includes(r.toLowerCase()))&&!(v.length&&!v.includes(e.sp))}))}),[h,r,s,v]);return(0,i.useEffect)((function(){x((function(e){return e.filter((function(e){return p.includes(e)}))}))}),[p]),{options:g,spOptions:p,spChecked:v,onCheckSp:m}}({heroId:n,weaponId:t,skillType:r,skillId:s,filter:o,maxSkill:c}),h=d.options,p=d.spOptions,f=d.spChecked,v=d.onCheckSp,x=(0,i.useMemo)((function(){return{skillId:s,skills:h,onClick:u}}),[s,h,u]),m=(0,i.useCallback)((function(e){var n=h[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[h]),g=(0,i.useCallback)((function(e){return h[e].id}),[h]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:p.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":f.includes(e),onClick:v,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(Ot.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(At.S_,{width:n,height:t,itemCount:h.length,itemSize:m,itemData:x,itemKey:g,children:Tt},h.length)}})})]})}var Rt=(0,i.memo)(Nt);function Et(e){var n=e.heroId,t=e.weaponId,r=e.skillType,i=e.skillId,s=e.selectSkill,a=e.filter,o=e.maxSkill;return(0,l.jsxs)(Bn,{children:[(0,l.jsx)(st,{active:!i,value:"",onClick:function(){return s("")},children:"\u7121\u6280\u80fd"}),(0,l.jsx)(Rt,{heroId:n,weaponId:t,skillType:r,skillId:i,selectSkill:s,filter:a,maxSkill:o})]})}var Ht=(0,i.memo)(Et);var Zt=function(e){var n=e.hidden,t=e.skillType,r=e.title,s=e.onClickBack,a=e.heroId,o=e.weaponId,c=e.skillId,u=e.selectSkill,d=e.maxSkill,h=e.toggleMaxSkill,p=e.setDefaultSkill,f=(0,i.useState)(""),k=f[0],v=f[1],x=(0,i.useCallback)((function(e){v(e.currentTarget.value)}),[]),m=(0,i.useCallback)((function(e){u(e),s()}),[u,s]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:s}),(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:r}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:d,onChange:h,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),p&&(0,l.jsx)(hn,{onClick:p})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:x}),(0,l.jsx)(bn,{children:(0,l.jsx)(Ht,{heroId:a,weaponId:o,skillType:t,skillId:c,selectSkill:m,filter:k,maxSkill:d})})]})};function Ft(e){var n=e.active,t=e.hidden,r=e.assist,i=e.onClick;return(0,l.jsxs)(st,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(Dn.pp,{children:[(0,l.jsx)(Dn.bP,{children:r.name}),(0,l.jsxs)(Dn.n0,{children:[r.sp,"SP"]})]}),r.exclusive&&(0,l.jsx)(Dn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Jt=(0,i.memo)(Ft);function Kt(e){var n=e.index,t=e.style,r=e.data,i=r.assistId,s=r.assists,a=r.onClick,o=s[n];return(0,l.jsx)("div",{style:t,children:(0,l.jsx)(Jt,{active:i===o.id,assist:o,onClick:a},o.id)})}function Vt(e){var n=e.heroId,t=e.assistId,r=e.selectAssist,s=e.filter,a=e.maxSkill,o=(0,i.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]),c=function(e){var n=e.heroId,t=e.filter,l=e.maxSkill,r=(0,C.K)(),s=r.rules2DB,a=r.heroDB,o=r.assistDB,c=(0,i.useMemo)((function(){return(0,d.Gt)({rules2DB:s,heroDB:a,assistDB:o,heroId:n})}),[s,a,o,n]),u=(0,i.useMemo)((function(){var e={};c.forEach((function(n){l&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[l,c]),h=(0,i.useState)([]),p=h[0],f=h[1],k=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;f((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),v=(0,i.useMemo)((function(){return c.filter((function(e){return!(l&&!e.last)&&!(t&&!e.query.includes(t.toLowerCase()))&&!(p.length&&!p.includes(e.sp))}))}),[c,t,l,p]);return{options:v,spOptions:u,spChecked:p,onCheckSp:k}}({heroId:n,filter:s,maxSkill:a}),u=c.options,h=c.spOptions,p=c.spChecked,f=c.onCheckSp,k=(0,i.useMemo)((function(){return{assistId:t,assists:u,onClick:o}}),[t,u,o]),v=(0,i.useCallback)((function(e){var n=u[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[u]),x=(0,i.useCallback)((function(e){return u[e].id}),[u]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:h.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:f,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(Ot.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(At.S_,{width:n,height:t,itemCount:u.length,itemSize:v,itemData:k,itemKey:x,children:Kt},u.length)}})})]})}var Wt=(0,i.memo)(Vt);function Lt(e){var n=e.heroId,t=e.assist,r=e.selectAssist,s=e.filter,a=e.maxSkill,o=(0,i.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,l.jsxs)(Bn,{children:[(0,l.jsx)(st,{active:!t,value:"",onClick:o,children:"\u7121\u6280\u80fd"}),(0,l.jsx)(Wt,{heroId:n,assistId:t,filter:s,maxSkill:a,selectAssist:r})]})}var Ut=(0,i.memo)(Lt);var Gt=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.assist,a=e.selectAssist,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,i.useState)(""),h=d[0],p=d[1],f=(0,i.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,i.useCallback)((function(e){a(e),t()}),[a,t]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:t}),(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:"\u652f\u63f4"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,l.jsx)(hn,{onClick:u})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,l.jsx)(bn,{children:(0,l.jsx)(Ut,{heroId:r,assist:s,selectAssist:k,filter:h,maxSkill:o})})]})};function zt(e){var n=e.heroId,t=e.weaponId,l=e.filter,r=e.maxSkill,s=(0,C.K)(),a=s.rules2DB,o=s.heroDB,c=s.weaponDB,u=s.specialDB,d=(0,i.useMemo)((function(){return(0,v.TZ)({rules2DB:a,heroDB:o,weaponDB:c,specialDB:u,heroId:n,weaponId:t})}),[a,o,c,u,n,t]),h=(0,i.useMemo)((function(){var e={};d.forEach((function(n){r&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[r,d]),p=(0,i.useState)([]),f=p[0],k=p[1],x=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;k((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),m=(0,i.useMemo)((function(){return d.filter((function(e){return!(r&&!e.last)&&(!(l&&!e.query.includes(l.toLowerCase()))&&!(f.length&&!f.includes(e.sp)))}))}),[d,l,r,f]);return(0,i.useEffect)((function(){k((function(e){return e.filter((function(e){return h.includes(e)}))}))}),[h]),{options:m,spOptions:h,spChecked:f,onCheckSp:x}}function Yt(e){var n=e.active,t=e.hidden,r=e.special,i=e.onClick;return(0,l.jsxs)(st,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(Dn.pp,{children:[(0,l.jsx)(Dn.bP,{children:r.name}),(0,l.jsxs)(Dn.n0,{children:[r.sp,"SP"]})]}),(0,l.jsxs)("div",{children:["CD ",r.cd]}),r.exclusive&&(0,l.jsx)(Dn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var qt=(0,i.memo)(Yt);function Xt(e){var n=e.index,t=e.style,r=e.data,i=r.special,s=r.skills,a=r.onClick,o=s[n];return(0,l.jsx)("div",{style:t,children:(0,l.jsx)(qt,{active:i===o.id,special:o,onClick:a},o.id)})}function $t(e){var n=e.heroId,t=e.weaponId,r=e.special,s=e.selectSpecial,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]),u=zt({heroId:n,weaponId:t,special:r,filter:a,maxSkill:o}),d=u.options,h=u.spOptions,p=u.spChecked,f=u.onCheckSp,k=(0,i.useMemo)((function(){return{special:r,skills:d,onClick:c}}),[r,d,c]),v=(0,i.useCallback)((function(e){var n=d[e],t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[d]),x=(0,i.useCallback)((function(e){return d[e].id}),[d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:h.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:f,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(Ot.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(At.S_,{width:n,height:t,itemCount:d.length,itemSize:v,itemData:k,itemKey:x,children:Xt},d.length)}})})]})}var Qt=(0,i.memo)($t);function el(e){var n=e.heroId,t=e.weaponId,r=e.special,s=e.selectSpecial,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]);return(0,l.jsxs)(Bn,{children:[(0,l.jsx)(st,{active:!r,value:"",onClick:c,children:"\u7121\u6280\u80fd"}),(0,l.jsx)(Qt,{heroId:n,weaponId:t,special:r,selectSpecial:s,filter:a,maxSkill:o})]})}var nl=(0,i.memo)(el);var tl=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weaponId,a=e.special,o=e.selectSpecial,c=e.maxSkill,u=e.toggleMaxSkill,d=e.setDefaultSkill,h=(0,i.useState)(""),p=h[0],f=h[1],k=(0,i.useCallback)((function(e){f(e.currentTarget.value)}),[]),v=(0,i.useCallback)((function(e){o(e),t()}),[o,t]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:t}),(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:"\u5967\u7fa9"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(ln,{checked:c,onChange:u,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),d&&(0,l.jsx)(hn,{onClick:d})]})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:k}),(0,l.jsx)(bn,{children:(0,l.jsx)(nl,{heroId:r,weaponId:s,special:a,selectSpecial:v,filter:p,maxSkill:c})})]})};function ll(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function rl(e){return function(e){if(Array.isArray(e))return ll(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return ll(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ll(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function il(e){var n=e.active,t=e.hidden,r=e.skill,i=e.onClick;return(0,l.jsxs)(st,{active:n,last:r.last,hidden:t,value:r.id,onClick:i,children:[(0,l.jsxs)(Dn.pp,{children:[(0,l.jsxs)(Dn.bP,{children:[r.icon&&(0,l.jsx)(Dn.JO,{src:"/skills/".concat(r.icon)}),r.name]}),r.sp&&(0,l.jsxs)(Dn.n0,{children:[r.sp,"SP"]})]}),r.mt&&(0,l.jsxs)(Dn.XR,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,l.jsxs)(Dn.eM,{cd:r.cd,children:["\u5967\u7fa9 cd",(0,Dn.lG)(r.cd)]}),(0,l.jsxs)(Dn.lJ,{children:[r.hp&&(0,l.jsxs)(Dn.i5,{children:["HP ",(0,Dn.lG)(r.hp)]}),r.atk&&(0,l.jsxs)(Dn.i5,{children:["\u653b\u64ca ",(0,Dn.lG)(r.atk)]}),r.spd&&(0,l.jsxs)(Dn.i5,{children:["\u901f\u5ea6 ",(0,Dn.lG)(r.spd)]}),r.def&&(0,l.jsxs)(Dn.i5,{children:["\u9632\u5b88 ",(0,Dn.lG)(r.def)]}),r.res&&(0,l.jsxs)(Dn.i5,{children:["\u9b54\u9632 ",(0,Dn.lG)(r.res)]})]}),r.exclusive&&(0,l.jsx)(Dn.Z4,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var sl=(0,i.memo)(il);function al(e){var n=e.index,t=e.style,r=e.data,i=r.seal,s=r.skills,a=r.onClick,o=s[n];return"_sealA"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(In,{children:"A\u6280\u80fd\u8056\u5370"})}):"_sealB"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(In,{children:"B\u6280\u80fd\u8056\u5370"})}):"_sealC"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(In,{children:"C\u6280\u80fd\u8056\u5370"})}):"_seal"===o.id?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(In,{children:"\u5c08\u7528\u8056\u5370"})}):(0,l.jsx)("div",{style:t,children:(0,l.jsx)(sl,{active:i===o.id,skill:o,onClick:a},o.id)})}function ol(e){var n=e.heroId,t=e.weaponId,r=e.seal,s=e.selectSeal,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]),u=function(e){var n=e.heroId,t=e.weaponId,l=e.filter,r=e.maxSkill,s=(0,C.K)(),a=s.rules2DB,o=s.heroDB,c=s.weaponDB,u=s.sealDB,d=(0,i.useMemo)((function(){var e=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.skillA,heroId:n,weaponId:t}),l=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.skillB,heroId:n,weaponId:t}),r=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.skillC,heroId:n,weaponId:t}),i=(0,k.AY)({rules2DB:a,heroDB:o,weaponDB:c,skillDB:u.seal,heroId:n,weaponId:t});return[{id:"_sealA",name:"A\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}].concat(rl(e),[{id:"_sealB",name:"B\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}],rl(l),[{id:"_sealC",name:"C\u6280\u80fd\u8056\u5370",sp:0,icon:"",query:""}],rl(r),[{id:"_seal",name:"\u5c08\u7528\u8056\u5370",sp:0,icon:"",query:""}],rl(i))}),[a,o,c,u,n,t]),h=(0,i.useMemo)((function(){var e={};d.forEach((function(n){r&&!n.last||(e[n.sp]=n.sp)}));var n=Object.values(e).filter((function(e){return!!e}));return n.length<2?[]:n.sort((function(e,n){return e-n}))}),[r,d]),p=(0,i.useState)([]),f=p[0],v=p[1],x=(0,i.useCallback)((function(e){var n=+e.currentTarget.value;v((function(e){return e.includes(n)?e.filter((function(e){return n!==e})):(e.push(n),e.slice())}))}),[]),m=(0,i.useMemo)((function(){return d.filter((function(e){return!!["_sealA","_sealB","_sealC","_seal"].includes(e.id)||!(r&&!e.last)&&!(l&&!e.query.includes(l.toLowerCase()))&&!(f.length&&!f.includes(e.sp))}))}),[d,l,r,f]);return(0,i.useEffect)((function(){v((function(e){return e.filter((function(e){return h.includes(e)}))}))}),[h]),{options:m,spOptions:h,spChecked:f,onCheckSp:x}}({heroId:n,weaponId:t,filter:a,maxSkill:o}),d=u.options,h=u.spOptions,p=u.spChecked,f=u.onCheckSp,v=(0,i.useMemo)((function(){return{seal:r,skills:d,onClick:c}}),[r,d,c]),x=(0,i.useCallback)((function(e){var n=d[e];if(["_sealA","_sealB","_sealC","_seal"].includes(n.id))return 44;var t=40;return(n.mt||n.cd)&&(t+=24),(n.hp||n.atk||n.spd||n.def||n.res)&&(t+=24),n.exclusive&&(t+=24),t+=18}),[d]),m=(0,i.useCallback)((function(e){return d[e].id}),[d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:dn().spButtons,children:h.map((function(e){return(0,l.jsx)("button",{type:"button",value:e,"data-active":p.includes(e),onClick:f,children:e},e)}))}),(0,l.jsx)("div",{className:dn().listItems,children:(0,l.jsx)(Ot.Z,{children:function(e){var n=e.width,t=e.height;return(0,l.jsx)(At.S_,{width:n,height:t,itemCount:d.length,itemSize:x,itemData:v,itemKey:m,children:al},d.length)}})})]})}var cl=(0,i.memo)(ol);function ul(e){var n=e.heroId,t=e.weaponId,r=e.seal,s=e.selectSeal,a=e.filter,o=e.maxSkill,c=(0,i.useCallback)((function(e){e.stopPropagation(),s(e.currentTarget.value)}),[s]);return(0,l.jsxs)(Bn,{children:[(0,l.jsx)(st,{active:!r,value:"",onClick:c,children:"\u7121\u8056\u5370"}),(0,l.jsx)(cl,{heroId:n,weaponId:t,seal:r,selectSeal:s,filter:a,maxSkill:o})]})}var dl=(0,i.memo)(ul);var hl=function(e){var n=e.hidden,t=e.onClickBack,r=e.heroId,s=e.weaponId,a=e.seal,o=e.selectSeal,c=e.maxSkill,u=e.toggleMaxSkill,d=(0,i.useState)(""),h=d[0],p=d[1],f=(0,i.useCallback)((function(e){p(e.currentTarget.value)}),[]),k=(0,i.useCallback)((function(e){o(e),t()}),[o,t]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:t}),(0,l.jsxs)(kn,{children:[(0,l.jsx)("span",{children:"\u8056\u5370"}),(0,l.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,l.jsx)(ln,{checked:c,onChange:u,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),(0,l.jsx)("input",{className:dn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,l.jsx)(bn,{children:(0,l.jsx)(dl,{heroId:r,weaponId:s,seal:a,selectSeal:k,filter:h,maxSkill:c})})]})},pl=t(7861),fl=t.n(pl),kl=function(e){var n=e.bonus,t=e.selectBonus,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:fl().container,children:[(0,l.jsx)("button",{className:fl()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),Ue.map((function(e){return(0,l.jsx)("button",{className:fl()["bonus-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var vl=function(e){var n=e.hidden,t=e.title,r=e.bonus,s=e.selectBonus,a=e.onClickBack,o=(0,i.useCallback)((function(e){s(e),a()}),[s,a]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:a}),t]}),(0,l.jsx)(kl,{bonus:r,selectBonus:o})]})},xl=t(4299),ml=t.n(xl),gl=function(e){var n=e.bloom,t=e.selectBloom,r=(0,i.useCallback)((function(e){e.stopPropagation(),t(e.currentTarget.value)}),[t]);return(0,l.jsxs)("div",{className:ml().container,children:[(0,l.jsx)("button",{className:ml()["neutral-button"],"data-active":!n,value:"",onClick:r,children:"-"}),ze.map((function(e){return(0,l.jsx)("button",{className:ml()["bloom-button"],"data-active":n===e.value,value:e.value,onClick:r,children:e.name},e.value)}))]})};var bl=function(e){var n=e.hidden,t=e.title,r=e.bloom,s=e.setBloom,a=e.onClickBack,o=(0,i.useCallback)((function(e){s(e),a()}),[s,a]);return(0,l.jsxs)(pn,{hidden:n,children:[(0,l.jsxs)(fn,{children:[(0,l.jsx)(Hn,{onClick:a}),t]}),(0,l.jsx)(gl,{bloom:r,selectBloom:o})]})};var Bl=function(){var e=(0,i.useState)(""),n=e[0],t=e[1],l=(0,i.useCallback)((function(){t("hero")}),[]),r=(0,i.useCallback)((function(){t("rarity")}),[]),s=(0,i.useCallback)((function(){t("iv")}),[]),a=(0,i.useCallback)((function(){t("merge")}),[]),o=(0,i.useCallback)((function(){t("dragonflower")}),[]),c=(0,i.useCallback)((function(){t("blessing")}),[]),u=(0,i.useCallback)((function(){t("weapon")}),[]),d=(0,i.useCallback)((function(){t("refine")}),[]),h=(0,i.useCallback)((function(){t("assist")}),[]),p=(0,i.useCallback)((function(){t("special")}),[]),f=(0,i.useCallback)((function(){t("skillA")}),[]),k=(0,i.useCallback)((function(){t("skillB")}),[]),v=(0,i.useCallback)((function(){t("skillC")}),[]),x=(0,i.useCallback)((function(){t("seal")}),[]),m=(0,i.useCallback)((function(){t("mythic1")}),[]),g=(0,i.useCallback)((function(){t("mythic2")}),[]),b=(0,i.useCallback)((function(){t("mythic3")}),[]),B=(0,i.useCallback)((function(){t("mythic4")}),[]);return{view:n,openHeroPicker:l,openRarityPicker:r,openIVPicker:s,openMergePicker:a,openDragonflowerPicker:o,openBlessingPicker:c,openBloomPicker:(0,i.useCallback)((function(){t("bloom")}),[]),openWeaponPicker:u,openRefinePicker:d,openAssistPicker:h,openSpecialPicker:p,openSkillAPicker:f,openSkillBPicker:k,openSkillCPicker:v,openSealPicker:x,openMythicBonus1:m,openMythicBonus2:g,openMythicBonus3:b,openMythicBonus4:B,onClickBack:(0,i.useCallback)((function(){t("")}),[])}};function Il(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function jl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){Il(e,n,t[n])}))}return e}var yl=function(e){var n=Bl(),t=n.view,r=n.openHeroPicker,i=n.openRarityPicker,s=n.openIVPicker,a=n.openMergePicker,o=n.openDragonflowerPicker,c=n.openBlessingPicker,u=n.openBloomPicker,d=n.openWeaponPicker,h=n.openRefinePicker,p=n.openAssistPicker,f=n.openSpecialPicker,k=n.openSkillAPicker,v=n.openSkillBPicker,x=n.openSkillCPicker,m=n.openSealPicker,g=n.openMythicBonus1,b=n.openMythicBonus2,B=n.openMythicBonus3,I=n.openMythicBonus4,j=n.onClickBack;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Tn,jl({hidden:!!t},e,{openHeroPicker:r,openRarityPicker:i,openIVPicker:s,openMergePicker:a,openDragonflowerPicker:o,openBlessingPicker:c,openWeaponPicker:d,openRefinePicker:h,openAssistPicker:p,openSpecialPicker:f,openSkillAPicker:k,openSkillBPicker:v,openSkillCPicker:x,openSealPicker:m,openMythicBonus1:g,openMythicBonus2:b,openMythicBonus3:B,openMythicBonus4:I,openBloomPicker:u})),(0,l.jsx)(Jn,{hidden:"hero"!==t,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:j,resplendent:e.resplendent}),(0,l.jsx)(Vn,{hidden:"rarity"!==t,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:j}),(0,l.jsx)(Gn,{hidden:"iv"!==t,iv:e.iv,selectIV:e.setIV,onClickBack:j}),(0,l.jsx)(Xn,{hidden:"blessing"!==t,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:j}),(0,l.jsx)(Qn,{hidden:"merge"!==t,merge:e.merge,selectMerge:e.setMerge,onClickBack:j}),(0,l.jsx)(lt,{hidden:"dragonflower"!==t,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:j}),(0,l.jsx)(ft,{hidden:"weapon"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,selectWeaponId:e.setWeaponId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,l.jsx)(_t,{hidden:"refine"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,refine:e.refine,selectRefine:e.setRefine}),(0,l.jsx)(Gt,{hidden:"assist"!==t,onClickBack:j,heroId:e.heroId,assist:e.assistId,selectAssist:e.setAssistId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),(0,l.jsx)(tl,{title:"\u5967\u7fa9",hidden:"special"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,special:e.specialId,selectSpecial:e.setSpecialId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),(0,l.jsx)(Zt,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillAId,selectSkill:e.setSkillAId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),(0,l.jsx)(Zt,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillBId,selectSkill:e.setSkillBId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),(0,l.jsx)(Zt,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,skillId:e.skillCId,selectSkill:e.setSkillCId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),(0,l.jsx)(hl,{hidden:"seal"!==t,onClickBack:j,heroId:e.heroId,weaponId:e.weaponId,seal:e.sealId,selectSeal:e.setSealId,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill}),(0,l.jsx)(vl,{hidden:"mythic1"!==t,title:"\u795e\u968e1",onClickBack:j,bonus:e.mythicBonus1,selectBonus:e.setMythicBonus1}),(0,l.jsx)(vl,{hidden:"mythic2"!==t,title:"\u795e\u968e2",onClickBack:j,bonus:e.mythicBonus2,selectBonus:e.setMythicBonus2}),(0,l.jsx)(vl,{hidden:"mythic3"!==t,title:"\u795e\u968e3",onClickBack:j,bonus:e.mythicBonus3,selectBonus:e.setMythicBonus3}),(0,l.jsx)(vl,{hidden:"mythic4"!==t,title:"\u795e\u968e4",onClickBack:j,bonus:e.mythicBonus4,selectBonus:e.setMythicBonus4}),(0,l.jsx)(bl,{hidden:"bloom"!==t,title:"\u7dbb\u653e",onClickBack:j,bloom:e.bloom,setBloom:e.setBloom})]})},wl=t(449),Cl=t(4411);function Dl(){var e=(0,C.K)(),n=e.rules2DB,t=e.heroDB,l=e.weaponDB,r=e.assistDB,s=e.specialDB,a=e.skillADB,o=e.skillBDB,c=e.skillCDB,f=e.sealDB,m=e.defaultSkillDB,g=(0,i.useState)("Feh"),b=g[0],B=g[1],I=(0,i.useState)(5),j=I[0],y=I[1],w=(0,i.useState)(""),D=w[0],S=w[1],_=(0,i.useState)(0),A=_[0],O=_[1],P=(0,i.useState)(0),M=P[0],T=P[1],N=(0,i.useState)(""),R=N[0],E=N[1],H=(0,i.useState)(!1),Z=H[0],F=H[1],J=(0,i.useCallback)((function(){F((function(e){return!e}))}),[]),K=(0,i.useState)(""),V=K[0],W=K[1],L=(0,i.useRef)({weaponId:"",assistId:"",specialId:"",skillAId:"",skillBId:"",skillCId:""}),U=(0,i.useRef)(""),G=(0,i.useRef)(""),z=(0,i.useState)(""),Y=z[0],q=z[1],X=(0,i.useState)(""),$=X[0],Q=X[1],ee=(0,i.useState)(""),ne=ee[0],te=ee[1],le=(0,i.useState)(""),re=le[0],ie=le[1],se=(0,i.useState)(""),ae=se[0],oe=se[1],ce=(0,i.useState)(""),ue=ce[0],de=ce[1],he=(0,i.useState)(""),pe=he[0],fe=he[1],ke=(0,i.useState)(""),ve=ke[0],xe=ke[1],me=(0,i.useState)(""),ge=me[0],be=me[1],Be=(0,i.useState)(""),Ie=Be[0],je=Be[1],ye=(0,i.useState)(""),we=ye[0],Ce=ye[1],De=(0,i.useState)(""),Se=De[0],_e=De[1],Ae=(0,i.useCallback)((function(){G.current=L.current.weaponId,q(L.current.weaponId),Q((function(e){return(0,x.J7)({heroDB:t,weaponDB:l,heroId:U.current,weaponId:L.current.weaponId,refineId:e})?e:""}))}),[t,l]),Oe=(0,i.useCallback)((function(e){q(e),Q((function(n){return n?(0,x.J7)({heroDB:t,weaponDB:l,heroId:U.current,weaponId:e,refineId:n})?n:"":n})),ie((function(r){return r?(0,v.Hh)({rules2DB:n,heroDB:t,weaponDB:l,specialDB:s,heroId:U.current,weaponId:e,specialId:r})?r:"":r})),oe((function(r){return r?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:a,heroId:U.current,weaponId:e,skillId:r})?r:"":r})),de((function(r){return r?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:o,heroId:U.current,weaponId:e,skillId:r})?r:"":r})),fe((function(r){return r?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:c,heroId:U.current,weaponId:e,skillId:r})?r:"":r}))}),[n,t,l,s,a,o,c]),Pe=(0,i.useCallback)((function(){te(L.current.assistId)}),[]),Me=(0,i.useCallback)((function(){L.current.specialId?(0,v.Hh)({rules2DB:n,heroDB:t,weaponDB:l,specialDB:s,heroId:U.current,weaponId:G.current,specialId:L.current.specialId})&&ie(L.current.specialId):ie(L.current.specialId)}),[n,t,l,s]),Te=(0,i.useCallback)((function(){L.current.skillAId?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:a,heroId:U.current,weaponId:G.current,skillId:L.current.skillAId})&&oe(L.current.skillAId):oe(L.current.skillAId)}),[n,t,l,a]),Ne=(0,i.useCallback)((function(){L.current.skillBId?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:o,heroId:U.current,weaponId:G.current,skillId:L.current.skillBId})&&de(L.current.skillBId):de(L.current.skillBId)}),[n,t,l,o]),Re=(0,i.useCallback)((function(){L.current.skillCId?(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:c,heroId:U.current,weaponId:G.current,skillId:L.current.skillCId})&&fe(L.current.skillCId):fe(L.current.skillCId)}),[n,t,l,c]),Ee=(0,i.useCallback)((function(){Ae(),Pe(),Me(),Te(),Ne(),Re()}),[Ae,Pe,Me,Te,Ne,Re]);U.current=b,G.current=Y;var He=(0,i.useCallback)((function(e){B(e),L.current=(0,Cl.N)({defaultSkillDB:m,heroId:e}),q((function(){return(0,x.Mw)({heroDB:t,weaponDB:l,heroId:e,weaponId:G.current})?G.current:""})),Q((function(n){return(0,x.J7)({heroDB:t,weaponDB:l,heroId:e,weaponId:G.current,refineId:n})?n:""})),te((function(l){return(0,d.ab)({rules2DB:n,heroDB:t,assistDB:r,heroId:e,assistId:l})?l:""})),ie((function(r){return(0,v.Hh)({rules2DB:n,heroDB:t,weaponDB:l,specialDB:s,heroId:e,weaponId:G.current,specialId:r})?r:""})),oe((function(r){return(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:a,heroId:e,weaponId:G.current,skillId:r})?r:""})),de((function(r){return(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:o,heroId:e,weaponId:G.current,skillId:r})?r:""})),fe((function(r){return(0,k.hJ)({rules2DB:n,heroDB:t,weaponDB:l,skillDB:c,heroId:e,weaponId:G.current,skillId:r})?r:""})),xe((function(l){var r=function(e){var n=e.rules2DB,t=e.heroDB,l=e.sealDB,r=e.heroId,i=e.sealId;if(!t||!l||!r||!i)return!1;var s=(0,h.cK)(t,r);if(!s)return!1;var a=l.skillA[i]||l.skillB[i]||l.skillC[i]||l.seal[i];return!!a&&(0,p.O)({rules2DB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType})}({rules2DB:n,heroDB:t,sealDB:f,heroId:e,sealId:l});return r?l:""}));var i="mythic"===(0,h.cK)(t,e).pool;be((function(e){return i?"":e})),je((function(e){return i?"":e})),Ce((function(e){return i?"":e})),_e((function(e){return i?"":e}))}),[n,t,l,r,s,a,o,c,f,m]),Ze=(0,i.useState)(!1),Fe=Ze[0],Je=Ze[1],Ke=(0,i.useCallback)((function(){Je((function(e){return!e}))}),[]),Ve=(0,i.useState)(!1),We=Ve[0],Le=Ve[1],Ue=(0,i.useCallback)((function(){Le((function(e){return!e}))}),[]),Ge=(0,i.useState)(!1),ze=Ge[0],Ye=Ge[1],qe=(0,i.useCallback)((function(){Ye((function(e){return!e}))}),[]),Xe=(0,i.useState)(!0),$e=Xe[0],Qe=Xe[1],en=(0,i.useCallback)((function(){Qe((function(e){return!e}))}),[]),nn=(0,i.useState)(!1),tn=nn[0],ln=nn[1],rn=(0,i.useCallback)((function(){ln(!0)}),[]),sn=(0,i.useCallback)((function(){ln(!1)}),[]),an=(0,u.Z)("/assets/summon-stone.jpg");return{heroId:b,onChangeHero:He,rarity:j,setRarity:y,iv:D,setIV:S,merge:A,setMerge:O,dragonflower:M,setDragonflower:T,blessing:R,setBlessing:E,support:Z,toggleSupport:J,arena:Fe,toggleArena:Ke,resplendent:We,toggleResplendent:Ue,bloom:V,setBloom:W,weaponId:Y,setWeaponId:Oe,refine:$,setRefine:Q,assistId:ne,setAssistId:te,specialId:re,setSpecialId:ie,skillAId:ae,setSkillAId:oe,skillBId:ue,setSkillBId:de,skillCId:pe,setSkillCId:fe,sealId:ve,setSealId:xe,mythicBonus1:ge,setMythicBonus1:be,mythicBonus2:Ie,setMythicBonus2:je,mythicBonus3:we,setMythicBonus3:Ce,mythicBonus4:Se,setMythicBonus4:_e,setDefaultWeapon:Ae,setDefaultAssist:Pe,setDefaultSpecial:Me,setDefaultSkillA:Te,setDefaultSkillB:Ne,setDefaultSkillC:Re,setAllSkillDefault:Ee,lv1:ze,toggleLv1:qe,maxSkill:$e,toggleMaxSkill:en,bg:an,editorIsOpen:tn,openEditor:rn,closeEditor:sn}}var Sl=t(7378),_l=t.n(Sl);function Al(){var e=Dl(),n=e.heroId,t=e.onChangeHero,i=e.rarity,s=e.setRarity,a=e.iv,o=e.setIV,c=e.merge,u=e.setMerge,d=e.dragonflower,h=e.setDragonflower,p=e.blessing,f=e.setBlessing,k=e.support,v=e.toggleSupport,x=e.arena,m=e.toggleArena,g=e.resplendent,b=e.toggleResplendent,B=e.bloom,I=e.setBloom,j=e.weaponId,y=e.setWeaponId,w=e.refine,C=e.setRefine,D=e.assistId,S=e.setAssistId,_=e.specialId,A=e.setSpecialId,O=e.skillAId,P=e.setSkillAId,M=e.skillBId,T=e.setSkillBId,N=e.skillCId,R=e.setSkillCId,E=e.sealId,H=e.setSealId,Z=e.mythicBonus1,F=e.setMythicBonus1,J=e.mythicBonus2,K=e.setMythicBonus2,V=e.mythicBonus3,W=e.setMythicBonus3,L=e.mythicBonus4,U=e.setMythicBonus4,G=e.setDefaultWeapon,z=e.setDefaultAssist,Y=e.setDefaultSpecial,q=e.setDefaultSkillA,X=e.setDefaultSkillB,$=e.setDefaultSkillC,Q=e.setAllSkillDefault,ee=e.lv1,ne=e.toggleLv1,te=e.maxSkill,le=e.toggleMaxSkill,re=e.bg,ie=e.editorIsOpen,se=e.openEditor,ae=e.closeEditor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.default,{children:(0,l.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),(0,l.jsx)("div",{style:{background:"url('".concat(re,"') center / cover no-repeat fixed")},children:(0,l.jsxs)("div",{className:_l().container,children:[(0,l.jsx)("div",{className:_l().viewer,children:(0,l.jsx)(We,{heroId:n,rarity:i,iv:a,merge:c,dragonflower:d,blessing:p,support:k,arena:x,resplendent:g,mythicBonus1:Z,mythicBonus2:J,mythicBonus3:V,mythicBonus4:L,bloom:B,weaponId:j,refine:w,assistId:D,specialId:_,skillAId:O,skillBId:M,skillCId:N,sealId:E,lv1:ee,openEditor:se})}),(0,l.jsx)("div",{className:_l().editor,hidden:!ie,children:(0,l.jsx)(yl,{heroId:n,onChangeHero:t,rarity:i,setRarity:s,iv:a,setIV:o,merge:c,setMerge:u,dragonflower:d,setDragonflower:h,blessing:p,setBlessing:f,support:k,toggleSupport:v,arena:x,toggleArena:m,resplendent:g,toggleResplendent:b,bloom:B,setBloom:I,weaponId:j,setWeaponId:y,refine:w,setRefine:C,assistId:D,setAssistId:S,specialId:_,setSpecialId:A,skillAId:O,setSkillAId:P,skillBId:M,setSkillBId:T,skillCId:N,setSkillCId:R,sealId:E,setSealId:H,mythicBonus1:Z,setMythicBonus1:F,mythicBonus2:J,setMythicBonus2:K,mythicBonus3:V,setMythicBonus3:W,mythicBonus4:L,setMythicBonus4:U,setDefaultWeapon:G,setDefaultAssist:z,setDefaultSpecial:Y,setDefaultSkillA:q,setDefaultSkillB:X,setDefaultSkillC:$,setAllSkillDefault:Q,lv1:ee,toggleLv1:ne,maxSkill:te,toggleMaxSkill:le,closeEditor:ae})})]})})]})}var Ol=function(){return(0,l.jsx)(wl.Z,{children:(0,l.jsx)(Al,{})})};var Pl=function(){return(0,l.jsx)(Ol,{})}},5497:function(e){e.exports={blessing:"blessing_blessing__mVJnu","blessing-name":"blessing_blessing-name__O0ue_"}},2008:function(e){e.exports={checked:"checkbox_checked__gHbwk",button:"checkbox_button__d5nfX"}},2884:function(e){e.exports={container:"styles_container__YYoO2","neutral-button":"styles_neutral-button__0mamt","blessing-button":"styles_blessing-button__d1Pw5"}},4299:function(e){e.exports={container:"styles_container__zPOZX","neutral-button":"styles_neutral-button__5drcu","bloom-button":"styles_bloom-button__iOTb0","bonus-button":"styles_bonus-button__J3IcJ"}},1698:function(e){e.exports={picker:"heropicker_picker__a1u_q"}},5711:function(e){e.exports={container:"styles_container__gMrf9","neutral-button":"styles_neutral-button__qNLXK","iv-button":"styles_iv-button__PxFG8"}},7861:function(e){e.exports={container:"styles_container__GlT2N","neutral-button":"styles_neutral-button__oX55C","bonus-button":"styles_bonus-button__7uZxk"}},934:function(e){e.exports={refineName:"refineOption_refineName__je15K",might:"refineOption_might__Ljo2p",extractStats:"refineOption_extractStats____CPj",extractStat:"refineOption_extractStat__OPzWF"}},5767:function(e){e.exports={button:"editor_button__dre23",title:"editor_title__DCHaP","title-textgroup":"editor_title-textgroup__L3_XD",content:"editor_content__ucmsC",section:"editor_section__VSruc","section-group":"editor_section-group__PqWmB","hero-header":"editor_hero-header__2jYrP","button-content":"editor_button-content__WgPcn","editor-img":"editor_editor-img__YkSM_","close-button":"editor_close-button__w0FsF",container:"editor_container__ZGE8P",input:"editor_input__hhUEq",options:"editor_options__uKR9A",optionsContainer:"editor_optionsContainer__6ZBYQ",skillTitle:"editor_skillTitle__0pjMT",skillName:"editor_skillName__MG6LB",skillSp:"editor_skillSp__bVmgd",might:"editor_might__1RKES",extractStats:"editor_extractStats__TLGYH",extractStat:"editor_extractStat__XPTuU",subTitle:"editor_subTitle__jgvJ_",spButtons:"editor_spButtons__hDo9g",listItems:"editor_listItems__Bdjh9"}},7710:function(e){e.exports={label:"labelcheckbox_label__20PyM","label-checkbox":"labelcheckbox_label-checkbox__utUa_"}},1237:function(e){e.exports={button:"optionButton_button__L_RWi"}},2696:function(e){e.exports={canvas:"UnitViewer_canvas__Wx4QC",container:"UnitViewer_container__VnbTD",button:"UnitViewer_button__JbsTA",download:"UnitViewer_download__B1uAE",menu:"UnitViewer_menu__CrjVM"}},7378:function(e){e.exports={container:"UnitEditor_container__Osi54",viewer:"UnitEditor_viewer__Nr6JT",editor:"UnitEditor_editor__3Vl3u"}}},function(e){e.O(0,[406,988,220,608,700,774,888,179],(function(){return n=532,e(e.s=n);var n}));var n=e.O();_N_E=n}]);