(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{8832:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return Ht},default:function(){return Ft}});var t=r(5893),i=r(9127),l=r(9008),s=r(7375),a=r(7294),o=r(6156);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var d=function(e){return(0,t.jsxs)("svg",u(u({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),{},{children:[(0,t.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,t.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function p(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f=function(e){return(0,t.jsxs)("svg",h(h({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,t.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,t.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},k=r(3391),v=r(2565),x=r(5545);function g(e){var n=e.rulesDB,r=e.ruleId;return n&&r?n[r]:null}function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function m(e){var n=e.assistDB,r=e.assist;return n&&r?n[r]:null}function y(e){var n=m({assistDB:e.assistDB,assist:e.assist});return(null===n||void 0===n?void 0:n.name)||""}function w(e){var n=e.sealDB,r=e.seal;return n&&r?n.skillA[r]?n.skillA[r]:n.skillB[r]?n.skillB[r]:n.skillC[r]?n.skillC[r]:n.seal[r]?n.seal[r]:null:null}function D(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function B(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?D(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function O(e){var n=e.rulesDB,r=e.heroDB,t=e.skillDB,i=e.heroId;if(!n||!r||!t||!i)return[];var l=(0,x.cK)(r,i);return l?Object.values(t).filter((function(e){if(e.exclusive)return e.exclusive.includes(i);var r=g({rulesDB:n,ruleId:e.rules});return!r||(!r.moveType||!1!==r.moveType[l.moveType])&&((!r.colorType||!1!==r.colorType[l.colorType])&&(!r.weaponType||!1!==r.weaponType[l.weaponType]))})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return B(B({},e),{},{query:n})})):[]}function C(e){var n=e.rulesDB,r=e.heroDB,t=e.skillDB,i=e.heroId,l=e.skillId;if(!n||!r||!t||!i||!l)return!1;var s=(0,x.cK)(r,i);if(!s)return!1;var a=t[l];if(!a)return!1;if(a.exclusive)return a.exclusive.includes(i);var o=g({rulesDB:n,ruleId:a.rules});return!o||(!o.moveType||!1!==o.moveType[s.moveType])&&((!o.colorType||!1!==o.colorType[s.colorType])&&(!o.weaponType||!1!==o.weaponType[s.weaponType]))}function S(e){var n=e.skillDB,r=e.skillId;return n&&r?n[r]:null}function I(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?I(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function A(e){var n=e.specialDB,r=e.special;return n&&r?n[r]:null}function _(e){var n=A({specialDB:e.specialDB,special:e.special});return(null===n||void 0===n?void 0:n.name)||""}function T(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?T(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function E(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function Z(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId;if(!r||!n||!t)return[];var i=(0,x.cK)(n,t);if(!i)return[];var l=E(i.weaponType),s=r[l];return l?Object.values(s).filter((function(e){return!e.exclusive||e.exclusive.includes(t)})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return M(M({},e),{},{query:n})})):[]}function R(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,i=e.weaponId;if(!r||!n||!t||!i)return!1;var l=(0,x.cK)(n,t);if(!l)return!1;var s=E(l.weaponType),a=r[s];if(!s)return!1;var o=a[i];return!!o&&(!o.exclusive||o.exclusive.includes(t))}function N(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,i=e.weapon;if(!r||!n||!i||!t)return null;var l=(0,x.cK)(n,t);return l?r[E(l.weaponType)][i]:null}function H(e){var n=N({heroDB:e.heroDB,weaponDB:e.weaponDB,heroId:e.heroId,weapon:e.weapon});return(null===n||void 0===n?void 0:n.name)||""}var F={atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};function W(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,i=e.weapon,l=N({heroDB:n,weaponDB:r,heroId:t,weapon:i});return l&&l.refine?Object.entries(l.refine).filter((function(e){var n=(0,k.Z)(e,2)[1];return!n.exclusive||n.exclusive.includes(t)})).map((function(e){var n=(0,k.Z)(e,2),r=n[0],t=M({value:r},n[1]);return t.name||(t.name=F[r]||r),t.icon&&(t.icon="/skills/weapon/".concat(t.icon,".png")),!t.icon&&F[r]&&(t.icon="/skills/weapon/".concat(r,".png")),t})):[]}function K(e){var n,r=e.heroDB,t=e.weaponDB,i=e.heroId,l=e.weapon,s=e.refine,a=N({heroDB:r,weaponDB:t,heroId:i,weapon:l});return null===a||void 0===a||null===(n=a.refine)||void 0===n?void 0:n[s]}var L={atk:"atk",spd:"spd",def:"def",res:"res"};function V(e){var n=e.heroDB,r=e.weaponDB,t=e.assistDB,i=e.specialDB,l=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skills;return{weapon:N({heroDB:n,weaponDB:r,heroId:c,weapon:u.weapon}),assist:m({assistDB:t,assist:u.assist}),special:A({specialDB:i,special:u.special}),skillA:S({skillDB:l,skillId:u.skillA}),skillB:S({skillDB:s,skillId:u.skillB}),skillC:S({skillDB:a,skillId:u.skillC}),seal:w({sealDB:o,seal:u.seal})}}var z=["assist","special","skillA","skillB","skillC","seal"];var U=r(6032),Y={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var q=function(e){var n=e.rarity,r=void 0===n?5:n,t=e.merge,i=e.bst,l=e.spt,s=e.blesser,a=void 0===s?0:s,o=Y[r];return 2*(150+o.base+o.float+2*t+Math.floor(i/5)+Math.floor(l/100)+4*a)};function J(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var Q=function(){function e(n){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.Z)(this,"imageData",void 0),(0,o.Z)(this,"src",void 0),(0,o.Z)(this,"loadedData",void 0),(0,o.Z)(this,"callback",void 0),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=n,this.imageData.onload=function(){r.loadedData=!0,r.callback&&r.callback(!0)},this.imageData.onerror=function(){r.loadedData=!1,r.callback&&r.callback(!1)}}var n,r,t;return n=e,(r=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&J(n.prototype,r),t&&J(n,t),e}();var X=r(6469),G=16,$=554,ee=X.s6;var ne=174,re=555,te=["infantry","armored","cavalry","flying"];function ie(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function le(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var se=1,ae=43,oe=85,ce=127,ue=169,de=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,n,r){return le(le({},e),{},(0,o.Z)({},n,34*r+1))}),{});function pe(e,n,r,t,i,l){de[t]&&e.drawImage(n,de[t],r,32,40,i,l,16,20)}var he=240,fe=557,ke=[14,28,42],ve=["infantry","armored","cavalry","flying"];var xe=432,ge=425;var je=432,be=425;var me=275,ye=594,we=function(e,n,r){var t=37*r+1+ye;e.drawImage(n,me,t,35,35)};var De=82,Be=557,Oe=[14,28,42];var Ce=112,Se=557,Ie=[14,28,42];var Pe=130,Ae=594,_e=[14,28,42,56],Te=[1e3,100,10],Me=function(e,n,r,t){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:se,l=8+Ae+37*t;Te.forEach((function(t,s){if(r>=t){var a=Math.floor(r/t%10);pe(e,n,i,a,Pe+_e[s],l)}}));var s=r%10;pe(e,n,i,s,Pe+_e[3],l)};var Ee=465,Ze=594;function Re(e){var n=e.context,r=e.numberAtlas,t=e.accelerate,i=e.specialCD;if(i){var l=ae;t<0&&(l=oe),t>0&&(l=ce),function(e,n,r){pe(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae,r,Ee,8+Ze+74)}(n,r,t+i,l)}}var Ne=r(629),He=206,Fe=1224,We=["#ffa0af","white","#aaf0fa"],Ke=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});var Le=634,Ve=1224,ze={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var Ue=296,Ye=876,qe=336,Je=992;var Qe={x:460,y:530};var Xe=195,Ge=370;function $e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function en(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$e(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var nn=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"]],rn=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var tn=function(e){var n=e.heroId,r=e.rarity,t=e.iv,l=e.merge,o=e.dragonflower,c=e.blessing,u=e.support,d=e.arena,p=e.resplendent,h=e.weapon,f=e.refine,g=e.assist,j=e.special,b=e.skillA,m=e.skillB,y=e.skillC,w=e.seal,D=e.lv1,B=(0,i.K)(),O=(0,a.useRef)(null),C=(0,a.useRef)(null),S=(0,a.useRef)(),I=(0,a.useRef)(),P=(0,a.useRef)(),A=(0,a.useRef)(),_=(0,a.useRef)(),T=(0,a.useRef)(),M=(0,a.useRef)(),E=(0,a.useRef)(),Z=(0,a.useRef)(),R=(0,a.useRef)(),N=(0,a.useRef)(),H=(0,a.useRef)(),F=(0,a.useRef)(),W=(0,a.useRef)(),K=(0,a.useMemo)((function(){return(0,x.cK)(B.heroDB,n)}),[B.heroDB,n]),Y=(0,a.useMemo)((function(){return{weapon:h,assist:g,special:j,skillA:b,skillB:m,skillC:y,seal:w}}),[h,g,j,b,m,y,w]),J=K.stats,X=(0,a.useMemo)((function(){return function(e){var n,r,t,i,l,s,a,o,c,u=e.heroDB,d=e.weaponDB,p=e.assistDB,h=e.specialDB,f=e.skillADB,v=e.skillBDB,g=e.skillCDB,j=e.sealDB,b=e.heroId,m=e.skills,y=e.refine,w=e.rarity,D=(0,x.cK)(u,b),B=V({heroDB:u,weaponDB:d,assistDB:p,specialDB:h,skillADB:f,skillBDB:v,skillCDB:g,sealDB:j,heroId:b,skills:m}),O={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},C=0,S=(null===(n=B.special)||void 0===n?void 0:n.cd)||0;C+=(null===(r=B.weapon)||void 0===r?void 0:r.cd)||0,C+=(null===(t=B.assist)||void 0===t?void 0:t.cd)||0,C+=(null===(i=B.skillA)||void 0===i?void 0:i.cd)||0,C+=(null===(l=B.skillB)||void 0===l?void 0:l.cd)||0,C+=(null===(s=B.skillC)||void 0===s?void 0:s.cd)||0,C+=(null===(a=B.seal)||void 0===a?void 0:a.cd)||0;var I={hp:0,atk:0,spd:0,def:0,res:0},P=0,A=0;Object.entries(B).forEach((function(e){var n=(0,k.Z)(e,2),r=n[0],t=n[1];if(O[r]=(null===t||void 0===t?void 0:t.name)||"-",I.hp+=(null===t||void 0===t?void 0:t.hp)||0,I.atk+=((null===t||void 0===t?void 0:t.mt)||0)+((null===t||void 0===t?void 0:t.atk)||0),I.spd+=(null===t||void 0===t?void 0:t.spd)||0,I.def+=(null===t||void 0===t?void 0:t.def)||0,I.res+=(null===t||void 0===t?void 0:t.res)||0,P+=(null===t||void 0===t?void 0:t.sp)||0,5===w){var i=null===t||void 0===t?void 0:t.bst;D.blesser&&null!==t&&void 0!==t&&t.bbst&&(i=null===t||void 0===t?void 0:t.bbst),A=Math.max(i||0,A)}}));var _=null===(o=B.weapon)||void 0===o||null===(c=o.refine)||void 0===c?void 0:c[y];return _&&(I.hp+=_.hp||0,I.atk+=(_.mt||0)+(_.atk||0),I.spd+=_.spd||0,I.def+=_.def||0,I.res+=_.res||0,C+=_.cd||0,B.weapon.exclusive||(P+=50),5===w&&(A=Math.max(A,_.bst||0))),{names:O,stats:I,accelerate:C,specialCD:S,spt:P,bst:A}}({heroDB:B.heroDB,weaponDB:B.weaponDB,assistDB:B.assistDB,specialDB:B.specialDB,skillADB:B.skillADB,skillBDB:B.skillBDB,skillCDB:B.skillCDB,sealDB:B.sealDB,skills:Y,heroId:n,refine:f,rarity:r})}),[Y,n,f,r,B.heroDB,B.weaponDB,B.assistDB,B.specialDB,B.skillADB,B.skillBDB,B.skillCDB,B.sealDB]),ie=(0,a.useMemo)((function(){return(0,U.f)(r,J,t,l,u,X.stats,D,d,o,p)}),[r,J,t,l,u,X,D,d,o,p]),le=(0,a.useMemo)((function(){return q({rarity:r,merge:l,bst:Math.max(ie.bst,X.bst,K.bst||0),spt:X.spt})}),[r,l,ie.bst,X.bst,X.spt,K]),ce=(0,a.useRef)({}),de=(0,a.useCallback)((function(){if(O.current){var e=ce.current,n=e.background,r=e.foreground,t=e.foreground2,i=e.portrait,l=e.rarityAtlas,a=e.weaponTypeAtlas,o=e.moveTypeAtlas,c=e.dragonflowerAtlas,u=e.supportAtlas,d=e.blessingAtlas,p=e.numberAtlas,h=e.weaponIcon,f=e.assistIcon,v=e.specialIcon,x=e.textA,g=e.textB,j=e.textC,b=e.textS,m=e.arenaIcon,y=e.skillAIcon,w=e.skillBIcon,D=e.skillCIcon,B=e.sealIcon,K=e.resplendentIcon,L=S.current,V=L.title,z=L.name,U=L.weaponType,Y=L.moveType,q=!!S.current.blessing||!!E.current,J=O.current.getContext("2d");J.clearRect(0,0,540,960),n.loaded&&function(e){var n=e.context,r=e.background;e.support?n.drawImage(r,540,0,540,960,0,0,540,960):n.drawImage(r,0,0,540,960,0,0,540,960)}({context:J,background:n.image,support:Z.current}),i.loaded&&function(e){var n=e.context,r=e.portrait;n.drawImage(r,0,0,540,960,0,0,540,960)}({context:J,portrait:i.image}),r.loaded&&function(e){var n=e.context,r=e.foreground;n.drawImage(r,0,0,540,960,0,0,540,960)}({context:J,foreground:r.image}),t.loaded&&function(e){var n=e.context,r=e.foreground2;e.dragonflower?n.drawImage(r,0,50,540,50,0,542,540,50):n.drawImage(r,0,0,540,50,0,542,540,50)}({context:J,foreground2:t.image,dragonflower:M.current}),l.loaded&&function(e){var n=e.context,r=e.rarityAtlas;switch(e.rarity){case 5:n.drawImage(r,0,0,153,40,42,380,153,40);break;case 4:n.drawImage(r,0,41,153,40,42,380,153,40)}}({context:J,rarityAtlas:l.image,rarity:A.current}),a.loaded&&function(e){var n=e.context,r=e.weaponTypeAtlas,t=e.weaponType,i=ee.indexOf(t);i>-1&&n.drawImage(r,56*i,0,56,55,G,$,28,28)}({context:J,weaponTypeAtlas:a.image,weaponType:U}),o.loaded&&function(e){var n=e.context,r=e.moveTypeAtlas,t=e.moveType,i=te.indexOf(t);i>-1&&n.drawImage(r,56*i,0,52,52,ne,re,26,26)}({context:J,moveTypeAtlas:o.image,moveType:Y}),c.loaded&&p.loaded&&function(e){var n=e.context,r=e.dragonflowerAtlas,t=e.numberAtlas,i=e.moveType,l=e.dragonflower;if(l){var s=ve.indexOf(i);s>-1&&n.drawImage(r,0,58*s,64,58,216,546,48,44);var a=0,o=ae;pe(n,t,o,"+",he+ke[0],fe),a+=1,l>9&&(pe(n,t,o,1,he+ke[a],fe),a+=1),pe(n,t,o,l%10,he+ke[a],fe)}}({context:J,dragonflowerAtlas:c.image,numberAtlas:p.image,moveType:Y,dragonflower:M.current}),u.loaded&&function(e){var n=e.context,r=e.supportAtlas,t=e.support,i=e.hasBlessing?108:0;t&&n.drawImage(r,xe-i,ge,108,115)}({context:J,supportAtlas:u.image,support:Z.current,hasBlessing:q}),d.loaded&&function(e){var n=e.context,r=e.blessingAtlas;n.drawImage(r,je,be,108,115)}({context:J,blessingAtlas:d.image}),p.loaded&&(!function(e){var n=e.context,r=e.numberAtlas,t=e.lv1?1:40,i=0;t>9&&pe(n,r,ae,4,De+Oe[i],Be),pe(n,r,ae,t%10,De+Oe[i+=1],Be)}({context:J,numberAtlas:p.image,lv1:F.current}),function(e){var n=e.context,r=e.numberAtlas,t=e.merge;if(!(t<=0)){var i=0,l=t>9?ue:ae;pe(n,r,l,"+",Ce+Ie[0],Se),i+=1,t>9&&(pe(n,r,l,1,Ce+Ie[i],Se),i+=1),pe(n,r,l,t%10,Ce+Ie[i],Se)}}({context:J,numberAtlas:p.image,merge:T.current}),function(e){var n=e.context,r=e.numberAtlas,t=e.stats,i=e.score,l=e.sbst,s=e.bst;Object.values(t).forEach((function(e,t){Me(n,r,e,t,se)}));var a=l>s?oe:ue;Me(n,r,s,5,ue),Me(n,r,i,6,a)}(en({context:J,numberAtlas:p.image,score:W.current,sbst:Math.max(I.current.bst||0,S.current.bst||0)},P.current)),Re({context:J,numberAtlas:p.image,accelerate:I.current.accelerate,specialCD:I.current.specialCD})),function(e){var n=e.context,r=e.weaponIcon,t=e.assistIcon,i=e.specialIcon,l=e.textA,s=e.textB,a=e.textC,o=e.textS,c=e.skillAIcon,u=e.skillBIcon,d=e.skillCIcon,p=e.sealIcon;r.loaded&&we(n,r.image,0),t.loaded&&we(n,t.image,1),i.loaded&&we(n,i.image,2),c.loaded&&we(n,c.image,3),n.drawImage(l.image,me+20,ye+112+18,18,18),u.loaded&&we(n,u.image,4),n.drawImage(s.image,me+20,ye+149+18,18,18),d.loaded&&we(n,d.image,5),n.drawImage(a.image,me+20,ye+186+18,18,18),p.loaded&&we(n,p.image,6),n.drawImage(o.image,me+20,ye+223+18,18,18)}({context:J,weaponIcon:h,assistIcon:f,specialIcon:v,textA:x,textB:g,textC:j,textS:b,skillAIcon:y,skillBIcon:w,skillCIcon:D,sealIcon:B}),C.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var n=e.canvas,r=e.iv,t=e.merge,i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#101010",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8;var l=(0,Ne.$r)(r),s=l.boon,a=l.bane,o={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};o[s]+=1,o[a]-=1,o[a]=t>0?1:o[a],Ke.forEach((function(e,n){var r=(0,k.Z)(e,2),t=r[0],l=r[1],s=Fe+74*n;i.fillStyle=We[o[t]],i.strokeText(l,He,s),i.fillText(l,He,s)}))}({canvas:C.current,iv:_.current,merge:T.current}),function(e){var n=e.canvas,r=e.refine,t=e.weapon,i=(0,s.Z)(e,["canvas","refine","weapon"]),l=n.getContext("2d");l.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",l.textAlign="left",l.textBaseline="middle",l.lineJoin="round",l.lineWidth=8,l.strokeStyle="#101010",l.fillStyle=r&&"-"!==r?"lime":"white";var a=Le+("-"===t?4:0),o=Ve;l.strokeText(t,a,o),l.fillText(t,a,o),l.fillStyle="white",Object.keys(i).forEach((function(e){var n=i[e],r=Ve+74*ze[e],t="-"===n?4:0;l.strokeText(n,Le+t,r),l.fillText(n,Le+t,r)}))}(en({canvas:C.current,refine:H.current},I.current.names)),function(e){var n=e.canvas,r=e.title,t=e.name,i=n.getContext("2d");i.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",i.fillStyle="white",i.strokeStyle="#220d00",i.textAlign="center",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeText(r,Ue,Ye),i.fillText(r,Ue,Ye),i.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",i.strokeText(t,qe,Je),i.fillText(t,qe,Je)}({canvas:C.current,title:V,name:z}),R.current&&m&&function(e){var n=e.context,r=e.arenaIcon;n.drawImage(r,Qe.x,Qe.y,50,49)}({context:J,arenaIcon:m.image}),N.current&&K&&function(e){var n=e.context,r=e.resplendentIcon;n.drawImage(r,Xe,Ge,64,63)}({context:J,resplendentIcon:K.image}),J.drawImage(C.current,0,0,540,960)}}),[]);(0,a.useEffect)((function(){C.current=document.createElement("canvas"),C.current.width=1080,C.current.height=1920}),[]),(0,a.useEffect)((function(){nn.forEach((function(e){var n=(0,k.Z)(e,2),r=n[0],t=n[1];ce.current[r]=new Q(de),ce.current[r].load((0,v.Z)(t))}))}),[ce,de]),(0,a.useEffect)((function(){var e=function(e){var n=e.resplendentDB,r=e.heroId;return e.enable&&null!==n&&void 0!==n&&n.includes(r)?"".concat(r,"(R)"):r}({resplendentDB:B.resplendentDB,heroId:K.id,enable:p});ce.current.portrait.load((0,v.Z)("/portraits/".concat(e,".png")));var n=function(e){var n=e.heroDB,r=e.weaponDB,t=e.assistDB,i=e.specialDB,l=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,u=e.skills,d=e.refine,p=V({heroDB:n,weaponDB:r,assistDB:t,specialDB:i,skillADB:l,skillBDB:s,skillCDB:a,sealDB:o,heroId:c,skills:u}),h={};if(z.forEach((function(e){var n=p[e];h[e]=(null===n||void 0===n?void 0:n.icon)&&"/skills/".concat(n.icon)})),d&&"-"!==d){var f,k,v,x=L[d]||(null===(f=p.weapon)||void 0===f||null===(k=f.refine)||void 0===k||null===(v=k[d])||void 0===v?void 0:v.icon);x&&(h.weapon="/skills/weapon/".concat(x,".png"))}return h}({heroDB:B.heroDB,weaponDB:B.weaponDB,assistDB:B.assistDB,specialDB:B.specialDB,skillADB:B.skillADB,skillBDB:B.skillBDB,skillCDB:B.skillCDB,sealDB:B.sealDB,skills:Y,heroId:K.id,refine:f});rn.forEach((function(e){var r=e.skillName,t=e.empty;ce.current["".concat(r,"Icon")].load((0,v.Z)("".concat(n[r]||t)))}));var r="-"!==K.blessing&&!!K.blessing||!!c,t=(0,v.Z)("/assets/blessing-".concat(K.blessing||c,".png"));ce.current.blessingAtlas.load(r?t:"")}),[K,p,Y,f,c,ie,B.heroDB,B.weaponDB,B.assistDB,B.specialDB,B.skillADB,B.skillBDB,B.skillCDB,B.sealDB,B.resplendentDB]),(0,a.useEffect)((function(){S.current=K,A.current=r,_.current=t,T.current=l,M.current=o,E.current=c,Z.current=u,R.current=d,N.current=p,H.current=f,F.current=D,W.current=le,I.current=X,P.current=ie,de()}),[K,r,t,l,o,c,u,d,p,f,D,le,X,ie,de]);var Pe=(0,a.useCallback)((function(){var e=O.current.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="".concat(null===K||void 0===K?void 0:K.name,"-").concat(null===K||void 0===K?void 0:K.title,".png"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[null===K||void 0===K?void 0:K.name,null===K||void 0===K?void 0:K.title]);return{canvasRef:O,triggerDownload:Pe}},ln=r(8929),sn=r.n(ln);function an(e){var n=e.openEditor,r=(0,s.Z)(e,["openEditor"]),i=tn(r),l=i.canvasRef,a=i.triggerDownload;return(0,t.jsxs)("div",{className:sn().container,children:[(0,t.jsx)("canvas",{className:sn().canvas,width:"540",height:"960",ref:l}),(0,t.jsx)("button",{className:"".concat(sn().button," ").concat(sn().download),onClick:a,children:(0,t.jsx)(d,{})}),(0,t.jsx)("button",{className:"".concat(sn().button," ").concat(sn().menu),onClick:n,children:(0,t.jsx)(f,{})})]})}var on=(0,a.memo)(an);function cn(e){return 4===e?"4\u2605":"5\u2606"}function un(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function dn(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?un(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var pn=function(e){return(0,t.jsxs)("svg",dn(dn({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,t.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),(0,t.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}))},hn=r(5988);function fn(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2629191159"}),(0,t.jsx)(hn.default,{id:"2629191159",children:["div.jsx-2629191159{width:1.5em;height:1.5em;border-radius:0.5em;background-color:white;}"]})]})}var kn=function(e){var n=e.className,r=e.checked,i=e.onChange,l=(0,a.useCallback)((function(e){i&&(e.stopPropagation(),i(!r))}),[r,i]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{role:"button",onClick:l,className:"jsx-19544621 "+(n||""),children:r&&(0,t.jsx)(fn,{})}),(0,t.jsx)(hn.default,{id:"19544621",children:["div.jsx-19544621{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:0.5em;width:2.5em;height:2.5em;font-size:1em;border:solid 1px white;background-color:transparent;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},vn=r(5492),xn=r.n(vn);var gn=function(e){var n=e.children,r=e.checked,i=e.onChange;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("label",{className:xn().label,children:[n,(0,t.jsx)(kn,{className:xn()["label-checkbox"],checked:r,onChange:i})]})})},jn=r(5262),bn=r(7226);var mn=function(e){var n=e.blessing,r=(0,a.useMemo)((function(){return(0,bn._n)(n)}),[n]),i=r.src,l=r.name;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"jsx-3356831981",children:[i&&(0,t.jsx)(jn.Z,{src:i,loading:"lazy",width:"50px",height:"50px"}),(0,t.jsx)("div",{className:"jsx-3356831981 blessing-name",children:l})]}),(0,t.jsx)(hn.default,{id:"3356831981",children:["div.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}","div.jsx-3356831981 img.jsx-3356831981{width:2.5em;height:2.5em;margin-right:0.25em;}","div.jsx-3356831981 .blessing-name.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;}"]})]})},yn=r(7815),wn=r.n(yn);var Dn=function(e){var n=e.onClick;return(0,t.jsx)("button",{className:wn().button,onClick:n,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})};function Bn(e){var n=e.hidden,r=e.style,i=e.children;return(0,t.jsx)("div",{hidden:n,className:wn().container,style:r,children:i})}function On(e){var n=e.children,r=e.style;return(0,t.jsx)("div",{className:wn().title,style:r,children:n})}function Cn(e){var n=e.children;return(0,t.jsx)("div",{className:wn()["title-textgroup"],children:n})}function Sn(e){var n=e.children;return(0,t.jsx)("div",{className:wn().content,children:n})}function In(e){var n=e.children;return(0,t.jsx)("div",{className:wn()["section-group"],children:n})}function Pn(e){var n=e.children,r=e.disabled,i=e.onClick;return(0,t.jsx)("button",{className:"".concat(wn().button," ").concat(wn().section),disabled:r,onClick:i,children:n})}function An(e){var n=e.children;return(0,t.jsx)("div",{className:wn()["button-content"],children:n})}function _n(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-1557054469",children:n}),(0,t.jsx)(hn.default,{id:"1557054469",children:["div.jsx-1557054469{overflow-y:auto;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-overflow-scrolling:touch;}"]})]})}function Tn(e){var n=e.children;return(0,t.jsx)("div",{className:wn().options,children:n})}function Mn(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function En(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function Zn(e){var n=e.children;return(0,t.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Rn(e){var n=e.src;return(0,t.jsx)(jn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"},loading:"lazy"})}function Nn(e){var n=e.children;return(0,t.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Hn(e){var n=e.children;return(0,t.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Fn(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex"},children:n})}function Wn(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2400499899",children:n}),(0,t.jsx)(hn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Kn(e){var n=e.cd,r=e.children;return n?(0,t.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:r}):null}function Ln(e){var n=e.children;return(0,t.jsx)("div",{style:{color:"salmon"},children:n})}var Vn=function(e){return e>0?"+".concat(e):"".concat(e)};function zn(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.35em",padding:"0.25em",backgroundColor:"#1d3e53"},children:n})}var Un=r(6234);function Yn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function qn(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Yn(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Jn=function(e){var n=e.heroId,r=e.resplendent,l=(0,i.K)(),s=l.heroDB,o=l.assistDB,c=l.resplendentDB,u=(0,a.useMemo)((function(){return(0,x.gO)({heroDB:s,assistDB:o,resplendentDB:c,heroId:n,noStat:!0})}),[s,o,c,n]);return(0,t.jsx)(Un.Z,qn(qn({},u),{},{faceSrc:r?u.faceSrcR:u.faceSrc}))};var Qn=function(e){var n=e.heroId,r=e.weapon,l=(0,i.K)(),s=l.heroDB,a=l.weaponDB;return(0,t.jsx)(t.Fragment,{children:H({heroDB:s,weaponDB:a,heroId:n,weapon:r})})};var Xn=function(e){var n=e.heroId,r=e.weapon,l=e.refine,s=(0,i.K)(),a=function(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,i=e.weapon,l=e.refine,s=K({heroDB:n,weaponDB:r,heroId:t,weapon:i,refine:l});return s?F[l]?{icon:l,name:F[l]}:{icon:s.icon,name:s.name}:{icon:"",name:""}}({heroDB:s.heroDB,weaponDB:s.weaponDB,heroId:n,weapon:r,refine:l}),o=a.icon,c=a.name;return(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsx)(Rn,{src:"/skills/weapon/".concat(o,".png")}),c]})};var Gn=function(e){var n=e.assist,r=(0,i.K)().assistDB;return(0,t.jsx)(t.Fragment,{children:y({assistDB:r,assist:n})})};var $n=function(e){var n=e.special,r=(0,i.K)().specialDB;return(0,t.jsx)(t.Fragment,{children:_({specialDB:r,special:n})})},er=["skillA","skillB","skillC"];var nr=function(e){var n=e.skillType,r=e.skillId,l=(0,i.K)();if(er.includes(n)){var s=function(e){var n=S({skillDB:e.skillDB,skillId:e.skillId});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({skillDB:l["".concat(n,"DB")],skillId:r}),a=s.icon,o=s.name;return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)(Rn,{src:"/skills/".concat(a)}),o]})}if("seal"===n){var c=function(e){var n=w({sealDB:e.sealDB,seal:e.seal});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({sealDB:l.sealDB,seal:r}),u=c.icon,d=c.name;return(0,t.jsxs)(t.Fragment,{children:[u&&(0,t.jsx)(Rn,{src:"/skills/".concat(u)}),d]})}return null};var rr=function(e){var n=e.hidden,r=e.heroId,l=e.rarity,o=e.iv,c=e.merge,u=e.dragonflower,d=e.blessing,p=e.support,h=e.arena,f=e.resplendent,k=e.weapon,v=e.refine,g=e.assist,j=e.special,b=e.skillA,m=e.skillB,y=e.skillC,w=e.seal,D=e.lv1,B=e.maxSkill,O=(0,s.Z)(e,["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","weapon","refine","assist","special","skillA","skillB","skillC","seal","lv1","maxSkill"]),C=function(e){var n=e.heroId,r=e.weapon,t=e.maxSkill,l=(0,i.K)(),s=l.heroDB,o=l.weaponDB,c=(0,a.useMemo)((function(){return(0,x.cK)(s,n)}),[s,n]),u=(0,a.useMemo)((function(){if("Feh"===n)return!1;var e=Z({heroDB:s,weaponDB:o,heroId:n});return t?e.filter((function(e){return e.last})).length>0:e.length>0}),[s,o,n,t]),d=(0,a.useMemo)((function(){return"Feh"!==n&&W({heroDB:s,weaponDB:o,heroId:n,weapon:r}).length>0}),[s,o,n,r]);return"Feh"===n?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1}:{hasRarity:c.rarity.length>0,hasBlessing:!!c.blessing,hasWeapon:u,hasRefine:d,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:c.blessing&&c.blessing}}({heroId:r,weapon:k,maxSkill:B}),S=C.hasRarity,I=C.hasBlessing,P=C.hasWeapon,A=C.hasRefine,_=C.hasAssist,T=C.hasSpecial,M=C.hasSkillA,E=C.hasSkillB,R=C.hasSkillC,N=C.hasSeal,H=C.blessing;return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsx)("button",{className:wn()["close-button"],onClick:O.closeEditor,children:(0,t.jsx)(pn,{})}),(0,t.jsx)(On,{children:(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u82f1\u96c4"}),(0,t.jsx)(gn,{checked:D,onChange:O.toggleLv1,children:"Lv1"})]})}),(0,t.jsxs)(Sn,{children:[(0,t.jsx)("button",{className:"".concat(wn().button," ").concat(wn()["hero-header"]),onClick:O.openHeroPicker,children:(0,t.jsx)(Jn,{heroId:r,resplendent:f})}),(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!S,onClick:O.openRarityPicker,children:["\u7a00\u6709\u5ea6",(0,t.jsx)(An,{children:cn(l)})]}),(0,t.jsxs)(Pn,{disabled:"Feh"===r,onClick:O.openIVPicker,children:["IV",(0,t.jsx)(An,{children:(0,Ne.Zx)(o)})]}),(0,t.jsxs)(Pn,{disabled:I,onClick:O.openBlessingPicker,children:["\u795d\u798f",(0,t.jsx)(An,{children:(0,t.jsx)(mn,{blessing:H||d})})]}),(0,t.jsxs)(Pn,{onClick:O.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",(0,t.jsx)(An,{children:c?"+".concat(c):"-"})]}),(0,t.jsxs)(Pn,{onClick:O.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",(0,t.jsx)(An,{children:u?"+".concat(u):"-"})]})]})]}),(0,t.jsx)(On,{children:(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u6280\u80fd"}),(0,t.jsx)(gn,{checked:B,onChange:O.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,t.jsx)(Dn,{onClick:O.setAllSkillDefault})]})}),(0,t.jsxs)(Sn,{children:[(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!P,onClick:O.openWeaponPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",(0,t.jsx)(An,{children:(0,t.jsx)(Qn,{heroId:r,weapon:k})})]}),(0,t.jsxs)(Pn,{disabled:!A,onClick:O.openRefinePicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",(0,t.jsx)(An,{children:(0,t.jsx)(Xn,{heroId:r,weapon:k,refine:v})})]})]}),(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!_,onClick:O.openAssistPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",(0,t.jsx)(An,{children:(0,t.jsx)(Gn,{assist:g})})]}),(0,t.jsxs)(Pn,{disabled:!T,onClick:O.openSpecialPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",(0,t.jsx)(An,{children:(0,t.jsx)($n,{special:j})})]})]}),(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!M,onClick:O.openSkillAPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"skillA",skillId:b})})]}),(0,t.jsxs)(Pn,{disabled:!E,onClick:O.openSkillBPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"skillB",skillId:m})})]}),(0,t.jsxs)(Pn,{disabled:!R,onClick:O.openSkillCPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"skillC",skillId:y})})]}),(0,t.jsxs)(Pn,{disabled:!N,onClick:O.openSealPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"seal",skillId:w})})]})]})]}),(0,t.jsx)(On,{children:"\u5f37\u5316"}),(0,t.jsx)(Sn,{children:(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{onClick:O.toggleSupport,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"\u53ec\u559a\u5e2b\u5951\u7d04",(0,t.jsx)(kn,{checked:p})]}),(0,t.jsxs)(Pn,{onClick:O.toggleArena,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"\u9b25\u6280\u5834",(0,t.jsx)(kn,{checked:h})]}),(0,t.jsxs)(Pn,{onClick:O.toggleResplendent,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"\u795e\u88dd",(0,t.jsx)(kn,{checked:f})]})]})})]})},tr=r(9487);function ir(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function lr(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ir(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var sr=function(e){return(0,t.jsxs)("svg",lr(lr({width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,t.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var ar=function(e){var n=e.onClick;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:n,className:"jsx-3918608153",children:(0,t.jsx)(sr,{fill:"white"})}),(0,t.jsx)(hn.default,{id:"3918608153",children:["button.jsx-3918608153{background-color:transparent;display:block;}"]})]})};var or=function(e){var n=e.hidden,r=e.heroId,i=e.onChangeHero,l=e.onClickBack,s=e.resplendent,o=(0,a.useCallback)((function(e){i(e),l()}),[i,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),"\u82f1\u96c4"]}),(0,t.jsx)(tr.Z,{heroId:r,onSelect:o,noDropdown:!0,noStat:!0,resplendent:s})]})},cr=r(5170);var ur=function(e){var n=e.hidden,r=e.rarity,i=e.selectRarity,l=e.onClickBack,s=(0,a.useCallback)((function(e){i(e),l()}),[i,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),"\u7a00\u6709\u5ea6"]}),(0,t.jsx)(cr.Z,{rarity:r,minRarity:4,onSelect:s})]})},dr=r(2220),pr=r.n(dr),hr=function(e){var n=e.iv,r=e.selectIV,i=(0,a.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,t.jsxs)("div",{className:pr().container,children:[(0,t.jsx)("button",{className:pr()["neutral-button"],"data-active":!n,value:"",onClick:i,children:"-"}),Ne.YM.map((function(e){return(0,t.jsx)("button",{className:pr()["iv-button"],"data-active":n===e.value,value:e.value,onClick:i,children:e.name},e.value)}))]})};var fr=function(e){var n=e.hidden,r=e.iv,i=e.selectIV,l=e.onClickBack,s=(0,a.useCallback)((function(e){i(e),l()}),[i,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),"IV"]}),(0,t.jsx)(hr,{iv:r,selectIV:s})]})},kr=r(4299),vr=r.n(kr),xr=function(e){var n=e.blessing,r=e.selectBlessing,i=(0,a.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,t.jsxs)("div",{className:vr().container,children:[(0,t.jsx)("button",{className:vr()["neutral-button"],"data-active":!n,value:"",onClick:i,children:"-"}),bn.YM.map((function(e){return(0,t.jsx)("button",{className:vr()["blessing-button"],"data-active":n===e.value,value:e.value,onClick:i,children:(0,t.jsx)(mn,{blessing:e.value})},e.value)}))]})};var gr=function(e){var n=e.hidden,r=e.blessing,i=e.selectBlessing,l=e.onClickBack,s=(0,a.useCallback)((function(e){i(e),l()}),[i,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),"IV"]}),(0,t.jsx)(xr,{blessing:r,selectBlessing:s})]})},jr=r(4162);var br=function(e){var n=e.hidden,r=e.merge,i=e.selectMerge,l=e.onClickBack,s=(0,a.useCallback)((function(e){i(e),l()}),[i,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),"\u7a81\u7834\u6b21\u6578"]}),(0,t.jsx)(jr.Z,{merge:r,onSelect:s})]})},mr=r(6374),yr=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];var wr=function(e){var n=e.dragonflower,r=e.onSelect;return(0,t.jsx)(mr.Z,{value:n,onSelect:r,options:yr})};var Dr=function(e){var n=e.hidden,r=e.dragonflower,i=e.selectDragonflower,l=e.onClickBack,s=(0,a.useCallback)((function(e){i(e),l()}),[i,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),"\u795e\u9f8d\u4e4b\u82b1"]}),(0,t.jsx)(wr,{dragonflower:r,onSelect:s})]})};var Br=function(e){var n=e.active,r=e.last,i=e.hidden,l=e.value,s=e.children,a=e.onClick;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{"data-active":n,value:l,onClick:a,hidden:i,className:hn.default.dynamic([["2665293084",[r?1:.618]]]),children:s}),(0,t.jsx)(hn.default,{id:"2665293084",dynamic:[r?1:.618],children:[".__jsx-style-dynamic-selector{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;text-align:left;outline:none;line-height:1.5;opacity:".concat(r?1:.618,";}"),"button.__jsx-style-dynamic-selector{padding:0.5em;margin-bottom:0.5em;border-bottom:1px solid #1d3e53;cursor:pointer;display:block;color:white;width:100%;background-color:transparent;}","button.__jsx-style-dynamic-selector:hover{background-color:#77abb7aa;}","button[hidden].__jsx-style-dynamic-selector{display:none;}","button[data-active='true'].__jsx-style-dynamic-selector{background-color:#476d7c;}"]})]})};function Or(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Cr(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Or(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Sr(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function Ir(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder"},children:n})}function Pr(e){var n=e.children;return(0,t.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Ar(e){var n=e.children;return(0,t.jsx)("div",{style:{fontWeight:"bold"},children:n})}function _r(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex"},children:n})}function Tr(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2400499899",children:n}),(0,t.jsx)(hn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Mr(e){var n=e.cd,r=e.children;return n?(0,t.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:r}):null}function Er(e){var n=e.children;return(0,t.jsx)("div",{style:{color:"salmon"},children:n})}var Zr=function(e){return e>0?"+".concat(e):"".concat(e)};var Rr=function(e){var n=e.active,r=e.weapon,i=e.hidden,l=e.onClick;return(0,t.jsxs)(Br,{active:n,last:r.last,hidden:i,value:r.id,onClick:l,children:[(0,t.jsxs)(Sr,{children:[(0,t.jsx)(Ir,{children:r.name}),(0,t.jsxs)(Pr,{children:[r.sp,"SP"]})]}),(0,t.jsxs)(Ar,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,t.jsxs)(Mr,{cd:r.cd,children:["\u5967\u7fa9 cd",Zr(r.cd)]}),(0,t.jsxs)(_r,{children:[r.hp&&(0,t.jsxs)(Tr,{children:["HP ",Zr(r.hp)]}),r.atk&&(0,t.jsxs)(Tr,{children:["\u653b\u64ca ",Zr(r.atk)]}),r.spd&&(0,t.jsxs)(Tr,{children:["\u901f\u5ea6 ",Zr(r.spd)]}),r.def&&(0,t.jsxs)(Tr,{children:["\u9632\u5b88 ",Zr(r.def)]}),r.res&&(0,t.jsxs)(Tr,{children:["\u9b54\u9632 ",Zr(r.res)]})]}),r.exclusive&&(0,t.jsx)(Er,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Nr(e){var n=e.heroId,r=e.weapon,l=e.selectWeapon,o=function(e){var n=e.heroId,r=e.filter,t=e.maxSkill,l=(0,i.K)(),s=l.heroDB,o=l.weaponDB,c=(0,a.useMemo)((function(){return Z({heroDB:s,weaponDB:o,heroId:n})}),[n,s,o]);return{options:(0,a.useMemo)((function(){return c.map((function(e){var n=!1;return t&&!e.last&&(n=!0),!n&&r&&(n=!e.query.includes(r.toLowerCase())),Cr(Cr({},e),{},{hidden:n})}))}),[c,r,t])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,c=(0,a.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Br,{active:!r,value:"",onClick:c,children:"\u7121\u6b66\u5668"}),o.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(Rr,{hidden:n,weapon:i,active:r===e.id,onClick:c},e.id)}))]})}var Hr=(0,a.memo)(Nr);var Fr=function(e){var n=e.hidden,r=e.onClickBack,i=e.heroId,l=e.weapon,s=e.selectWeapon,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,a.useState)(""),p=d[0],h=d[1],f=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u6b66\u5668"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,t.jsx)(Dn,{onClick:u})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:f}),(0,t.jsx)(_n,{children:(0,t.jsx)(Hr,{heroId:i,weapon:l,filter:p,maxSkill:o,selectWeapon:k})})]})};function Wr(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function Kr(e){var n=e.src;return(0,t.jsx)(jn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function Lr(e){var n=e.children;return(0,t.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Vr(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex"},children:n})}function zr(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2400499899",children:n}),(0,t.jsx)(hn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Ur(e){var n=e.cd,r=e.children;return n?(0,t.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:r}):null}function Yr(e){var n=e.children;return(0,t.jsx)("div",{style:{color:"salmon"},children:n})}var qr=function(e){return e>0?"+".concat(e):"".concat(e)};var Jr=function(e){var n=e.active,r=e.hidden,i=e.refineType,l=e.refine,s=e.onClick;return(0,t.jsxs)(Br,{active:n,last:!0,hidden:r,value:i,onClick:s,children:[(0,t.jsxs)(Wr,{children:[l.icon&&(0,t.jsx)(Kr,{src:l.icon}),l.name]}),l.mt&&(0,t.jsxs)(Lr,{children:["\u5a01\u529b ",l.mt]}),l.cd&&(0,t.jsxs)(Ur,{cd:l.cd,children:["\u5967\u7fa9 cd",qr(l.cd)]}),(0,t.jsxs)(Vr,{children:[l.hp&&(0,t.jsxs)(zr,{children:["HP ",qr(l.hp)]}),l.atk&&(0,t.jsxs)(zr,{children:["\u653b\u64ca ",qr(l.atk)]}),l.spd&&(0,t.jsxs)(zr,{children:["\u901f\u5ea6 ",qr(l.spd)]}),l.def&&(0,t.jsxs)(zr,{children:["\u9632\u5b88 ",qr(l.def)]}),l.res&&(0,t.jsxs)(zr,{children:["\u9b54\u9632 ",qr(l.res)]})]}),l.exclusive&&(0,t.jsx)(Yr,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Qr(e){var n=e.heroId,r=e.weapon,l=e.refine,o=e.selectRefine,c=function(e){var n=e.heroId,r=e.weapon,t=(0,i.K)(),l=t.heroDB,s=t.weaponDB;return{options:(0,a.useMemo)((function(){return W({heroDB:l,weaponDB:s,heroId:n,weapon:r})}),[l,s,n,r])}}({heroId:n,weapon:r}).options,u=(0,a.useCallback)((function(e){e.stopPropagation(),o(e.currentTarget.value)}),[o]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Br,{active:!l,value:"",onClick:u,children:"\u7121\u935b\u9020"}),c.map((function(e){var n=e.value,r=(0,s.Z)(e,["value"]);return(0,t.jsx)(Jr,{refineType:n,refine:r,active:l===n,onClick:u},n)}))]})}var Xr=(0,a.memo)(Qr);var Gr=function(e){var n=e.hidden,r=e.onClickBack,i=e.heroId,l=e.weapon,s=e.refine,o=e.selectRefine,c=(0,a.useCallback)((function(e){o(e),r()}),[o,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsx)(Cn,{children:(0,t.jsx)("span",{children:"\u935b\u9020"})})]}),(0,t.jsx)(_n,{children:(0,t.jsx)(Xr,{heroId:i,weapon:l,refine:s,selectRefine:c})})]})};function $r(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function et(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$r(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function nt(e){var n=e.active,r=e.hidden,i=e.skill,l=e.onClick;return(0,t.jsxs)(Br,{active:n,last:i.last,hidden:r,value:i.id,onClick:l,children:[(0,t.jsxs)(Mn,{children:[(0,t.jsxs)(En,{children:[i.icon&&(0,t.jsx)(Rn,{src:"/skills/".concat(i.icon)}),i.name]}),(0,t.jsxs)(Zn,{children:[i.sp,"SP"]})]}),i.mt&&(0,t.jsxs)(Hn,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,t.jsxs)(Kn,{cd:i.cd,children:["\u5967\u7fa9 cd",Vn(i.cd)]}),(0,t.jsxs)(Fn,{children:[i.hp&&(0,t.jsxs)(Wn,{children:["HP ",Vn(i.hp)]}),i.atk&&(0,t.jsxs)(Wn,{children:["\u653b\u64ca ",Vn(i.atk)]}),i.spd&&(0,t.jsxs)(Wn,{children:["\u901f\u5ea6 ",Vn(i.spd)]}),i.def&&(0,t.jsxs)(Wn,{children:["\u9632\u5b88 ",Vn(i.def)]}),i.res&&(0,t.jsxs)(Wn,{children:["\u9b54\u9632 ",Vn(i.res)]})]}),i.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var rt=(0,a.memo)(nt);function tt(e){var n=e.heroId,r=e.skillType,l=e.skillId,o=e.selectSkill,c=e.filter,u=e.maxSkill,d=function(e){var n=e.heroId,r=e.skillType,t=e.filter,l=e.maxSkill,s=(0,i.K)(),o=s.rulesDB,c=s.heroDB,u=s["".concat(r,"DB")],d=(0,a.useMemo)((function(){return O({rulesDB:o,heroDB:c,skillDB:u,heroId:n})}),[o,c,u,n]);return{options:(0,a.useMemo)((function(){return d.map((function(e){var n=!1;return l&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),et(et({},e),{},{hidden:n})}))}),[d,t,l])}}({heroId:n,skillType:r,skillId:l,filter:c,maxSkill:u}).options,p=(0,a.useCallback)((function(e){e.stopPropagation(),o(e.currentTarget.value)}),[o]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Br,{active:!l,value:"",onClick:p,children:"\u7121\u6280\u80fd"}),d.map((function(e){var n=e.hidden,r=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(rt,{hidden:n,active:l===r.id,skill:r,onClick:p},r.id)}))]})}var it=(0,a.memo)(tt);var lt=function(e){var n=e.hidden,r=e.skillType,i=e.title,l=e.onClickBack,s=e.heroId,o=e.skillId,c=e.selectSkill,u=e.maxSkill,d=e.toggleMaxSkill,p=e.setDefaultSkill,h=(0,a.useState)(""),f=h[0],k=h[1],v=(0,a.useCallback)((function(e){k(e.currentTarget.value)}),[]),x=(0,a.useCallback)((function(e){c(e),l()}),[c,l]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:l}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:i}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:u,onChange:d,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),p&&(0,t.jsx)(Dn,{onClick:p})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:v}),(0,t.jsx)(_n,{children:(0,t.jsx)(it,{heroId:s,skillType:r,skillId:o,selectSkill:x,filter:f,maxSkill:u})})]})};function st(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function at(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?st(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function ot(e){var n=e.heroId,r=e.filter,t=e.maxSkill,l=(0,i.K)(),s=l.rulesDB,o=l.heroDB,c=l.assistDB,u=(0,a.useMemo)((function(){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.assistDB,i=e.heroId;if(!n||!r||!t||!i)return[];var l=(0,x.cK)(r,i);return l?Object.values(t).filter((function(e){if(e.exclusive)return e.exclusive.includes(i);var r=g({rulesDB:n,ruleId:e.rules});return!r||(!r.moveType||!1!==r.moveType[l.moveType])&&(!r.weaponType||!1!==r.weaponType[l.weaponType])})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return b(b({},e),{},{query:n})})):[]}({rulesDB:s,heroDB:o,assistDB:c,heroId:n})}),[s,o,c,n]);return{options:(0,a.useMemo)((function(){return u.map((function(e){var n=!1;return t&&!e.last&&(n=!0),!n&&r&&(n=!e.query.includes(r.toLowerCase())),at(at({},e),{},{hidden:n})}))}),[u,r,t])}}function ct(e){var n=e.active,r=e.hidden,i=e.assist,l=e.onClick;return(0,t.jsxs)(Br,{active:n,last:i.last,hidden:r,value:i.id,onClick:l,children:[(0,t.jsxs)(Mn,{children:[(0,t.jsx)(En,{children:i.name}),(0,t.jsxs)(Nn,{children:[i.sp,"SP"]})]}),i.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var ut=(0,a.memo)(ct);function dt(e){var n=e.heroId,r=e.assist,i=e.selectAssist,l=ot({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,o=(0,a.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Br,{active:!r,value:"",onClick:o,children:"\u7121\u6280\u80fd"}),l.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(ut,{hidden:n,active:r===i.id,assist:i,onClick:o},i.id)}))]})}var pt=(0,a.memo)(dt);var ht=function(e){var n=e.hidden,r=e.onClickBack,i=e.heroId,l=e.assist,s=e.selectAssist,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,a.useState)(""),p=d[0],h=d[1],f=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u652f\u63f4"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,t.jsx)(Dn,{onClick:u})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,t.jsx)(_n,{children:(0,t.jsx)(pt,{heroId:i,assist:l,selectAssist:k,filter:p,maxSkill:o})})]})};function ft(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function kt(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ft(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function vt(e){var n=e.heroId,r=e.filter,t=e.maxSkill,l=(0,i.K)(),s=l.rulesDB,o=l.heroDB,c=l.specialDB,u=(0,a.useMemo)((function(){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.specialDB,i=e.heroId;if(!n||!r||!t||!i)return[];var l=(0,x.cK)(r,i);return l?Object.values(t).filter((function(e){if(e.exclusive)return e.exclusive.includes(i);var r=g({rulesDB:n,ruleId:e.rules});return!r||(!r.moveType||!1!==r.moveType[l.moveType])&&(!r.weaponType||!1!==r.weaponType[l.weaponType])})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return P(P({},e),{},{query:n})})):[]}({rulesDB:s,heroDB:o,specialDB:c,heroId:n})}),[s,o,c,n]);return{options:(0,a.useMemo)((function(){return u.map((function(e){var n=!1;return t&&!e.last&&(n=!0),!n&&r&&(n=!e.query.includes(r.toLowerCase())),kt(kt({},e),{},{hidden:n})}))}),[u,r,t])}}function xt(e){var n=e.active,r=e.hidden,i=e.special,l=e.onClick;return(0,t.jsxs)(Br,{active:n,last:i.last,hidden:r,value:i.id,onClick:l,children:[(0,t.jsxs)(Mn,{children:[(0,t.jsx)(En,{children:i.name}),(0,t.jsxs)(Nn,{children:[i.sp,"SP"]})]}),(0,t.jsxs)("div",{children:["CD ",i.cd]}),i.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var gt=(0,a.memo)(xt);function jt(e){var n=e.heroId,r=e.special,i=e.selectSpecial,l=vt({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,o=(0,a.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Br,{active:!r,value:"",onClick:o,children:"\u7121\u6280\u80fd"}),l.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(gt,{hidden:n,active:r===i.id,special:i,onClick:o},i.id)}))]})}var bt=(0,a.memo)(jt);var mt=function(e){var n=e.hidden,r=e.onClickBack,i=e.heroId,l=e.special,s=e.selectSpecial,o=e.maxSkill,c=e.toggleMaxSkill,u=e.setDefaultSkill,d=(0,a.useState)(""),p=d[0],h=d[1],f=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u5967\u7fa9"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),u&&(0,t.jsx)(Dn,{onClick:u})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:f}),(0,t.jsx)(_n,{children:(0,t.jsx)(bt,{heroId:i,special:l,selectSpecial:k,filter:p,maxSkill:o})})]})};function yt(e){var n=e.active,r=e.hidden,i=e.skill,l=e.onClick;return(0,t.jsxs)(Br,{active:n,last:i.last,hidden:r,value:i.id,onClick:l,children:[(0,t.jsxs)(En,{children:[i.icon&&(0,t.jsx)(Rn,{src:"/skills/".concat(i.icon)}),i.name]}),i.mt&&(0,t.jsxs)(Hn,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,t.jsxs)(Kn,{cd:i.cd,children:["\u5967\u7fa9 cd",Vn(i.cd)]}),(0,t.jsxs)(Fn,{children:[i.hp&&(0,t.jsxs)(Wn,{children:["HP ",Vn(i.hp)]}),i.atk&&(0,t.jsxs)(Wn,{children:["\u653b\u64ca ",Vn(i.atk)]}),i.spd&&(0,t.jsxs)(Wn,{children:["\u901f\u5ea6 ",Vn(i.spd)]}),i.def&&(0,t.jsxs)(Wn,{children:["\u9632\u5b88 ",Vn(i.def)]}),i.res&&(0,t.jsxs)(Wn,{children:["\u9b54\u9632 ",Vn(i.res)]})]}),i.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var wt=(0,a.memo)(yt);function Dt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Bt(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Dt(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Ot(e){var n=e.skill,r=e.maxSkill,t=e.filter,i=!1;return r&&!n.last&&(i=!0),!i&&t&&(i=!n.query.includes(t.toLowerCase())),Bt(Bt({},n),{},{hidden:i})}function Ct(e){var n=e.heroId,r=e.seal,l=e.selectSeal,o=function(e){var n=e.heroId,r=e.filter,t=e.maxSkill,l=(0,i.K)(),s=l.rulesDB,o=l.heroDB,c=l.sealDB;return{skillAOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.skillA,heroId:n}).map((function(e){return Ot({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t]),skillBOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.skillB,heroId:n}).map((function(e){return Ot({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t]),skillCOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.skillC,heroId:n}).map((function(e){return Ot({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t]),sealOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.seal,heroId:n}).map((function(e){return Ot({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}),c=o.skillAOptions,u=o.skillBOptions,d=o.skillCOptions,p=o.sealOptions,h=(0,a.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Br,{active:!r,value:"",onClick:h,children:"\u7121\u8056\u5370"}),(0,t.jsx)(zn,{children:"A\u6280\u80fd\u8056\u5370"}),c.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(wt,{hidden:n,active:r===i.id,skill:i,onClick:h},i.id)})),(0,t.jsx)(zn,{children:"B\u6280\u80fd\u8056\u5370"}),u.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(wt,{hidden:n,active:r===i.id,skill:i,onClick:h},i.id)})),(0,t.jsx)(zn,{children:"C\u6280\u80fd\u8056\u5370"}),d.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(wt,{hidden:n,active:r===i.id,skill:i,onClick:h},i.id)})),(0,t.jsx)(zn,{children:"\u5c08\u7528\u8056\u5370"}),p.map((function(e){var n=e.hidden,i=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(wt,{hidden:n,active:r===i.id,skill:i,onClick:h},i.id)}))]})}var St=(0,a.memo)(Ct);var It=function(e){var n=e.hidden,r=e.onClickBack,i=e.heroId,l=e.seal,s=e.selectSeal,o=e.maxSkill,c=e.toggleMaxSkill,u=(0,a.useState)(""),d=u[0],p=u[1],h=(0,a.useCallback)((function(e){p(e.currentTarget.value)}),[]),f=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u8056\u5370"}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:h}),(0,t.jsx)(_n,{children:(0,t.jsx)(St,{heroId:i,seal:l,selectSeal:f,filter:d,maxSkill:o})})]})};var Pt=function(){var e=(0,a.useState)(""),n=e[0],r=e[1];return{view:n,openHeroPicker:(0,a.useCallback)((function(){r("hero")}),[]),openRarityPicker:(0,a.useCallback)((function(){r("rarity")}),[]),openIVPicker:(0,a.useCallback)((function(){r("iv")}),[]),openMergePicker:(0,a.useCallback)((function(){r("merge")}),[]),openDragonflowerPicker:(0,a.useCallback)((function(){r("dragonflower")}),[]),openBlessingPicker:(0,a.useCallback)((function(){r("blessing")}),[]),openWeaponPicker:(0,a.useCallback)((function(){r("weapon")}),[]),openRefinePicker:(0,a.useCallback)((function(){r("refine")}),[]),openAssistPicker:(0,a.useCallback)((function(){r("assist")}),[]),openSpecialPicker:(0,a.useCallback)((function(){r("special")}),[]),openSkillAPicker:(0,a.useCallback)((function(){r("skillA")}),[]),openSkillBPicker:(0,a.useCallback)((function(){r("skillB")}),[]),openSkillCPicker:(0,a.useCallback)((function(){r("skillC")}),[]),openSealPicker:(0,a.useCallback)((function(){r("seal")}),[]),onClickBack:(0,a.useCallback)((function(){r("")}),[])}};function At(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function _t(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?At(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Tt=function(e){var n=Pt(),r=n.view,i=n.openHeroPicker,l=n.openRarityPicker,s=n.openIVPicker,a=n.openMergePicker,o=n.openDragonflowerPicker,c=n.openBlessingPicker,u=n.openWeaponPicker,d=n.openRefinePicker,p=n.openAssistPicker,h=n.openSpecialPicker,f=n.openSkillAPicker,k=n.openSkillBPicker,v=n.openSkillCPicker,x=n.openSealPicker,g=n.onClickBack;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rr,_t(_t({hidden:!!r},e),{},{openHeroPicker:i,openRarityPicker:l,openIVPicker:s,openMergePicker:a,openDragonflowerPicker:o,openBlessingPicker:c,openWeaponPicker:u,openRefinePicker:d,openAssistPicker:p,openSpecialPicker:h,openSkillAPicker:f,openSkillBPicker:k,openSkillCPicker:v,openSealPicker:x})),(0,t.jsx)(or,{hidden:"hero"!==r,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:g,resplendent:e.resplendent}),(0,t.jsx)(ur,{hidden:"rarity"!==r,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:g}),(0,t.jsx)(fr,{hidden:"iv"!==r,iv:e.iv,selectIV:e.setIV,onClickBack:g}),(0,t.jsx)(gr,{hidden:"blessing"!==r,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:g}),(0,t.jsx)(br,{hidden:"merge"!==r,merge:e.merge,selectMerge:e.setMerge,onClickBack:g}),(0,t.jsx)(Dr,{hidden:"dragonflower"!==r,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:g}),(0,t.jsx)(Fr,{hidden:"weapon"!==r,onClickBack:g,heroId:e.heroId,weapon:e.weapon,selectWeapon:e.setWeapon,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,t.jsx)(Gr,{hidden:"refine"!==r,onClickBack:g,heroId:e.heroId,weapon:e.weapon,refine:e.refine,selectRefine:e.setRefine}),(0,t.jsx)(ht,{hidden:"assist"!==r,onClickBack:g,heroId:e.heroId,assist:e.assist,selectAssist:e.setAssist,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),(0,t.jsx)(mt,{title:"A\u6280\u80fd",hidden:"special"!==r,onClickBack:g,heroId:e.heroId,special:e.special,selectSpecial:e.setSpecial,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),(0,t.jsx)(lt,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==r,onClickBack:g,heroId:e.heroId,skillId:e.skillA,selectSkill:e.setSkillA,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),(0,t.jsx)(lt,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==r,onClickBack:g,heroId:e.heroId,skillId:e.skillB,selectSkill:e.setSkillB,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),(0,t.jsx)(lt,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==r,onClickBack:g,heroId:e.heroId,skillId:e.skillC,selectSkill:e.setSkillC,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),(0,t.jsx)(It,{hidden:"seal"!==r,onClickBack:g,heroId:e.heroId,seal:e.skillC,selectSeal:e.setSeal,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill})]})},Mt={weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""};function Et(){var e=(0,i.K)(),n=e.rulesDB,r=e.heroDB,t=e.weaponDB,l=e.assistDB,s=e.specialDB,o=e.skillADB,c=e.skillBDB,u=e.skillCDB,d=e.sealDB,p=e.defaultSkillDB,h=(0,a.useState)("Feh"),f=h[0],k=h[1],j=(0,a.useState)(5),b=j[0],m=j[1],y=(0,a.useState)(""),w=y[0],D=y[1],B=(0,a.useState)(0),O=B[0],S=B[1],I=(0,a.useState)(0),P=I[0],A=I[1],_=(0,a.useState)(""),T=_[0],M=_[1],E=(0,a.useState)(!1),Z=E[0],H=E[1],F=(0,a.useCallback)((function(){H((function(e){return!e}))}),[]),W=(0,a.useRef)({weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""}),K=(0,a.useRef)(""),L=(0,a.useState)(""),V=L[0],z=L[1],U=(0,a.useState)(""),Y=U[0],q=U[1],J=(0,a.useState)(""),Q=J[0],X=J[1],G=(0,a.useState)(""),$=G[0],ee=G[1],ne=(0,a.useState)(""),re=ne[0],te=ne[1],ie=(0,a.useState)(""),le=ie[0],se=ie[1],ae=(0,a.useState)(""),oe=ae[0],ce=ae[1],ue=(0,a.useState)(""),de=ue[0],pe=ue[1],he=(0,a.useCallback)((function(){z(W.current.weapon)}),[]),fe=(0,a.useCallback)((function(){X(W.current.assist)}),[]),ke=(0,a.useCallback)((function(){ee(W.current.special)}),[]),ve=(0,a.useCallback)((function(){te(W.current.skillA)}),[]),xe=(0,a.useCallback)((function(){se(W.current.skillB)}),[]),ge=(0,a.useCallback)((function(){ce(W.current.skillC)}),[]),je=(0,a.useCallback)((function(){he(),fe(),ke(),ve(),xe(),ge()}),[he,fe,ke,ve,xe,ge]);K.current=V;var be=(0,a.useCallback)((function(e){k(e),W.current=function(e){var n=e.defaultSkillDB,r=e.heroId;if(!n||!r||!n[r])return Mt;var t=n[r],i="",l="",s="",a="",o="",c="";return t.weapon&&(i=Object.keys(t.weapon).pop()),t.assist&&(l=Object.keys(t.assist).pop()),t.special&&(s=Object.keys(t.special).pop()),t.skillA&&(a=Object.keys(t.skillA).pop()),t.skillB&&(o=Object.keys(t.skillB).pop()),t.skillC&&(c=Object.keys(t.skillC).pop()),{weapon:i,assist:l,special:s,skillA:a,skillB:o,skillC:c}}({defaultSkillDB:p,heroId:e}),z((function(){return R({heroDB:r,weaponDB:t,heroId:e,weaponId:K.current})?K.current:""})),q((function(n){return function(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,i=e.weaponId,l=e.refineId;if(!R({heroDB:n,weaponDB:r,heroId:t,weaponId:i}))return!1;var s=N({heroDB:n,weaponDB:r,heroId:t,weapon:i});return!!(s&&s.refine&&s.refine[l])&&(!s.refine[l].exclusive||s.refine[l].exclusive.includes(t))}({heroDB:r,weaponDB:t,heroId:e,weaponId:K.current,refineId:n})?n:""})),X((function(t){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.assistDB,i=e.heroId,l=e.assistId;if(!n||!r||!t||!i||!l)return!1;var s=(0,x.cK)(r,i);if(!s)return!1;var a=t[l];if(!a)return!1;if(a.exclusive)return a.exclusive.includes(i);var o=g({rulesDB:n,ruleId:a.rules});return!o||(!o.moveType||!1!==o.moveType[s.moveType])&&(!o.weaponType||!1!==o.weaponType[s.weaponType])}({rulesDB:n,heroDB:r,assistDB:l,heroId:e,assistId:t})?t:""})),ee((function(t){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.specialDB,i=e.heroId,l=e.specialId;if(!n||!r||!t||!i||!l)return!1;var s=(0,x.cK)(r,i);if(!s)return!1;var a=t[l];if(!a)return!1;if(a.exclusive)return a.exclusive.includes(i);var o=g({rulesDB:n,ruleId:a.rules});return!o||(!o.moveType||!1!==o.moveType[s.moveType])&&(!o.weaponType||!1!==o.weaponType[s.weaponType])}({rulesDB:n,heroDB:r,specialDB:s,heroId:e,specialId:t})?t:""})),te((function(t){return C({rulesDB:n,heroDB:r,skillDB:o,heroId:e,skillId:t})?t:""})),se((function(t){return C({rulesDB:n,heroDB:r,skillDB:c,heroId:e,skillId:t})?t:""})),ce((function(t){return C({rulesDB:n,heroDB:r,skillDB:u,heroId:e,skillId:t})?t:""})),pe((function(t){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.sealDB,i=e.heroId,l=e.sealId;if(!r||!t||!i||!l)return!1;var s=(0,x.cK)(r,i);if(!s)return!1;var a=t.skillA[l]||t.skillB[l]||t.skillC[l]||t.seal[l];if(!a)return!1;var o=g({rulesDB:n,ruleId:a.rules});return!o||(!o.moveType||!1!==o.moveType[s.moveType])&&(!o.weaponType||!1!==o.weaponType[s.weaponType])}({rulesDB:n,heroDB:r,sealDB:d,heroId:e,sealId:t})?t:""}))}),[n,r,t,l,s,o,c,u,d,p]),me=(0,a.useState)(!1),ye=me[0],we=me[1],De=(0,a.useCallback)((function(){we((function(e){return!e}))}),[]),Be=(0,a.useState)(!1),Oe=Be[0],Ce=Be[1],Se=(0,a.useCallback)((function(){Ce((function(e){return!e}))}),[]),Ie=(0,a.useState)(!1),Pe=Ie[0],Ae=Ie[1],_e=(0,a.useCallback)((function(){Ae((function(e){return!e}))}),[]),Te=(0,a.useState)(!0),Me=Te[0],Ee=Te[1],Ze=(0,a.useCallback)((function(){Ee((function(e){return!e}))}),[]),Re=(0,a.useState)(!1),Ne=Re[0],He=Re[1],Fe=(0,a.useCallback)((function(){He(!0)}),[]),We=(0,a.useCallback)((function(){He(!1)}),[]),Ke=(0,v.Z)("/assets/summon-stone.jpg");return{heroId:f,onChangeHero:be,rarity:b,setRarity:m,iv:w,setIV:D,merge:O,setMerge:S,dragonflower:P,setDragonflower:A,blessing:T,setBlessing:M,support:Z,toggleSupport:F,arena:ye,toggleArena:De,resplendent:Oe,toggleResplendent:Se,weapon:V,setWeapon:z,refine:Y,setRefine:q,assist:Q,setAssist:X,special:$,setSpecial:ee,skillA:re,setSkillA:te,skillB:le,setSkillB:se,skillC:oe,setSkillC:ce,seal:de,setSeal:pe,setDefaultWeapon:he,setDefaultAssist:fe,setDefaultSpecial:ke,setDefaultSkillA:ve,setDefaultSkillB:xe,setDefaultSkillC:ge,setAllSkillDefault:je,lv1:Pe,toggleLv1:_e,maxSkill:Me,toggleMaxSkill:Ze,bg:Ke,editorIsOpen:Ne,openEditor:Fe,closeEditor:We}}var Zt=r(2154),Rt=r.n(Zt);var Nt=function(){var e=Et(),n=e.heroId,r=e.onChangeHero,i=e.rarity,s=e.setRarity,a=e.iv,o=e.setIV,c=e.merge,u=e.setMerge,d=e.dragonflower,p=e.setDragonflower,h=e.blessing,f=e.setBlessing,k=e.support,v=e.toggleSupport,x=e.arena,g=e.toggleArena,j=e.resplendent,b=e.toggleResplendent,m=e.weapon,y=e.setWeapon,w=e.refine,D=e.setRefine,B=e.assist,O=e.setAssist,C=e.special,S=e.setSpecial,I=e.skillA,P=e.setSkillA,A=e.skillB,_=e.setSkillB,T=e.skillC,M=e.setSkillC,E=e.seal,Z=e.setSeal,R=e.setDefaultWeapon,N=e.setDefaultAssist,H=e.setDefaultSpecial,F=e.setDefaultSkillA,W=e.setDefaultSkillB,K=e.setDefaultSkillC,L=e.setAllSkillDefault,V=e.lv1,z=e.toggleLv1,U=e.maxSkill,Y=e.toggleMaxSkill,q=e.bg,J=e.editorIsOpen,Q=e.openEditor,X=e.closeEditor;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{children:(0,t.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),(0,t.jsx)("div",{style:{background:"url('".concat(q,"') center / cover no-repeat fixed")},children:(0,t.jsxs)("div",{className:Rt().container,children:[(0,t.jsx)("div",{className:Rt().viewer,children:(0,t.jsx)(on,{heroId:n,rarity:i,iv:a,merge:c,dragonflower:d,blessing:h,support:k,arena:x,resplendent:j,weapon:m,refine:w,assist:B,special:C,skillA:I,skillB:A,skillC:T,seal:E,lv1:V,openEditor:Q})}),(0,t.jsx)("div",{className:Rt().editor,hidden:!J,children:(0,t.jsx)(Tt,{heroId:n,onChangeHero:r,rarity:i,setRarity:s,iv:a,setIV:o,merge:c,setMerge:u,dragonflower:d,setDragonflower:p,blessing:h,setBlessing:f,support:k,toggleSupport:v,arena:x,toggleArena:g,resplendent:j,toggleResplendent:b,weapon:m,setWeapon:y,refine:w,setRefine:D,assist:B,setAssist:O,special:C,setSpecial:S,skillA:I,setSkillA:P,skillB:A,setSkillB:_,skillC:T,setSkillC:M,seal:E,setSeal:Z,setDefaultWeapon:R,setDefaultAssist:N,setDefaultSpecial:H,setDefaultSkillA:F,setDefaultSkillB:W,setDefaultSkillC:K,setAllSkillDefault:L,lv1:V,toggleLv1:z,maxSkill:U,toggleMaxSkill:Y,closeEditor:X})})]})})]})};var Ht=!0,Ft=function(e){var n=e.db;return(0,t.jsx)(i.Q.Provider,{value:n,children:(0,t.jsx)(Nt,{})})}},532:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return r(8832)}])},4299:function(e){e.exports={container:"styles_container__1uNtQ","neutral-button":"styles_neutral-button__HXZYg","blessing-button":"styles_blessing-button__m41R8"}},2220:function(e){e.exports={container:"styles_container__3csrI","neutral-button":"styles_neutral-button__2Xm3a","iv-button":"styles_iv-button__2PgFW"}},7815:function(e){e.exports={button:"editor_button__2bje7",title:"editor_title__38fof","title-textgroup":"editor_title-textgroup__1ohLJ",content:"editor_content__1OtHF",section:"editor_section__f2th3","section-group":"editor_section-group__242gp","hero-header":"editor_hero-header__rwTMX","button-content":"editor_button-content__3umvY","editor-img":"editor_editor-img__1daYT","close-button":"editor_close-button__3FeSO",container:"editor_container__3yfjQ",input:"editor_input__16kLJ",options:"editor_options__2QYDS"}},5492:function(e){e.exports={label:"labelcheckbox_label__1h2GM","label-checkbox":"labelcheckbox_label-checkbox__3dshW"}},8929:function(e){e.exports={canvas:"UnitViewer_canvas__ZU91i",container:"UnitViewer_container__2EDNF",button:"UnitViewer_button__1Aa1C",download:"UnitViewer_download__2J1oh",menu:"UnitViewer_menu__3HcnP"}},2154:function(e){e.exports={container:"UnitEditor_container__1PG6T",viewer:"UnitEditor_viewer__2ZQQp",editor:"UnitEditor_editor__36g2J"}}},function(e){e.O(0,[744,758,736,774,888,179],(function(){return n=532,e(e.s=n);var n}));var n=e.O();_N_E=n}]);