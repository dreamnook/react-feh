(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{8832:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return Wt},default:function(){return Kt}});var t=r(5893),l=r(9127),i=r(9008),s=r(7375),a=r(7294),o=r(6156);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var u=function(e){return(0,t.jsxs)("svg",d(d({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},e),{},{children:[(0,t.jsx)("path",{d:"M38 18h-8v-12h-12v12h-8l14 14 14-14zm-28 18v4h28v-4h-28z"}),(0,t.jsx)("path",{d:"M0 0h48v48h-48z",fill:"none"})]}))};function p(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f=function(e){return(0,t.jsxs)("svg",h(h({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,t.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,t.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]}))},k=r(3391),v=r(2565),x=r(5545);function g(e){var n,r,t,l=e.rulesDB,i=e.ruleId,s=e.moveType,a=e.colorType,o=e.weaponType,c=function(e){var n=e.rulesDB,r=e.ruleId;return n&&r?n[r]:null}({rulesDB:l,ruleId:i});return!c||!1!==(null===(n=c.moveType)||void 0===n?void 0:n[s])&&(!1!==(null===(r=c.colorType)||void 0===r?void 0:r[a])&&!1!==(null===(t=c.weaponType)||void 0===t?void 0:t[o]))}function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function m(e){var n=e.assistDB,r=e.assist;return n&&r?n[r]:null}function y(e){var n=m({assistDB:e.assistDB,assist:e.assist});return(null===n||void 0===n?void 0:n.name)||""}function w(e){var n=e.sealDB,r=e.seal;return n&&r?n.skillA[r]?n.skillA[r]:n.skillB[r]?n.skillB[r]:n.skillC[r]?n.skillC[r]:n.seal[r]?n.seal[r]:null:null}function D(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function B(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?D(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function O(e){var n=e.rulesDB,r=e.heroDB,t=e.skillDB,l=e.heroId;if(!n||!r||!t||!l)return[];var i=(0,x.cK)(r,l);return i?Object.values(t).filter((function(e){return e.exclusive?e.exclusive.includes(l):g({rulesDB:n,ruleId:e.rules,moveType:i.moveType,colorType:i.colorType,weaponType:i.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return B(B({},e),{},{query:n})})):[]}function C(e){var n=e.rulesDB,r=e.heroDB,t=e.skillDB,l=e.heroId,i=e.skillId;if(!n||!r||!t||!l||!i)return!1;var s=(0,x.cK)(r,l);if(!s)return!1;var a=t[i];return!!a&&(a.exclusive?a.exclusive.includes(l):g({rulesDB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}function S(e){var n=e.skillDB,r=e.skillId;return n&&r?n[r]:null}function I(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?I(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function A(e){var n=e.specialDB,r=e.special;return n&&r?n[r]:null}function _(e){var n=A({specialDB:e.specialDB,special:e.special});return(null===n||void 0===n?void 0:n.name)||""}function T(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?T(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function E(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function Z(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId;if(!r||!n||!t)return[];var l=(0,x.cK)(n,t);if(!l)return[];var i=E(l.weaponType),s=r[i];return i?Object.values(s).filter((function(e){return!e.exclusive||e.exclusive.includes(t)})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return M(M({},e),{},{query:n})})):[]}function R(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,l=e.weaponId;if(!r||!n||!t||!l)return!1;var i=(0,x.cK)(n,t);if(!i)return!1;var s=E(i.weaponType),a=r[s];if(!s)return!1;var o=a[l];return!!o&&(!o.exclusive||o.exclusive.includes(t))}function N(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,l=e.weapon;if(!r||!n||!l||!t)return null;var i=(0,x.cK)(n,t);return i?r[E(i.weaponType)][l]:null}function H(e){var n=N({heroDB:e.heroDB,weaponDB:e.weaponDB,heroId:e.heroId,weapon:e.weapon});return(null===n||void 0===n?void 0:n.name)||""}var F={atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632"};function W(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,l=e.weapon,i=N({heroDB:n,weaponDB:r,heroId:t,weapon:l});return i&&i.refine?Object.entries(i.refine).filter((function(e){var n=(0,k.Z)(e,2)[1];return!n.exclusive||n.exclusive.includes(t)})).map((function(e){var n=(0,k.Z)(e,2),r=n[0],t=M({value:r},n[1]);return t.name||(t.name=F[r]||r),t.icon&&(t.icon="/skills/weapon/".concat(t.icon,".png")),!t.icon&&F[r]&&(t.icon="/skills/weapon/".concat(r,".png")),t})):[]}function K(e){var n,r=e.heroDB,t=e.weaponDB,l=e.heroId,i=e.weapon,s=e.refine,a=N({heroDB:r,weaponDB:t,heroId:l,weapon:i});return null===a||void 0===a||null===(n=a.refine)||void 0===n?void 0:n[s]}var L={atk:"atk",spd:"spd",def:"def",res:"res"};function z(e){var n=e.heroDB,r=e.weaponDB,t=e.assistDB,l=e.specialDB,i=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,d=e.skills;return{weapon:N({heroDB:n,weaponDB:r,heroId:c,weapon:d.weapon}),assist:m({assistDB:t,assist:d.assist}),special:A({specialDB:l,special:d.special}),skillA:S({skillDB:i,skillId:d.skillA}),skillB:S({skillDB:s,skillId:d.skillB}),skillC:S({skillDB:a,skillId:d.skillC}),seal:w({sealDB:o,seal:d.seal})}}var V=["assist","special","skillA","skillB","skillC","seal"];var U=r(6032),q={1:{base:47,float:69},2:{base:49,float:74},3:{base:51,float:81},4:{base:53,float:86},5:{base:55,float:93}};var Y=function(e){var n=e.rarity,r=void 0===n?5:n,t=e.merge,l=e.bst,i=e.spt,s=e.blesser,a=void 0===s?0:s,o=q[r];return 2*(150+o.base+o.float+2*t+Math.floor(l/5)+Math.floor(i/100)+4*a)};function J(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var Q=function(){function e(n){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.Z)(this,"imageData",void 0),(0,o.Z)(this,"src",void 0),(0,o.Z)(this,"loadedData",void 0),(0,o.Z)(this,"callback",void 0),this.imageData=new Image,this.src="",this.loadedData=!1,this.callback=n,this.imageData.onload=function(){r.loadedData=!0,r.callback&&r.callback(!0)},this.imageData.onerror=function(){r.loadedData=!1,r.callback&&r.callback(!1)}}var n,r,t;return n=e,(r=[{key:"load",value:function(e){e!==this.src&&(this.loadedData=!1,this.src=e,this.imageData.src=e)}},{key:"loaded",get:function(){return this.loadedData}},{key:"image",get:function(){return this.imageData}}])&&J(n.prototype,r),t&&J(n,t),e}();var X=r(6469),G=16,$=554,ee=X.s6;var ne=174,re=555,te=["infantry","armored","cavalry","flying"];function le(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ie(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?le(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var se=1,ae=43,oe=85,ce=127,de=169,ue=[0,1,2,3,4,5,6,7,8,9,"x","+","-"].reduce((function(e,n,r){return ie(ie({},e),{},(0,o.Z)({},n,34*r+1))}),{});function pe(e,n,r,t,l,i){ue[t]&&e.drawImage(n,ue[t],r,32,40,l,i,16,20)}var he=240,fe=557,ke=[14,28,42],ve=["infantry","armored","cavalry","flying"];var xe=432,ge=425;var je=432,be=425;var me=275,ye=594,we=function(e,n,r){var t=37*r+1+ye;e.drawImage(n,me,t,35,35)};var De=82,Be=557,Oe=[14,28,42];var Ce=112,Se=557,Ie=[14,28,42];var Pe=130,Ae=594,_e=[14,28,42,56],Te=[1e3,100,10],Me=function(e,n,r,t){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:se,i=8+Ae+37*t;Te.forEach((function(t,s){if(r>=t){var a=Math.floor(r/t%10);pe(e,n,l,a,Pe+_e[s],i)}}));var s=r%10;pe(e,n,l,s,Pe+_e[3],i)};var Ee=465,Ze=594;function Re(e){var n=e.context,r=e.numberAtlas,t=e.accelerate,l=e.specialCD;if(l){var i=ae;t<0&&(i=oe),t>0&&(i=ce),function(e,n,r){pe(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae,r,Ee,8+Ze+74)}(n,r,t+l,i)}}var Ne=r(629),He=206,Fe=1224,We=["#ffa0af","white","#aaf0fa"],Ke=Object.entries({hp:"HP",atk:"\u653b\u64ca",spd:"\u901f\u5ea6",def:"\u9632\u5b88",res:"\u9b54\u9632",bst:"BST",arena:"\u9b25\u6280\u5206"});var Le=634,ze=1224,Ve={weapon:0,assist:1,special:2,skillA:3,skillB:4,skillC:5,seal:6};var Ue=296,qe=876,Ye=336,Je=992;var Qe={x:460,y:530};var Xe=195,Ge=370;function $e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function en(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$e(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var nn=[["background","/assets/background.jpg"],["foreground","/assets/foreground.png"],["foreground2","/assets/foreground2.png"],["portrait",""],["rarityAtlas","/assets/rarity.png"],["weaponTypeAtlas","/assets/weapon-type.png"],["moveTypeAtlas","/assets/move-type.png"],["dragonflowerAtlas","/assets/dragonflower.png"],["supportAtlas","/assets/support.png"],["blessingAtlas",""],["numberAtlas","/assets/number.png"],["weaponIcon","/skills/weapon.png"],["assistIcon","/skills/assist.png"],["specialIcon","/skills/special.png"],["textA","/assets/skill-a.png"],["textB","/assets/skill-b.png"],["textC","/assets/skill-c.png"],["textS","/assets/skill-s.png"],["arenaIcon","/assets/Arena_Crown.png"],["skillAIcon",""],["skillBIcon",""],["skillCIcon",""],["sealIcon",""],["resplendentIcon","/assets/god-wear-l.png"]],rn=[{skillName:"weapon",empty:"/skills/weapon.png"},{skillName:"skillA",empty:"/skills/empty.png"},{skillName:"skillB",empty:"/skills/empty.png"},{skillName:"skillC",empty:"/skills/empty.png"},{skillName:"seal",empty:"/skills/seal-empty.png"}];var tn=function(e){var n=e.heroId,r=e.rarity,t=e.iv,i=e.merge,o=e.dragonflower,c=e.blessing,d=e.support,u=e.arena,p=e.resplendent,h=e.weapon,f=e.refine,g=e.assist,j=e.special,b=e.skillA,m=e.skillB,y=e.skillC,w=e.seal,D=e.lv1,B=(0,l.K)(),O=(0,a.useRef)(null),C=(0,a.useRef)(null),S=(0,a.useRef)(),I=(0,a.useRef)(),P=(0,a.useRef)(),A=(0,a.useRef)(),_=(0,a.useRef)(),T=(0,a.useRef)(),M=(0,a.useRef)(),E=(0,a.useRef)(),Z=(0,a.useRef)(),R=(0,a.useRef)(),N=(0,a.useRef)(),H=(0,a.useRef)(),F=(0,a.useRef)(),W=(0,a.useRef)(),K=(0,a.useMemo)((function(){return(0,x.cK)(B.heroDB,n)}),[B.heroDB,n]),q=(0,a.useMemo)((function(){return{weapon:h,assist:g,special:j,skillA:b,skillB:m,skillC:y,seal:w}}),[h,g,j,b,m,y,w]),J=K.stats,X=(0,a.useMemo)((function(){return function(e){var n,r,t,l,i,s,a,o,c,d=e.heroDB,u=e.weaponDB,p=e.assistDB,h=e.specialDB,f=e.skillADB,v=e.skillBDB,g=e.skillCDB,j=e.sealDB,b=e.heroId,m=e.skills,y=e.refine,w=e.rarity,D=(0,x.cK)(d,b),B=z({heroDB:d,weaponDB:u,assistDB:p,specialDB:h,skillADB:f,skillBDB:v,skillCDB:g,sealDB:j,heroId:b,skills:m}),O={weapon:"-",assist:"-",special:"-",skillA:"-",skillB:"-",skillC:"-",seal:"-"},C=0,S=(null===(n=B.special)||void 0===n?void 0:n.cd)||0;C+=(null===(r=B.weapon)||void 0===r?void 0:r.cd)||0,C+=(null===(t=B.assist)||void 0===t?void 0:t.cd)||0,C+=(null===(l=B.skillA)||void 0===l?void 0:l.cd)||0,C+=(null===(i=B.skillB)||void 0===i?void 0:i.cd)||0,C+=(null===(s=B.skillC)||void 0===s?void 0:s.cd)||0,C+=(null===(a=B.seal)||void 0===a?void 0:a.cd)||0;var I={hp:0,atk:0,spd:0,def:0,res:0},P=0,A=0;Object.entries(B).forEach((function(e){var n=(0,k.Z)(e,2),r=n[0],t=n[1];if(O[r]=(null===t||void 0===t?void 0:t.name)||"-",I.hp+=(null===t||void 0===t?void 0:t.hp)||0,I.atk+=((null===t||void 0===t?void 0:t.mt)||0)+((null===t||void 0===t?void 0:t.atk)||0),I.spd+=(null===t||void 0===t?void 0:t.spd)||0,I.def+=(null===t||void 0===t?void 0:t.def)||0,I.res+=(null===t||void 0===t?void 0:t.res)||0,P+=(null===t||void 0===t?void 0:t.sp)||0,5===w){var l=null===t||void 0===t?void 0:t.bst;D.blesser&&null!==t&&void 0!==t&&t.bbst&&(l=null===t||void 0===t?void 0:t.bbst),A=Math.max(l||0,A)}}));var _=null===(o=B.weapon)||void 0===o||null===(c=o.refine)||void 0===c?void 0:c[y];return _&&(I.hp+=_.hp||0,I.atk+=(_.mt||0)+(_.atk||0),I.spd+=_.spd||0,I.def+=_.def||0,I.res+=_.res||0,C+=_.cd||0,B.weapon.exclusive||(P+=50),5===w&&(A=Math.max(A,_.bst||0))),{names:O,stats:I,accelerate:C,specialCD:S,spt:P,bst:A}}({heroDB:B.heroDB,weaponDB:B.weaponDB,assistDB:B.assistDB,specialDB:B.specialDB,skillADB:B.skillADB,skillBDB:B.skillBDB,skillCDB:B.skillCDB,sealDB:B.sealDB,skills:q,heroId:n,refine:f,rarity:r})}),[q,n,f,r,B.heroDB,B.weaponDB,B.assistDB,B.specialDB,B.skillADB,B.skillBDB,B.skillCDB,B.sealDB]),le=(0,a.useMemo)((function(){return(0,U.f)(r,J,t,i,d,X.stats,D,u,o,p)}),[r,J,t,i,d,X,D,u,o,p]),ie=(0,a.useMemo)((function(){return Y({rarity:r,merge:i,bst:Math.max(le.bst,X.bst,K.bst||0),spt:X.spt})}),[r,i,le.bst,X.bst,X.spt,K]),ce=(0,a.useRef)({}),ue=(0,a.useCallback)((function(){if(O.current){var e=ce.current,n=e.background,r=e.foreground,t=e.foreground2,l=e.portrait,i=e.rarityAtlas,a=e.weaponTypeAtlas,o=e.moveTypeAtlas,c=e.dragonflowerAtlas,d=e.supportAtlas,u=e.blessingAtlas,p=e.numberAtlas,h=e.weaponIcon,f=e.assistIcon,v=e.specialIcon,x=e.textA,g=e.textB,j=e.textC,b=e.textS,m=e.arenaIcon,y=e.skillAIcon,w=e.skillBIcon,D=e.skillCIcon,B=e.sealIcon,K=e.resplendentIcon,L=S.current,z=L.title,V=L.name,U=L.weaponType,q=L.moveType,Y=!!S.current.blessing||!!E.current,J=O.current.getContext("2d");J.clearRect(0,0,540,960),n.loaded&&function(e){var n=e.context,r=e.background;e.support?n.drawImage(r,540,0,540,960,0,0,540,960):n.drawImage(r,0,0,540,960,0,0,540,960)}({context:J,background:n.image,support:Z.current}),l.loaded&&function(e){var n=e.context,r=e.portrait;n.drawImage(r,0,0,540,960,0,0,540,960)}({context:J,portrait:l.image}),r.loaded&&function(e){var n=e.context,r=e.foreground;n.drawImage(r,0,0,540,960,0,0,540,960)}({context:J,foreground:r.image}),t.loaded&&function(e){var n=e.context,r=e.foreground2;e.dragonflower?n.drawImage(r,0,50,540,50,0,542,540,50):n.drawImage(r,0,0,540,50,0,542,540,50)}({context:J,foreground2:t.image,dragonflower:M.current}),i.loaded&&function(e){var n=e.context,r=e.rarityAtlas;switch(e.rarity){case 5:n.drawImage(r,0,0,153,40,42,380,153,40);break;case 4:n.drawImage(r,0,41,153,40,42,380,153,40)}}({context:J,rarityAtlas:i.image,rarity:A.current}),a.loaded&&function(e){var n=e.context,r=e.weaponTypeAtlas,t=e.weaponType,l=ee.indexOf(t);l>-1&&n.drawImage(r,56*l,0,56,55,G,$,28,28)}({context:J,weaponTypeAtlas:a.image,weaponType:U}),o.loaded&&function(e){var n=e.context,r=e.moveTypeAtlas,t=e.moveType,l=te.indexOf(t);l>-1&&n.drawImage(r,56*l,0,52,52,ne,re,26,26)}({context:J,moveTypeAtlas:o.image,moveType:q}),c.loaded&&p.loaded&&function(e){var n=e.context,r=e.dragonflowerAtlas,t=e.numberAtlas,l=e.moveType,i=e.dragonflower;if(i){var s=ve.indexOf(l);s>-1&&n.drawImage(r,0,58*s,64,58,216,546,48,44);var a=0,o=ae;pe(n,t,o,"+",he+ke[0],fe),a+=1,i>9&&(pe(n,t,o,1,he+ke[a],fe),a+=1),pe(n,t,o,i%10,he+ke[a],fe)}}({context:J,dragonflowerAtlas:c.image,numberAtlas:p.image,moveType:q,dragonflower:M.current}),d.loaded&&function(e){var n=e.context,r=e.supportAtlas,t=e.support,l=e.hasBlessing?108:0;t&&n.drawImage(r,xe-l,ge,108,115)}({context:J,supportAtlas:d.image,support:Z.current,hasBlessing:Y}),u.loaded&&function(e){var n=e.context,r=e.blessingAtlas;n.drawImage(r,je,be,108,115)}({context:J,blessingAtlas:u.image}),p.loaded&&(!function(e){var n=e.context,r=e.numberAtlas,t=e.lv1?1:40,l=0;t>9&&pe(n,r,ae,4,De+Oe[l],Be),pe(n,r,ae,t%10,De+Oe[l+=1],Be)}({context:J,numberAtlas:p.image,lv1:F.current}),function(e){var n=e.context,r=e.numberAtlas,t=e.merge;if(!(t<=0)){var l=0,i=t>9?de:ae;pe(n,r,i,"+",Ce+Ie[0],Se),l+=1,t>9&&(pe(n,r,i,1,Ce+Ie[l],Se),l+=1),pe(n,r,i,t%10,Ce+Ie[l],Se)}}({context:J,numberAtlas:p.image,merge:T.current}),function(e){var n=e.context,r=e.numberAtlas,t=e.stats,l=e.score,i=e.sbst,s=e.bst;Object.values(t).forEach((function(e,t){Me(n,r,e,t,se)}));var a=i>s?oe:de;Me(n,r,s,5,de),Me(n,r,l,6,a)}(en({context:J,numberAtlas:p.image,score:W.current,sbst:Math.max(I.current.bst||0,S.current.bst||0)},P.current)),Re({context:J,numberAtlas:p.image,accelerate:I.current.accelerate,specialCD:I.current.specialCD})),function(e){var n=e.context,r=e.weaponIcon,t=e.assistIcon,l=e.specialIcon,i=e.textA,s=e.textB,a=e.textC,o=e.textS,c=e.skillAIcon,d=e.skillBIcon,u=e.skillCIcon,p=e.sealIcon;r.loaded&&we(n,r.image,0),t.loaded&&we(n,t.image,1),l.loaded&&we(n,l.image,2),c.loaded&&we(n,c.image,3),n.drawImage(i.image,me+20,ye+112+18,18,18),d.loaded&&we(n,d.image,4),n.drawImage(s.image,me+20,ye+149+18,18,18),u.loaded&&we(n,u.image,5),n.drawImage(a.image,me+20,ye+186+18,18,18),p.loaded&&we(n,p.image,6),n.drawImage(o.image,me+20,ye+223+18,18,18)}({context:J,weaponIcon:h,assistIcon:f,specialIcon:v,textA:x,textB:g,textC:j,textS:b,skillAIcon:y,skillBIcon:w,skillCIcon:D,sealIcon:B}),C.current.getContext("2d").clearRect(0,0,1080,1920),function(e){var n=e.canvas,r=e.iv,t=e.merge,l=n.getContext("2d");l.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",l.fillStyle="white",l.strokeStyle="#101010",l.textAlign="center",l.textBaseline="middle",l.lineJoin="round",l.lineWidth=8;var i=(0,Ne.$r)(r),s=i.boon,a=i.bane,o={hp:1,atk:1,spd:1,def:1,res:1,bst:1,arena:1};o[s]+=1,o[a]-=1,o[a]=t>0?1:o[a],Ke.forEach((function(e,n){var r=(0,k.Z)(e,2),t=r[0],i=r[1],s=Fe+74*n;l.fillStyle=We[o[t]],l.strokeText(i,He,s),l.fillText(i,He,s)}))}({canvas:C.current,iv:_.current,merge:T.current}),function(e){var n=e.canvas,r=e.refine,t=e.weapon,l=(0,s.Z)(e,["canvas","refine","weapon"]),i=n.getContext("2d");i.font="500 36px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif",i.textAlign="left",i.textBaseline="middle",i.lineJoin="round",i.lineWidth=8,i.strokeStyle="#101010",i.fillStyle=r&&"-"!==r?"lime":"white";var a=Le+("-"===t?4:0),o=ze;i.strokeText(t,a,o),i.fillText(t,a,o),i.fillStyle="white",Object.keys(l).forEach((function(e){var n=l[e],r=ze+74*Ve[e],t="-"===n?4:0;i.strokeText(n,Le+t,r),i.fillText(n,Le+t,r)}))}(en({canvas:C.current,refine:H.current},I.current.names)),function(e){var n=e.canvas,r=e.title,t=e.name,l=n.getContext("2d");l.font="500 48px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",l.fillStyle="white",l.strokeStyle="#220d00",l.textAlign="center",l.textBaseline="middle",l.lineJoin="round",l.lineWidth=8,l.strokeText(r,Ue,qe),l.fillText(r,Ue,qe),l.font="500 52px FEH, 'Microsoft YaHei', 'Helvetica Neue', Helvetica, 'Microsoft JhengHei', Arial, sans-serif",l.strokeText(t,Ye,Je),l.fillText(t,Ye,Je)}({canvas:C.current,title:z,name:V}),R.current&&m&&function(e){var n=e.context,r=e.arenaIcon;n.drawImage(r,Qe.x,Qe.y,50,49)}({context:J,arenaIcon:m.image}),N.current&&K&&function(e){var n=e.context,r=e.resplendentIcon;n.drawImage(r,Xe,Ge,64,63)}({context:J,resplendentIcon:K.image}),J.drawImage(C.current,0,0,540,960)}}),[]);(0,a.useEffect)((function(){C.current=document.createElement("canvas"),C.current.width=1080,C.current.height=1920}),[]),(0,a.useEffect)((function(){nn.forEach((function(e){var n=(0,k.Z)(e,2),r=n[0],t=n[1];ce.current[r]=new Q(ue),ce.current[r].load((0,v.Z)(t))}))}),[ce,ue]),(0,a.useEffect)((function(){var e=function(e){var n=e.resplendentDB,r=e.heroId;return e.enable&&null!==n&&void 0!==n&&n.includes(r)?"".concat(r,"(R)"):r}({resplendentDB:B.resplendentDB,heroId:K.id,enable:p});ce.current.portrait.load((0,v.Z)("/portraits/".concat(e,".png")));var n=function(e){var n=e.heroDB,r=e.weaponDB,t=e.assistDB,l=e.specialDB,i=e.skillADB,s=e.skillBDB,a=e.skillCDB,o=e.sealDB,c=e.heroId,d=e.skills,u=e.refine,p=z({heroDB:n,weaponDB:r,assistDB:t,specialDB:l,skillADB:i,skillBDB:s,skillCDB:a,sealDB:o,heroId:c,skills:d}),h={};if(V.forEach((function(e){var n=p[e];h[e]=(null===n||void 0===n?void 0:n.icon)&&"/skills/".concat(n.icon)})),u&&"-"!==u){var f,k,v,x=L[u]||(null===(f=p.weapon)||void 0===f||null===(k=f.refine)||void 0===k||null===(v=k[u])||void 0===v?void 0:v.icon);x&&(h.weapon="/skills/weapon/".concat(x,".png"))}return h}({heroDB:B.heroDB,weaponDB:B.weaponDB,assistDB:B.assistDB,specialDB:B.specialDB,skillADB:B.skillADB,skillBDB:B.skillBDB,skillCDB:B.skillCDB,sealDB:B.sealDB,skills:q,heroId:K.id,refine:f});rn.forEach((function(e){var r=e.skillName,t=e.empty;ce.current["".concat(r,"Icon")].load((0,v.Z)("".concat(n[r]||t)))}));var r="-"!==K.blessing&&!!K.blessing||!!c,t=(0,v.Z)("/assets/blessing-".concat(K.blessing||c,".png"));ce.current.blessingAtlas.load(r?t:"")}),[K,p,q,f,c,le,B.heroDB,B.weaponDB,B.assistDB,B.specialDB,B.skillADB,B.skillBDB,B.skillCDB,B.sealDB,B.resplendentDB]),(0,a.useEffect)((function(){S.current=K,A.current=r,_.current=t,T.current=i,M.current=o,E.current=c,Z.current=d,R.current=u,N.current=p,H.current=f,F.current=D,W.current=ie,I.current=X,P.current=le,ue()}),[K,r,t,i,o,c,d,u,p,f,D,ie,X,le,ue]);var Pe=(0,a.useCallback)((function(){var e=O.current.toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="".concat(null===K||void 0===K?void 0:K.name,"-").concat(null===K||void 0===K?void 0:K.title,".png"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),[null===K||void 0===K?void 0:K.name,null===K||void 0===K?void 0:K.title]);return{canvasRef:O,triggerDownload:Pe}},ln=r(8929),sn=r.n(ln);function an(e){var n=e.openEditor,r=(0,s.Z)(e,["openEditor"]),l=tn(r),i=l.canvasRef,a=l.triggerDownload;return(0,t.jsxs)("div",{className:sn().container,children:[(0,t.jsx)("canvas",{className:sn().canvas,width:"540",height:"960",ref:i}),(0,t.jsx)("button",{className:"".concat(sn().button," ").concat(sn().download),onClick:a,children:(0,t.jsx)(u,{})}),(0,t.jsx)("button",{className:"".concat(sn().button," ").concat(sn().menu),onClick:n,children:(0,t.jsx)(f,{})})]})}var on=(0,a.memo)(an);function cn(e){return 4===e?"4\u2605":"5\u2606"}function dn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function un(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?dn(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var pn=function(e){return(0,t.jsxs)("svg",un(un({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,t.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),(0,t.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}))},hn=r(5988);function fn(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2629191159"}),(0,t.jsx)(hn.default,{id:"2629191159",children:["div.jsx-2629191159{width:1.5em;height:1.5em;border-radius:0.5em;background-color:white;}"]})]})}var kn=function(e){var n=e.className,r=e.checked,l=e.onChange,i=(0,a.useCallback)((function(e){l&&(e.stopPropagation(),l(!r))}),[r,l]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{role:"button",onClick:i,className:"jsx-19544621 "+(n||""),children:r&&(0,t.jsx)(fn,{})}),(0,t.jsx)(hn.default,{id:"19544621",children:["div.jsx-19544621{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:0.5em;width:2.5em;height:2.5em;font-size:1em;border:solid 1px white;background-color:transparent;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},vn=r(5492),xn=r.n(vn);var gn=function(e){var n=e.children,r=e.checked,l=e.onChange;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("label",{className:xn().label,children:[n,(0,t.jsx)(kn,{className:xn()["label-checkbox"],checked:r,onChange:l})]})})},jn=r(5262),bn=r(7226);var mn=function(e){var n=e.blessing,r=(0,a.useMemo)((function(){return(0,bn._n)(n)}),[n]),l=r.src,i=r.name;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"jsx-3356831981",children:[l&&(0,t.jsx)(jn.Z,{src:l,loading:"lazy",width:"50px",height:"50px"}),(0,t.jsx)("div",{className:"jsx-3356831981 blessing-name",children:i})]}),(0,t.jsx)(hn.default,{id:"3356831981",children:["div.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}","div.jsx-3356831981 img.jsx-3356831981{width:2.5em;height:2.5em;margin-right:0.25em;}","div.jsx-3356831981 .blessing-name.jsx-3356831981{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;}"]})]})},yn=r(7815),wn=r.n(yn);var Dn=function(e){var n=e.onClick;return(0,t.jsx)("button",{className:wn().button,onClick:n,style:{fontSize:"16px",marginLeft:"1em"},children:"\u4f7f\u7528\u539f\u751f\u6280\u80fd"})};function Bn(e){var n=e.hidden,r=e.style,l=e.children;return(0,t.jsx)("div",{hidden:n,className:wn().container,style:r,children:l})}function On(e){var n=e.children,r=e.style;return(0,t.jsx)("div",{className:wn().title,style:r,children:n})}function Cn(e){var n=e.children;return(0,t.jsx)("div",{className:wn()["title-textgroup"],children:n})}function Sn(e){var n=e.children;return(0,t.jsx)("div",{className:wn().content,children:n})}function In(e){var n=e.children;return(0,t.jsx)("div",{className:wn()["section-group"],children:n})}function Pn(e){var n=e.children,r=e.disabled,l=e.onClick;return(0,t.jsx)("button",{className:"".concat(wn().button," ").concat(wn().section),disabled:r,onClick:l,children:n})}function An(e){var n=e.children;return(0,t.jsx)("div",{className:wn()["button-content"],children:n})}function _n(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-1557054469",children:n}),(0,t.jsx)(hn.default,{id:"1557054469",children:["div.jsx-1557054469{overflow-y:auto;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-overflow-scrolling:touch;}"]})]})}function Tn(e){var n=e.children;return(0,t.jsx)("div",{className:wn().options,children:n})}function Mn(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function En(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function Zn(e){var n=e.children;return(0,t.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Rn(e){var n=e.src;return(0,t.jsx)(jn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"},loading:"lazy"})}function Nn(e){var n=e.children;return(0,t.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Hn(e){var n=e.children;return(0,t.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Fn(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex"},children:n})}function Wn(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2400499899",children:n}),(0,t.jsx)(hn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Kn(e){var n=e.cd,r=e.children;return n?(0,t.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:r}):null}function Ln(e){var n=e.children;return(0,t.jsx)("div",{style:{color:"salmon"},children:n})}var zn=function(e){return e>0?"+".concat(e):"".concat(e)};function Vn(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.35em",padding:"0.25em",backgroundColor:"#1d3e53"},children:n})}var Un=r(6234);function qn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Yn(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?qn(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Jn=function(e){var n=e.heroId,r=e.resplendent,i=(0,l.K)(),s=i.heroDB,o=i.assistDB,c=i.resplendentDB,d=(0,a.useMemo)((function(){return(0,x.gO)({heroDB:s,assistDB:o,resplendentDB:c,heroId:n,noStat:!0})}),[s,o,c,n]);return(0,t.jsx)(Un.Z,Yn(Yn({},d),{},{faceSrc:r?d.faceSrcR:d.faceSrc}))};var Qn=function(e){var n=e.heroId,r=e.weapon,i=(0,l.K)(),s=i.heroDB,a=i.weaponDB;return(0,t.jsx)(t.Fragment,{children:H({heroDB:s,weaponDB:a,heroId:n,weapon:r})})};var Xn=function(e){var n=e.heroId,r=e.weapon,i=e.refine,s=(0,l.K)(),a=function(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,l=e.weapon,i=e.refine,s=K({heroDB:n,weaponDB:r,heroId:t,weapon:l,refine:i});return s?F[i]?{icon:i,name:F[i]}:{icon:s.icon,name:s.name}:{icon:"",name:""}}({heroDB:s.heroDB,weaponDB:s.weaponDB,heroId:n,weapon:r,refine:i}),o=a.icon,c=a.name;return(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsx)(Rn,{src:"/skills/weapon/".concat(o,".png")}),c]})};var Gn=function(e){var n=e.assist,r=(0,l.K)().assistDB;return(0,t.jsx)(t.Fragment,{children:y({assistDB:r,assist:n})})};var $n=function(e){var n=e.special,r=(0,l.K)().specialDB;return(0,t.jsx)(t.Fragment,{children:_({specialDB:r,special:n})})},er=["skillA","skillB","skillC"];var nr=function(e){var n=e.skillType,r=e.skillId,i=(0,l.K)();if(er.includes(n)){var s=function(e){var n=S({skillDB:e.skillDB,skillId:e.skillId});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({skillDB:i["".concat(n,"DB")],skillId:r}),a=s.icon,o=s.name;return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)(Rn,{src:"/skills/".concat(a)}),o]})}if("seal"===n){var c=function(e){var n=w({sealDB:e.sealDB,seal:e.seal});return n?{icon:n.icon,name:n.name}:{icon:"",name:""}}({sealDB:i.sealDB,seal:r}),d=c.icon,u=c.name;return(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsx)(Rn,{src:"/skills/".concat(d)}),u]})}return null};var rr=function(e){var n=e.hidden,r=e.heroId,i=e.rarity,o=e.iv,c=e.merge,d=e.dragonflower,u=e.blessing,p=e.support,h=e.arena,f=e.resplendent,k=e.weapon,v=e.refine,g=e.assist,j=e.special,b=e.skillA,m=e.skillB,y=e.skillC,w=e.seal,D=e.lv1,B=e.maxSkill,O=(0,s.Z)(e,["hidden","heroId","rarity","iv","merge","dragonflower","blessing","support","arena","resplendent","weapon","refine","assist","special","skillA","skillB","skillC","seal","lv1","maxSkill"]),C=function(e){var n=e.heroId,r=e.weapon,t=e.maxSkill,i=(0,l.K)(),s=i.heroDB,o=i.weaponDB,c=(0,a.useMemo)((function(){return(0,x.cK)(s,n)}),[s,n]),d=(0,a.useMemo)((function(){if("Feh"===n)return!1;var e=Z({heroDB:s,weaponDB:o,heroId:n});return t?e.filter((function(e){return e.last})).length>0:e.length>0}),[s,o,n,t]),u=(0,a.useMemo)((function(){return"Feh"!==n&&W({heroDB:s,weaponDB:o,heroId:n,weapon:r}).length>0}),[s,o,n,r]);return"Feh"===n?{hasRarity:!1,hasBlessing:!0,hasWeapon:!1,hasRefine:!1,hasAssist:!1,hasSpecial:!1,hasSkillA:!1,hasSkillB:!1,hasSkillC:!1,hasSeal:!1}:{hasRarity:c.rarity.length>0,hasBlessing:!!c.blessing,hasWeapon:d,hasRefine:u,hasAssist:!0,hasSpecial:!0,hasSkillA:!0,hasSkillB:!0,hasSkillC:!0,hasSeal:!0,blessing:c.blessing&&c.blessing}}({heroId:r,weapon:k,maxSkill:B}),S=C.hasRarity,I=C.hasBlessing,P=C.hasWeapon,A=C.hasRefine,_=C.hasAssist,T=C.hasSpecial,M=C.hasSkillA,E=C.hasSkillB,R=C.hasSkillC,N=C.hasSeal,H=C.blessing;return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsx)("button",{className:wn()["close-button"],onClick:O.closeEditor,children:(0,t.jsx)(pn,{})}),(0,t.jsx)(On,{children:(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u82f1\u96c4"}),(0,t.jsx)(gn,{checked:D,onChange:O.toggleLv1,children:"Lv1"})]})}),(0,t.jsxs)(Sn,{children:[(0,t.jsx)("button",{className:"".concat(wn().button," ").concat(wn()["hero-header"]),onClick:O.openHeroPicker,children:(0,t.jsx)(Jn,{heroId:r,resplendent:f})}),(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!S,onClick:O.openRarityPicker,children:["\u7a00\u6709\u5ea6",(0,t.jsx)(An,{children:cn(i)})]}),(0,t.jsxs)(Pn,{disabled:"Feh"===r,onClick:O.openIVPicker,children:["IV",(0,t.jsx)(An,{children:(0,Ne.Zx)(o)})]}),(0,t.jsxs)(Pn,{disabled:I,onClick:O.openBlessingPicker,children:["\u795d\u798f",(0,t.jsx)(An,{children:(0,t.jsx)(mn,{blessing:H||u})})]}),(0,t.jsxs)(Pn,{onClick:O.openMergePicker,children:["\u7a81\u7834\u6b21\u6578",(0,t.jsx)(An,{children:c?"+".concat(c):"-"})]}),(0,t.jsxs)(Pn,{onClick:O.openDragonflowerPicker,children:["\u795e\u9f8d\u4e4b\u82b1",(0,t.jsx)(An,{children:d?"+".concat(d):"-"})]})]})]}),(0,t.jsx)(On,{children:(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u6280\u80fd"}),(0,t.jsx)(gn,{checked:B,onChange:O.toggleMaxSkill,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,t.jsx)(Dn,{onClick:O.setAllSkillDefault})]})}),(0,t.jsxs)(Sn,{children:[(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!P,onClick:O.openWeaponPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/weapon.png"}),"\u6b66\u5668",(0,t.jsx)(An,{children:(0,t.jsx)(Qn,{heroId:r,weapon:k})})]}),(0,t.jsxs)(Pn,{disabled:!A,onClick:O.openRefinePicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/refining-stone.png"}),"\u935b\u9020",(0,t.jsx)(An,{children:(0,t.jsx)(Xn,{heroId:r,weapon:k,refine:v})})]})]}),(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!_,onClick:O.openAssistPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/assist.png"}),"\u8f14\u52a9",(0,t.jsx)(An,{children:(0,t.jsx)(Gn,{assist:g})})]}),(0,t.jsxs)(Pn,{disabled:!T,onClick:O.openSpecialPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/skills/special.png"}),"\u5967\u7fa9",(0,t.jsx)(An,{children:(0,t.jsx)($n,{special:j})})]})]}),(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{disabled:!M,onClick:O.openSkillAPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-a.png"}),"A\u6280\u80fd",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"skillA",skillId:b})})]}),(0,t.jsxs)(Pn,{disabled:!E,onClick:O.openSkillBPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-b.png"}),"B\u6280\u80fd",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"skillB",skillId:m})})]}),(0,t.jsxs)(Pn,{disabled:!R,onClick:O.openSkillCPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-c.png"}),"C\u6280\u80fd",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"skillC",skillId:y})})]}),(0,t.jsxs)(Pn,{disabled:!N,onClick:O.openSealPicker,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle"},src:"/assets/skill-s.png"}),"\u8056\u5370",(0,t.jsx)(An,{children:(0,t.jsx)(nr,{skillType:"seal",skillId:w})})]})]})]}),(0,t.jsx)(On,{children:"\u5f37\u5316"}),(0,t.jsx)(Sn,{children:(0,t.jsxs)(In,{children:[(0,t.jsxs)(Pn,{onClick:O.toggleSupport,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/support.png"}),"\u53ec\u559a\u5e2b\u5951\u7d04",(0,t.jsx)(kn,{checked:p})]}),(0,t.jsxs)(Pn,{onClick:O.toggleArena,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/Arena_Crown.png"}),"\u9b25\u6280\u5834",(0,t.jsx)(kn,{checked:h})]}),(0,t.jsxs)(Pn,{onClick:O.toggleResplendent,children:[(0,t.jsx)(jn.Z,{width:"24px",height:"24px",style:{verticalAlign:"middle",marginBottom:"4px"},src:"/assets/god-wear.png"}),"\u795e\u88dd",(0,t.jsx)(kn,{checked:f})]})]})})]})},tr=r(9487);function lr(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ir(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?lr(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var sr=function(e){return(0,t.jsxs)("svg",ir(ir({width:"24",height:"24",viewBox:"0 0 24 24"},e),{},{children:[(0,t.jsx)("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),(0,t.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"})]}))};var ar=function(e){var n=e.onClick;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:n,className:"jsx-3918608153",children:(0,t.jsx)(sr,{fill:"white"})}),(0,t.jsx)(hn.default,{id:"3918608153",children:["button.jsx-3918608153{background-color:transparent;display:block;}"]})]})},or=r(6117),cr=r.n(or);var dr=function(e){var n=e.hidden,r=e.heroId,l=e.onChangeHero,i=e.onClickBack,s=e.resplendent,o=(0,a.useCallback)((function(e){l(e),i()}),[l,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),"\u82f1\u96c4"]}),(0,t.jsx)("div",{className:cr().picker,children:(0,t.jsx)(tr.Z,{heroId:r,onSelect:o,noDropdown:!0,resplendent:s})})]})},ur=r(5170);var pr=function(e){var n=e.hidden,r=e.rarity,l=e.selectRarity,i=e.onClickBack,s=(0,a.useCallback)((function(e){l(e),i()}),[l,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),"\u7a00\u6709\u5ea6"]}),(0,t.jsx)(ur.Z,{rarity:r,minRarity:4,onSelect:s})]})},hr=r(2220),fr=r.n(hr),kr=function(e){var n=e.iv,r=e.selectIV,l=(0,a.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,t.jsxs)("div",{className:fr().container,children:[(0,t.jsx)("button",{className:fr()["neutral-button"],"data-active":!n,value:"",onClick:l,children:"-"}),Ne.YM.map((function(e){return(0,t.jsx)("button",{className:fr()["iv-button"],"data-active":n===e.value,value:e.value,onClick:l,children:e.name},e.value)}))]})};var vr=function(e){var n=e.hidden,r=e.iv,l=e.selectIV,i=e.onClickBack,s=(0,a.useCallback)((function(e){l(e),i()}),[l,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),"IV"]}),(0,t.jsx)(kr,{iv:r,selectIV:s})]})},xr=r(4299),gr=r.n(xr),jr=function(e){var n=e.blessing,r=e.selectBlessing,l=(0,a.useCallback)((function(e){e.stopPropagation(),r(e.currentTarget.value)}),[r]);return(0,t.jsxs)("div",{className:gr().container,children:[(0,t.jsx)("button",{className:gr()["neutral-button"],"data-active":!n,value:"",onClick:l,children:"-"}),bn.YM.map((function(e){return(0,t.jsx)("button",{className:gr()["blessing-button"],"data-active":n===e.value,value:e.value,onClick:l,children:(0,t.jsx)(mn,{blessing:e.value})},e.value)}))]})};var br=function(e){var n=e.hidden,r=e.blessing,l=e.selectBlessing,i=e.onClickBack,s=(0,a.useCallback)((function(e){l(e),i()}),[l,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),"IV"]}),(0,t.jsx)(jr,{blessing:r,selectBlessing:s})]})},mr=r(4162);var yr=function(e){var n=e.hidden,r=e.merge,l=e.selectMerge,i=e.onClickBack,s=(0,a.useCallback)((function(e){l(e),i()}),[l,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),"\u7a81\u7834\u6b21\u6578"]}),(0,t.jsx)(mr.Z,{merge:r,onSelect:s})]})},wr=r(6374),Dr=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];var Br=function(e){var n=e.dragonflower,r=e.onSelect;return(0,t.jsx)(wr.Z,{value:n,onSelect:r,options:Dr})};var Or=function(e){var n=e.hidden,r=e.dragonflower,l=e.selectDragonflower,i=e.onClickBack,s=(0,a.useCallback)((function(e){l(e),i()}),[l,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),"\u795e\u9f8d\u4e4b\u82b1"]}),(0,t.jsx)(Br,{dragonflower:r,onSelect:s})]})};var Cr=function(e){var n=e.active,r=e.last,l=e.hidden,i=e.value,s=e.children,a=e.onClick;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{"data-active":n,value:i,onClick:a,hidden:l,className:hn.default.dynamic([["2665293084",[r?1:.618]]]),children:s}),(0,t.jsx)(hn.default,{id:"2665293084",dynamic:[r?1:.618],children:[".__jsx-style-dynamic-selector{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;text-align:left;outline:none;line-height:1.5;opacity:".concat(r?1:.618,";}"),"button.__jsx-style-dynamic-selector{padding:0.5em;margin-bottom:0.5em;border-bottom:1px solid #1d3e53;cursor:pointer;display:block;color:white;width:100%;background-color:transparent;}","button.__jsx-style-dynamic-selector:hover{background-color:#77abb7aa;}","button[hidden].__jsx-style-dynamic-selector{display:none;}","button[data-active='true'].__jsx-style-dynamic-selector{background-color:#476d7c;}"]})]})};function Sr(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Ir(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Sr(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Pr(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:n})}function Ar(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder"},children:n})}function _r(e){var n=e.children;return(0,t.jsx)("div",{style:{marginLeft:"auto",fontStyle:"italic"},children:n})}function Tr(e){var n=e.children;return(0,t.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Mr(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex"},children:n})}function Er(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2400499899",children:n}),(0,t.jsx)(hn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Zr(e){var n=e.cd,r=e.children;return n?(0,t.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:r}):null}function Rr(e){var n=e.children;return(0,t.jsx)("div",{style:{color:"salmon"},children:n})}var Nr=function(e){return e>0?"+".concat(e):"".concat(e)};var Hr=function(e){var n=e.active,r=e.weapon,l=e.hidden,i=e.onClick;return(0,t.jsxs)(Cr,{active:n,last:r.last,hidden:l,value:r.id,onClick:i,children:[(0,t.jsxs)(Pr,{children:[(0,t.jsx)(Ar,{children:r.name}),(0,t.jsxs)(_r,{children:[r.sp,"SP"]})]}),(0,t.jsxs)(Tr,{children:["\u5a01\u529b ",r.mt]}),r.cd&&(0,t.jsxs)(Zr,{cd:r.cd,children:["\u5967\u7fa9 cd",Nr(r.cd)]}),(0,t.jsxs)(Mr,{children:[r.hp&&(0,t.jsxs)(Er,{children:["HP ",Nr(r.hp)]}),r.atk&&(0,t.jsxs)(Er,{children:["\u653b\u64ca ",Nr(r.atk)]}),r.spd&&(0,t.jsxs)(Er,{children:["\u901f\u5ea6 ",Nr(r.spd)]}),r.def&&(0,t.jsxs)(Er,{children:["\u9632\u5b88 ",Nr(r.def)]}),r.res&&(0,t.jsxs)(Er,{children:["\u9b54\u9632 ",Nr(r.res)]})]}),r.exclusive&&(0,t.jsx)(Rr,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Fr(e){var n=e.heroId,r=e.weapon,i=e.selectWeapon,o=function(e){var n=e.heroId,r=e.filter,t=e.maxSkill,i=(0,l.K)(),s=i.heroDB,o=i.weaponDB,c=(0,a.useMemo)((function(){return Z({heroDB:s,weaponDB:o,heroId:n})}),[n,s,o]);return{options:(0,a.useMemo)((function(){return c.map((function(e){var n=!1;return t&&!e.last&&(n=!0),!n&&r&&(n=!e.query.includes(r.toLowerCase())),Ir(Ir({},e),{},{hidden:n})}))}),[c,r,t])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,c=(0,a.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Cr,{active:!r,value:"",onClick:c,children:"\u7121\u6b66\u5668"}),o.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(Hr,{hidden:n,weapon:l,active:r===e.id,onClick:c},e.id)}))]})}var Wr=(0,a.memo)(Fr);var Kr=function(e){var n=e.hidden,r=e.onClickBack,l=e.heroId,i=e.weapon,s=e.selectWeapon,o=e.maxSkill,c=e.toggleMaxSkill,d=e.setDefaultSkill,u=(0,a.useState)(""),p=u[0],h=u[1],f=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u6b66\u5668"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),(0,t.jsx)(Dn,{onClick:d})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6b66\u5668\u540d\u7a31",onChange:f}),(0,t.jsx)(_n,{children:(0,t.jsx)(Wr,{heroId:l,weapon:i,filter:p,maxSkill:o,selectWeapon:k})})]})};function Lr(e){var n=e.children;return(0,t.jsx)("div",{style:{fontSize:"1.25em",fontWeight:"bolder",display:"flex",alignItems:"center",height:"2em"},children:n})}function zr(e){var n=e.src;return(0,t.jsx)(jn.Z,{src:n,width:"32px",height:"32px",style:{width:"32px",height:"32px",marginRight:"0.25em"}})}function Vr(e){var n=e.children;return(0,t.jsx)("div",{style:{fontWeight:"bold"},children:n})}function Ur(e){var n=e.children;return(0,t.jsx)("div",{style:{display:"flex"},children:n})}function qr(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"jsx-2400499899",children:n}),(0,t.jsx)(hn.default,{id:"2400499899",children:["div.jsx-2400499899:not(:last-child){margin-right:1em;}"]})]})}function Yr(e){var n=e.cd,r=e.children;return n?(0,t.jsx)("div",{style:{color:n<0?"lightskyblue":"palevioletred"},children:r}):null}function Jr(e){var n=e.children;return(0,t.jsx)("div",{style:{color:"salmon"},children:n})}var Qr=function(e){return e>0?"+".concat(e):"".concat(e)};var Xr=function(e){var n=e.active,r=e.hidden,l=e.refineType,i=e.refine,s=e.onClick;return(0,t.jsxs)(Cr,{active:n,last:!0,hidden:r,value:l,onClick:s,children:[(0,t.jsxs)(Lr,{children:[i.icon&&(0,t.jsx)(zr,{src:i.icon}),i.name]}),i.mt&&(0,t.jsxs)(Vr,{children:["\u5a01\u529b ",i.mt]}),i.cd&&(0,t.jsxs)(Yr,{cd:i.cd,children:["\u5967\u7fa9 cd",Qr(i.cd)]}),(0,t.jsxs)(Ur,{children:[i.hp&&(0,t.jsxs)(qr,{children:["HP ",Qr(i.hp)]}),i.atk&&(0,t.jsxs)(qr,{children:["\u653b\u64ca ",Qr(i.atk)]}),i.spd&&(0,t.jsxs)(qr,{children:["\u901f\u5ea6 ",Qr(i.spd)]}),i.def&&(0,t.jsxs)(qr,{children:["\u9632\u5b88 ",Qr(i.def)]}),i.res&&(0,t.jsxs)(qr,{children:["\u9b54\u9632 ",Qr(i.res)]})]}),i.exclusive&&(0,t.jsx)(Jr,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})};function Gr(e){var n=e.heroId,r=e.weapon,i=e.refine,o=e.selectRefine,c=function(e){var n=e.heroId,r=e.weapon,t=(0,l.K)(),i=t.heroDB,s=t.weaponDB;return{options:(0,a.useMemo)((function(){return W({heroDB:i,weaponDB:s,heroId:n,weapon:r})}),[i,s,n,r])}}({heroId:n,weapon:r}).options,d=(0,a.useCallback)((function(e){e.stopPropagation(),o(e.currentTarget.value)}),[o]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Cr,{active:!i,value:"",onClick:d,children:"\u7121\u935b\u9020"}),c.map((function(e){var n=e.value,r=(0,s.Z)(e,["value"]);return(0,t.jsx)(Xr,{refineType:n,refine:r,active:i===n,onClick:d},n)}))]})}var $r=(0,a.memo)(Gr);var et=function(e){var n=e.hidden,r=e.onClickBack,l=e.heroId,i=e.weapon,s=e.refine,o=e.selectRefine,c=(0,a.useCallback)((function(e){o(e),r()}),[o,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsx)(Cn,{children:(0,t.jsx)("span",{children:"\u935b\u9020"})})]}),(0,t.jsx)(_n,{children:(0,t.jsx)($r,{heroId:l,weapon:i,refine:s,selectRefine:c})})]})};function nt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function rt(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?nt(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function tt(e){var n=e.active,r=e.hidden,l=e.skill,i=e.onClick;return(0,t.jsxs)(Cr,{active:n,last:l.last,hidden:r,value:l.id,onClick:i,children:[(0,t.jsxs)(Mn,{children:[(0,t.jsxs)(En,{children:[l.icon&&(0,t.jsx)(Rn,{src:"/skills/".concat(l.icon)}),l.name]}),(0,t.jsxs)(Zn,{children:[l.sp,"SP"]})]}),l.mt&&(0,t.jsxs)(Hn,{children:["\u5a01\u529b ",l.mt]}),l.cd&&(0,t.jsxs)(Kn,{cd:l.cd,children:["\u5967\u7fa9 cd",zn(l.cd)]}),(0,t.jsxs)(Fn,{children:[l.hp&&(0,t.jsxs)(Wn,{children:["HP ",zn(l.hp)]}),l.atk&&(0,t.jsxs)(Wn,{children:["\u653b\u64ca ",zn(l.atk)]}),l.spd&&(0,t.jsxs)(Wn,{children:["\u901f\u5ea6 ",zn(l.spd)]}),l.def&&(0,t.jsxs)(Wn,{children:["\u9632\u5b88 ",zn(l.def)]}),l.res&&(0,t.jsxs)(Wn,{children:["\u9b54\u9632 ",zn(l.res)]})]}),l.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var lt=(0,a.memo)(tt);function it(e){var n=e.heroId,r=e.skillType,i=e.skillId,o=e.selectSkill,c=e.filter,d=e.maxSkill,u=function(e){var n=e.heroId,r=e.skillType,t=e.filter,i=e.maxSkill,s=(0,l.K)(),o=s.rulesDB,c=s.heroDB,d=s["".concat(r,"DB")],u=(0,a.useMemo)((function(){return O({rulesDB:o,heroDB:c,skillDB:d,heroId:n})}),[o,c,d,n]);return{options:(0,a.useMemo)((function(){return u.map((function(e){var n=!1;return i&&!e.last&&(n=!0),!n&&t&&(n=!e.query.includes(t.toLowerCase())),rt(rt({},e),{},{hidden:n})}))}),[u,t,i])}}({heroId:n,skillType:r,skillId:i,filter:c,maxSkill:d}).options,p=(0,a.useCallback)((function(e){e.stopPropagation(),o(e.currentTarget.value)}),[o]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Cr,{active:!i,value:"",onClick:p,children:"\u7121\u6280\u80fd"}),u.map((function(e){var n=e.hidden,r=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(lt,{hidden:n,active:i===r.id,skill:r,onClick:p},r.id)}))]})}var st=(0,a.memo)(it);var at=function(e){var n=e.hidden,r=e.skillType,l=e.title,i=e.onClickBack,s=e.heroId,o=e.skillId,c=e.selectSkill,d=e.maxSkill,u=e.toggleMaxSkill,p=e.setDefaultSkill,h=(0,a.useState)(""),f=h[0],k=h[1],v=(0,a.useCallback)((function(e){k(e.currentTarget.value)}),[]),x=(0,a.useCallback)((function(e){c(e),i()}),[c,i]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:i}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:l}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:d,onChange:u,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),p&&(0,t.jsx)(Dn,{onClick:p})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:v}),(0,t.jsx)(_n,{children:(0,t.jsx)(st,{heroId:s,skillType:r,skillId:o,selectSkill:x,filter:f,maxSkill:d})})]})};function ot(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ct(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ot(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function dt(e){var n=e.heroId,r=e.filter,t=e.maxSkill,i=(0,l.K)(),s=i.rulesDB,o=i.heroDB,c=i.assistDB,d=(0,a.useMemo)((function(){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.assistDB,l=e.heroId;if(!n||!r||!t||!l)return[];var i=(0,x.cK)(r,l);return i?Object.values(t).filter((function(e){return e.exclusive?e.exclusive.includes(l):g({rulesDB:n,ruleId:e.rules,moveType:i.moveType,colorType:i.colorType,weaponType:i.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return b(b({},e),{},{query:n})})):[]}({rulesDB:s,heroDB:o,assistDB:c,heroId:n})}),[s,o,c,n]);return{options:(0,a.useMemo)((function(){return d.map((function(e){var n=!1;return t&&!e.last&&(n=!0),!n&&r&&(n=!e.query.includes(r.toLowerCase())),ct(ct({},e),{},{hidden:n})}))}),[d,r,t])}}function ut(e){var n=e.active,r=e.hidden,l=e.assist,i=e.onClick;return(0,t.jsxs)(Cr,{active:n,last:l.last,hidden:r,value:l.id,onClick:i,children:[(0,t.jsxs)(Mn,{children:[(0,t.jsx)(En,{children:l.name}),(0,t.jsxs)(Nn,{children:[l.sp,"SP"]})]}),l.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var pt=(0,a.memo)(ut);function ht(e){var n=e.heroId,r=e.assist,l=e.selectAssist,i=dt({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,o=(0,a.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Cr,{active:!r,value:"",onClick:o,children:"\u7121\u6280\u80fd"}),i.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(pt,{hidden:n,active:r===l.id,assist:l,onClick:o},l.id)}))]})}var ft=(0,a.memo)(ht);var kt=function(e){var n=e.hidden,r=e.onClickBack,l=e.heroId,i=e.assist,s=e.selectAssist,o=e.maxSkill,c=e.toggleMaxSkill,d=e.setDefaultSkill,u=(0,a.useState)(""),p=u[0],h=u[1],f=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u652f\u63f4"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),d&&(0,t.jsx)(Dn,{onClick:d})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:f}),(0,t.jsx)(_n,{children:(0,t.jsx)(ft,{heroId:l,assist:i,selectAssist:k,filter:p,maxSkill:o})})]})};function vt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function xt(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?vt(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function gt(e){var n=e.heroId,r=e.filter,t=e.maxSkill,i=(0,l.K)(),s=i.rulesDB,o=i.heroDB,c=i.specialDB,d=(0,a.useMemo)((function(){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.specialDB,l=e.heroId;if(!n||!r||!t||!l)return[];var i=(0,x.cK)(r,l);return i?Object.values(t).filter((function(e){return e.exclusive?e.exclusive.includes(l):g({rulesDB:n,ruleId:e.rules,moveType:i.moveType,colorType:i.colorType,weaponType:i.weaponType})})).map((function(e){var n="".concat(e.id.toLowerCase(),"|").concat(e.name);return P(P({},e),{},{query:n})})):[]}({rulesDB:s,heroDB:o,specialDB:c,heroId:n})}),[s,o,c,n]);return{options:(0,a.useMemo)((function(){return d.map((function(e){var n=!1;return t&&!e.last&&(n=!0),!n&&r&&(n=!e.query.includes(r.toLowerCase())),xt(xt({},e),{},{hidden:n})}))}),[d,r,t])}}function jt(e){var n=e.active,r=e.hidden,l=e.special,i=e.onClick;return(0,t.jsxs)(Cr,{active:n,last:l.last,hidden:r,value:l.id,onClick:i,children:[(0,t.jsxs)(Mn,{children:[(0,t.jsx)(En,{children:l.name}),(0,t.jsxs)(Nn,{children:[l.sp,"SP"]})]}),(0,t.jsxs)("div",{children:["CD ",l.cd]}),l.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var bt=(0,a.memo)(jt);function mt(e){var n=e.heroId,r=e.special,l=e.selectSpecial,i=gt({heroId:n,filter:e.filter,maxSkill:e.maxSkill}).options,o=(0,a.useCallback)((function(e){e.stopPropagation(),l(e.currentTarget.value)}),[l]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Cr,{active:!r,value:"",onClick:o,children:"\u7121\u6280\u80fd"}),i.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(bt,{hidden:n,active:r===l.id,special:l,onClick:o},l.id)}))]})}var yt=(0,a.memo)(mt);var wt=function(e){var n=e.hidden,r=e.onClickBack,l=e.heroId,i=e.special,s=e.selectSpecial,o=e.maxSkill,c=e.toggleMaxSkill,d=e.setDefaultSkill,u=(0,a.useState)(""),p=u[0],h=u[1],f=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),k=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u5967\u7fa9"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"}),d&&(0,t.jsx)(Dn,{onClick:d})]})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u5967\u7fa9\u540d\u7a31",onChange:f}),(0,t.jsx)(_n,{children:(0,t.jsx)(yt,{heroId:l,special:i,selectSpecial:k,filter:p,maxSkill:o})})]})};function Dt(e){var n=e.active,r=e.hidden,l=e.skill,i=e.onClick;return(0,t.jsxs)(Cr,{active:n,last:l.last,hidden:r,value:l.id,onClick:i,children:[(0,t.jsxs)(En,{children:[l.icon&&(0,t.jsx)(Rn,{src:"/skills/".concat(l.icon)}),l.name]}),l.mt&&(0,t.jsxs)(Hn,{children:["\u5a01\u529b ",l.mt]}),l.cd&&(0,t.jsxs)(Kn,{cd:l.cd,children:["\u5967\u7fa9 cd",zn(l.cd)]}),(0,t.jsxs)(Fn,{children:[l.hp&&(0,t.jsxs)(Wn,{children:["HP ",zn(l.hp)]}),l.atk&&(0,t.jsxs)(Wn,{children:["\u653b\u64ca ",zn(l.atk)]}),l.spd&&(0,t.jsxs)(Wn,{children:["\u901f\u5ea6 ",zn(l.spd)]}),l.def&&(0,t.jsxs)(Wn,{children:["\u9632\u5b88 ",zn(l.def)]}),l.res&&(0,t.jsxs)(Wn,{children:["\u9b54\u9632 ",zn(l.res)]})]}),l.exclusive&&(0,t.jsx)(Ln,{children:"\u9650\u5b9a\u672c\u4eba\u88dd\u5099"})]})}var Bt=(0,a.memo)(Dt);function Ot(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Ct(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ot(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function St(e){var n=e.skill,r=e.maxSkill,t=e.filter,l=!1;return r&&!n.last&&(l=!0),!l&&t&&(l=!n.query.includes(t.toLowerCase())),Ct(Ct({},n),{},{hidden:l})}function It(e){var n=e.heroId,r=e.seal,i=e.selectSeal,o=function(e){var n=e.heroId,r=e.filter,t=e.maxSkill,i=(0,l.K)(),s=i.rulesDB,o=i.heroDB,c=i.sealDB;return{skillAOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.skillA,heroId:n}).map((function(e){return St({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t]),skillBOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.skillB,heroId:n}).map((function(e){return St({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t]),skillCOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.skillC,heroId:n}).map((function(e){return St({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t]),sealOptions:(0,a.useMemo)((function(){return O({rulesDB:s,heroDB:o,skillDB:c.seal,heroId:n}).map((function(e){return St({skill:e,maxSkill:t,filter:r})}))}),[s,o,c,n,r,t])}}({heroId:n,filter:e.filter,maxSkill:e.maxSkill}),c=o.skillAOptions,d=o.skillBOptions,u=o.skillCOptions,p=o.sealOptions,h=(0,a.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget.value)}),[i]);return(0,t.jsxs)(Tn,{children:[(0,t.jsx)(Cr,{active:!r,value:"",onClick:h,children:"\u7121\u8056\u5370"}),(0,t.jsx)(Vn,{children:"A\u6280\u80fd\u8056\u5370"}),c.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(Bt,{hidden:n,active:r===l.id,skill:l,onClick:h},l.id)})),(0,t.jsx)(Vn,{children:"B\u6280\u80fd\u8056\u5370"}),d.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(Bt,{hidden:n,active:r===l.id,skill:l,onClick:h},l.id)})),(0,t.jsx)(Vn,{children:"C\u6280\u80fd\u8056\u5370"}),u.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(Bt,{hidden:n,active:r===l.id,skill:l,onClick:h},l.id)})),(0,t.jsx)(Vn,{children:"\u5c08\u7528\u8056\u5370"}),p.map((function(e){var n=e.hidden,l=(0,s.Z)(e,["hidden"]);return(0,t.jsx)(Bt,{hidden:n,active:r===l.id,skill:l,onClick:h},l.id)}))]})}var Pt=(0,a.memo)(It);var At=function(e){var n=e.hidden,r=e.onClickBack,l=e.heroId,i=e.seal,s=e.selectSeal,o=e.maxSkill,c=e.toggleMaxSkill,d=(0,a.useState)(""),u=d[0],p=d[1],h=(0,a.useCallback)((function(e){p(e.currentTarget.value)}),[]),f=(0,a.useCallback)((function(e){s(e),r()}),[s,r]);return(0,t.jsxs)(Bn,{hidden:n,children:[(0,t.jsxs)(On,{children:[(0,t.jsx)(ar,{onClick:r}),(0,t.jsxs)(Cn,{children:[(0,t.jsx)("span",{children:"\u8056\u5370"}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,t.jsx)(gn,{checked:o,onChange:c,children:"\u50c5\u9ad8\u7d1a\u6280\u80fd"})})]})]}),(0,t.jsx)("input",{className:wn().input,placeholder:"\u6280\u80fd\u540d\u7a31",onChange:h}),(0,t.jsx)(_n,{children:(0,t.jsx)(Pt,{heroId:l,seal:i,selectSeal:f,filter:u,maxSkill:o})})]})};var _t=function(){var e=(0,a.useState)(""),n=e[0],r=e[1];return{view:n,openHeroPicker:(0,a.useCallback)((function(){r("hero")}),[]),openRarityPicker:(0,a.useCallback)((function(){r("rarity")}),[]),openIVPicker:(0,a.useCallback)((function(){r("iv")}),[]),openMergePicker:(0,a.useCallback)((function(){r("merge")}),[]),openDragonflowerPicker:(0,a.useCallback)((function(){r("dragonflower")}),[]),openBlessingPicker:(0,a.useCallback)((function(){r("blessing")}),[]),openWeaponPicker:(0,a.useCallback)((function(){r("weapon")}),[]),openRefinePicker:(0,a.useCallback)((function(){r("refine")}),[]),openAssistPicker:(0,a.useCallback)((function(){r("assist")}),[]),openSpecialPicker:(0,a.useCallback)((function(){r("special")}),[]),openSkillAPicker:(0,a.useCallback)((function(){r("skillA")}),[]),openSkillBPicker:(0,a.useCallback)((function(){r("skillB")}),[]),openSkillCPicker:(0,a.useCallback)((function(){r("skillC")}),[]),openSealPicker:(0,a.useCallback)((function(){r("seal")}),[]),onClickBack:(0,a.useCallback)((function(){r("")}),[])}};function Tt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Mt(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Tt(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Et=function(e){var n=_t(),r=n.view,l=n.openHeroPicker,i=n.openRarityPicker,s=n.openIVPicker,a=n.openMergePicker,o=n.openDragonflowerPicker,c=n.openBlessingPicker,d=n.openWeaponPicker,u=n.openRefinePicker,p=n.openAssistPicker,h=n.openSpecialPicker,f=n.openSkillAPicker,k=n.openSkillBPicker,v=n.openSkillCPicker,x=n.openSealPicker,g=n.onClickBack;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rr,Mt(Mt({hidden:!!r},e),{},{openHeroPicker:l,openRarityPicker:i,openIVPicker:s,openMergePicker:a,openDragonflowerPicker:o,openBlessingPicker:c,openWeaponPicker:d,openRefinePicker:u,openAssistPicker:p,openSpecialPicker:h,openSkillAPicker:f,openSkillBPicker:k,openSkillCPicker:v,openSealPicker:x})),(0,t.jsx)(dr,{hidden:"hero"!==r,heroId:e.heroId,onChangeHero:e.onChangeHero,onClickBack:g,resplendent:e.resplendent}),(0,t.jsx)(pr,{hidden:"rarity"!==r,rarity:e.rarity,selectRarity:e.setRarity,onClickBack:g}),(0,t.jsx)(vr,{hidden:"iv"!==r,iv:e.iv,selectIV:e.setIV,onClickBack:g}),(0,t.jsx)(br,{hidden:"blessing"!==r,blessing:e.blessing,selectBlessing:e.setBlessing,onClickBack:g}),(0,t.jsx)(yr,{hidden:"merge"!==r,merge:e.merge,selectMerge:e.setMerge,onClickBack:g}),(0,t.jsx)(Or,{hidden:"dragonflower"!==r,dragonflower:e.dragonflower,selectDragonflower:e.setDragonflower,onClickBack:g}),(0,t.jsx)(Kr,{hidden:"weapon"!==r,onClickBack:g,heroId:e.heroId,weapon:e.weapon,selectWeapon:e.setWeapon,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultWeapon}),(0,t.jsx)(et,{hidden:"refine"!==r,onClickBack:g,heroId:e.heroId,weapon:e.weapon,refine:e.refine,selectRefine:e.setRefine}),(0,t.jsx)(kt,{hidden:"assist"!==r,onClickBack:g,heroId:e.heroId,assist:e.assist,selectAssist:e.setAssist,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultAssist}),(0,t.jsx)(wt,{title:"A\u6280\u80fd",hidden:"special"!==r,onClickBack:g,heroId:e.heroId,special:e.special,selectSpecial:e.setSpecial,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSpecial}),(0,t.jsx)(at,{skillType:"skillA",title:"A\u6280\u80fd",hidden:"skillA"!==r,onClickBack:g,heroId:e.heroId,skillId:e.skillA,selectSkill:e.setSkillA,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillA}),(0,t.jsx)(at,{skillType:"skillB",title:"B\u6280\u80fd",hidden:"skillB"!==r,onClickBack:g,heroId:e.heroId,skillId:e.skillB,selectSkill:e.setSkillB,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillB}),(0,t.jsx)(at,{skillType:"skillC",title:"C\u6280\u80fd",hidden:"skillC"!==r,onClickBack:g,heroId:e.heroId,skillId:e.skillC,selectSkill:e.setSkillC,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill,setDefaultSkill:e.setDefaultSkillC}),(0,t.jsx)(At,{hidden:"seal"!==r,onClickBack:g,heroId:e.heroId,seal:e.skillC,selectSeal:e.setSeal,maxSkill:e.maxSkill,toggleMaxSkill:e.toggleMaxSkill})]})},Zt={weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""};function Rt(){var e=(0,l.K)(),n=e.rulesDB,r=e.heroDB,t=e.weaponDB,i=e.assistDB,s=e.specialDB,o=e.skillADB,c=e.skillBDB,d=e.skillCDB,u=e.sealDB,p=e.defaultSkillDB,h=(0,a.useState)("Feh"),f=h[0],k=h[1],j=(0,a.useState)(5),b=j[0],m=j[1],y=(0,a.useState)(""),w=y[0],D=y[1],B=(0,a.useState)(0),O=B[0],S=B[1],I=(0,a.useState)(0),P=I[0],A=I[1],_=(0,a.useState)(""),T=_[0],M=_[1],E=(0,a.useState)(!1),Z=E[0],H=E[1],F=(0,a.useCallback)((function(){H((function(e){return!e}))}),[]),W=(0,a.useRef)({weapon:"",assist:"",special:"",skillA:"",skillB:"",skillC:""}),K=(0,a.useRef)(""),L=(0,a.useState)(""),z=L[0],V=L[1],U=(0,a.useState)(""),q=U[0],Y=U[1],J=(0,a.useState)(""),Q=J[0],X=J[1],G=(0,a.useState)(""),$=G[0],ee=G[1],ne=(0,a.useState)(""),re=ne[0],te=ne[1],le=(0,a.useState)(""),ie=le[0],se=le[1],ae=(0,a.useState)(""),oe=ae[0],ce=ae[1],de=(0,a.useState)(""),ue=de[0],pe=de[1],he=(0,a.useCallback)((function(){V(W.current.weapon)}),[]),fe=(0,a.useCallback)((function(){X(W.current.assist)}),[]),ke=(0,a.useCallback)((function(){ee(W.current.special)}),[]),ve=(0,a.useCallback)((function(){te(W.current.skillA)}),[]),xe=(0,a.useCallback)((function(){se(W.current.skillB)}),[]),ge=(0,a.useCallback)((function(){ce(W.current.skillC)}),[]),je=(0,a.useCallback)((function(){he(),fe(),ke(),ve(),xe(),ge()}),[he,fe,ke,ve,xe,ge]);K.current=z;var be=(0,a.useCallback)((function(e){k(e),W.current=function(e){var n=e.defaultSkillDB,r=e.heroId;if(!n||!r||!n[r])return Zt;var t=n[r],l="",i="",s="",a="",o="",c="";return t.weapon&&(l=Object.keys(t.weapon).pop()),t.assist&&(i=Object.keys(t.assist).pop()),t.special&&(s=Object.keys(t.special).pop()),t.skillA&&(a=Object.keys(t.skillA).pop()),t.skillB&&(o=Object.keys(t.skillB).pop()),t.skillC&&(c=Object.keys(t.skillC).pop()),{weapon:l,assist:i,special:s,skillA:a,skillB:o,skillC:c}}({defaultSkillDB:p,heroId:e}),V((function(){return R({heroDB:r,weaponDB:t,heroId:e,weaponId:K.current})?K.current:""})),Y((function(n){return function(e){var n=e.heroDB,r=e.weaponDB,t=e.heroId,l=e.weaponId,i=e.refineId;if(!R({heroDB:n,weaponDB:r,heroId:t,weaponId:l}))return!1;var s=N({heroDB:n,weaponDB:r,heroId:t,weapon:l});return!!(s&&s.refine&&s.refine[i])&&(!s.refine[i].exclusive||s.refine[i].exclusive.includes(t))}({heroDB:r,weaponDB:t,heroId:e,weaponId:K.current,refineId:n})?n:""})),X((function(t){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.assistDB,l=e.heroId,i=e.assistId;if(!n||!r||!t||!l||!i)return!1;var s=(0,x.cK)(r,l);if(!s)return!1;var a=t[i];return!!a&&(a.exclusive?a.exclusive.includes(l):g({rulesDB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}({rulesDB:n,heroDB:r,assistDB:i,heroId:e,assistId:t})?t:""})),ee((function(t){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.specialDB,l=e.heroId,i=e.specialId;if(!n||!r||!t||!l||!i)return!1;var s=(0,x.cK)(r,l);if(!s)return!1;var a=t[i];return!!a&&(a.exclusive?a.exclusive.includes(l):g({rulesDB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType}))}({rulesDB:n,heroDB:r,specialDB:s,heroId:e,specialId:t})?t:""})),te((function(t){return C({rulesDB:n,heroDB:r,skillDB:o,heroId:e,skillId:t})?t:""})),se((function(t){return C({rulesDB:n,heroDB:r,skillDB:c,heroId:e,skillId:t})?t:""})),ce((function(t){return C({rulesDB:n,heroDB:r,skillDB:d,heroId:e,skillId:t})?t:""})),pe((function(t){return function(e){var n=e.rulesDB,r=e.heroDB,t=e.sealDB,l=e.heroId,i=e.sealId;if(!r||!t||!l||!i)return!1;var s=(0,x.cK)(r,l);if(!s)return!1;var a=t.skillA[i]||t.skillB[i]||t.skillC[i]||t.seal[i];return!!a&&g({rulesDB:n,ruleId:a.rules,moveType:s.moveType,colorType:s.colorType,weaponType:s.weaponType})}({rulesDB:n,heroDB:r,sealDB:u,heroId:e,sealId:t})?t:""}))}),[n,r,t,i,s,o,c,d,u,p]),me=(0,a.useState)(!1),ye=me[0],we=me[1],De=(0,a.useCallback)((function(){we((function(e){return!e}))}),[]),Be=(0,a.useState)(!1),Oe=Be[0],Ce=Be[1],Se=(0,a.useCallback)((function(){Ce((function(e){return!e}))}),[]),Ie=(0,a.useState)(!1),Pe=Ie[0],Ae=Ie[1],_e=(0,a.useCallback)((function(){Ae((function(e){return!e}))}),[]),Te=(0,a.useState)(!0),Me=Te[0],Ee=Te[1],Ze=(0,a.useCallback)((function(){Ee((function(e){return!e}))}),[]),Re=(0,a.useState)(!1),Ne=Re[0],He=Re[1],Fe=(0,a.useCallback)((function(){He(!0)}),[]),We=(0,a.useCallback)((function(){He(!1)}),[]),Ke=(0,v.Z)("/assets/summon-stone.jpg");return{heroId:f,onChangeHero:be,rarity:b,setRarity:m,iv:w,setIV:D,merge:O,setMerge:S,dragonflower:P,setDragonflower:A,blessing:T,setBlessing:M,support:Z,toggleSupport:F,arena:ye,toggleArena:De,resplendent:Oe,toggleResplendent:Se,weapon:z,setWeapon:V,refine:q,setRefine:Y,assist:Q,setAssist:X,special:$,setSpecial:ee,skillA:re,setSkillA:te,skillB:ie,setSkillB:se,skillC:oe,setSkillC:ce,seal:ue,setSeal:pe,setDefaultWeapon:he,setDefaultAssist:fe,setDefaultSpecial:ke,setDefaultSkillA:ve,setDefaultSkillB:xe,setDefaultSkillC:ge,setAllSkillDefault:je,lv1:Pe,toggleLv1:_e,maxSkill:Me,toggleMaxSkill:Ze,bg:Ke,editorIsOpen:Ne,openEditor:Fe,closeEditor:We}}var Nt=r(2154),Ht=r.n(Nt);var Ft=function(){var e=Rt(),n=e.heroId,r=e.onChangeHero,l=e.rarity,s=e.setRarity,a=e.iv,o=e.setIV,c=e.merge,d=e.setMerge,u=e.dragonflower,p=e.setDragonflower,h=e.blessing,f=e.setBlessing,k=e.support,v=e.toggleSupport,x=e.arena,g=e.toggleArena,j=e.resplendent,b=e.toggleResplendent,m=e.weapon,y=e.setWeapon,w=e.refine,D=e.setRefine,B=e.assist,O=e.setAssist,C=e.special,S=e.setSpecial,I=e.skillA,P=e.setSkillA,A=e.skillB,_=e.setSkillB,T=e.skillC,M=e.setSkillC,E=e.seal,Z=e.setSeal,R=e.setDefaultWeapon,N=e.setDefaultAssist,H=e.setDefaultSpecial,F=e.setDefaultSkillA,W=e.setDefaultSkillB,K=e.setDefaultSkillC,L=e.setAllSkillDefault,z=e.lv1,V=e.toggleLv1,U=e.maxSkill,q=e.toggleMaxSkill,Y=e.bg,J=e.editorIsOpen,Q=e.openEditor,X=e.closeEditor;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{children:(0,t.jsx)("title",{children:"\u55ae\u5175\u88fd\u9020\u6a5f"})}),(0,t.jsx)("div",{style:{background:"url('".concat(Y,"') center / cover no-repeat fixed")},children:(0,t.jsxs)("div",{className:Ht().container,children:[(0,t.jsx)("div",{className:Ht().viewer,children:(0,t.jsx)(on,{heroId:n,rarity:l,iv:a,merge:c,dragonflower:u,blessing:h,support:k,arena:x,resplendent:j,weapon:m,refine:w,assist:B,special:C,skillA:I,skillB:A,skillC:T,seal:E,lv1:z,openEditor:Q})}),(0,t.jsx)("div",{className:Ht().editor,hidden:!J,children:(0,t.jsx)(Et,{heroId:n,onChangeHero:r,rarity:l,setRarity:s,iv:a,setIV:o,merge:c,setMerge:d,dragonflower:u,setDragonflower:p,blessing:h,setBlessing:f,support:k,toggleSupport:v,arena:x,toggleArena:g,resplendent:j,toggleResplendent:b,weapon:m,setWeapon:y,refine:w,setRefine:D,assist:B,setAssist:O,special:C,setSpecial:S,skillA:I,setSkillA:P,skillB:A,setSkillB:_,skillC:T,setSkillC:M,seal:E,setSeal:Z,setDefaultWeapon:R,setDefaultAssist:N,setDefaultSpecial:H,setDefaultSkillA:F,setDefaultSkillB:W,setDefaultSkillC:K,setAllSkillDefault:L,lv1:z,toggleLv1:V,maxSkill:U,toggleMaxSkill:q,closeEditor:X})})]})})]})};var Wt=!0,Kt=function(e){var n=e.db;return(0,t.jsx)(l.Q.Provider,{value:n,children:(0,t.jsx)(Ft,{})})}},532:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/uniteditor",function(){return r(8832)}])},4299:function(e){e.exports={container:"styles_container__1uNtQ","neutral-button":"styles_neutral-button__HXZYg","blessing-button":"styles_blessing-button__m41R8"}},6117:function(e){e.exports={picker:"heropicker_picker__1qgzU"}},2220:function(e){e.exports={container:"styles_container__3csrI","neutral-button":"styles_neutral-button__2Xm3a","iv-button":"styles_iv-button__2PgFW"}},7815:function(e){e.exports={button:"editor_button__2bje7",title:"editor_title__38fof","title-textgroup":"editor_title-textgroup__1ohLJ",content:"editor_content__1OtHF",section:"editor_section__f2th3","section-group":"editor_section-group__242gp","hero-header":"editor_hero-header__rwTMX","button-content":"editor_button-content__3umvY","editor-img":"editor_editor-img__1daYT","close-button":"editor_close-button__3FeSO",container:"editor_container__3yfjQ",input:"editor_input__16kLJ",options:"editor_options__2QYDS"}},5492:function(e){e.exports={label:"labelcheckbox_label__1h2GM","label-checkbox":"labelcheckbox_label-checkbox__3dshW"}},8929:function(e){e.exports={canvas:"UnitViewer_canvas__ZU91i",container:"UnitViewer_container__2EDNF",button:"UnitViewer_button__1Aa1C",download:"UnitViewer_download__2J1oh",menu:"UnitViewer_menu__3HcnP"}},2154:function(e){e.exports={container:"UnitEditor_container__1PG6T",viewer:"UnitEditor_viewer__2ZQQp",editor:"UnitEditor_editor__36g2J"}}},function(e){e.O(0,[744,758,736,774,888,179],(function(){return n=532,e(e.s=n);var n}));var n=e.O();_N_E=n}]);