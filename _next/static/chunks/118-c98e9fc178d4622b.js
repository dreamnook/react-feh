"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{7217:function(e,n,l){l.d(n,{Gt:function(){return i},NV:function(){return a},ab:function(){return c},sq:function(){return d}});var r=l(603),u=l(9390),o=l(2913),t=l(9706);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:d,defaultSkillDB:p,heroId:s,weaponId:v,skillXId:f}=e;if(!i||!c||!d||!s)return[];let y=(0,u.cK)(c,s);if(!y)return[];let T=(0,r.g)({defaultSkillDB:p,heroId:s}),m=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),w=(null==m?void 0:m.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),k=f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(d).filter(e=>e.exclusive?!!e.exclusive.includes(s)&&(!w&&!k||e.sp<400):(0,o.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:d,defaultSkillDB:p,heroId:s,weaponId:v,assistId:f,skillXId:y}=e;if(!i||!c||!d||!s||!f)return!1;let T=(0,u.cK)(c,s);if(!T)return!1;let m=(0,r.g)({defaultSkillDB:p,heroId:s}),w=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),k=(null==w?void 0:w.rearmed)&&!(null==m?void 0:null===(n=m.weapon)||void 0===n?void 0:n[v]),b=y&&!(null==m?void 0:null===(l=m.skillX)||void 0===l?void 0:l[y]),g=d[f];return!!g&&(g.exclusive?!!g.exclusive.includes(s)&&(!k&&!b||g.sp<400):(0,o.O3)({rules2DB:i,ruleId:g.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{assistDB:n,assistId:l}=e;return n&&l?n[l]:null}function d(e){let{assistDB:n,assistId:l}=e,r=a({assistDB:n,assistId:l});return(null==r?void 0:r.name)||""}},603:function(e,n,l){l.d(n,{N:function(){return o},g:function(){return u}});let r={weaponId:"",assistId:"",specialId:"",skillAId:"",skillBId:"",skillCId:"",skillXId:""};function u(e){let{defaultSkillDB:n,heroId:l}=e;return n&&l&&n[l]?n[l]:null}function o(e){let{defaultSkillDB:n,heroId:l}=e;if(!n||!l||!n[l])return r;let u=n[l],o="",t="",i="",c="",a="",d="",p="";return u.weapon&&(o=Object.keys(u.weapon).pop()),u.assist&&(t=Object.keys(u.assist).pop()),u.special&&(i=Object.keys(u.special).pop()),u.skillA&&(c=Object.keys(u.skillA).pop()),u.skillB&&(a=Object.keys(u.skillB).pop()),u.skillC&&(d=Object.keys(u.skillC).pop()),u.skillX&&(p=Object.keys(u.skillX).pop()),{weaponId:o,assistId:t,specialId:i,skillAId:c,skillBId:a,skillCId:d,skillXId:p}}},2913:function(e,n,l){function r(e){let{rules2DB:n,ruleId:l}=e;return n&&l?n[l]:null}function u(e,n){return!!e&&!!n&&(e&n)==0}function o(e){let{rule2A:n,rule2B:l}=e;return!n||!(u(n.moveType,null==l?void 0:l.moveType)||u(n.colorType,null==l?void 0:l.colorType)||u(n.weaponType,null==l?void 0:l.weaponType))}function t(e){let{rules2DB:n,ruleId:l,moveType:o,colorType:t,weaponType:i}=e;if("allDisabled"===l)return!1;let c=r({rules2DB:n,ruleId:o}),a=r({rules2DB:n,ruleId:t}),d=r({rules2DB:n,ruleId:i}),p=r({rules2DB:n,ruleId:l});return!p||!(u(p.moveType,null==c?void 0:c.moveType)||u(p.colorType,null==a?void 0:a.colorType)||u(p.weaponType,null==d?void 0:d.weaponType))}function i(e){let{moveTypeKeys:n,rules2DB:l}=e;return n.reduce((e,n)=>e|r({rules2DB:l,ruleId:n}).moveType,0)}function c(e){let{weaponTypeKeys:n,rules2DB:l}=e;return n.reduce((e,n)=>e|(r({rules2DB:l,ruleId:n}).weaponType||0),0)}l.d(n,{$4:function(){return c},O3:function(){return t},cF:function(){return i},o7:function(){return r},ob:function(){return o}})},327:function(e,n,l){l.d(n,{AY:function(){return i},PU:function(){return a},cp:function(){return d},hJ:function(){return c}});var r=l(603),u=l(9390),o=l(2913),t=l(9706);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:d,defaultSkillDB:p,heroId:s,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!d||!p||!s)return[];let y=(0,u.cK)(c,s);if(!y)return[];let T=(0,r.g)({defaultSkillDB:p,heroId:s}),m=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),w="rearmed"!==y.pool&&"attuned"!==y.pool,k=w&&(null==m?void 0:m.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=w&&f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(d).filter(e=>e.exclusive?!k&&!b&&e.exclusive.includes(s):(0,o.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:d,defaultSkillDB:p,heroId:s,weaponId:v,skillId:f,skillXId:y}=e;if(!i||!c||!a||!d||!p||!s||!f)return!1;let T=(0,u.cK)(c,s);if(!T)return!1;let m=(0,r.g)({defaultSkillDB:p,heroId:s}),w=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),k="rearmed"!==T.pool&&"attuned"!==T.pool,b=k&&(null==w?void 0:w.rearmed)&&!(null==m?void 0:null===(n=m.weapon)||void 0===n?void 0:n[v]),g=k&&y&&!(null==m?void 0:null===(l=m.skillX)||void 0===l?void 0:l[y]),x=d[f];return!!x&&(x.exclusive?!b&&!g&&x.exclusive.includes(s):(0,o.O3)({rules2DB:i,ruleId:x.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{skillDB:n,skillId:l}=e;return n&&l?n[l]:null}function d(e){let{skillDB:n,skillId:l}=e,r=a({skillDB:n,skillId:l});return r?{icon:r.icon,name:r.name}:{icon:"",name:""}}},2669:function(e,n,l){l.d(n,{Hh:function(){return c},R_:function(){return d},TZ:function(){return i},cf:function(){return a}});var r=l(603),u=l(9390),o=l(2913),t=l(9706);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:d,defaultSkillDB:p,heroId:s,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!d||!s)return[];let y=(0,u.cK)(c,s);if(!y)return[];let T=(0,r.g)({defaultSkillDB:p,heroId:s}),m=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),w="rearmed"!==y.pool&&"attuned"!==y.pool,k=w&&(null==m?void 0:m.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=w&&f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(d).filter(e=>e.exclusive?!k&&!b&&e.exclusive.includes(s):(0,o.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:d,defaultSkillDB:p,heroId:s,weaponId:v,specialId:f,skillXId:y}=e;if(!i||!c||!a||!d||!s||!f)return!1;let T=(0,u.cK)(c,s);if(!T)return!1;let m=(0,r.g)({defaultSkillDB:p,heroId:s}),w=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),k="rearmed"!==T.pool&&"attuned"!==T.pool,b=k&&(null==w?void 0:w.rearmed)&&!(null==m?void 0:null===(n=m.weapon)||void 0===n?void 0:n[v]),g=k&&y&&!(null==m?void 0:null===(l=m.skillX)||void 0===l?void 0:l[y]),x=d[f];return!!x&&(x.exclusive?!b&&!g&&x.exclusive.includes(s):(0,o.O3)({rules2DB:i,ruleId:x.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{specialDB:n,specialId:l}=e;return n&&l?n[l]:null}function d(e){let{specialDB:n,specialId:l}=e,r=a({specialDB:n,specialId:l});return(null==r?void 0:r.name)||""}},9706:function(e,n,l){l.d(n,{CB:function(){return o},J7:function(){return p},Mf:function(){return d},Mw:function(){return t},Wu:function(){return s},fu:function(){return c},i7:function(){return i}});var r=l(9390);function u(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function o(e){let{heroDB:n,weaponDB:l,heroId:o}=e;if(!l||!n||!o)return[];let t=(0,r.cK)(n,o);if(!t)return[];let i=u(t.weaponType),c=l[i];return i?Object.values(c).filter(e=>!e.exclusive||e.exclusive.includes(o)).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}}):[]}function t(e){let{heroDB:n,weaponDB:l,heroId:o,weaponId:t}=e;if(!l||!n||!o||!t)return!1;let i=(0,r.cK)(n,o);if(!i)return!1;let c=u(i.weaponType),a=l[c];if(!c)return!1;let d=a[t];return!!d&&(!d.exclusive||d.exclusive.includes(o))}function i(e){let{heroDB:n,weaponDB:l,heroId:o,weaponId:t}=e;if(!l||!n||!t||!o)return null;let i=(0,r.cK)(n,o);return i?l[u(i.weaponType)][t]:null}function c(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u}=e,o=i({heroDB:n,weaponDB:l,heroId:r,weaponId:u});return(null==o?void 0:o.name)||""}let a={atk:"攻擊",spd:"速度",def:"防守",res:"魔防"};function d(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u}=e,o=i({heroDB:n,weaponDB:l,heroId:r,weaponId:u});return o&&o.refine?Object.entries(o.refine).filter(e=>{let[,n]=e;return!n.exclusive||n.exclusive.includes(r)}).map(e=>{let[n,l]=e,r={value:n,...l};return r.name||(r.name=a[n]||n),r.icon&&(r.icon="/skills/weapon/".concat(r.icon,".png")),!r.icon&&a[n]&&(r.icon="/skills/weapon/".concat(n,".png")),r}):[]}function p(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u,refineId:o}=e;if(!t({heroDB:n,weaponDB:l,heroId:r,weaponId:u}))return!1;let c=i({heroDB:n,weaponDB:l,heroId:r,weaponId:u});return!!c&&!!c.refine&&!!c.refine[o]&&(!c.refine[o].exclusive||c.refine[o].exclusive.includes(r))}function s(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:u,refine:o}=e,t=function(e){var n;let{heroDB:l,weaponDB:r,heroId:u,weaponId:o,refine:t}=e,c=i({heroDB:l,weaponDB:r,heroId:u,weaponId:o});return null==c?void 0:null===(n=c.refine)||void 0===n?void 0:n[t]}({heroDB:n,weaponDB:l,heroId:r,weaponId:u,refine:o});return t?a[o]?{icon:o,name:a[o]}:{icon:t.icon,name:t.name}:{icon:"",name:""}}}}]);