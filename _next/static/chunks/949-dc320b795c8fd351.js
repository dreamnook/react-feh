"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{9327:function(e,n,l){l.d(n,{Gt:function(){return i},NV:function(){return a},ab:function(){return c},sq:function(){return p}});var r=l(119),o=l(1200),u=l(3240),t=l(1546);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:p,defaultSkillDB:d,heroId:s,weaponId:v,skillXId:f}=e;if(!i||!c||!p||!s)return[];let y=(0,o.cK)(c,s);if(!y)return[];let T=(0,r.g)({defaultSkillDB:d,heroId:s}),m=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),w="rearmed"!==y.pool&&"attuned"!==y.pool,k=w&&(null==m?void 0:m.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=w&&f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(p).filter(e=>e.exclusive?!!e.exclusive.includes(s)&&(!k&&!b||e.sp<400):(0,u.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,assistDB:p,defaultSkillDB:d,heroId:s,weaponId:v,assistId:f,skillXId:y}=e;if(!i||!c||!p||!s||!f)return!1;let T=(0,o.cK)(c,s);if(!T)return!1;let m=(0,r.g)({defaultSkillDB:d,heroId:s}),w=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),k="rearmed"!==T.pool&&"attuned"!==T.pool,b=k&&(null==w?void 0:w.rearmed)&&!(null==m?void 0:null===(n=m.weapon)||void 0===n?void 0:n[v]),g=k&&y&&!(null==m?void 0:null===(l=m.skillX)||void 0===l?void 0:l[y]),O=p[f];return!!O&&(O.exclusive?!!O.exclusive.includes(s)&&(!b&&!g||O.sp<400):(0,u.O3)({rules2DB:i,ruleId:O.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{assistDB:n,assistId:l}=e;return n&&l?n[l]:null}function p(e){let{assistDB:n,assistId:l}=e,r=a({assistDB:n,assistId:l});return(null==r?void 0:r.name)||""}},119:function(e,n,l){l.d(n,{N:function(){return u},g:function(){return o}});let r={weaponId:"",assistId:"",specialId:"",skillAId:"",skillBId:"",skillCId:"",skillXId:""};function o(e){let{defaultSkillDB:n,heroId:l}=e;return n&&l&&n[l]?n[l]:null}function u(e){let{defaultSkillDB:n,heroId:l}=e;if(!n||!l||!n[l])return r;let o=n[l],u="",t="",i="",c="",a="",p="",d="";return o.weapon&&(u=Object.keys(o.weapon).pop()),o.assist&&(t=Object.keys(o.assist).pop()),o.special&&(i=Object.keys(o.special).pop()),o.skillA&&(c=Object.keys(o.skillA).pop()),o.skillB&&(a=Object.keys(o.skillB).pop()),o.skillC&&(p=Object.keys(o.skillC).pop()),o.skillX&&(d=Object.keys(o.skillX).pop()),{weaponId:u,assistId:t,specialId:i,skillAId:c,skillBId:a,skillCId:p,skillXId:d}}},3240:function(e,n,l){function r(e){let{rules2DB:n,ruleId:l}=e;return n&&l?n[l]:null}function o(e,n){return!!e&&!!n&&(e&n)==0}function u(e){let{rule2A:n,rule2B:l}=e;return!n||!(o(n.moveType,null==l?void 0:l.moveType)||o(n.colorType,null==l?void 0:l.colorType)||o(n.weaponType,null==l?void 0:l.weaponType))}function t(e){let{rules2DB:n,ruleId:l,moveType:u,colorType:t,weaponType:i}=e;if("allDisabled"===l)return!1;let c=r({rules2DB:n,ruleId:u}),a=r({rules2DB:n,ruleId:t}),p=r({rules2DB:n,ruleId:i}),d=r({rules2DB:n,ruleId:l});return!d||!(o(d.moveType,null==c?void 0:c.moveType)||o(d.colorType,null==a?void 0:a.colorType)||o(d.weaponType,null==p?void 0:p.weaponType))}function i(e){let{moveTypeKeys:n,rules2DB:l}=e;return n.reduce((e,n)=>e|r({rules2DB:l,ruleId:n}).moveType,0)}function c(e){let{weaponTypeKeys:n,rules2DB:l}=e;return n.reduce((e,n)=>e|(r({rules2DB:l,ruleId:n}).weaponType||0),0)}l.d(n,{$4:function(){return c},O3:function(){return t},cF:function(){return i},o7:function(){return r},ob:function(){return u}})},940:function(e,n,l){l.d(n,{AY:function(){return i},PU:function(){return a},cp:function(){return p},hJ:function(){return c}});var r=l(119),o=l(1200),u=l(3240),t=l(1546);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:p,defaultSkillDB:d,heroId:s,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!p||!d||!s)return[];let y=(0,o.cK)(c,s);if(!y)return[];let T=(0,r.g)({defaultSkillDB:d,heroId:s}),m=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),w="rearmed"!==y.pool&&"attuned"!==y.pool,k=w&&(null==m?void 0:m.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=w&&f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(p).filter(e=>e.exclusive?!k&&!b&&e.exclusive.includes(s):(0,u.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,skillDB:p,defaultSkillDB:d,heroId:s,weaponId:v,skillId:f,skillXId:y}=e;if(!i||!c||!a||!p||!d||!s||!f)return!1;let T=(0,o.cK)(c,s);if(!T)return!1;let m=(0,r.g)({defaultSkillDB:d,heroId:s}),w=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),k="rearmed"!==T.pool&&"attuned"!==T.pool,b=k&&(null==w?void 0:w.rearmed)&&!(null==m?void 0:null===(n=m.weapon)||void 0===n?void 0:n[v]),g=k&&y&&!(null==m?void 0:null===(l=m.skillX)||void 0===l?void 0:l[y]),O=p[f];return!!O&&(O.exclusive?!b&&!g&&O.exclusive.includes(s):(0,u.O3)({rules2DB:i,ruleId:O.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{skillDB:n,skillId:l}=e;return n&&l?n[l]:null}function p(e){let{skillDB:n,skillId:l}=e,r=a({skillDB:n,skillId:l});return r?{icon:r.icon,name:r.name}:{icon:"",name:""}}},9531:function(e,n,l){l.d(n,{Hh:function(){return c},R_:function(){return p},TZ:function(){return i},cf:function(){return a}});var r=l(119),o=l(1200),u=l(3240),t=l(1546);function i(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:p,defaultSkillDB:d,heroId:s,weaponId:v,skillXId:f}=e;if(!i||!c||!a||!p||!s)return[];let y=(0,o.cK)(c,s);if(!y)return[];let T=(0,r.g)({defaultSkillDB:d,heroId:s}),m=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),w="rearmed"!==y.pool&&"attuned"!==y.pool,k=w&&(null==m?void 0:m.rearmed)&&!(null==T?void 0:null===(n=T.weapon)||void 0===n?void 0:n[v]),b=w&&f&&!(null==T?void 0:null===(l=T.skillX)||void 0===l?void 0:l[f]);return Object.values(p).filter(e=>e.exclusive?!k&&!b&&e.exclusive.includes(s):(0,u.O3)({rules2DB:i,ruleId:e.rules,moveType:y.moveType,colorType:y.colorType,weaponType:y.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}})}function c(e){var n,l;let{rules2DB:i,heroDB:c,weaponDB:a,specialDB:p,defaultSkillDB:d,heroId:s,weaponId:v,specialId:f,skillXId:y}=e;if(!i||!c||!a||!p||!s||!f)return!1;let T=(0,o.cK)(c,s);if(!T)return!1;let m=(0,r.g)({defaultSkillDB:d,heroId:s}),w=(0,t.i7)({heroDB:c,weaponDB:a,heroId:s,weaponId:v}),k="rearmed"!==T.pool&&"attuned"!==T.pool,b=k&&(null==w?void 0:w.rearmed)&&!(null==m?void 0:null===(n=m.weapon)||void 0===n?void 0:n[v]),g=k&&y&&!(null==m?void 0:null===(l=m.skillX)||void 0===l?void 0:l[y]),O=p[f];return!!O&&(O.exclusive?!b&&!g&&O.exclusive.includes(s):(0,u.O3)({rules2DB:i,ruleId:O.rules,moveType:T.moveType,colorType:T.colorType,weaponType:T.weaponType}))}function a(e){let{specialDB:n,specialId:l}=e;return n&&l?n[l]:null}function p(e){let{specialDB:n,specialId:l}=e,r=a({specialDB:n,specialId:l});return(null==r?void 0:r.name)||""}},1546:function(e,n,l){l.d(n,{CB:function(){return t},J7:function(){return s},Mf:function(){return d},Mw:function(){return i},Wu:function(){return v},fu:function(){return a},i7:function(){return c}});var r=l(1200),o=l(3240);function u(e){switch(e){case"red-bow":case"blue-bow":case"green-bow":case"white-bow":return"bow";case"red-dagger":case"blue-dagger":case"green-dagger":case"white-dagger":return"dagger";case"red-dragon":case"blue-dragon":case"green-dragon":case"white-dragon":return"dragon";case"red-beast":case"blue-beast":case"green-beast":case"white-beast":return"beast"}return e}function t(e){let{rules2DB:n,heroDB:l,weaponDB:t,heroId:i}=e;if(!n||!t||!l||!i)return[];let c=(0,r.cK)(l,i);if(!c)return[];let a=u(c.weaponType),p=t[a];return a?Object.values(p).filter(e=>e.exclusive?e.exclusive.includes(i):(0,o.O3)({rules2DB:n,ruleId:e.rules,moveType:c.moveType,colorType:c.colorType,weaponType:c.weaponType})).map(e=>{let n="".concat(e.id.toLowerCase(),"|").concat(e.name);return{...e,query:n}}):[]}function i(e){let{rules2DB:n,heroDB:l,weaponDB:t,heroId:i,weaponId:c}=e;if(!n||!t||!l||!i||!c)return!1;let a=(0,r.cK)(l,i);if(!a)return!1;let p=u(a.weaponType),d=t[p];if(!p)return!1;let s=d[c];return!!s&&(s.exclusive?s.exclusive.includes(i):(0,o.O3)({rules2DB:n,ruleId:s.rules,moveType:a.moveType,colorType:a.colorType,weaponType:a.weaponType}))}function c(e){let{heroDB:n,weaponDB:l,heroId:o,weaponId:t}=e;if(!l||!n||!t||!o)return null;let i=(0,r.cK)(n,o);return i?l[u(i.weaponType)][t]:null}function a(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:o}=e,u=c({heroDB:n,weaponDB:l,heroId:r,weaponId:o});return(null==u?void 0:u.name)||""}let p={atk:"攻擊",spd:"速度",def:"防守",res:"魔防"};function d(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:o}=e,u=c({heroDB:n,weaponDB:l,heroId:r,weaponId:o});return u&&u.refine?Object.entries(u.refine).filter(e=>{let[,n]=e;return!n.exclusive||n.exclusive.includes(r)}).map(e=>{let[n,l]=e,r={value:n,...l};return r.name||(r.name=p[n]||n),r.icon&&(r.icon="/skills/weapon/".concat(r.icon,".png")),!r.icon&&p[n]&&(r.icon="/skills/weapon/".concat(n,".png")),r}):[]}function s(e){let{rules2DB:n,heroDB:l,weaponDB:r,heroId:o,weaponId:u,refineId:t}=e;if(!i({rules2DB:n,heroDB:l,weaponDB:r,heroId:o,weaponId:u}))return!1;let a=c({heroDB:l,weaponDB:r,heroId:o,weaponId:u});return!!a&&!!a.refine&&!!a.refine[t]&&(!a.refine[t].exclusive||a.refine[t].exclusive.includes(o))}function v(e){let{heroDB:n,weaponDB:l,heroId:r,weaponId:o,refine:u}=e,t=function(e){var n;let{heroDB:l,weaponDB:r,heroId:o,weaponId:u,refine:t}=e,i=c({heroDB:l,weaponDB:r,heroId:o,weaponId:u});return null==i?void 0:null===(n=i.refine)||void 0===n?void 0:n[t]}({heroDB:n,weaponDB:l,heroId:r,weaponId:o,refine:u});return t?p[u]?{icon:u,name:p[u]}:{icon:t.icon,name:t.name}:{icon:"",name:""}}}}]);